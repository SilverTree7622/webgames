(self.webpackChunkplayable_ad_test=self.webpackChunkplayable_ad_test||[]).push([[550],{550:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Assets\": () => (/* binding */ Assets),\n  \"default\": () => (/* binding */ MainScene)\n});\n\n// EXTERNAL MODULE: ./src/userSetting.ts\nvar userSetting = __webpack_require__(453);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/index.ts\nconst ContextLayerMargin = 120;\r\nconst SettingGapContextMargin = 50;\r\nconst SettingGapContextMarginLarger = 70;\r\nconst SettingContextMargin = 40;\r\nconst SettingTopContextMargin = 80;\r\n\r\n\n;// CONCATENATED MODULE: ./src/utils/storage.ts\n// compare item is in the data then \r\nconst CompareCallback = (data, item) => {\r\n    const isItemExistInData = data[item];\r\n    if (isItemExistInData !== undefined || null)\r\n        return true;\r\n    else {\r\n        console.warn('item is not matched to actual data type:', item, data);\r\n        return false;\r\n    }\r\n};\r\nconst GameName = document.title; // get game title name\r\nconst GetLocalStorageData = (defaultData) => {\r\n    const data = window.localStorage.getItem(GameName);\r\n    if (data)\r\n        return JSON.parse(data);\r\n    else {\r\n        window.localStorage.setItem(GameName, JSON.stringify(defaultData));\r\n        return defaultData;\r\n    }\r\n};\r\nconst GetLocalStorageItem = (defaultData, item) => {\r\n    const gameData = GetLocalStorageData(defaultData);\r\n    let list = (typeof item === 'string' ? [item] : [...item]).map((ele) => {\r\n        let returnItem = gameData[ele];\r\n        if (CompareCallback(gameData, ele))\r\n            return returnItem;\r\n    });\r\n    // console.log('item, list: ', item, list);\r\n    if (list.length === 1)\r\n        return list[0];\r\n    else if (item.length === list.length)\r\n        return list;\r\n};\r\nconst SetLocalStorageItem = (defaultData, item, value) => {\r\n    let gameData = GetLocalStorageData(defaultData);\r\n    if (gameData)\r\n        gameData[item] = value;\r\n    window.localStorage.setItem(GameName, JSON.stringify(gameData));\r\n    // console.log('gameData, best: ', gameData, gameData.best);\r\n    return gameData;\r\n};\r\nconst RemoveLocalStorageItem = (defaultData, item) => {\r\n    SetLocalStorageItem(defaultData, item, null);\r\n};\r\nconst ClearGameLocalStorageData = () => {\r\n    window.localStorage.removeItem(GameName);\r\n};\r\nconst ClearAllLocalStorageItem = () => {\r\n    window.localStorage.clear();\r\n};\r\nconst DebugLocalStorage = (scene, defaultData, items) => {\r\n    scene.input.mouse.disableContextMenu();\r\n    scene.input.on('pointerdown', function (pointer) {\r\n        if (pointer.rightButtonDown()) {\r\n            console.log(GetLocalStorageData(defaultData));\r\n            return;\r\n        }\r\n        if (pointer.middleButtonDown()) {\r\n            if (items instanceof Array)\r\n                items.map(ele => SetLocalStorageItem(defaultData, ele.item, ele.value));\r\n            else\r\n                SetLocalStorageItem(defaultData, items.item, items.value);\r\n            SetLocalStorageItem(defaultData, 'best', 0);\r\n            return;\r\n        }\r\n    });\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/assetUtils.ts\nconst CommonRootUrl = 'https://silvertree7622.github.io/webgames/';\r\nconst CommonAssets = CommonRootUrl + 'assets/';\r\nconst CommonSfx = CommonAssets + 'audio/sfx/';\r\nconst CommonUI = CommonAssets + 'ui/';\r\nconst CommonFullScreen = CommonUI + 'fullScreen/';\r\nconst CommonScroll = CommonUI + 'scroll/';\r\nconst CommonGage = CommonUI + 'gage/';\r\nconst CommonEfx = CommonUI + 'efx/';\r\nconst CommonSns = CommonRootUrl + 'sns/';\r\n/** get common asset file with exception key (when if u worry about nested things)\r\n * @param assetList common custom assest list compose of the key, url, etc\r\n * @param exceptionKeys exception key which u worry about the nested things\r\n * @returns filtered asset list\r\n */\r\nconst GetAssetFiles = (assetList, exceptionKeys) => {\r\n    if (!exceptionKeys)\r\n        return assetList;\r\n    let filteredList;\r\n    // one key to except from asset list\r\n    if (typeof exceptionKeys === 'string') {\r\n        filteredList = assetList.filter(asset => asset.key !== exceptionKeys);\r\n    }\r\n    // several key list to except from asset list\r\n    else {\r\n        filteredList = assetList.filter((asset) => {\r\n            return exceptionKeys.indexOf(asset.key) < 0;\r\n        });\r\n    }\r\n    return filteredList;\r\n};\r\n/* harmony default export */ const assetUtils = ((/* unused pure expression or super */ null && (CommonRootUrl)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/audio/index.ts\n\r\n\r\nconst GameAudio = {\r\n    wholeGameData: {},\r\n    bgmList: [],\r\n    sfxList: [],\r\n    bgmKeyList: [],\r\n    sfxKeyList: [],\r\n    isBgmMute: false,\r\n    isSfxMute: false,\r\n    bgmVolume: 0.5,\r\n    sfxVolume: 0.5,\r\n    setBgmMute: function (isMute) {\r\n        this.isBgmMute = isMute;\r\n        this.bgmList.forEach(bgm => bgm.setMute(isMute));\r\n        if (isMute)\r\n            this.bgmKeyList.map(key => this.pauseBgm(key));\r\n        else\r\n            this.bgmKeyList.map(key => this.resumeBgm(key));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'isBgmMute', isMute);\r\n        return this;\r\n    },\r\n    setSfxMute: function (isMute) {\r\n        this.isSfxMute = isMute;\r\n        this.sfxList.forEach(sfx => sfx.setMute(isMute));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'isSfxMute', isMute);\r\n        return this;\r\n    },\r\n    setBgmVolume: function (volume) {\r\n        this.bgmVolume = volume;\r\n        this.bgmList.forEach(bgm => bgm.setVolume(volume));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'bgmVolume', volume);\r\n        return this;\r\n    },\r\n    setSfxVolume: function (volume) {\r\n        this.sfxVolume = volume;\r\n        this.sfxList.forEach(sfx => sfx.setVolume(volume));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'sfxVolume', volume);\r\n        return this;\r\n    },\r\n    playBgm: function (key) {\r\n        const playBgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (playBgm)\r\n            playBgm.play();\r\n        else\r\n            console.warn(`[Audio] playBgm: ${key} not found`);\r\n        return this;\r\n    },\r\n    pauseBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.pause();\r\n        return this;\r\n    },\r\n    resumeBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.resume();\r\n        return this;\r\n    },\r\n    stopBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.stop();\r\n        return this;\r\n    },\r\n    playSfx: function (key) {\r\n        const playSfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (playSfx)\r\n            playSfx.play();\r\n        else\r\n            console.warn(`[Audio] playSfx: ${key} not found`);\r\n        return this;\r\n    },\r\n    stopSfx: function (key) {\r\n        const sfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (sfx)\r\n            sfx.stop();\r\n        return this;\r\n    },\r\n    // play & stop control for instance any sfx\r\n    playSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.play({\r\n            mute: GetLocalStorageItem(GameAudio.wholeGameData, 'isSfxMute'),\r\n            volume: GetLocalStorageItem(GameAudio.wholeGameData, 'sfxVolume'),\r\n            loop: true,\r\n        });\r\n        return this;\r\n    },\r\n    stopSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.stop();\r\n        instance.removeAllListeners();\r\n        instance.destroy();\r\n        return this;\r\n    },\r\n};\r\nconst GameDataAudio = {\r\n    bgmVolume: 0.5,\r\n    sfxVolume: 0.5,\r\n    isBgmMute: false,\r\n    isSfxMute: false,\r\n};\r\nconst GetAudioAssets = (sfxKeyList, bgmKeyList, exceptionKeys) => {\r\n    GameAudio.sfxKeyList = GetAssetFiles(sfxKeyList, exceptionKeys).map(asset => asset.key);\r\n    if (bgmKeyList)\r\n        GameAudio.bgmKeyList = GetAssetFiles(bgmKeyList, exceptionKeys).map(asset => asset.key);\r\n    else\r\n        GameAudio.bgmKeyList = [];\r\n    return [\r\n        ...sfxKeyList,\r\n        ...bgmKeyList,\r\n    ];\r\n};\r\nconst InitGameAudio = () => {\r\n    const [bgmVolume, sfxVolume, isBgmMute, isSfxMute] = GetLocalStorageItem(GameAudio.wholeGameData, ['bgmVolume', 'sfxVolume', 'isBgmMute', 'isSfxMute']);\r\n    GameAudio.setBgmVolume(bgmVolume);\r\n    GameAudio.setSfxVolume(sfxVolume);\r\n    GameAudio.setBgmMute(isBgmMute);\r\n    GameAudio.setSfxMute(isSfxMute);\r\n};\r\nconst CreateGameAudio = (scene, gameData) => {\r\n    GameAudio.wholeGameData = gameData;\r\n    GameAudio.bgmList = GameAudio.bgmKeyList && GameAudio.bgmKeyList.map(key => scene.sound.add(key, { loop: true }));\r\n    GameAudio.sfxList = GameAudio.sfxKeyList && GameAudio.sfxKeyList.map(key => scene.sound.add(key));\r\n    InitGameAudio();\r\n};\r\n/* harmony default export */ const audio = (GameAudio);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/depth/index.ts\nconst Depth = {\r\n    tree: 90,\r\n    block: 100,\r\n    cloud: 120,\r\n    mist: 120,\r\n    wall: 140,\r\n    txt: 150,\r\n    popUp: 400,\r\n    setting: 500,\r\n    warning: 600,\r\n    gameOver: 1000,\r\n    particle: 1100,\r\n    newBest: 1200,\r\n    highest: 1500,\r\n    fullScreen: 1600,\r\n};\r\nconst SetDepth = (targetObj, type) => {\r\n    if (!Depth[type]) {\r\n        console.warn('SetDepth: type is not found in the depth list:', targetObj, type);\r\n        console.log('targetObj, type: ', targetObj, type);\r\n        return;\r\n    }\r\n    if (targetObj.setDepth)\r\n        targetObj.setDepth(Depth[type]);\r\n    else\r\n        console.warn('SetDepth: targetObj is not Phaser.GameObjects');\r\n};\r\n/* harmony default export */ const depth = ((/* unused pure expression or super */ null && (Depth)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/font/index.ts\n\r\nconst TxtTitleHeadSize = 50;\r\nconst TxtTitleSize = 30;\r\nconst TxtTitleHeightGap = 60;\r\nconst TxtOverHeadSize = userSetting/* View.w */.G7.w / 4;\r\nconst TxtMargin = 26;\r\nconst TxtPadding = 8;\r\nconst TxtAlpha = 0.9;\r\nconst TxtSize = 20;\r\nconst TxtFamily = 'Arial Black';\r\nconst TxtBackgroundColor = '#242424';\r\nconst ContextMarginW = userSetting/* View.w */.G7.w / 12;\r\nconst ContextMarginH = userSetting/* View.h */.G7.h / 12;\r\nconst SetFont2CommonContextStyle = (text) => {\r\n    text.setOrigin(0.5, 0.5);\r\n    text.setFontSize(TxtSize);\r\n    text.setFontFamily(TxtFamily);\r\n    return text;\r\n};\r\n\r\n\n// EXTERNAL MODULE: ./src/utils/math.ts\nvar math = __webpack_require__(774);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/basic.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\nclass BasicBlock extends Phaser.GameObjects.Container {\r\n    // public testObj;\r\n    constructor(scene) {\r\n        super(scene, 0, 0);\r\n        this.isEvtCreated = false;\r\n        this.typeName = '';\r\n        this.spawnChance = 0;\r\n        this.score = 0;\r\n        this.bData = {};\r\n        this.isOnScreen = false;\r\n        this.initPrpoerties();\r\n        this.initChildren(scene);\r\n        this.initPhysics(scene);\r\n        SetDepth(this, 'block');\r\n        scene.add.existing(this);\r\n    }\r\n    initPrpoerties() {\r\n        this.id = `${new Date().getTime()}-${Phaser.Math.RND.uuid()}`;\r\n    }\r\n    initChildren(scene) {\r\n        this.shapeImg = scene.add.image(0, 0, 'ball');\r\n        this.typeTxt = scene.add.text(0, 0, '');\r\n        this.typeImg = scene.add.image(0, 0, '');\r\n        SetFont2CommonContextStyle(this.typeTxt);\r\n        this.initTypeTxt();\r\n        this.add([this.shapeImg, this.typeTxt, this.typeImg]);\r\n        // this.testObj = scene.matter.add.image(View.centerX, 0, 'ball');\r\n        // this.testObj.setCircle(40, 40);\r\n        // this.testObj.setBounce(1);\r\n        // console.log('this.testObj: ', this.testObj);\r\n    }\r\n    initPhysics(scene) {\r\n        // number is meaningless just default value\r\n        // for add container to matter game object\r\n        this.setSize(100, 100);\r\n        // add to matter game object\r\n        this.physicsCon = scene.matter.add.gameObject(this);\r\n        this.physicsCon.setFriction(0.005);\r\n        this.physicsCon.setBounce(1);\r\n        this.physicsCon.setSensor(true);\r\n    }\r\n    getBody() { return this.body; }\r\n    getShape() { return this.shape; }\r\n    addShape(shape) { this.shape = Object.assign(Object.assign({}, this.shape), shape); return this; }\r\n    setShape(shape) { this.shape = shape; return this; }\r\n    getShapeName() { return this.shapeName; }\r\n    setShapeName(name) { this.shapeName = name; return this; }\r\n    getShapeImg() { return this.shapeImg; }\r\n    getScore() { return this.score; }\r\n    setScore(score) { this.score = score; return this; }\r\n    addScore(score) { this.score += score; return this; }\r\n    getTimeIncrease() { return this.timeIncrease; }\r\n    setTimeIncrease(data) {\r\n        this.timeIncrease = {\r\n            chance: data.chance,\r\n            value: data.value\r\n        };\r\n        return this;\r\n    }\r\n    getSpawnRndChance() { return this.spawnChance; }\r\n    setSpawnRndChance(chanceNum) { return this.spawnChance = chanceNum; }\r\n    getTypeImg() { return this.typeImg; }\r\n    setTypeImg(typeTexture) {\r\n        if (!typeTexture)\r\n            this.typeImg.setVisible(false);\r\n        this.typeImg.setTexture(typeTexture);\r\n        return this;\r\n    }\r\n    setTypeImgDisplaySize(width, height) { this.typeImg.setDisplaySize(width, height); return this; }\r\n    initTypeTxt() {\r\n        this.setTypeTxtVisible(false);\r\n        this.setTypeTxt('');\r\n        this.typeTxt.setFontSize(50);\r\n        return this;\r\n    }\r\n    getTypeTxt() { return this.typeTxt; }\r\n    setTypeTxt(text) {\r\n        if (!this.typeTxt.visible)\r\n            this.typeTxt.setVisible(true);\r\n        if (!text)\r\n            this.typeTxt.setVisible(false);\r\n        this.typeTxt.setText(text);\r\n        return this;\r\n    }\r\n    setTypeTxtVisible(visible) { this.typeTxt.setVisible(visible); return this; }\r\n    getTypeName() { return this.typeName; }\r\n    setTypeName(typeName) { return this.typeName = typeName; }\r\n    getBlockData() { return this.bData; }\r\n    setBlockData(data) {\r\n        this.bData = {};\r\n        this.bData = data;\r\n        return this;\r\n    }\r\n    addBlockData(data) { this.bData = Object.assign(Object.assign({}, this.bData), data); }\r\n    getPhysicsCon() { return this.physicsCon; }\r\n    getWidth() { return this.typeImg.width; }\r\n    getHeight() { return this.typeImg.height; }\r\n}\r\nconst SpawnBlock = (block) => {\r\n    SetBlockInputSetting(block);\r\n    block.setPosition(system.getRndSpawnX(), system.spawnY);\r\n    block.setAngle(system.getRndAngle());\r\n    block.setVisible(true);\r\n    block.isOnScreen = true;\r\n    block.getPhysicsCon().setIgnoreGravity(false);\r\n    block.getPhysicsCon().setSensor(false);\r\n    block.getBlockData().spawn && block.getBlockData().spawn();\r\n    return block;\r\n};\r\nconst SetBlockInputSetting = (block) => {\r\n    block.removeAllListeners();\r\n    block.setInteractive();\r\n    block.scene.input.setDraggable(block, true);\r\n    block.on('pointerdown', (ptr) => {\r\n        if (block.getBlockData().ptrDown)\r\n            block.getBlockData().ptrDown(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setStatic(true);\r\n    });\r\n    block.on('drag', (ptr) => {\r\n        if (block.getBlockData().drag)\r\n            block.getBlockData().drag(block, ptr);\r\n    });\r\n    block.on('pointerup', (ptr) => {\r\n        if (block.getBlockData().ptrUp)\r\n            block.getBlockData().ptrUp(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    block.on('pointerout', () => {\r\n        if (block.getBlockData().ptrOut)\r\n            block.getBlockData().ptrOut(block);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    return block;\r\n};\r\nconst SetBlockType2InitBasic = (block) => {\r\n    block.setScore(0);\r\n    block.setTimeIncrease({ chance: 0, value: 0 });\r\n    block.getTypeImg().setVisible(true);\r\n    block.initTypeTxt();\r\n    block.setBlockData({});\r\n    block.setAlpha(1);\r\n    try {\r\n        block.disableInteractive();\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n    try {\r\n        block.scene.input.setDraggable(block, false);\r\n    }\r\n    catch (e) { }\r\n    return block;\r\n};\r\nconst DeathBlock = (block) => {\r\n    if (block.getBlockData().death)\r\n        block.getBlockData().death(() => { DisableBlock(block); });\r\n    else\r\n        DisableBlock(block);\r\n    return block;\r\n};\r\nconst DisableBlock = (block) => {\r\n    if (block.getBody()) {\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setSensor(true);\r\n    }\r\n    block.isOnScreen = false;\r\n    block.setVisible(false);\r\n    SetBlockType2InitBasic(block);\r\n    return block;\r\n};\r\nconst UpdateBlock = (block, time, delta) => {\r\n    if (!block || !block.getBlockData())\r\n        return;\r\n    if (block.getBlockData().update)\r\n        block.getBlockData().update(time, delta);\r\n    return block;\r\n};\r\n/* harmony default export */ const basic = (BasicBlock);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/ad.ts\nconst SetBlock2Ad = (block) => {\r\n    let bData = {\r\n        ptrDown: (block) => {\r\n        },\r\n        ptrUp: (block) => {\r\n        },\r\n        drag: (block) => {\r\n        },\r\n        dragEnd: (block) => {\r\n        },\r\n    };\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const ad = (SetBlock2Ad);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/input/index.ts\nconst Input = {\r\n    type: '',\r\n    typeHistory: [],\r\n    initPos: { x: 0, y: 0 },\r\n    isHoldingDown: false,\r\n    holdDuration: 0,\r\n    holdMaxDuration: 1000,\r\n    startHold: function () { this.isHoldingDown = true; return this; },\r\n    resetHold: function () {\r\n        this.isHoldingDown = false;\r\n        this.initPos = { x: 0, y: 0 };\r\n        this.holdDuration = 0;\r\n        this.setType('');\r\n        return this;\r\n    },\r\n    getIsHoldingDown: function () { return this.isHoldingDown; },\r\n    getHoldDuration: function () { return this.holdDuration; },\r\n    setHoldDuration: function (duration) { this.holdDuration = duration; return this; },\r\n    setInitPos: function (x, y) { this.initPos = { x: x, y: y }; return this; },\r\n    chckIsHold: function () {\r\n        if (this.holdDuration >= this.holdMaxDuration)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    getType: function () { return this.type; },\r\n    setType: function (type) { this.type = type; return this; },\r\n    initTypeHistory: function () { this.typeHistory = []; },\r\n    getTypeHistory: function () { return this.typeHistory; },\r\n    getLastestInputType: function () { return this.typeHistory[this.typeHistory.length - 1]; },\r\n    push2TypeHistory: function (type) {\r\n        this.typeHistory.push(type);\r\n        return this.typeHistory;\r\n    }\r\n};\r\nconst InitInput = () => {\r\n    Input.resetHold();\r\n    Input.initTypeHistory();\r\n};\r\nconst CreateInput = (scene) => {\r\n    scene.input.on('pointerdown', () => {\r\n        Input.startHold();\r\n    });\r\n    InitInput();\r\n};\r\nconst UpdateInput = (delta) => {\r\n    if (Input.getIsHoldingDown())\r\n        Input.setHoldDuration(Input.getHoldDuration() + delta);\r\n};\r\nconst InputPtrDown = (ptr) => {\r\n    Input.setInitPos(ptr.x, ptr.y);\r\n};\r\nconst InputPtrUp = (ptr) => {\r\n    return SetInputType(Input.initPos, ptr);\r\n};\r\nconst InputDrag = (ptr) => {\r\n};\r\nconst InputPtrOut = () => {\r\n    Input.resetHold();\r\n};\r\nconst ChckSwipeDirection = (initPos, ptr) => {\r\n    const x = ptr.x - initPos.x;\r\n    const y = ptr.y - initPos.y;\r\n    if (Math.abs(x) > Math.abs(y)) {\r\n        if (x > 0)\r\n            Input.setType('swipeRight');\r\n        else\r\n            Input.setType('swipeLeft');\r\n    }\r\n    else {\r\n        if (y < 0)\r\n            Input.setType('swipeUp');\r\n        else\r\n            Input.setType('swipeDown');\r\n    }\r\n};\r\n// set comfy touch to not judge as swipe when use with actual finger\r\nconst ComfyGapTouchValue = 15;\r\nconst SetInputType = (initPos, ptr) => {\r\n    // swipe motion\r\n    const chckPosX = Math.abs(initPos.x - ptr.x) > ComfyGapTouchValue;\r\n    const chckPosY = Math.abs(initPos.y - ptr.y) > ComfyGapTouchValue;\r\n    if (chckPosX || chckPosY)\r\n        ChckSwipeDirection(initPos, ptr);\r\n    // hold or touch\r\n    else {\r\n        if (Input.chckIsHold()) {\r\n            Input.setType('hold');\r\n        }\r\n        else\r\n            Input.setType('touch');\r\n    }\r\n    Input.push2TypeHistory(Input.getType());\r\n    Input.resetHold();\r\n    return Input.getLastestInputType();\r\n};\r\n/* harmony default export */ const input = ((/* unused pure expression or super */ null && (Input)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/power.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Power = (block) => {\r\n    const { scene } = block;\r\n    const rndDownDurationMax = (0,math/* GetRndNum */.hg)(0.5, 1.5);\r\n    const initPtr = (bData, block) => {\r\n        bData.isPtrDown = false;\r\n        bData.downDuration = 0;\r\n        block.setAlpha(1);\r\n    };\r\n    let bData = {\r\n        isPtrDown: false,\r\n        isComplete: false,\r\n        downDuration: 0,\r\n        downDurationMax: Math.floor(rndDownDurationMax * 1000),\r\n        ptrDown: function (block, ptr) {\r\n            InputPtrDown(ptr);\r\n            if (this.isPtrDown) {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isPtrDown = true;\r\n            audio.playSfx('powerBlockOn');\r\n            block.setAlpha(0.5);\r\n            const twList = [];\r\n            twList.push({\r\n                from: 0, to: this.downDurationMax, duration: this.downDurationMax,\r\n                onUpdate: (tw) => {\r\n                    // if keep press power btn\r\n                    if (this.isPtrDown)\r\n                        this.downDuration = tw.getValue();\r\n                    // if release power btn before done\r\n                    else {\r\n                        initPtr(this, block);\r\n                        tw.remove();\r\n                    }\r\n                },\r\n                onComplete: (tw) => {\r\n                    // done power btn play sfx\r\n                    if (!this.isPtrDown) {\r\n                        twList.shift();\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    initPtr(this, block);\r\n                    this.isComplete = true;\r\n                    audio.playSfx('powerBlockOff');\r\n                    scene.tweens.addCounter(twList.shift());\r\n                }\r\n            });\r\n            twList.push({\r\n                from: 1, to: 1.1, duration: 250, yoyo: true,\r\n                onUpdate: (tw, data) => {\r\n                    block.setScale(data.value);\r\n                },\r\n                onComplete: () => {\r\n                    block.setScale(1);\r\n                    audio.playSfx('touchSfx');\r\n                    ClearBlock(block, block.getScore() * this.downDurationMax / 1000);\r\n                }\r\n            });\r\n            scene.tweens.addCounter(twList.shift());\r\n        },\r\n        ptrUp: function (block, ptr) {\r\n            block.setAlpha(1);\r\n            if (this.isComplete)\r\n                return;\r\n            if (!this.isPtrDown || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            // chck is keep press until done\r\n            initPtr(this, block);\r\n        },\r\n        ptrOut: function () {\r\n            InputPtrOut();\r\n            initPtr(this, block);\r\n        },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const power = (SetBlock2Power);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/loading.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Loading = (block) => {\r\n    block.setTypeTxt('%');\r\n    block.getTypeTxt().setFontSize(50);\r\n    let bData = {\r\n        isLoading: false,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (this.isLoading || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isLoading = true;\r\n            const rndDuration = (0,math/* GetRndInt */.dZ)(1, 4);\r\n            const processSfx = block.scene.sound.add('loadingBlockOnProcess');\r\n            audio.playSfxInstanceLoop(processSfx);\r\n            block.scene.tweens.addCounter({\r\n                from: 0, to: 100, duration: rndDuration * 1000,\r\n                onUpdate: (tw, data) => {\r\n                    const percentage = data.value.toFixed(0);\r\n                    block.setTypeTxt(percentage + '%');\r\n                },\r\n                onComplete: () => {\r\n                    audio.stopSfxInstanceLoop(processSfx);\r\n                    audio.playSfx('loadingBlockDone');\r\n                    this.isLoading = false;\r\n                    block.setTypeTxt('100%');\r\n                    setTimeout(() => {\r\n                        audio.playSfx('touchSfx');\r\n                        ClearBlock(block, block.getScore() * rndDuration);\r\n                    }, 1000);\r\n                }\r\n            });\r\n        },\r\n        ptrOut: function () { InputPtrOut(); },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const loading = (SetBlock2Loading);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/touch.ts\n\r\n\r\n\r\n\r\nconst SetBlock2Touch = (block) => {\r\n    const rndTouchCnt = (0,math/* GetRndInt */.dZ)(2, 5);\r\n    const disableTouchDelayTime = 240;\r\n    let bData = {\r\n        touchCnt: 0,\r\n        maxTouchCnt: rndTouchCnt,\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.touchCnt++;\r\n            if (this.touchCnt >= this.maxTouchCnt) {\r\n                this.touchCnt = 0;\r\n                ClearBlock(block, block.getScore() * this.maxTouchCnt);\r\n            }\r\n            else {\r\n                // disable click, then able after delay\r\n                this.isAble2Touch = false;\r\n                block.scene.tweens.addCounter({\r\n                    from: 1, to: 1.1, duration: disableTouchDelayTime, yoyo: true, ease: 'Bounce',\r\n                    onUpdate: (tw, data) => {\r\n                        block.setScale(data.value);\r\n                    },\r\n                    onComplete: () => {\r\n                        block.setScale(1);\r\n                        this.isAble2Touch = true;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const touch = (SetBlock2Touch);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/obstacle.ts\n\r\n\r\nconst ObstacleTextureList = (/* unused pure expression or super */ null && (['obstacleBall', 'obstacleRect', 'obstacleSquare']));\r\nconst SetObstacle = (block) => {\r\n    let bData = {\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            const inputType = InputPtrUp(ptr);\r\n            if (inputType !== 'touch')\r\n                return;\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.isAble2Touch = false;\r\n            AddObstacleBlock(block);\r\n            setTimeout(() => { this.isAble2Touch = true; }, 1000);\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.addBlockData(bData);\r\n    // set shape obstacle texture\r\n    const name = block.getShapeName();\r\n    const capitalShape = name[0].toUpperCase() + name.slice(1);\r\n    const obstacleShape = 'obstacle' + capitalShape;\r\n    block.addShape({ score: 0, imgTexture: obstacleShape });\r\n    block.getShapeImg().setTexture(obstacleShape);\r\n    return block;\r\n};\r\n/* harmony default export */ const obstacle = (SetObstacle);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CommonSize = userSetting/* View.calcRatio */.G7.calcRatio(100);\r\nconst BlockUniqueProperties = [\r\n    {\r\n        typeName: '',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { SetBlockType2InitBasic(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'obstacle',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { obstacle(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'ad',\r\n        // spawnChance: 1,\r\n        spawnChance: 0,\r\n        score: 90,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 100,\r\n        timeIncreaseMin: 3 * 1000,\r\n        timeIncreaseMax: 5 * 1000,\r\n        setFunc: (block) => { return ad(block); }\r\n    },\r\n    {\r\n        typeName: 'power',\r\n        spawnChance: 1,\r\n        score: 60,\r\n        iconTexture: 'power',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 50,\r\n        timeIncreaseMin: 1 * 1000,\r\n        timeIncreaseMax: 2 * 1000,\r\n        setFunc: (block) => { return power(block); }\r\n    },\r\n    {\r\n        typeName: 'loading',\r\n        spawnChance: 1,\r\n        score: 5,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 0.5 * 1000,\r\n        timeIncreaseMax: 1 * 1000,\r\n        setFunc: (block) => { return loading(block); }\r\n    },\r\n    {\r\n        typeName: 'touch',\r\n        spawnChance: 1,\r\n        score: 10,\r\n        iconTexture: 'touch',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 2 * 1000,\r\n        timeIncreaseMax: 4 * 1000,\r\n        setFunc: (block) => { return touch(block); }\r\n    },\r\n];\r\nconst TBlockTypeList = BlockUniqueProperties.map(ele => { if (ele.typeName !== '')\r\n    return ele.typeName; });\r\nconst SpawnMaxChance = BlockUniqueProperties.map(ele => ele.spawnChance).reduce((prevValue, currValue) => {\r\n    return prevValue + currValue;\r\n}, 0);\r\nconst Set2TypeBlock = (block, typeName) => {\r\n    let filteredType = BlockUniqueProperties.find(ele => ele.typeName === typeName);\r\n    if (filteredType) {\r\n        SetBlockType2InitBasic(block);\r\n        block.setTypeName(typeName);\r\n        block.setTypeImg(filteredType.iconTexture);\r\n        block.setTypeImgDisplaySize(filteredType.imgWidth, filteredType.imgHeight);\r\n        block.addScore(filteredType.score);\r\n        block.setTimeIncrease({\r\n            chance: filteredType.timeIncreaseChance,\r\n            value: (0,math/* GetRndInt */.dZ)(filteredType.timeIncreaseMin, filteredType.timeIncreaseMax)\r\n        });\r\n        filteredType.setFunc(block);\r\n    }\r\n    else\r\n        console.log('Set2TypeBlock: typeName is not found in the block type list');\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/popup.ts\n\r\n\r\n\r\nconst PopUp = {\r\n    isOpen: false,\r\n    bottomLayer: null,\r\n    contextLayer: null,\r\n    exitBtn: null,\r\n    sndList: [],\r\n    show: function (block) {\r\n        this.isOpen = true;\r\n        const bData = block.getBlockData();\r\n        if (bData) {\r\n            bData.isPopupOpen = true;\r\n            block.setBlockData(bData);\r\n            if (bData.popUpContext)\r\n                this.contextLayer = bData.popUpContext;\r\n        }\r\n        this.bottomLayer.setVisible(true);\r\n        this.contextLayer.setVisible(true);\r\n        this.exitBtn.setVisible(true);\r\n    },\r\n    hide: function (block) {\r\n        this.isOpen = false;\r\n        if (block) {\r\n            const bData = block.getBlockData();\r\n            bData.isPopupOpen = false;\r\n            block.setBlockData(bData);\r\n        }\r\n        this.bottomLayer.setVisible(false);\r\n        this.contextLayer.setVisible(false);\r\n        this.exitBtn.setVisible(false);\r\n    }\r\n};\r\nconst InitPopUp = () => {\r\n    PopUp.contextLayer.removeAll();\r\n    PopUp.hide();\r\n};\r\nconst CreatePopUp = (scene) => {\r\n    PopUp.bottomLayer = scene.add.graphics();\r\n    PopUp.bottomLayer.fillStyle(0x000000, 0.4);\r\n    PopUp.bottomLayer.fillRect(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    PopUp.bottomLayer.setInteractive(new Phaser.Geom.Rectangle(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h), Phaser.Geom.Rectangle.Contains);\r\n    PopUp.bottomLayer.on('pointerup', () => { console.log('touching popup bottom layer'); });\r\n    PopUp.contextLayer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    PopUp.exitBtn = scene.add.image(userSetting/* View.w */.G7.w - ContextLayerMargin, ContextLayerMargin, 'exitBtn');\r\n    PopUp.exitBtn.setInteractive();\r\n    PopUp.exitBtn.on('pointerup', () => {\r\n        PopUp.hide();\r\n    });\r\n    [PopUp.bottomLayer, PopUp.contextLayer, PopUp.exitBtn].map((ele) => {\r\n        ele.setVisible(false);\r\n        SetDepth(ele, 'popUp');\r\n    });\r\n};\r\n/* harmony default export */ const popup = ((/* unused pure expression or super */ null && (PopUp)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/storage/index.ts\n\r\nconst GameData = Object.assign({ best: 0 }, GameDataAudio);\r\n// export default TGameData;\r\n/* harmony default export */ const storage = (GameData);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/score.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Score = {\r\n    txt: null,\r\n    txtBackground: null,\r\n    bTxt: null,\r\n    bTxtBackground: null,\r\n    txtNum: 0,\r\n    bTxtNum: 0,\r\n    setFormat: function (score) {\r\n        this.txtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.txt.setText(finalScore);\r\n        if (this.txtNum > this.bTxtNum)\r\n            this.setBFormat(score);\r\n        return this;\r\n    },\r\n    setBFormat: function (score) {\r\n        this.bTxtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.bTxt.setText(finalScore);\r\n        return this;\r\n    },\r\n    add: function (score) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        let finalScore = Number(this.txt.text) + score;\r\n        this.setFormat(finalScore);\r\n        return finalScore;\r\n    },\r\n    getScore: function () { return this.txtNum; },\r\n    getBScore: function () { return this.bTxtNum; },\r\n    compareNormalAndBest: function (score) {\r\n        const prevBest = GetLocalStorageItem(storage, 'best');\r\n        if (prevBest < score) {\r\n            this.setBFormat(score);\r\n            SetLocalStorageItem(storage, 'best', score);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    getBonusTimeScore: function () {\r\n        return Math.floor(ui_time.getTimeIncrease() / 100);\r\n    },\r\n    getFinalScore: function () {\r\n        return Math.floor(Score.getScore() + this.getBonusTimeScore());\r\n    },\r\n};\r\nconst InitScore = () => {\r\n    Score.txtNum = 0;\r\n    Score.bTxtNum = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(Score.bTxtNum);\r\n};\r\nconst TxtGap = 110;\r\nconst CreateScoreTxt = (scene) => {\r\n    Score.bTxt = scene.add.text(TxtMargin / 2, TxtMargin * 2, '');\r\n    Score.bTxtBackground = scene.add.text(Score.bTxt.x + TxtGap, Score.bTxt.y, 'Best');\r\n    Score.txt = scene.add.text(TxtMargin / 2, TxtMargin * 3, '');\r\n    Score.txtBackground = scene.add.text(Score.txt.x + TxtGap, Score.txt.y, 'Score');\r\n    [Score.bTxtBackground, Score.txtBackground].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(1, -0.1);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n        txt.setFontStyle('bold italic');\r\n        txt.setAlpha(0.3);\r\n    });\r\n    [Score.bTxt, Score.txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(0, 0);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n    });\r\n    let bestScore = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(bestScore);\r\n    [Score.bTxtBackground, Score.txtBackground, Score.bTxt, Score.txt].map((txt) => {\r\n        SetDepth(txt, 'txt');\r\n    });\r\n    InitScore();\r\n};\r\n/* harmony default export */ const ui_score = (Score);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/passiveLoading.ts\n\r\nconst PassiveLoading = {\r\n    scene: null,\r\n    isLoading: false,\r\n    option: {},\r\n};\r\nconst StartPassiveLoading = (scene, option) => {\r\n    PassiveLoading.isLoading = true;\r\n    // option\r\n    if (option)\r\n        PassiveLoading.option = Object.assign({}, option);\r\n    // chck is exist if not then add to scene\r\n    const passiveLoadingInstance = scene.scene.get('passiveLoading');\r\n    if (!passiveLoadingInstance)\r\n        scene.game.scene.add('passiveLoading', PassiveLoadingScene, false);\r\n    // launch loading scene\r\n    scene.scene.launch('passiveLoading');\r\n    PassiveLoading.scene = scene.scene.get('passiveLoading');\r\n};\r\nconst StopPassiveLoading = async () => {\r\n    if (!PassiveLoading.scene || !PassiveLoading.isLoading) {\r\n        console.warn('passive loading is not exist:', PassiveLoading.scene);\r\n        PassiveLoading.scene = null;\r\n        return;\r\n    }\r\n    if (PassiveLoading.option) {\r\n        PassiveLoading.option.finishEvt && PassiveLoading.option.finishEvt(PassiveLoading.scene);\r\n    }\r\n    PassiveLoading.isLoading = false;\r\n    await new Promise(res => res(PassiveLoading.scene.scene.stop('passiveLoading')));\r\n    PassiveLoading.scene.loadingEndSec = await new Promise(res => res(performance.now()));\r\n    await new Promise((res) => {\r\n        res(console.log(`%c Passive Loading Time: ${((PassiveLoading.scene.loadingEndSec - PassiveLoading.scene.loadingStartSec) / 1000).toFixed(4)} sec `, 'color: black; background: white; fonWeight: bold;'));\r\n    });\r\n};\r\nclass PassiveLoadingScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'passiveLoading',\r\n            active: false\r\n        });\r\n        this.loadingStartSec = 0;\r\n        this.loadingEndSec = 0;\r\n        this.pointFirst = 0;\r\n        this.pointSecond = 0;\r\n        this.gapFirst = 0.2;\r\n        this.gapSecond = 0.4;\r\n    }\r\n    init() {\r\n        this.loadingStartSec = performance.now();\r\n    }\r\n    create() {\r\n        this.loadingGraphics = this.add.graphics();\r\n    }\r\n    update(time, delta) {\r\n        this.updateRotateLogo(delta);\r\n    }\r\n    updateRotateLogo(delta) {\r\n        this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        this.pointSecond = (this.pointSecond + (delta * this.gapSecond)) % 360;\r\n        // console.log('this.pointFirst, this.pointSecond: ', this.pointFirst, this.pointSecond);\r\n        // this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        // this.pointSecond = (this.pointSecond + (delta * this.gapSecond));\r\n        // let showClockwise = this.pointFirst > this.pointSecond ? true : false;\r\n        // let startAngle = this.pointFirst > this.pointSecond ? this.pointFirst : this.pointSecond;\r\n        // let endAngle = this.pointFirst > this.pointSecond ? this.pointSecond : this.pointFirst;\r\n        this.loadingGraphics.clear();\r\n        //  Without this the arc will appear closed when stroked\r\n        this.loadingGraphics.lineStyle(10, 0xff00ff, 2);\r\n        this.loadingGraphics.beginPath();\r\n        this.loadingGraphics.arc(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 60, Phaser.Math.DegToRad(this.pointFirst), Phaser.Math.DegToRad(this.pointSecond), true);\r\n        this.loadingGraphics.strokePath();\r\n    }\r\n}\r\n/* harmony default export */ const passiveLoading = ((/* unused pure expression or super */ null && (PassiveLoading)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/startCnt.ts\n\r\n\r\n\r\nconst GameStartCnt = {\r\n    isStart: false,\r\n    cntTxt: null,\r\n    cntNum: 3,\r\n    getIsStart: function () { return this.isStart; },\r\n    setIsStart: function (isStart) { this.isStart = isStart; },\r\n    setTxt: function (value) {\r\n        GameStartCnt.cntTxt.setText(value.toString());\r\n    },\r\n    setVisible: function (visible) { GameStartCnt.cntTxt.setVisible(visible); },\r\n    setAlpha: function (alpha) { GameStartCnt.cntTxt.setAlpha(alpha); },\r\n    animFadeOut: function (scene) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 400,\r\n            onUpdate: (tw, data) => {\r\n                this.setAlpha(data.value);\r\n            },\r\n            onComplete: () => {\r\n                this.setAlpha(0);\r\n                this.setVisible(false);\r\n                this.setIsStart(true);\r\n            }\r\n        });\r\n    },\r\n    animCnt: function (scene) {\r\n        let cnt = 3;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: 1000, duration: 1000, repeat: 3, delay: 1000,\r\n            onStart: () => {\r\n                this.setVisible(true);\r\n                this.setTxt(3);\r\n                audio.playSfx('voice3');\r\n            },\r\n            onRepeat: () => {\r\n                cnt--;\r\n                if (cnt === 0) {\r\n                    audio.playSfx('voiceGo');\r\n                    this.setTxt('Go!');\r\n                    return;\r\n                }\r\n                this.setTxt(cnt);\r\n                audio.playSfx('voice' + cnt);\r\n            },\r\n            onComplete: () => {\r\n                this.animFadeOut(scene);\r\n            },\r\n        });\r\n    }\r\n};\r\nconst InitGameStartCnt = () => {\r\n    GameStartCnt.setVisible(false);\r\n    GameStartCnt.setAlpha(1);\r\n    GameStartCnt.setIsStart(false);\r\n    GameStartCnt.cntNum = 3;\r\n    GameStartCnt.setTxt(GameStartCnt.cntNum);\r\n};\r\nconst CreateGameStartCnt = (scene) => {\r\n    GameStartCnt.cntTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '3');\r\n    SetFont2CommonContextStyle(GameStartCnt.cntTxt);\r\n    GameStartCnt.cntTxt.setFontSize(TxtTitleHeadSize);\r\n    InitGameStartCnt();\r\n    GameStartCnt.animCnt(scene);\r\n    // scene.events.on(\"start\", () => {\r\n    //     console.log('start scene evt');\r\n    //     GameStartCnt.animCnt(scene);\r\n    // });\r\n};\r\n/* harmony default export */ const startCnt = (GameStartCnt);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/input/index.ts\nconst GameInput = {\r\n    down: [],\r\n    move: [],\r\n    up: [],\r\n    add: (cmd, evt) => {\r\n        GameInput[cmd].push(evt);\r\n        return GameInput;\r\n    },\r\n};\r\nconst InitGameInput = () => {\r\n};\r\nconst CreateGameInput = (scene) => {\r\n    const inputDownEvt = (ptr, currentlyOver) => {\r\n        GameInput.down && GameInput.down.map(downEvt => downEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointerdown', inputDownEvt);\r\n    scene.input.on('pointerdown', inputDownEvt);\r\n    const inputMoveEvt = (ptr, currentlyOver) => {\r\n        GameInput.move && GameInput.move.map(moveEvt => moveEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointermove', inputMoveEvt);\r\n    scene.input.on('pointermove', inputMoveEvt);\r\n    const inputUpEvt = (ptr, currentlyOver) => {\r\n        GameInput.up && GameInput.up.map(upEvt => upEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointerup', inputUpEvt);\r\n    scene.input.on('pointerup', inputUpEvt);\r\n    InitGameInput();\r\n    return GameInput;\r\n};\r\n/* harmony default export */ const scenes_input = (GameInput);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/efx/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Efx = {\r\n    bgParticleList: [],\r\n    // timeIncrease: <Phaser.GameObjects.Text[]> [],   // when block cleared, increase time by block's own chance\r\n    // score: <Phaser.GameObjects.Text[]> [],          // when block cleared, increase score\r\n    list: [],\r\n    setConfig: function (particle, config) {\r\n        const finalConfig = Object.assign({ x: 0, y: 0, active: false }, config);\r\n        let emitter;\r\n        const nestedEmitterIdx = this.list.findIndex(emitter => emitter.name === config.name);\r\n        if (nestedEmitterIdx >= 0)\r\n            this.list[nestedEmitterIdx] = particle.createEmitter(finalConfig);\r\n        else {\r\n            emitter = particle.createEmitter(finalConfig);\r\n            this.list.push(emitter);\r\n        }\r\n        return emitter;\r\n    },\r\n    getEmitter: function (name) {\r\n        const targetEmitter = this.list.find(emitter => emitter.name === name);\r\n        if (!targetEmitter) {\r\n            console.warn(`emitter ${name} is not in the particle list`);\r\n            return;\r\n        }\r\n        return targetEmitter;\r\n    },\r\n    activeEmitter(x, y, name) {\r\n        const targetEmitter = this.getEmitter(name);\r\n        if (!targetEmitter)\r\n            return false;\r\n        targetEmitter.active = true;\r\n        targetEmitter.setPosition(x, y);\r\n        return targetEmitter;\r\n    },\r\n    animEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.explode();\r\n        return instanceExplode;\r\n    },\r\n    startEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.start();\r\n        return instanceExplode;\r\n    },\r\n    animScale: function (scene, target) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 1.2, duration: 300, yoyo: true,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setScale(data.value);\r\n            },\r\n        });\r\n    },\r\n    animPos: function (scene, target, amount) {\r\n        const targetInitY = target.y;\r\n        scene.tweens.addCounter({\r\n            from: targetInitY, to: targetInitY + amount, duration: 2400,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setPosition(target.x, data.value);\r\n            },\r\n        });\r\n    },\r\n    animTimeIncrease: function (block, chance, value) {\r\n        const { scene } = block;\r\n        const chancePosY = block.y - 100;\r\n        const timeSec = SetmillieSec2SecTimeFormat(value);\r\n        const timeIncreaseOnUiRndPosX = ui_time.txt.x + (ui_time.txt.width * 1.5) - 5 + (0,math/* GetRndNum */.hg)(-3, 3);\r\n        const timeIncreaseOnUiRndPosY = ui_time.txt.y + ui_time.txt.height / 2 + (0,math/* GetRndNum */.hg)(-10, 10);\r\n        const timeIncreaseOnUi = scene.add.text(timeIncreaseOnUiRndPosX, timeIncreaseOnUiRndPosY, '+' + timeSec).setVisible(false);\r\n        const timeIncreaseTxt = scene.add.text(block.x, chancePosY, 'Time Critical!').setVisible(false);\r\n        const timeIncreaseChance = scene.add.text(timeIncreaseTxt.x, timeIncreaseTxt.y + 25, chance.toString() + '%').setVisible(false);\r\n        const timeIncreaseOnBlock = scene.add.text(timeIncreaseChance.x, timeIncreaseChance.y + 25, timeSec).setVisible(false);\r\n        [timeIncreaseOnUi, timeIncreaseTxt, timeIncreaseChance, timeIncreaseOnBlock].map((txt) => {\r\n            SetFont2CommonContextStyle(txt);\r\n            SetDepth(txt, 'txt');\r\n            txt.setVisible(true);\r\n            this.animScale(scene, timeIncreaseOnUi);\r\n        });\r\n        const twList = [];\r\n        twList.push({\r\n            from: timeIncreaseOnUiRndPosX, to: timeIncreaseOnUiRndPosX + 10, duration: 2400,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            onUpdate: (tw, twData) => { timeIncreaseOnUi.x = twData.value; },\r\n            onComplete: () => { timeIncreaseOnUi.destroy(); }\r\n        });\r\n        twList.push({\r\n            from: 1, to: 0, duration: 2400,\r\n            onUpdate: (tw, twData) => {\r\n                timeIncreaseTxt.setAlpha(twData.value);\r\n                timeIncreaseChance.setAlpha(twData.value);\r\n                timeIncreaseOnBlock.setAlpha(twData.value);\r\n            },\r\n            onComplete: () => {\r\n                timeIncreaseTxt.destroy();\r\n                timeIncreaseChance.destroy();\r\n                timeIncreaseOnBlock.destroy();\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n        this.animPos(scene, timeIncreaseTxt, -30);\r\n        this.animPos(scene, timeIncreaseChance, -30);\r\n        this.animPos(scene, timeIncreaseOnBlock, -30);\r\n        return this;\r\n    },\r\n    animScore: function (block, score) {\r\n        const { scene } = block;\r\n        const scoreTxt = scene.add.text(block.x, block.y, Math.floor(score).toString()).setVisible(false);\r\n        SetFont2CommonContextStyle(scoreTxt);\r\n        SetDepth(scoreTxt, 'txt');\r\n        scoreTxt.setFontSize(TxtTitleSize);\r\n        // score particle emit\r\n        const scoreSfxList = ['scoreBlue', 'scoreGreen', 'scoreBrown'];\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, scoreSfxList.length);\r\n        Efx.animEmitter(block.x, block.y, scoreSfxList[rndIdx]);\r\n        // alpha tw\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 2400,\r\n            onStart: () => {\r\n                scoreTxt.setVisible(true);\r\n                audio.playSfx('scoreSfx');\r\n            },\r\n            onUpdate: (tw, data) => { scoreTxt.setAlpha(data.value); },\r\n            onComplete: () => { scoreTxt.destroy(); }\r\n        });\r\n        this.animScale(scene, scoreTxt);\r\n        this.animPos(scene, scoreTxt, -30);\r\n    },\r\n    animNewBest: function () {\r\n        audio.playSfx('voiceHighScore');\r\n        this.bgParticleList.map(key => this.startEmitter(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, key));\r\n        this.startEmitter(0, 0, 'newBestScore');\r\n    },\r\n    stopAll: function () {\r\n        this.list.map(emitter => emitter.stop());\r\n    },\r\n};\r\nconst CreateEfx = (scene) => {\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const commonTouchConfig = {\r\n        lifespan: { min: 10, max: 350 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 200,\r\n        quantity: 64,\r\n        scale: { start: 0.3, end: 0.05 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBlue', frame: 'blue' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchGreen', frame: 'green' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBrown', frame: 'yellow' }, commonTouchConfig));\r\n    const commonScoreConfig = {\r\n        lifespan: { min: 100, max: 500 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 350,\r\n        quantity: 64,\r\n        scale: { start: 0.2, end: 0.1 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBlue', frame: 'blue' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreGreen', frame: 'green' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBrown', frame: 'yellow' }, commonScoreConfig));\r\n    // touch input\r\n    const touchSfxList = ['touchBlue', 'touchGreen', 'touchBrown'];\r\n    scenes_input.add('down', (ptr, currentlyOver) => {\r\n        audio.playSfx('touchSfx');\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, touchSfxList.length);\r\n        const emitter = Efx.animEmitter(ptr.x, ptr.y, touchSfxList[rndIdx]);\r\n        // scene.cameras.main.shake(200, 0.01, true);\r\n    });\r\n    // scene.input.off('pointerdown');\r\n    // scene.input.on('pointerdown', (ptr) => {\r\n    //     GameAudio.playSfx('touchSfx');\r\n    //     const rndIdx = GetRndInt(0, touchSfxList.length);\r\n    //     const emitter = Efx.animEmitter(ptr.x, ptr.y, touchSfxList[rndIdx]);\r\n    //     // const scoreSfxList = [ 'scoreBlue', 'scoreGreen', 'scoreBrown' ];\r\n    //     // const rndIdx = GetRndInt(0, scoreSfxList.length);\r\n    //     // const scoreInstance = Efx.animEmitter(ptr.x, ptr.y, scoreSfxList[rndIdx]);\r\n    //     // Efx.animEmitter(ptr.x, ptr.y, 'score');\r\n    //     // console.log('rndIdx: ', rndIdx, touchSfxList[rndIdx]);\r\n    //     // console.log('emitter: ', emitter);\r\n    //     // ptr.event.preventDefault();\r\n    //     chckPtrDefault(ptr);\r\n    // });\r\n    SetDepth(blockParticle, 'particle');\r\n    return Efx;\r\n};\r\nconst CreateGameOverEfx = (scene, img) => {\r\n    Efx.bgParticleList = [\r\n        'diamond2', 'diamond3', 'diamond4',\r\n        'ruby1', 'ruby2', 'ruby3', 'ruby4',\r\n        'key1', 'key2', 'key3', 'key4',\r\n    ];\r\n    Efx.bgParticleList.map((particleName) => {\r\n        const particle = scene.add.particles(particleName);\r\n        const duration = 2000;\r\n        Efx.setConfig(particle, {\r\n            name: particleName,\r\n            angle: { min: 100, max: 440 },\r\n            speed: 350,\r\n            gravityY: -200,\r\n            lifespan: duration,\r\n            quantity: 1,\r\n            frequency: 60,\r\n            scale: { min: 0.1, max: 1 },\r\n            rotate: { onEmit: () => (0,math/* GetRndNum */.hg)(0, 360) }\r\n        });\r\n        SetDepth(particle, 'particle');\r\n    });\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const width = img.width * gameover.newBestScoreBgScaleW;\r\n    const height = img.height * gameover.newBestScoreBgScaleH;\r\n    const gameOverEmitZone = new Phaser.Geom.Rectangle(img.x - width / 2, img.y - height / 2, width, height);\r\n    Efx.setConfig(blockParticle, {\r\n        name: 'newBestScore',\r\n        frame: 'blue',\r\n        lifespan: 1000,\r\n        gravityY: 10,\r\n        scale: { start: 0, end: 0.25, ease: 'Quad.easeOut' },\r\n        alpha: { start: 1, end: 0, ease: 'Quad.easeIn' },\r\n        blendMode: 'ADD',\r\n        emitZone: { type: 'random', source: gameOverEmitZone },\r\n    });\r\n    SetDepth(blockParticle, 'highest');\r\n    return Efx;\r\n};\r\n/* harmony default export */ const efx = (Efx);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/warning.ts\n\r\n\r\n\r\n\r\nconst GameWarning = {\r\n    hasOnceShow: true,\r\n    hasOnceHide: true,\r\n    time: 6 * 1000,\r\n    sign: null,\r\n    progressBar: null,\r\n    progressBarLine: null,\r\n    progressAmount: 0,\r\n    shakeValue: 1,\r\n    updateShakeValue: (remainedOverCnt) => {\r\n        GameWarning.shakeValue = (GameWarning.time - remainedOverCnt) / 1000;\r\n    },\r\n    show: () => {\r\n        GameWarning.progressAmount = 0;\r\n        GameWarning.sign.setVisible(true);\r\n        GameWarning.progressBar.setVisible(true);\r\n        GameWarning.progressBarLine.setVisible(true);\r\n        GameWarning.draw();\r\n        return GameWarning;\r\n    },\r\n    hide: () => {\r\n        GameWarning.sign.setVisible(false);\r\n        GameWarning.progressBar.setVisible(false);\r\n        GameWarning.progressBarLine.setVisible(false);\r\n        GameWarning.clear();\r\n        audio.stopSfx('warningSfx');\r\n    },\r\n    arcDegree: () => {\r\n        const startAngle = 270 + (GameWarning.progressAmount) * (-180); // 270 ~ 90\r\n        const endAngle = -90 + (GameWarning.progressAmount) * 180; // -90 ~ 90\r\n        return { startAngle: startAngle, endAngle: endAngle };\r\n    },\r\n    draw: () => {\r\n        GameWarning.clear();\r\n        const r = GameWarning.sign.width * 4 / 5;\r\n        GameWarning.progressBarLine.lineStyle(6, 0xfbff00, 1);\r\n        GameWarning.progressBarLine.strokeCircle(0, 0, r);\r\n        GameWarning.progressBar.fillStyle(0xfbff00, 0.4);\r\n        GameWarning.progressBar.beginPath();\r\n        GameWarning.progressBar.arc(0, 0, r, Phaser.Math.DegToRad(GameWarning.arcDegree().startAngle), Phaser.Math.DegToRad(GameWarning.arcDegree().endAngle), true, 0.01);\r\n        GameWarning.progressBar.fillPath();\r\n        GameWarning.progressBar.closePath();\r\n        return GameWarning;\r\n    },\r\n    clear: () => {\r\n        GameWarning.progressBar.clear();\r\n        GameWarning.progressBarLine.clear();\r\n    },\r\n    update: (scene) => {\r\n        const remainedOverCnt = system.overCntMax - system.overCnt;\r\n        // hide warning\r\n        if (system.getIsGameOver())\r\n            GameWarning.hasOnceHide = true;\r\n        if (system.getIsGameOver() || remainedOverCnt > GameWarning.time) {\r\n            if (GameWarning.hasOnceHide) {\r\n                GameWarning.hasOnceHide = false;\r\n                GameWarning.hasOnceShow = true;\r\n                GameWarning.hide();\r\n            }\r\n            return;\r\n        }\r\n        // show warning\r\n        if (GameWarning.hasOnceShow) {\r\n            GameWarning.hasOnceShow = false;\r\n            GameWarning.hasOnceHide = true;\r\n            GameWarning.show();\r\n            scene.tweens.addCounter({\r\n                from: 1, to: 0, duration: 500, yoyo: true, repeat: -1,\r\n                onStart: () => { audio.playSfx('warningSfx'); },\r\n                onRepeat: () => { audio.playSfx('warningSfx'); },\r\n                onUpdate: (tw, twData) => {\r\n                    if (GameWarning.hasOnceShow) {\r\n                        GameWarning.sign.setAlpha(1);\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    GameWarning.sign.setAlpha(twData.value);\r\n                }\r\n            });\r\n        }\r\n        GameWarning.progressAmount = (GameWarning.time - remainedOverCnt) / GameWarning.time;\r\n        GameWarning.draw();\r\n        GameWarning.updateShakeValue(remainedOverCnt);\r\n        scene.cameras.main.shake(160, 0.001 * GameWarning.shakeValue, false);\r\n    },\r\n};\r\nconst InitGameWarning = () => {\r\n    GameWarning.hide();\r\n    GameWarning.hasOnceShow = true;\r\n    GameWarning.progressAmount = 0;\r\n    return GameWarning;\r\n};\r\nconst CreateGameWarning = (scene) => {\r\n    GameWarning.sign = scene.add.image(0, 0, 'warningSign');\r\n    GameWarning.sign.setPosition(userSetting/* View.centerX */.G7.centerX, GameWarning.sign.height);\r\n    GameWarning.progressBar = scene.add.graphics();\r\n    GameWarning.progressBar.setAlpha(0.9);\r\n    GameWarning.progressBarLine = scene.add.graphics();\r\n    const barX = GameWarning.sign.x;\r\n    const barY = GameWarning.sign.y;\r\n    GameWarning.progressBar.setPosition(barX, barY);\r\n    GameWarning.progressBarLine.setPosition(barX, barY);\r\n    [GameWarning.progressBar, GameWarning.progressBarLine, GameWarning.sign].map(ele => SetDepth(ele, 'warning'));\r\n    InitGameWarning();\r\n    return GameWarning;\r\n};\r\n/* harmony default export */ const warning = (GameWarning);\r\n\r\n\n// EXTERNAL MODULE: ./src/window/index.ts\nvar src_window = __webpack_require__(626);\n;// CONCATENATED MODULE: ./src/scenes/ui/index.ts\nconst ui_UIProps = {\r\n    margin: 30,\r\n    alpha: 0.8,\r\n    scale: 0.6,\r\n    downGap: 4, // down gap for anim\r\n};\r\nconst SetUIProps = (props, value) => {\r\n    if (!ui_UIProps[props])\r\n        console.warn(`ui props: ${props} is not exist`);\r\n    ui_UIProps[props] = value;\r\n    return ui_UIProps;\r\n};\r\nconst ui_SetCommonUIProps = (btn) => {\r\n    btn.setAlpha(ui_UIProps.alpha);\r\n    btn.setScale(ui_UIProps.scale);\r\n    return btn;\r\n};\r\nconst ui_CreateUIBtnAnim = (scene, btn, option) => {\r\n    var _a;\r\n    const toggleBtn = btn;\r\n    if (!toggleBtn)\r\n        return;\r\n    const dur = (_a = option === null || option === void 0 ? void 0 : option.dur) !== null && _a !== void 0 ? _a : 70;\r\n    const Down = () => {\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.downPosY, duration: dur,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    Up();\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    const Up = () => {\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.upPosY, duration: dur,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    toggleBtn.y = toggleBtn.upPosY;\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    toggleBtn.upPosY = btn.y;\r\n    toggleBtn.downPosY = btn.y + ui_UIProps.downGap;\r\n    toggleBtn.setInteractive();\r\n    toggleBtn.on('pointerdown', () => { Down(); });\r\n    toggleBtn.on('pointerup', () => { Up(); });\r\n    toggleBtn.on('pointerout', () => { Up(); });\r\n    return ui_UIProps;\r\n};\r\n/* harmony default export */ const ui = (ui_UIProps);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/depth/index.ts\nconst GameDepth = {\r\n    list: {\r\n        default: 0,\r\n        highest: 10000,\r\n    },\r\n    add: (key, depth) => {\r\n        if (depth < GameDepth.list.default) {\r\n            console.warn(`adding depth ${key} key has a lower depth value(${depth}) than default`);\r\n            return;\r\n        }\r\n        if (depth > GameDepth.list.highest) {\r\n            console.warn(`adding depth ${key} key has a larger depth value(${depth}) than default`);\r\n            return;\r\n        }\r\n        GameDepth[key] = depth;\r\n        return GameDepth;\r\n    },\r\n};\r\nconst depth_SetDepth = (targetObj, type) => {\r\n    if (!GameDepth.list[type]) {\r\n        console.warn('SetDepth: type is not found in the depth list:', targetObj, type);\r\n        console.log('targetObj, type: ', targetObj, type);\r\n        return;\r\n    }\r\n    if (targetObj.setDepth)\r\n        targetObj.setDepth(GameDepth.list[type]);\r\n    else\r\n        console.warn('SetDepth: targetObj is not Phaser.GameObjects');\r\n};\r\n/* harmony default export */ const scenes_depth = ((/* unused pure expression or super */ null && (GameDepth)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/gesture/index.ts\nconst GameGesture = {\r\n    type: '',\r\n    typeHistory: [],\r\n    initPos: { x: 0, y: 0 },\r\n    isHoldingDown: false,\r\n    holdDuration: 0,\r\n    holdMaxDuration: 1000,\r\n    comfyGapTouchValue: 15,\r\n    startHold: () => { GameGesture.isHoldingDown = true; return GameGesture; },\r\n    resetHold: () => {\r\n        GameGesture.isHoldingDown = false;\r\n        GameGesture.initPos = { x: 0, y: 0 };\r\n        GameGesture.holdDuration = 0;\r\n        GameGesture.setType('');\r\n        return GameGesture;\r\n    },\r\n    setHoldDuration: function (duration) { GameGesture.holdDuration = duration; return GameGesture; },\r\n    setInitPos: function (x, y) { GameGesture.initPos = { x: x, y: y }; return GameGesture; },\r\n    chckIsHold: () => {\r\n        if (GameGesture.holdDuration >= GameGesture.holdMaxDuration)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    getType: () => { return GameGesture.type; },\r\n    setType: function (type) { GameGesture.type = type; return GameGesture; },\r\n    initTypeHistory: () => { GameGesture.typeHistory = []; },\r\n    getTypeHistory: () => { return GameGesture.typeHistory; },\r\n    getLastestInputType: () => { return GameGesture.typeHistory[GameGesture.typeHistory.length - 1]; },\r\n    push2TypeHistory: function (gestureEle) {\r\n        GameGesture.typeHistory.push(gestureEle);\r\n        return GameGesture.typeHistory;\r\n    },\r\n};\r\nconst InitGameGesture = () => {\r\n    GameGesture.resetHold();\r\n    GameGesture.initTypeHistory();\r\n};\r\nconst CreateGameGesture = (scene) => {\r\n    scene.input.off('pointerdown', PtrDownGameGesture);\r\n    scene.input.on('pointerdown', PtrDownGameGesture);\r\n    scene.input.off('pointermove', PtrMoveGameGesture);\r\n    scene.input.on('pointermove', PtrMoveGameGesture);\r\n    scene.input.off('pointerup', PtrUpGameGesture);\r\n    scene.input.on('pointerup', PtrUpGameGesture);\r\n    InitGameGesture();\r\n    return GameGesture;\r\n};\r\nconst UpdateGameGesture = (delta) => {\r\n    if (GameGesture.isHoldingDown)\r\n        GameGesture.setHoldDuration(GameGesture.holdDuration + delta);\r\n};\r\nconst PtrDownGameGesture = (ptr) => {\r\n    GameGesture.setInitPos(ptr.x, ptr.y);\r\n    GameGesture.startHold();\r\n};\r\nconst PtrMoveGameGesture = (ptr) => {\r\n    if (!ptr.isDown)\r\n        return;\r\n    if (!gesture_ChckSwipeDirection(GameGesture.initPos, ptr)) {\r\n        ChckHoldOrTouch();\r\n    }\r\n    // const gestureEle = {\r\n    //     type: GameGesture.getType(),\r\n    //     initPos: GameGesture.initPos,\r\n    //     lastPos: { x: ptr.x, y: ptr.y }\r\n    // };\r\n};\r\nconst PtrUpGameGesture = (ptr) => {\r\n    return SetGameGestureType(GameGesture.initPos, ptr);\r\n};\r\nconst PtrOutGameGesture = () => {\r\n    GameGesture.resetHold();\r\n};\r\nconst gesture_ChckSwipeDirection = (initPos, ptr) => {\r\n    const chckPosX = Math.abs(initPos.x - ptr.x) > GameGesture.comfyGapTouchValue;\r\n    const chckPosY = Math.abs(initPos.y - ptr.y) > GameGesture.comfyGapTouchValue;\r\n    if (chckPosX || chckPosY) {\r\n        const x = ptr.x - initPos.x;\r\n        const y = ptr.y - initPos.y;\r\n        if (Math.abs(x) > Math.abs(y)) {\r\n            if (x > 0)\r\n                GameGesture.setType('swipeRight');\r\n            else\r\n                GameGesture.setType('swipeLeft');\r\n        }\r\n        else {\r\n            if (y < 0)\r\n                GameGesture.setType('swipeUp');\r\n            else\r\n                GameGesture.setType('swipeDown');\r\n        }\r\n        return true;\r\n    }\r\n    else\r\n        return false;\r\n};\r\nconst ChckHoldOrTouch = () => {\r\n    if (GameGesture.chckIsHold()) {\r\n        GameGesture.setType('hold');\r\n        return true;\r\n    }\r\n    else {\r\n        GameGesture.setType('touch');\r\n        return false;\r\n    }\r\n};\r\n// set comfy touch to not judge as swipe when use with actual finger\r\nconst SetGameGestureType = (initPos, ptr) => {\r\n    // swipe motion\r\n    if (!gesture_ChckSwipeDirection(initPos, ptr)) {\r\n        // hold or touch\r\n        ChckHoldOrTouch();\r\n    }\r\n    const gestureEle = {\r\n        type: GameGesture.getType(),\r\n        initPos: initPos,\r\n        lastPos: { x: ptr.x, y: ptr.y }\r\n    };\r\n    GameGesture.push2TypeHistory(gestureEle);\r\n    GameGesture.resetHold();\r\n    return GameGesture.getLastestInputType();\r\n};\r\n/* harmony default export */ const gesture = (GameGesture);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/font/index.ts\n\r\nconst font_GameFont = {\r\n    guideTxtY: userSetting/* View.h */.G7.h - 80,\r\n};\r\nconst InitFont = () => {\r\n};\r\nconst CreateFont = () => {\r\n};\r\nconst font_SetFontStyle = (txt) => {\r\n    txt.setFontStyle('bold');\r\n    txt.setFontFamily('Arial Black');\r\n    txt.setOrigin(0.5);\r\n    return txt;\r\n};\r\n/* harmony default export */ const font = (font_GameFont);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/scroll/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameScroll = {\r\n    btn: null,\r\n    isScrollable: true,\r\n    actScroll: function () {\r\n        if (!GameScroll.isScrollable)\r\n            return;\r\n        src_window/* default.reqParent */.Z.reqParent('scroll');\r\n    },\r\n    wheelScroll: function (ptr) {\r\n        if (GameScroll.isScrollable)\r\n            return true;\r\n        else\r\n            ptr.event.preventDefault();\r\n    },\r\n    defaultOpt: {\r\n        x: ui.margin * 4.5 * ui.scale,\r\n        y: ui.margin,\r\n        cmdKey: 'v',\r\n        isSwipeGestureExist: true,\r\n    },\r\n    option: {},\r\n};\r\nconst GetScrollAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        { key: 'scrollBelow', url: CommonScroll + 'scrollBelow.png', type: 'image' },\r\n        { key: 'scrollArrow', url: CommonScroll + 'scrollArrow.png', type: 'image' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitGameScroll = () => {\r\n};\r\nconst CreateGameScroll = (scene, option) => {\r\n    GameScroll.option = Object.assign(Object.assign({}, GameScroll.defaultOpt), option);\r\n    const { x, y, cmdKey, isSwipeGestureExist } = GameScroll.option;\r\n    // off the preventDefault method to all evts\r\n    scene.game.input.mouse.preventDefaultWheel = false;\r\n    GameScroll.btn = scene.add.image(x, y, 'scrollBelow');\r\n    ui_SetCommonUIProps(GameScroll.btn);\r\n    ui_CreateUIBtnAnim(scene, GameScroll.btn);\r\n    const prevWheelScroll = GameScroll.wheelScroll;\r\n    GameScroll.wheelScroll = (ptr) => {\r\n        var _a, _b;\r\n        ((_a = option === null || option === void 0 ? void 0 : option.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = option === null || option === void 0 ? void 0 : option.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n        prevWheelScroll(ptr);\r\n    };\r\n    GameScroll.btn.on('pointerup', GameScroll.actScroll);\r\n    scene.input.off('wheel', GameScroll.wheelScroll);\r\n    scene.input.on('wheel', GameScroll.wheelScroll);\r\n    // key binding\r\n    src_window/* default.add2All */.Z.add2All('down', 'scroll', (evt, key) => {\r\n        if (key !== cmdKey)\r\n            return;\r\n        GameScroll.actScroll();\r\n    });\r\n    if (isSwipeGestureExist)\r\n        CreateSwipeScroll(scene);\r\n    InitGameScroll();\r\n    return GameScroll;\r\n};\r\nconst SetGameScrollable = (isScrollable) => {\r\n    if (!GameScroll.btn)\r\n        return;\r\n    GameScroll.isScrollable = isScrollable;\r\n    GameScroll.btn.setAlpha(GameScroll.isScrollable ? ui.alpha : 0.2);\r\n    return GameScroll;\r\n};\r\nconst CreateSwipeScroll = (scene) => {\r\n    const disableAlpha = 0;\r\n    const ableAlpha = 0.6;\r\n    const scrollBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    scrollBg.setAlpha(0.6);\r\n    scrollBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    scrollBg.setInteractive();\r\n    scrollBg.setVisible(false);\r\n    let isScrollBgTextureExist = true;\r\n    if (!scene.textures.get('blackScreen'))\r\n        isScrollBgTextureExist = false;\r\n    else\r\n        isScrollBgTextureExist = true;\r\n    const scrollArrow = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'scrollArrow');\r\n    scrollArrow.setOrigin(0.5, 0.5);\r\n    scrollArrow.setVisible(false);\r\n    scrollArrow.setAlpha(disableAlpha);\r\n    const scrollTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'Scroll Touch Down');\r\n    font_SetFontStyle(scrollTxt);\r\n    scrollTxt.setAlpha(0.8);\r\n    scrollTxt.setFontSize(userSetting/* View.w */.G7.w / 16);\r\n    scrollTxt.setVisible(false);\r\n    const swipeYAmount = userSetting/* View.h */.G7.h * 2 / 5;\r\n    const swipeYLimit = userSetting/* View.h */.G7.h / 2 + userSetting/* View.h */.G7.h / 8;\r\n    const ScrollShow = (sizeY, alpha) => {\r\n        scrollArrow.setDisplaySize(userSetting/* View.centerX */.G7.centerX, sizeY);\r\n        scrollArrow.setAlpha(alpha);\r\n    };\r\n    const ScrollHide = () => {\r\n        isScrollBgTextureExist && scrollBg.setVisible(false);\r\n        scrollArrow.setVisible(false);\r\n        scrollArrow.setAlpha(disableAlpha);\r\n        scrollTxt.setVisible(false);\r\n    };\r\n    // move evt\r\n    scenes_input.add('move', (ptr, currentlyOver) => {\r\n        if (!ptr.isDown)\r\n            return;\r\n        if (!GameScroll.isScrollable)\r\n            return;\r\n        // show or hide scroll down img & txt\r\n        const diffY = gesture.initPos.y - ptr.y;\r\n        if (diffY >= swipeYAmount) {\r\n            scrollArrow.setVisible(true);\r\n            if (diffY >= swipeYLimit) {\r\n                // limit swipe\r\n                isScrollBgTextureExist && scrollBg.setVisible(true);\r\n                scrollTxt.setVisible(true);\r\n                ScrollShow(swipeYLimit, ableAlpha);\r\n            }\r\n            else {\r\n                // calculate alpha ratio\r\n                const distanceRatio = (0,math/* GetRatio */.x7)(swipeYAmount, swipeYLimit, diffY);\r\n                const alphaRatio = (0,math/* GetValueViaRatio */.$S)(disableAlpha, ableAlpha, distanceRatio);\r\n                ScrollShow(diffY, alphaRatio);\r\n            }\r\n        }\r\n        else\r\n            ScrollHide();\r\n    });\r\n    // act scroll when ptr up\r\n    scenes_input.add('up', (ptr, currentlyOver) => {\r\n        if (!GameScroll.isScrollable)\r\n            return ScrollHide();\r\n        if (!scrollArrow.visible)\r\n            return ScrollHide();\r\n        if (!scrollTxt.visible)\r\n            return ScrollHide();\r\n        ScrollHide();\r\n        GameScroll.actScroll();\r\n    });\r\n    [scrollBg, scrollArrow, scrollTxt].map(scrollEle => depth_SetDepth(scrollEle, 'highest'));\r\n};\r\n/* harmony default export */ const ui_scroll = ((/* unused pure expression or super */ null && (GameScroll)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/fullScreen/index.ts\n\r\n\r\n\r\n\r\nconst GameFullScreen = {\r\n    isDelaying: false,\r\n    delay: 300,\r\n    chckTime: 1000,\r\n    isFullScreen: false,\r\n    btn: null,\r\n    defaultOpt: {\r\n        x: ui.margin,\r\n        y: ui.margin,\r\n        cmdKey: 'f',\r\n    },\r\n    option: {},\r\n};\r\nconst GetFullScreenAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        { key: 'fullScreenLarger', url: CommonFullScreen + 'fullScreenLarger.png', type: 'image' },\r\n        { key: 'fullScreenSmaller', url: CommonFullScreen + 'fullScreenSmaller.png', type: 'image' },\r\n        { key: 'touchSfx', url: CommonSfx + 'touchSfx.mp3', type: 'audio' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitFullScreen = () => {\r\n};\r\nconst CreateFullScreen = (scene, option) => {\r\n    GameFullScreen.option = Object.assign(Object.assign({}, GameFullScreen.defaultOpt), option);\r\n    const { x, y, cmdKey } = GameFullScreen.option;\r\n    const btnTexture = GameFullScreen.isFullScreen ? 'fullScreenSmaller' : 'fullScreenLarger';\r\n    // add screen size controller\r\n    GameFullScreen.btn = scene.add.image(x, y, btnTexture);\r\n    ui_SetCommonUIProps(GameFullScreen.btn);\r\n    ui_CreateUIBtnAnim(scene, GameFullScreen.btn);\r\n    const delayEvt = () => {\r\n        GameFullScreen.btn.disableInteractive();\r\n        GameFullScreen.isDelaying = true;\r\n        GameFullScreen.btn.setAlpha(0.2);\r\n        setTimeout(() => {\r\n            GameFullScreen.btn.setInteractive();\r\n            GameFullScreen.isDelaying = false;\r\n            GameFullScreen.btn.setAlpha(ui.alpha);\r\n            scene.tweens.addCounter({\r\n                duration: 1000,\r\n                onUpdate: (tw) => {\r\n                    if (!scene.scale.isFullscreen) {\r\n                        exitEvt();\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                },\r\n                onComplete: () => {\r\n                    GameFullScreen.btn.setInteractive();\r\n                    GameFullScreen.isDelaying = false;\r\n                    GameFullScreen.btn.setAlpha(ui.alpha);\r\n                }\r\n            });\r\n        }, GameFullScreen.delay);\r\n        return false;\r\n    };\r\n    const exitEvt = () => {\r\n        GameFullScreen.isFullScreen = false;\r\n        scene.scale.stopFullscreen();\r\n        GameFullScreen.btn.setTexture('fullScreenLarger');\r\n        SetGameScrollable(true);\r\n    };\r\n    const toggleEvt = () => {\r\n        if (GameFullScreen.isDelaying)\r\n            return;\r\n        delayEvt();\r\n        GameFullScreen.isFullScreen = !GameFullScreen.isFullScreen;\r\n        if (GameFullScreen.isFullScreen) {\r\n            scene.scale.startFullscreen();\r\n            GameFullScreen.btn.setTexture('fullScreenSmaller');\r\n            SetGameScrollable(false);\r\n        }\r\n        else\r\n            exitEvt();\r\n    };\r\n    GameFullScreen.btn.on('pointerup', () => { toggleEvt(); });\r\n    // resize event for stop full screen\r\n    scene.scale.off('resize');\r\n    scene.scale.on('resize', () => {\r\n        if (GameFullScreen.btn.isChanging)\r\n            return;\r\n        if (GameFullScreen.isDelaying)\r\n            return;\r\n        if (!GameFullScreen.isFullScreen)\r\n            return;\r\n        delayEvt();\r\n        exitEvt();\r\n    });\r\n    // key binding\r\n    src_window/* default.add2All */.Z.add2All('up', 'fullScreen', (evt, key) => {\r\n        if (key !== cmdKey)\r\n            return;\r\n        toggleEvt();\r\n    });\r\n    InitFullScreen();\r\n    return GameFullScreen;\r\n};\r\n/* harmony default export */ const fullScreen = (GameFullScreen);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/game.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst StartGame = (scene) => {\r\n    scene.scene.remove('game');\r\n    scene.scene.add('game', GameScene);\r\n    scene.scene.launch('game');\r\n};\r\nconst RestartGame = (scene) => {\r\n    efx.stopAll();\r\n    scene.scene.restart();\r\n};\r\nconst StopGame = (scene) => {\r\n    if (scene.scene.get('game')) {\r\n        scene.scene.setActive(false, 'game');\r\n        scene.scene.setVisible(false, 'game');\r\n        efx.stopAll();\r\n        audio.stopBgm('gameBgm');\r\n        setTimeout(() => {\r\n            if (!scene.scene.get('game'))\r\n                return;\r\n            scene.scene.remove('game');\r\n        }, 1000);\r\n    }\r\n};\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'game',\r\n            active: false\r\n        });\r\n        this.themeIdx = 0;\r\n        this.wallGap = userSetting/* View.calcRatio */.G7.calcRatio(45);\r\n        this.wallBottomGap = userSetting/* View.calcRatio */.G7.calcRatio(30);\r\n        this.matterStepForce = 0.08; // apply delta to matter force method\r\n    }\r\n    create() {\r\n        this.createWall();\r\n        this.createBgScene();\r\n        // block system\r\n        InitBlockSystem();\r\n        // input\r\n        CreateInput(this);\r\n        // audio\r\n        CreateGameAudio(this, storage);\r\n        audio.playBgm('gameBgm');\r\n        // ui\r\n        CreateGameStartCnt(this);\r\n        CreateScoreTxt(this);\r\n        CreateGameTimeTxt(this);\r\n        CreatePopUp(this);\r\n        CreateGameWarning(this);\r\n        CreateGameOver(this, this.themeIdx);\r\n        CreateEfx(this);\r\n        CreateGameOverEfx(this, gameover.newBestScoreBg);\r\n        CreateFullScreen(this);\r\n        SetDepth(fullScreen.btn, 'fullScreen');\r\n        CreateSetting(this);\r\n        // stop passive loading\r\n        StopPassiveLoading();\r\n        // // debugging\r\n        // const inspectorWidth = 255;\r\n        // PGUInspector(this, { right: window.innerWidth - inspectorWidth, top: 48 });\r\n    }\r\n    update(time, delta) {\r\n        if (!startCnt.getIsStart())\r\n            return;\r\n        ui_time.update(this, delta);\r\n        warning.update(this);\r\n        UpdateInput(delta);\r\n        UpdateAllBlocks(this, time, delta);\r\n        this.updateMatterStep(delta);\r\n    }\r\n    createWall() {\r\n        // set matter walls\r\n        const wallThickness = this.wallGap * 5;\r\n        this.matter.world.setBounds(this.wallGap, 0, userSetting/* View.w */.G7.w - (this.wallGap * 2), userSetting/* View.h */.G7.h - this.wallGap, wallThickness, true, true, false, true);\r\n        // create block spawn support wall\r\n        const supportLeft = this.matter.add.rectangle(0, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const supportRight = this.matter.add.rectangle(userSetting/* View.w */.G7.w, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        const btnList = ['btnGreen', 'btnBrown', 'btnBlue'];\r\n        this.themeIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        const leftWall = this.add.tileSprite(0, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const rightWall = this.add.tileSprite(userSetting/* View.w */.G7.w - this.wallGap, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const bottomWall = this.add.image(0, userSetting/* View.h */.G7.h - this.wallGap, btnList[this.themeIdx]).setOrigin(0).setDisplaySize(userSetting/* View.w */.G7.w, this.wallGap);\r\n        [leftWall, rightWall, bottomWall].map(wall => SetDepth(wall, 'wall'));\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                leftWall.tilePositionY += 1;\r\n                rightWall.tilePositionY -= 1;\r\n            }\r\n        });\r\n    }\r\n    createBgScene() {\r\n        const bgColor = (0,math/* GetRndColor */.k8)();\r\n        // select bg color\r\n        this.cameras.main.setBackgroundColor(bgColor);\r\n        // select cloud shape\r\n        this.cloudGroup = this.add.group({\r\n            defaultKey: 'cloud',\r\n            maxSize: 15\r\n        });\r\n        this.spawnCloud();\r\n        // select tree shape\r\n        this.treeGroup = this.add.group({\r\n            defaultKey: 'tree',\r\n            maxSize: 15\r\n        });\r\n        this.spawnTree();\r\n        // select mist\r\n        const bgMistIdx = (0,math/* GetRndInt */.dZ)(1, 4);\r\n        const bgMist = this.add.tileSprite(this.wallGap, userSetting/* View.h */.G7.h - this.wallGap, userSetting/* View.w */.G7.w - (this.wallGap * 2), this.wallGap, 'mist' + bgMistIdx);\r\n        bgMist.setOrigin(0, 1);\r\n        bgMist.setAlpha(0.4);\r\n        SetDepth(bgMist, 'mist');\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                bgMist.tilePositionX += 0.5;\r\n            }\r\n        });\r\n    }\r\n    spawnCloud() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.cloudGroup.children.iterate((cloud) => {\r\n                    // chck deatline\r\n                    if (cloud.x > userSetting/* View.w */.G7.w)\r\n                        this.cloudGroup.killAndHide(cloud);\r\n                    // move clouds\r\n                    cloud.x += cloud.moveGapX;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const cloud = this.cloudGroup.get();\r\n                if (!cloud)\r\n                    return;\r\n                cloud.setTexture('cloud' + (0,math/* GetRndInt */.dZ)(1, 10));\r\n                cloud.setPosition(-cloud.width, (0,math/* GetRndInt */.dZ)(userSetting/* View.centerY */.G7.centerY, userSetting/* View.centerY */.G7.centerY - userSetting/* View.centerY */.G7.centerY / 2));\r\n                cloud.setOrigin(0, 0.5);\r\n                cloud.setActive(true);\r\n                cloud.setAlpha(0.4);\r\n                cloud.moveGapX = (0,math/* GetRndNum */.hg)(0.2, 3);\r\n                SetDepth(cloud, 'cloud');\r\n                cloud.setVisible(true);\r\n                this.spawnCloud();\r\n            }\r\n        });\r\n    }\r\n    spawnTree() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.treeGroup.children.iterate((tree) => {\r\n                    // chck deatline\r\n                    if (tree.x < -tree.width)\r\n                        this.treeGroup.killAndHide(tree);\r\n                    // move clouds\r\n                    tree.x -= 0.5;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const tree = this.treeGroup.get();\r\n                if (!tree)\r\n                    return;\r\n                tree.setTexture('tree' + (0,math/* GetRndInt */.dZ)(1, 36));\r\n                tree.setPosition(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h - this.wallGap);\r\n                tree.setOrigin(0, 1);\r\n                tree.setActive(true);\r\n                tree.setAlpha(0.2);\r\n                SetDepth(tree, 'tree');\r\n                tree.setVisible(true);\r\n                this.spawnTree();\r\n            }\r\n        });\r\n    }\r\n    updateMatterStep(delta) { this.matter.world.step(delta); }\r\n}\r\n/* harmony default export */ const game = (GameScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/gameover.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameOver = {\r\n    overTxt: null,\r\n    layer: null,\r\n    newBestScoreBgScaleW: 2.4,\r\n    newBestScoreBgScaleH: 3.2,\r\n    newBestScoreBg: null,\r\n    newBestScoreTxt: null,\r\n    newBestScoreNum: null,\r\n    data: {\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    },\r\n    animCommonOver: function (scene, sndKey, txt) {\r\n        system.setIsGameOver(true);\r\n        audio.playSfx(sndKey);\r\n        const overSnd = scene.sound.get(sndKey);\r\n        const overSndTiming = overSnd.duration / 2 * 1000 - 100;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: overSndTiming, duration: overSndTiming,\r\n            onStart: () => {\r\n                this.overTxt.setVisible(true);\r\n                this.overTxt.setText(txt + '\\n');\r\n            },\r\n            onComplete: () => {\r\n                this.overTxt.setText(txt + '\\nOver');\r\n                setTimeout(() => {\r\n                    this.animShow(scene, {\r\n                        title: txt + ' Over',\r\n                        bonusTime: ui_score.getBonusTimeScore(),\r\n                        score: ui_score.getScore(),\r\n                        finalScore: ui_score.getFinalScore()\r\n                    });\r\n                }, 1000);\r\n            }\r\n        });\r\n    },\r\n    animTimeOver: function (scene) { this.animCommonOver(scene, 'voiceTimeOver', 'Time'); },\r\n    animGameOver: function (scene) { this.animCommonOver(scene, 'voiceGameOver', 'Game'); },\r\n    animShow: function (scene, data) {\r\n        // set default data for performance\r\n        this.show({\r\n            title: data.title,\r\n            bonusTime: 0,\r\n            score: 0,\r\n            finalScore: 0\r\n        });\r\n        // anim to bonus time & score\r\n        const prevBestScore = GetLocalStorageItem(storage, 'best');\r\n        const { score, bonusTime, finalScore } = data;\r\n        ui_score.compareNormalAndBest(finalScore); // test\r\n        const twList = [];\r\n        const sfxCommonTwConfig = {\r\n            // updating score sfx\r\n            from: 0, to: score, duration: 100, repeat: 9,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            onRepeat: () => { audio.playSfx('voiceScore'); }\r\n        };\r\n        const scaleCommonTwConfig = {\r\n            from: 1, to: 1.3, duration: 500, yoyo: true, ease: 'Back.easeInOut',\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n        };\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score\r\n            from: 0, to: score, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update bonus time\r\n            from: 0, to: bonusTime, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score via bonus time (final score)\r\n            from: score, to: finalScore, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                // show new best score performance if score is better than prev best one\r\n                if (finalScore > prevBestScore)\r\n                    this.newBestScoreTxt.show(finalScore);\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n    },\r\n    show: function (data) {\r\n        data && this.setTxtData(data);\r\n        this.layer.setVisible(true);\r\n        return this;\r\n    },\r\n    hide: function () {\r\n        this.layer.setVisible(false);\r\n        this.newBestScoreTxt.hide();\r\n        return this;\r\n    },\r\n    setTxtData: function (data) {\r\n        this.data = data;\r\n        const { title, bonusTime, score, finalScore } = this.data;\r\n        this.layer.titleTxt.setText(title);\r\n        this.layer.timeTxt.setText(bonusTime);\r\n        this.layer.scoreTxt.setText(score);\r\n    },\r\n};\r\nconst InitGameOver = () => {\r\n    GameOver.setTxtData({\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    });\r\n    GameOver.hide();\r\n    GameOver.overTxt.setVisible(false);\r\n};\r\nconst ContextTxtGapH = userSetting/* View.h */.G7.h / 18;\r\nconst BtnGapW = userSetting/* View.w */.G7.w / 8;\r\nconst CreateGameOver = (scene, themeIdx) => {\r\n    const themeColorList = ['Green', 'Brown', 'Blue'];\r\n    const color = themeColorList[themeIdx];\r\n    GameOver.overTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '').setVisible(false);\r\n    GameOver.layer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    const bg = scene.add.image(0, 0, 'blackScreen');\r\n    bg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    bg.setInteractive();\r\n    bg.setAlpha(0.4);\r\n    const context = scene.add.image(0, 0, 'panel' + color);\r\n    context.setDisplaySize(userSetting/* View.w */.G7.w - ContextMarginW, userSetting/* View.h */.G7.h - ContextMarginH);\r\n    const titleBg = scene.add.image(0, -userSetting/* View.h */.G7.h / 4, 'btn' + color).setScale(1.8);\r\n    const title = scene.add.text(titleBg.x, titleBg.y, 'Game Over');\r\n    GameOver.layer.titleTxt = title;\r\n    const bonusTime = scene.add.text(0, -ContextTxtGapH, 'Bonus Time');\r\n    const bonusTimeTxt = scene.add.text(0, bonusTime.y + ContextTxtGapH, '0');\r\n    GameOver.layer.timeTxt = bonusTimeTxt;\r\n    const score = scene.add.text(0, ContextTxtGapH, 'Score');\r\n    const scoreTxt = scene.add.text(0, score.y + ContextTxtGapH, 'Score');\r\n    GameOver.layer.scoreTxt = scoreTxt;\r\n    [GameOver.overTxt, title, bonusTime, bonusTimeTxt, score, scoreTxt].map((ele) => {\r\n        SetFont2CommonContextStyle(ele);\r\n    });\r\n    GameOver.overTxt.setFontSize(TxtOverHeadSize);\r\n    title.setFontSize(TxtTitleHeadSize);\r\n    const titleBtn = scene.add.image(-BtnGapW, userSetting/* View.h */.G7.h / 4, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const titleBtnImg = scene.add.image(titleBtn.x, titleBtn.y - 4, 'overBack').setInteractive();\r\n    const titleFuncDown = () => {\r\n        titleBtn.setTexture('overBtnDown' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y + 4);\r\n    };\r\n    const titleFuncUp = () => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        StopGame(scene);\r\n        StartTitle(scene);\r\n    };\r\n    const titleFuncOut = (ptr) => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n    };\r\n    titleBtn.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtnImg.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtn.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtnImg.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtn.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    titleBtnImg.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    const retryBtn = scene.add.image(BtnGapW, titleBtn.y, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const retryBtnImg = scene.add.image(retryBtn.x, retryBtn.y - 4, 'overRetry').setInteractive();\r\n    const retryFuncDown = () => {\r\n        retryBtn.setTexture('overBtnDown' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y + 4);\r\n    };\r\n    const retryFuncUp = () => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        RestartGame(scene);\r\n    };\r\n    const retryFuncOut = (ptr) => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n    };\r\n    retryBtn.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtnImg.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtn.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtnImg.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtn.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    retryBtnImg.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    GameOver.layer.add([\r\n        bg,\r\n        context,\r\n        titleBg, title,\r\n        bonusTime, bonusTimeTxt,\r\n        score, scoreTxt,\r\n        titleBtn, titleBtnImg,\r\n        retryBtn, retryBtnImg,\r\n    ]);\r\n    GameOver.newBestScoreBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, 'btn' + color);\r\n    GameOver.newBestScoreBg.setScale(GameOver.newBestScoreBgScaleW, GameOver.newBestScoreBgScaleH);\r\n    GameOver.newBestScoreTxt = scene.add.text(GameOver.newBestScoreBg.x, GameOver.newBestScoreBg.y - 6, '      New\\nBest Score!');\r\n    SetFont2CommonContextStyle(GameOver.newBestScoreTxt);\r\n    GameOver.newBestScoreTxt.setFontSize(TxtTitleHeadSize);\r\n    GameOver.newBestScoreTxt.setFontFamily('Arial Black');\r\n    GameOver.newBestScoreTxt.show = () => {\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setScale(0.1);\r\n        GameOver.newBestScoreBg.setVisible(true);\r\n        GameOver.newBestScoreTxt.setVisible(true);\r\n        // GameAudio.playSfx('gearAnim');\r\n        scene.tweens.addCounter({\r\n            from: 0.1, to: 1, duration: 800, ease: 'Back.easeInOut',\r\n            onUpdate: (tw, twData) => {\r\n                const value = twData.value;\r\n                GameOver.newBestScoreBg.setScale(value * GameOver.newBestScoreBgScaleW, value * GameOver.newBestScoreBgScaleH);\r\n                GameOver.newBestScoreTxt.setScale(value);\r\n            },\r\n            onComplete: () => {\r\n                efx.animNewBest();\r\n            }\r\n        });\r\n    };\r\n    GameOver.newBestScoreTxt.hide = () => {\r\n        GameOver.newBestScoreBg.setVisible(false);\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setVisible(false);\r\n        GameOver.newBestScoreTxt.setScale(1);\r\n    };\r\n    GameOver.newBestScoreTxt.hide();\r\n    SetDepth(GameOver.overTxt, 'txt');\r\n    SetDepth(GameOver.layer, 'gameOver');\r\n    SetDepth(GameOver.newBestScoreBg, 'newBest');\r\n    SetDepth(GameOver.newBestScoreTxt, 'newBest');\r\n    InitGameOver();\r\n    return GameOver;\r\n};\r\n/* harmony default export */ const gameover = (GameOver);\r\n\r\n\n// EXTERNAL MODULE: ./src/utils/etc.ts\nvar etc = __webpack_require__(663);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/circle.ts\n\r\n\r\nconst RndCircleImgTexture = ['blueBall', 'greenBall', 'brownBall'];\r\nconst GetCircleShape = () => {\r\n    const RadiusValue = 60;\r\n    const Radius = userSetting/* View.calcRatio */.G7.calcRatio(RadiusValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Circle(Radius / 2, Radius / 2, Radius),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Circle.Contains,\r\n        score: (RadiusValue ** 2) * 3 / 100,\r\n        bodyConfig: {\r\n            type: 'circle',\r\n            radius: Radius,\r\n            offset: { x: Radius / 2, y: Radius / 2 }\r\n        },\r\n        imgTexture: RndCircleImgTexture[(0,math/* GetRndInt */.dZ)(0, RndCircleImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Radius * 2, Radius * 2);\r\n            block.getPhysicsCon().setCircle(Radius);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const circle = (GetCircleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/rectangle.ts\n\r\n\r\nconst RndRectImgTexture = ['blueRect', 'greenRect', 'brownRect'];\r\nconst GetRectangleShape = () => {\r\n    const ShortSideValue = 100;\r\n    const LongSideValue = ShortSideValue + ShortSideValue / 2;\r\n    const ShortSide = userSetting/* View.calcRatio */.G7.calcRatio(ShortSideValue);\r\n    const LongSide = userSetting/* View.calcRatio */.G7.calcRatio(LongSideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(ShortSide / 2, LongSide / 2, ShortSide, LongSide),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: ShortSideValue * LongSideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: ShortSide,\r\n            height: LongSide,\r\n            offset: { x: ShortSide / 2, y: LongSide / 2 }\r\n        },\r\n        imgTexture: RndRectImgTexture[(0,math/* GetRndInt */.dZ)(0, RndRectImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(ShortSide, LongSide);\r\n            block.getPhysicsCon().setSize(ShortSide, LongSide);\r\n            // block.input && block.input.hitArea.setTo(ShortSide, LongSide);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const rectangle = (GetRectangleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/square.ts\n\r\n\r\nconst RndSquareImgTexture = ['blueSquare', 'greenSquare', 'brownSquare'];\r\nconst GetSquareShape = () => {\r\n    const SideValue = 100;\r\n    const Side = userSetting/* View.calcRatio */.G7.calcRatio(SideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(Side / 2, Side / 2, Side, Side),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: SideValue * SideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: Side,\r\n            height: Side,\r\n            offset: { x: Side / 2, y: Side / 2 }\r\n        },\r\n        imgTexture: RndSquareImgTexture[(0,math/* GetRndInt */.dZ)(0, RndSquareImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Side, Side);\r\n            block.getPhysicsCon().setSize(Side, Side);\r\n            // block.input && block.input.hitArea.setTo(Side, Side);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const square = (GetSquareShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/index.ts\n\r\n\r\n\r\n\r\nconst ShapeTypeNameList = ['ball', 'rect', 'square',];\r\nconst ShapeTypePropertiesList = [\r\n    circle(), rectangle(), square(),\r\n];\r\nconst CommonPtrEvt = {\r\n    ptrDown: function (block) {\r\n        console.log('common ptr down');\r\n    },\r\n    ptrUp: function (block) {\r\n        console.log('common ptr up');\r\n    },\r\n    ptrOut: function (block) {\r\n        console.log('common ptr out');\r\n    },\r\n};\r\nconst PtrEvtList = ['ptrDown', 'ptrUp', 'drag', 'dragEnd'];\r\nconst ShapeTypeList = ShapeTypeNameList.map((ele, idx) => {\r\n    var _a;\r\n    // setting block data with common evt\r\n    let bData = (_a = ShapeTypePropertiesList[idx]) === null || _a === void 0 ? void 0 : _a.bData;\r\n    if (!bData)\r\n        bData = Object.assign({}, CommonPtrEvt);\r\n    else {\r\n        PtrEvtList.map((ptrEvt) => {\r\n            let tmpPrevFunc = bData[ptrEvt];\r\n            if (tmpPrevFunc) {\r\n                ShapeTypePropertiesList[idx].bData[ptrEvt] = (block) => {\r\n                    CommonPtrEvt[ptrEvt](block);\r\n                    tmpPrevFunc(block);\r\n                };\r\n            }\r\n        });\r\n    }\r\n    return Object.assign({ typeName: ele }, ShapeTypePropertiesList[idx]);\r\n});\r\nconst ShapeSystem = {\r\n    getCertainShape: function (shapeTypeName) {\r\n        return ShapeTypeList.find((ele) => ele.typeName === shapeTypeName);\r\n    },\r\n    getRndShape: function () { return (0,etc/* GetRndEleFromArray */.fB)(ShapeTypeList); },\r\n};\r\nconst SetBlockShape = (block, typeName) => {\r\n    if (!typeName)\r\n        block.setShape(ShapeSystem.getRndShape());\r\n    else\r\n        block.setShape(ShapeSystem.getCertainShape(typeName));\r\n    block.setShapeName(block.getShape().typeName);\r\n    block.getPhysicsCon().setBody(block.getShape().bodyConfig);\r\n    block.getShapeImg().setTexture(block.getShape().imgTexture);\r\n    block.getShape().setImgDisplaySize(block);\r\n    if (block.getShape().bData)\r\n        block.addBlockData(block.getShape().bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const shape = ((/* unused pure expression or super */ null && (ShapeSystem)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/system.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst BlockSystem = {\r\n    // manage block list\r\n    onScreenList: [],\r\n    standbyList: [],\r\n    // static postion of block\r\n    standbyPosX: -500,\r\n    standbyPosY: -500,\r\n    leftX: 0,\r\n    rightX: userSetting/* View.w */.G7.w,\r\n    bottomY: 0,\r\n    spawnY: -200,\r\n    getRndSpawnX: function () { return (0,math/* GetRndInt */.dZ)(this.leftX, this.rightX); },\r\n    getRndAngle: function () { return (0,math/* GetRndInt */.dZ)(0, 360); },\r\n    // game over related properties\r\n    overLineY: 0,\r\n    overCnt: 0,\r\n    overCntMax: 8 * 1000,\r\n    overMaxBlock: 8,\r\n    isGameOver: false,\r\n    getIsGameOver: function () { return this.isGameOver; },\r\n    setIsGameOver: function (isOver) { return this.isGameOver = isOver; },\r\n    // responsive spawning block time\r\n    nextSpawnTime: 0,\r\n    spawnDelayBySecList: [800, 950, 1100, 1250, 1400, 1550],\r\n    spawnDelayBySec: 1800,\r\n};\r\nconst InitBlockSystem = () => {\r\n    RemoveAllBlockOnDisplay();\r\n    BlockSystem.setIsGameOver(false);\r\n    BlockSystem.nextSpawnTime = ui_time.init;\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[5];\r\n};\r\nconst AddCertainBlock = (scene, typeName) => {\r\n    let block;\r\n    // get block from standy list or create new one\r\n    if (BlockSystem.standbyList.length > 0) {\r\n        block = BlockSystem.standbyList.shift();\r\n        if (!block.scene) { // is block scene removed?\r\n            block.destroy();\r\n            block = new basic(scene);\r\n        }\r\n    }\r\n    else\r\n        block = new basic(scene);\r\n    // set block shape & type, push to on screen list & spawn\r\n    SetBlockShape(block);\r\n    Set2TypeBlock(block, typeName);\r\n    BlockSystem.onScreenList.push(block);\r\n    SpawnBlock(block);\r\n    return block;\r\n};\r\nconst AddObstacleBlock = (block) => {\r\n    block.scene.cameras.main.shake(200, 0.02, true);\r\n    audio.playSfx('spawnObstacleSfx');\r\n    AddCertainBlock(block.scene, 'obstacle');\r\n    return block;\r\n};\r\nconst GetRndBlockType = () => {\r\n    // get random block type via spawn chance\r\n    let distributionArr = [];\r\n    BlockUniqueProperties.map((ele) => {\r\n        // ele.spawnChance = ele.spawnChance / SpawnMaxChance;\r\n        if (ele.spawnChance === 0)\r\n            return;\r\n        for (let i = 0; i < ele.spawnChance; i++) {\r\n            distributionArr.push(ele.typeName);\r\n        }\r\n    });\r\n    return distributionArr[(0,math/* GetRndInt */.dZ)(0, distributionArr.length)];\r\n};\r\nconst AddRndBlock = (scene) => {\r\n    const rndType = GetRndBlockType();\r\n    AddCertainBlock(scene, rndType);\r\n};\r\nconst ClearBlock = (block, score) => {\r\n    if (!block)\r\n        return;\r\n    let blockScore = score ? score : block.getScore();\r\n    ui_score.add(blockScore);\r\n    efx.animScore(block, blockScore);\r\n    const { value, chance } = block.getTimeIncrease();\r\n    if (ui_time.curr > ui_time.last10 && chance > (0,math/* GetRndNum */.hg)(0, 100)) {\r\n        ui_time.increaseTime(value);\r\n        efx.animTimeIncrease(block, chance, value);\r\n    }\r\n    RemoveBlock(block);\r\n};\r\nconst RemoveBlock = (block) => {\r\n    // remove from onScreenList\r\n    BlockSystem.onScreenList = BlockSystem.onScreenList.filter(screenBlock => screenBlock.id !== block.id);\r\n    if (!block.scene) {\r\n        block.destroy();\r\n        return;\r\n    }\r\n    // chck is already in standby list\r\n    if (BlockSystem.standbyList.some(standbyBlock => standbyBlock.id === block.id))\r\n        return;\r\n    DeathBlock(block);\r\n    block.setPosition(BlockSystem.standbyPosX, BlockSystem.standbyPosY);\r\n    BlockSystem.standbyList.push(block);\r\n};\r\nconst RemoveAllBlockOnDisplay = () => {\r\n    if (!BlockSystem.onScreenList)\r\n        return;\r\n    BlockSystem.onScreenList.map((block) => { RemoveBlock(block); });\r\n    BlockSystem.onScreenList = [];\r\n    if (!BlockSystem.standbyList)\r\n        return;\r\n    BlockSystem.standbyList = BlockSystem.standbyList.filter((standbyBlock) => {\r\n        if (!standbyBlock.scene) {\r\n            standbyBlock.destroy();\r\n        }\r\n        else\r\n            return standbyBlock;\r\n    });\r\n};\r\nconst UpdateBlockChckIsGameOver = (scene, time, delta) => {\r\n    // chck every block which is game over border line\r\n    const isOverBorderLine = BlockSystem.onScreenList.some((screenBlock) => {\r\n        if (!screenBlock)\r\n            return false;\r\n        return screenBlock.y < BlockSystem.overLineY;\r\n    });\r\n    // block count is over max & at least one block cross game over border line\r\n    if (isOverBorderLine && BlockSystem.onScreenList.length > BlockSystem.overMaxBlock) {\r\n        BlockSystem.overCnt += delta * ui_time.timeScale;\r\n        // game over condition\r\n        if (BlockSystem.overCnt > BlockSystem.overCntMax) {\r\n            BlockSystem.overCnt = 0;\r\n            BlockSystem.setIsGameOver(true);\r\n            gameover.animGameOver(scene);\r\n        }\r\n        else\r\n            BlockSystem.setIsGameOver(false);\r\n    }\r\n    else {\r\n        // init game over warning properties\r\n        BlockSystem.overCnt = 0;\r\n        BlockSystem.setIsGameOver(false);\r\n    }\r\n};\r\nconst UpdateSpawnBlocks = (scene, delta) => {\r\n    // get game time & timeline idx calculate\r\n    const gameTimeCurr = ui_time.getCurr();\r\n    let timelineIdx = parseInt((gameTimeCurr / 1000 / 10).toString());\r\n    if (timelineIdx < 0)\r\n        timelineIdx = 0;\r\n    if (timelineIdx >= BlockSystem.spawnDelayBySecList.length) {\r\n        timelineIdx = BlockSystem.spawnDelayBySecList.length - 1;\r\n    }\r\n    // adjust responsive spawn block time\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[timelineIdx];\r\n    // spawn block\r\n    BlockSystem.nextSpawnTime += delta * ui_time.timeScale;\r\n    if (BlockSystem.nextSpawnTime > BlockSystem.spawnDelayBySec) {\r\n        BlockSystem.nextSpawnTime = 0;\r\n        AddRndBlock(scene);\r\n    }\r\n    ;\r\n};\r\nconst UpdateAllBlocks = (scene, time, delta) => {\r\n    if (BlockSystem.getIsGameOver())\r\n        return;\r\n    UpdateBlockChckIsGameOver(scene, time, delta);\r\n    BlockSystem.onScreenList.map(block => UpdateBlock(block, time, delta));\r\n    UpdateSpawnBlocks(scene, delta);\r\n};\r\n/* harmony default export */ const system = (BlockSystem);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/time.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameTime = {\r\n    txt: null,\r\n    last10Txt: null,\r\n    last10PrevTime: 11,\r\n    isLast10HasOnceCnt: true,\r\n    isGameTimeEndOnceCnt: true,\r\n    isFirstLast10HasOnceCnt: true,\r\n    standbyTime: 3 * 1000,\r\n    init: 60 * 1000,\r\n    curr: 60 * 1000,\r\n    last10: 10 * 1000,\r\n    increasedTime: 0,\r\n    // anim option\r\n    animIncreaseTimeDuration: 400,\r\n    animTw: null,\r\n    animTwScaleMin: 1,\r\n    animTwScaleMax: 1.4,\r\n    isTwing: false,\r\n    // time scale option\r\n    timeScale: 1,\r\n    showSettingTimeScale: 0.1,\r\n    hideSettingTimeScale: 1,\r\n    sndLast10Voice: function (scene, time) {\r\n        // scene.sound.play('voice' + time);\r\n        audio.playSfx('voice' + time);\r\n        this.last10Txt.setText(time);\r\n    },\r\n    increaseTime: function (time) {\r\n        // last 10 seconds left so increasing time is useless\r\n        if (!this.isFirstLast10HasOnceCnt)\r\n            return;\r\n        this.curr += time;\r\n        this.increasedTime += time;\r\n        return this;\r\n    },\r\n    set2Format: function (milliTime) {\r\n        // separate minute, second each\r\n        const timeSec = milliTime / 1000;\r\n        const secondSplit = timeSec.toFixed(2).split('.');\r\n        let minutes = Math.floor(timeSec / 60);\r\n        let seconds = Math.floor(Number(secondSplit[0]));\r\n        let underPointDigitNum = Number(secondSplit[1]);\r\n        if (minutes < 10)\r\n            minutes = '0' + minutes;\r\n        if (seconds < 10)\r\n            seconds = '0' + seconds;\r\n        if (underPointDigitNum < 10)\r\n            underPointDigitNum = '0' + underPointDigitNum;\r\n        const time = minutes + ':' + seconds + '.' + underPointDigitNum;\r\n        this.txt.setText(time);\r\n    },\r\n    setTimeScale: function (scene, timeScale) {\r\n        scene.matter.world.engine.timing.timeScale = timeScale;\r\n        this.timeScale = timeScale;\r\n    },\r\n    getCurr: function () { return this.curr; },\r\n    updateLast10CntAnim: function (scene) {\r\n        // stop bgm & hide setting btn & time increasing is not possible\r\n        if (this.isFirstLast10HasOnceCnt) {\r\n            this.isFirstLast10HasOnceCnt = false;\r\n            audio.pauseBgm('gameBgm');\r\n            HideSettingBtn(scene);\r\n        }\r\n        this.last10Txt.setVisible(true);\r\n        const time = Math.ceil(this.curr / 1000);\r\n        if (this.last10PrevTime !== time) {\r\n            this.isLast10HasOnceCnt = true;\r\n            this.last10PrevTime = time;\r\n        }\r\n        else\r\n            this.isLast10HasOnceCnt = false;\r\n        if (this.isLast10HasOnceCnt)\r\n            this.sndLast10Voice(scene, time);\r\n    },\r\n    update: function (scene, delta) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        if (this.curr > 0) {\r\n            this.curr -= delta * this.timeScale;\r\n            this.set2Format(this.curr);\r\n            const isUnder10Sec = this.curr > 0 && this.curr <= 10 * 1000;\r\n            isUnder10Sec && this.updateLast10CntAnim(scene, delta);\r\n            return;\r\n        }\r\n        if (this.isGameTimeEndOnceCnt) {\r\n            this.isGameTimeEndOnceCnt = false;\r\n            system.setIsGameOver(true);\r\n            this.curr = 0;\r\n            this.set2Format(0);\r\n            this.last10Txt.setVisible(false);\r\n            gameover.animTimeOver(scene);\r\n            return;\r\n        }\r\n    },\r\n    initTimeIncrease: function () {\r\n        this.increasedTime = 0;\r\n        return this.increasedTime;\r\n    },\r\n    getTimeIncrease: function () { return this.increasedTime; },\r\n    addTimeIncrease: function (time) {\r\n        this.increasedTime += time;\r\n        return this.increasedTime;\r\n    },\r\n};\r\nconst InitGameTime = () => {\r\n    GameTime.last10Txt.setVisible(false);\r\n    GameTime.last10PrevTime = 11;\r\n    GameTime.isLast10HasOnceCnt = true;\r\n    GameTime.isGameTimeEndOnceCnt = true;\r\n    GameTime.curr = GameTime.init;\r\n    GameTime.increasedTime = 0;\r\n    GameTime.timeScale = 1;\r\n    GameTime.initTimeIncrease();\r\n};\r\nconst CreateGameTimeTxt = (scene) => {\r\n    const initX = TxtMargin / 2 + 46;\r\n    GameTime.txt = scene.add.text(initX, TxtMargin - 10, '');\r\n    GameTime.txt.setAlpha(TxtAlpha);\r\n    GameTime.txt.setOrigin(0, 0);\r\n    GameTime.txt.setFontSize(TxtSize);\r\n    GameTime.txt.setBackgroundColor(TxtBackgroundColor);\r\n    GameTime.last10Txt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '');\r\n    GameTime.last10Txt.setAlpha(0.5);\r\n    GameTime.last10Txt.setOrigin(0.5, 0.5);\r\n    GameTime.last10Txt.setFontSize(userSetting/* View.w */.G7.w / 2);\r\n    GameTime.last10Txt.setVisible(false);\r\n    [GameTime.txt, GameTime.last10Txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setFontFamily(TxtFamily);\r\n        SetDepth(txt, 'txt');\r\n    });\r\n    InitGameTime();\r\n};\r\nconst SetmillieSec2SecTimeFormat = (millieSec) => {\r\n    const sec = (millieSec / 1000).toFixed(2) + ' sec';\r\n    return sec;\r\n};\r\n/* harmony default export */ const ui_time = (GameTime);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/gage/index.ts\n\r\n\r\n\r\nconst GameGageColorList = ['blue', 'red', 'yellow'];\r\nconst GameGage = {\r\n    height: 20,\r\n    txtMargin: 30,\r\n    gages: [],\r\n    color: 'blue',\r\n};\r\nconst GetGageAssets = (color, exceptionKeys) => {\r\n    let assetList = [];\r\n    if (color) {\r\n        GameGage.color = color;\r\n        assetList = [\r\n            { key: color + 'Bg', url: CommonGage + color + 'Bg.png', type: 'image' },\r\n            { key: color + 'Btn', url: CommonGage + color + 'Btn.png', type: 'image' },\r\n            { key: color + 'HandleDown', url: CommonGage + color + 'HandleDown.png', type: 'image' },\r\n            { key: color + 'HandleUp', url: CommonGage + color + 'HandleUp.png', type: 'image' },\r\n        ];\r\n    }\r\n    else {\r\n        GameGageColorList.map((gageColor) => {\r\n            assetList.push({ key: gageColor + 'Bg', url: CommonGage + gageColor + 'Bg.png', type: 'image' }, { key: gageColor + 'Btn', url: CommonGage + gageColor + 'Btn.png', type: 'image' }, { key: gageColor + 'HandleDown', url: CommonGage + gageColor + 'HandleDown.png', type: 'image' }, { key: gageColor + 'HandleUp', url: CommonGage + gageColor + 'HandleUp.png', type: 'image' });\r\n        });\r\n    }\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitGage = (name) => {\r\n    const gageLayer = GameGage.gages.find(gage => gage.name === name);\r\n    if (gageLayer) {\r\n        // namedGage\r\n    }\r\n};\r\nconst CreateGageBar = (scene, x, y, endMoveCallback, data) => {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\r\n    const layer = scene.add.layer();\r\n    // setting parameter init data\r\n    layer.x = x;\r\n    layer.y = y;\r\n    layer.gageNumMin = (_a = data === null || data === void 0 ? void 0 : data.numMin) !== null && _a !== void 0 ? _a : 0;\r\n    layer.gageNumMax = (_b = data === null || data === void 0 ? void 0 : data.numMin) !== null && _b !== void 0 ? _b : 100;\r\n    layer.gageNum = (layer.gageNumMin + layer.gageNumMax) / 2;\r\n    layer.isAble = (_c = data === null || data === void 0 ? void 0 : data.isAble) !== null && _c !== void 0 ? _c : true;\r\n    const color = (_d = data === null || data === void 0 ? void 0 : data.color) !== null && _d !== void 0 ? _d : GameGage.color;\r\n    const w = (_e = data === null || data === void 0 ? void 0 : data.width) !== null && _e !== void 0 ? _e : userSetting/* View.centerX */.G7.centerX;\r\n    const h = (_f = data === null || data === void 0 ? void 0 : data.height) !== null && _f !== void 0 ? _f : GameGage.height;\r\n    const bgTexture = (_g = data === null || data === void 0 ? void 0 : data.bgTxture) !== null && _g !== void 0 ? _g : color + 'Bg';\r\n    const btnTexture = (_h = data === null || data === void 0 ? void 0 : data.btnTexture) !== null && _h !== void 0 ? _h : color + 'Btn';\r\n    const handleUpTexture = (_k = (_j = data === null || data === void 0 ? void 0 : data.handle) === null || _j === void 0 ? void 0 : _j.upTexture) !== null && _k !== void 0 ? _k : color + 'HandleUp';\r\n    const handleDownTexture = (_m = (_l = data === null || data === void 0 ? void 0 : data.handle) === null || _l === void 0 ? void 0 : _l.upTexture) !== null && _m !== void 0 ? _m : color + 'HandleDown';\r\n    const txtX = (_p = (_o = data === null || data === void 0 ? void 0 : data.txt) === null || _o === void 0 ? void 0 : _o.x) !== null && _p !== void 0 ? _p : userSetting/* View.centerX */.G7.centerX / 2 + GameGage.txtMargin;\r\n    const txtY = (_r = (_q = data === null || data === void 0 ? void 0 : data.txt) === null || _q === void 0 ? void 0 : _q.y) !== null && _r !== void 0 ? _r : 0;\r\n    const gageBg = scene.add.image(0, 0, bgTexture);\r\n    gageBg.setDisplaySize(w, h);\r\n    const gageBar = scene.add.image(0, 0, btnTexture);\r\n    gageBar.setDisplaySize(userSetting/* View.centerX */.G7.centerX / 2, GameGage.height);\r\n    gageBar.setOrigin(0, 0.5);\r\n    gageBar.setPosition(-userSetting/* View.centerX */.G7.centerX / 2, 0);\r\n    const gageBarHandle = scene.add.image(0, 0, handleUpTexture);\r\n    const gageTxt = scene.add.text(0, -GameGage.height, layer.gageNum.toString());\r\n    gageTxt.setPosition(txtX, txtY);\r\n    font_SetFontStyle(gageTxt);\r\n    layer.gagePosX = 0; // default middle value\r\n    layer.gagePosXMin = -gageBg.width / 2 + gageBarHandle.width / 2;\r\n    layer.gagePosXMax = gageBg.width / 2;\r\n    layer.gagePosXLength = gageBg.width - gageBarHandle.width / 2;\r\n    layer.setGageHandleFrame = (isDown) => {\r\n        gageBarHandle.setTexture(isDown ? handleDownTexture : handleUpTexture);\r\n    };\r\n    layer.setGageBarSize = (gagePos) => {\r\n        let gagePosX = gagePos - layer.x;\r\n        if (gagePosX <= layer.gagePosXMin)\r\n            gagePosX = layer.gagePosXMin;\r\n        else if (gagePosX >= layer.gagePosXMax)\r\n            gagePosX = layer.gagePosXMax;\r\n        layer.gagePosX = gagePosX;\r\n        layer.gageNum = Math.floor((layer.gageNumMax - layer.gageNumMin) * Math.abs(gagePosX - layer.gagePosXMin) / layer.gagePosXLength);\r\n        layer.updateGage();\r\n    };\r\n    layer.setGageNum = (gageNum) => {\r\n        let gageNumber = gageNum;\r\n        if (gageNumber < layer.gageNumMin)\r\n            gageNumber = layer.gageNumMin;\r\n        else if (gageNumber > layer.gageNumMax)\r\n            gageNumber = layer.gageNumMax;\r\n        layer.gageNum = gageNumber;\r\n        layer.gagePosX = layer.gagePosXMin + (layer.gageNum / (layer.gageNumMax - layer.gageNumMin) * layer.gagePosXLength);\r\n        layer.updateGage();\r\n    };\r\n    layer.updateGage = () => {\r\n        gageBar.setDisplaySize(layer.gagePosX + gageBar.width / 2, GameGage.height);\r\n        gageBarHandle.x = layer.gagePosX + gageBar.width - gageBarHandle.width / 2;\r\n        gageTxt.setText(layer.gageNum.toFixed(0));\r\n    };\r\n    layer.setAble = (isAble) => {\r\n        layer.isAble = isAble;\r\n        layer.isAble ? layer.setAlpha(1) : layer.setAlpha(0.5);\r\n        return layer.isAble;\r\n    };\r\n    const dragStart = () => {\r\n        layer.isAble && layer.setGageHandleFrame(true);\r\n    };\r\n    const dragging = (dragX) => {\r\n        layer.isAble && layer.setGageBarSize(dragX);\r\n    };\r\n    const dragEnd = () => {\r\n        if (layer.isAble) {\r\n            layer.setGageHandleFrame(false);\r\n            endMoveCallback && endMoveCallback(layer.gageNumMin, layer.gageNumMax, layer.gageNum);\r\n        }\r\n    };\r\n    [gageBg, gageBar].map((bar) => {\r\n        bar.setInteractive({ draggable: true });\r\n        bar.on('dragstart', (ptr) => {\r\n            dragStart();\r\n            dragging(ptr.x);\r\n        });\r\n        bar.on('drag', (ptr, dragX) => { dragging(ptr.x); });\r\n        bar.on('dragend', (ptr) => { dragEnd(); });\r\n    });\r\n    gageBarHandle.setInteractive({ draggable: true });\r\n    gageBarHandle.on('dragstart', () => { dragStart(); });\r\n    gageBarHandle.on('drag', (ptr, dragX) => { dragging(dragX); });\r\n    gageBarHandle.on('dragend', () => { dragEnd(); });\r\n    layer.setAble(layer.isAble);\r\n    [gageBg, gageBar, gageBarHandle, gageTxt].map((child) => {\r\n        child.setPosition(child.x + x, child.y + y);\r\n        layer.add(child);\r\n    });\r\n    GameGage.gages.push(layer);\r\n    InitGage(layer.name);\r\n    return layer;\r\n};\r\n/* harmony default export */ const gage = ((/* unused pure expression or super */ null && (GameGage)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/setting.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Setting = {\r\n    btn: null,\r\n    layer: [],\r\n    layerData: {\r\n        txtGap: 50,\r\n        controlTxtList: ['FullScreen', 'Normal'],\r\n        isFullScreen: false,\r\n    },\r\n    exitBtn: null,\r\n    isOpen: false,\r\n    isTwing: false,\r\n};\r\nconst InitSetting = (scene) => {\r\n    Setting.isTwing = false;\r\n    HideSetting(scene);\r\n};\r\nconst CreateSetting = (scene) => {\r\n    const { margin, alpha, scale } = ui;\r\n    Setting.btn = scene.add.image(userSetting/* View.w */.G7.w - margin, margin, 'settingBtn');\r\n    Setting.btn.setScale(scale);\r\n    Setting.btn.setAlpha(alpha);\r\n    Setting.btn.setInteractive();\r\n    Setting.btn.on('pointerup', () => { Setting.isTwing || AnimShowSetting(scene); });\r\n    // Setting.layer = scene.add.container();\r\n    // Setting.layer = scene.add.layer();\r\n    const bg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    bg.setInteractive();\r\n    bg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    bg.setAlpha(0.4);\r\n    const panel = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'settingPanel');\r\n    panel.setDisplaySize(userSetting/* View.w */.G7.w - ContextMarginW, userSetting/* View.h */.G7.h - ContextMarginH);\r\n    const title = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - (TxtTitleHeightGap * 3), 'Setting');\r\n    SetFont2CommonContextStyle(title);\r\n    title.setFontSize(TxtTitleHeadSize);\r\n    const bgmBtn = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 6, 'musicOn');\r\n    const bgmGage = CreateGageBar(scene, userSetting/* View.centerX */.G7.centerX, bgmBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        audio.setBgmVolume(curr / 100);\r\n    });\r\n    bgmGage.setGageNum(audio.bgmVolume * 100);\r\n    const sfxBtn = scene.add.image(userSetting/* View.centerX */.G7.centerX, bgmGage.y + SettingGapContextMargin, 'audioOn');\r\n    const sfxGage = CreateGageBar(scene, userSetting/* View.centerX */.G7.centerX, sfxBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        audio.setSfxVolume(curr / 100);\r\n        audio.playSfx('gearAnim');\r\n    });\r\n    sfxGage.setGageNum(audio.sfxVolume * 100);\r\n    [bgmBtn, sfxBtn].map((btn) => {\r\n        btn.setScale(0.6);\r\n        btn.setInteractive();\r\n    });\r\n    bgmBtn.on('pointerup', () => {\r\n        const isOn = bgmBtn.texture.key === 'musicOn';\r\n        bgmGage.setAble(!isOn);\r\n        bgmBtn.setTexture(isOn ? 'musicOff' : 'musicOn');\r\n        audio.setBgmMute(isOn);\r\n    });\r\n    sfxBtn.on('pointerup', () => {\r\n        const isOn = sfxBtn.texture.key === 'audioOn';\r\n        sfxGage.setAble(!isOn);\r\n        sfxBtn.setTexture(isOn ? 'audioOff' : 'audioOn');\r\n        audio.setSfxMute(isOn);\r\n    });\r\n    bgmBtn.setTexture(audio.isBgmMute ? 'musicOff' : 'musicOn');\r\n    sfxBtn.setTexture(audio.isSfxMute ? 'audioOff' : 'audioOn');\r\n    bgmGage.setAble(!audio.isBgmMute);\r\n    sfxGage.setAble(!audio.isSfxMute);\r\n    const { txtGap } = Setting.layerData;\r\n    // add back to title btn\r\n    const back2TitleBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, sfxGage.y + SettingGapContextMarginLarger, 'settingOverBtnUp').setScale(1.2);\r\n    const back2Title = scene.add.image(back2TitleBg.x, back2TitleBg.y - 4, 'overBack');\r\n    back2Title.setScale(0.6).setInteractive();\r\n    back2Title.downPosY = back2Title.y + 4;\r\n    back2Title.upPosY = back2Title.y;\r\n    back2Title.on('pointerdown', () => {\r\n        back2TitleBg.setTexture('settingOverBtnDown');\r\n        back2Title.setPosition(back2Title.x, back2Title.downPosY);\r\n    });\r\n    back2Title.on('pointerup', () => {\r\n        audio.playSfx('gearAnim');\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n        if (back2Title.isChanging)\r\n            return;\r\n        if (!scene.scene.isActive('title')) {\r\n            StopGame(scene);\r\n            StartTitle(scene);\r\n        }\r\n        else\r\n            AnimHideSetting(scene);\r\n        setTimeout(() => { back2Title.isChanging = false; }, 500);\r\n    });\r\n    back2Title.on('pointerout', () => {\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n    });\r\n    const back2TitleTxt = scene.add.text(back2TitleBg.x, back2TitleBg.y + txtGap, 'Go to Title');\r\n    SetFont2CommonContextStyle(back2TitleTxt);\r\n    back2TitleTxt.setFontSize(16);\r\n    const back2TitleList = [back2TitleBg, back2Title, back2TitleTxt];\r\n    // // add screen size controller\r\n    // const sizeControllerBg = scene.add.image(View.centerX + controlGap, back2TitleBg.y, 'settingOverBtnUp').setScale(1.2);\r\n    // let sizeController = scene.add.image(sizeControllerBg.x, sizeControllerBg.y - 4, 'screenLarger') as TToggleBtnImg;\r\n    // sizeController.setScale(0.6).setInteractive();\r\n    // sizeController.downPosY = sizeController.y + 4;\r\n    // sizeController.upPosY = sizeController.y;\r\n    // sizeController.on('pointerdown', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnDown');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.downPosY);\r\n    // });\r\n    // const sizeControllerExitEvt = () => {\r\n    //     Setting.layerData.isFullScreen = false;\r\n    //     scene.scale.stopFullscreen();\r\n    //     sizeController.setTexture('screenLarger');\r\n    //     sizeControlTxt.setText(controlTxtList[0]);\r\n    // };\r\n    // const sizeControllerToggleEvt = () => {\r\n    //     Setting.layerData.isFullScreen = !Setting.layerData.isFullScreen;\r\n    //     if (Setting.layerData.isFullScreen) {\r\n    //         scene.scale.startFullscreen();\r\n    //         sizeController.setTexture('screenSmaller');\r\n    //         sizeControlTxt.setText(controlTxtList[1]);\r\n    //     }\r\n    //     else sizeControllerExitEvt();\r\n    // };\r\n    // sizeController.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    //     if (sizeController.isChanging) return;\r\n    //     sizeController.isChanging = true;\r\n    //     sizeControllerToggleEvt();\r\n    //     setTimeout(() => { sizeController.isChanging = false; }, 300);\r\n    // });\r\n    // sizeController.on('pointerout', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    // });\r\n    // const sizeControlTxt = scene.add.text(sizeControllerBg.x, sizeControllerBg.y + txtGap, controlTxtList[0]);\r\n    // SetFont2CommonContextStyle(sizeControlTxt);\r\n    // sizeControlTxt.setFontSize(16);\r\n    // // resize event for stop full screen\r\n    // scene.scale.off('resize');\r\n    // scene.scale.on('resize', () => {\r\n    //     if (sizeController.isChanging) return;\r\n    //     if (!Setting.layerData.isFullScreen) return;\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerExitEvt();\r\n    // });\r\n    // const sizeControllerList = [ sizeControllerBg, sizeController, sizeControlTxt ];\r\n    // const howContext = CreateHow(scene);\r\n    // const howBtn = scene.add.image(View.centerX, sizeControlTxt.y + SettingGapContextMargin, 'btnSettingUp') as TToggleBtnImg;\r\n    // howBtn.setInteractive().setScale(1);\r\n    // howBtn.downPosY = howBtn.y + 4;\r\n    // howBtn.upPosY = howBtn.y;\r\n    // howBtn.on('pointerdown', () => {\r\n    //     howBtn.setTexture('btnSettingDown');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.downPosY);\r\n    // });\r\n    // howBtn.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    //     howContext.show();\r\n    // });\r\n    // howBtn.on('pointerout', () => {\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    // });\r\n    // const howTxt = scene.add.text(howBtn.x, howBtn.y, 'how');\r\n    // SetFont2CommonContextStyle(howTxt);\r\n    // howTxt.setFontSize(TxtTitleSize);\r\n    // const howList = [ howBtn, howTxt, howContext ];\r\n    // Setting.layer.add([\r\n    //     bg, panel, title,\r\n    //     bgmBtn, sfxBtn,\r\n    //     bgmGage, sfxGage,\r\n    //     ...back2TitleList,\r\n    //     // ...sizeControllerList,\r\n    // ]);\r\n    // Setting.layer.add(\r\n    //     bg, panel, title,\r\n    //     bgmBtn, sfxBtn,\r\n    //     bgmGage, sfxGage,\r\n    //     // ...back2TitleList,\r\n    //     // ...sizeControllerList,\r\n    // );\r\n    Setting.layer.push(bg);\r\n    Setting.layer.push(panel);\r\n    Setting.layer.push(title);\r\n    Setting.layer.push(bgmBtn);\r\n    Setting.layer.push(sfxBtn);\r\n    Setting.layer.push(bgmGage);\r\n    Setting.layer.push(sfxGage);\r\n    back2TitleList.map((child) => {\r\n        Setting.layer.push(child);\r\n    });\r\n    // exit btn & last container setup\r\n    Setting.exitBtn = scene.add.image(userSetting/* View.w */.G7.w - SettingContextMargin, SettingContextMargin, 'exitBtn').setScale(0.6);\r\n    Setting.exitBtn.setInteractive();\r\n    Setting.exitBtn.on('pointerup', () => {\r\n        AnimHideSetting(scene);\r\n    });\r\n    [Setting.btn, ...Setting.layer, Setting.exitBtn].map(ele => SetDepth(ele, 'setting'));\r\n    InitSetting(scene);\r\n    return Setting;\r\n};\r\n// type TGageContainer = Phaser.GameObjects.Container & {\r\n//     gageNum: number;\r\n//     gageNumMin: number;\r\n//     gageNumMax: number;\r\n//     gagePosX: number;\r\n//     gagePosXMin: number;\r\n//     gagePosXMax: number;\r\n//     gagePosXLength: number;\r\n//     isAble: boolean;\r\n//     setGageHandleFrame: (isDown: boolean) => void;\r\n//     setGageBarSize: (gagePos: number) => void;\r\n//     setGageNum: (gageNum: number) => void;\r\n//     setGage: () => void;\r\n//     setAble: (isAble: boolean) => void;\r\n// };\r\n// const GageHeight = 20;\r\n// const CreateGageBar = (\r\n//     scene: Phaser.Scene, x: number, y: number,\r\n//     endMoveCallback?: (min: number, max: number, curr: number) => void,\r\n//     gageNumMin: number = 0, gageNumMax: number = 100,\r\n// ) => {\r\n//     const con: TGageContainer = scene.add.container(x, y) as TGageContainer;\r\n//     con.gageNumMin = gageNumMin;\r\n//     con.gageNumMax = gageNumMax;\r\n//     con.gageNum = (con.gageNumMin + con.gageNumMax) / 2;\r\n//     const gageBg = scene.add.image(0, 0, 'colorBackground');\r\n//     const gageBar = scene.add.image(0, 0, 'btnBlue');\r\n//     const gageBarHandle = scene.add.image(0, 0, 'colorHandle');\r\n//     const gageTxt = scene.add.text(0, 0, con.gageNum.toString());\r\n//     gageBg.setDisplaySize(View.centerX, GageHeight);\r\n//     gageBar.setDisplaySize(View.centerX/2, GageHeight);\r\n//     gageBar.setOrigin(0, 0.5);\r\n//     gageBar.setPosition(-View.centerX/2, 0);\r\n//     gageTxt.setOrigin(0, 0.5);\r\n//     gageTxt.setPosition(View.centerX/2 + TxtMargin - 5, 0);\r\n//     con.add([ gageBg, gageBar, gageBarHandle, gageTxt ]);\r\n//     con.gagePosX = 0;\r\n//     con.gagePosXMin = -gageBg.width/2 - gageBarHandle.width/2;\r\n//     con.gagePosXMax = gageBg.width/2 + gageBarHandle.width/2;\r\n//     con.gagePosXLength = gageBg.width + gageBarHandle.width;\r\n//     con.setGageHandleFrame = (isDown: boolean) => {\r\n//         gageBarHandle.setTexture(isDown ? 'colorHandleDown' : 'colorHandle');\r\n//     };\r\n//     con.setGageBarSize = (gagePos: number) => {\r\n//         let gagePosX = gagePos;\r\n//         if (gagePosX <= con.gagePosXMin) gagePosX = con.gagePosXMin;\r\n//         else if (gagePosX >= con.gagePosXMax) gagePosX = con.gagePosXMax;\r\n//         con.gagePosX = gagePosX;\r\n//         con.gageNum = Math.floor((con.gageNumMax - con.gageNumMin) * Math.abs(gagePosX - con.gagePosXMin) / con.gagePosXLength);\r\n//         con.setGage();\r\n//     };\r\n//     con.setGageNum = (gageNum: number) => {\r\n//         let gageNumber = gageNum;\r\n//         if (gageNumber < con.gageNumMin) gageNumber = con.gageNumMin;\r\n//         else if (gageNumber > con.gageNumMax) gageNumber = con.gageNumMax;\r\n//         con.gageNum = gageNumber;\r\n//         con.gagePosX = (con.gageNum * con.gagePosXLength / con.gageNumMax) - con.gagePosXMax;\r\n//         con.setGage();\r\n//     };\r\n//     con.setGage = () => {\r\n//         gageBar.setDisplaySize(con.gagePosX + gageBar.width/2 + gageBarHandle.width/2, GageHeight);\r\n//         gageBarHandle.setPosition(con.gagePosX, 0);\r\n//         gageTxt.setText(con.gageNum.toFixed(0));\r\n//     };\r\n//     con.setAble = (isAble: boolean) => {\r\n//         con.isAble = isAble;\r\n//         con.isAble ? con.setAlpha(1) : con.setAlpha(0.5);\r\n//     };\r\n//     con.setAble(true);\r\n//     gageBarHandle.setInteractive({ draggable: true });\r\n//     gageBarHandle.on('dragstart', () => {\r\n//         con.isAble && con.setGageHandleFrame(true);\r\n//     });\r\n//     gageBarHandle.on('drag', (ptr, dragX) => {\r\n//         con.isAble && con.setGageBarSize(dragX);\r\n//     });\r\n//     gageBarHandle.on('dragend', () => {\r\n//         if (con.isAble) {\r\n//             con.setGageHandleFrame(false);\r\n//             endMoveCallback && endMoveCallback(con.gageNumMin, con.gageNumMax, con.gageNum);\r\n//         }\r\n//     });\r\n//     return con;\r\n// };\r\nconst AnimShowSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    audio.playSfx('gearAnim');\r\n    scene.tweens.addCounter({\r\n        from: 0, to: 60, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => {\r\n            Setting.isTwing = false;\r\n            ShowSetting(scene);\r\n        }\r\n    });\r\n};\r\nconst AnimHideSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    audio.playSfx('gearAnim');\r\n    HideSetting(scene);\r\n    scene.tweens.addCounter({\r\n        from: 180, to: 0, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => { Setting.isTwing = false; }\r\n    });\r\n};\r\nconst ShowSetting = (scene) => {\r\n    ui_time.setTimeScale(scene, ui_time.showSettingTimeScale);\r\n    Setting.isOpen = true;\r\n    Setting.layer.map(layerChild => layerChild.setVisible && layerChild.setVisible(true));\r\n    Setting.exitBtn.setVisible(true);\r\n};\r\nconst HideSetting = (scene) => {\r\n    ui_time.setTimeScale(scene, ui_time.hideSettingTimeScale);\r\n    Setting.isOpen = false;\r\n    Setting.layer.map(layerChild => layerChild.setVisible && layerChild.setVisible(false));\r\n    Setting.exitBtn.setVisible(false);\r\n};\r\nconst ShowSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(true);\r\n};\r\nconst HideSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(false);\r\n};\r\n/* harmony default export */ const setting = ((/* unused pure expression or super */ null && (Setting)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/sns/index.ts\n\r\n\r\n\r\n\r\nconst ChannelAdvertise = {\r\n    textureList: ['blackScreen', 'channelBtnDown', 'channelBtnUp', 'channelLogo',],\r\n    youtubeBtnLayer: null,\r\n    youtubePopUpLayer: null,\r\n    youtubeShow: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(true);\r\n    },\r\n    youtubeHide: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(false);\r\n    },\r\n    blogBtnLayer: null,\r\n    blogPopUpLayer: null,\r\n    blogShow: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(true);\r\n    },\r\n    blogHide: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(false);\r\n    },\r\n};\r\nconst GetSnsAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        // youtube\r\n        { key: 'youtubeLogo', url: CommonSns + 'youtubeLogo.png', type: 'image' },\r\n        { key: 'channelLogo', url: CommonSns + 'channelLogo.jpg', type: 'image' },\r\n        // blog\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitChannel = () => {\r\n    ChannelAdvertise.youtubeHide();\r\n};\r\nconst CreateChannel = (scene, videoUrl, commonTextStyle, channelData) => {\r\n    var _a, _b, _c, _d;\r\n    const btnW = (_a = channelData === null || channelData === void 0 ? void 0 : channelData.w) !== null && _a !== void 0 ? _a : 60;\r\n    const btnH = (_b = channelData === null || channelData === void 0 ? void 0 : channelData.h) !== null && _b !== void 0 ? _b : 45;\r\n    const btnScaleTime = 1.1;\r\n    const btnBg = scene.add.image((_c = channelData === null || channelData === void 0 ? void 0 : channelData.x) !== null && _c !== void 0 ? _c : userSetting/* View.centerX */.G7.centerX, (_d = channelData === null || channelData === void 0 ? void 0 : channelData.y) !== null && _d !== void 0 ? _d : userSetting/* View.h */.G7.h - 36, 'channelBtnUp');\r\n    const btnLogo = scene.add.image(btnBg.x, btnBg.y, 'youtubeLogo');\r\n    btnLogo.setInteractive();\r\n    btnLogo.on('pointerdown', () => {\r\n        btnLogo.setDisplaySize(btnW * btnScaleTime, btnH * btnScaleTime);\r\n        btnBg.setTexture('channelBtnDown');\r\n    });\r\n    btnLogo.on('pointerup', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUpss');\r\n        ChannelAdvertise.youtubeShow();\r\n    });\r\n    btnLogo.on('pointerout', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUp');\r\n    });\r\n    btnLogo.setDisplaySize(btnW, btnH);\r\n    ChannelAdvertise.youtubeBtnLayer = scene.add.layer([\r\n        btnBg, btnLogo\r\n    ]);\r\n    const popUpMargin = 70;\r\n    const channelUrl = 'https://www.youtube.com/channel/UCBJnFgIQ9YORTiz10_Mgy_A';\r\n    const videoThumbnail = `https://i1.ytimg.com/vi/${videoUrl.split('=')[1]}/default.jpg`;\r\n    const popUpBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    const popUpTitle = scene.add.text(popUpBg.x, userSetting/* View.h */.G7.h / 8, 'My Youtube');\r\n    const popUpTxtList = [];\r\n    const popUpMadeVideo = scene.add.image(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '');\r\n    let popUpMadeVideoWIP;\r\n    popUpMadeVideo.setDisplaySize(popUpMargin, popUpMargin);\r\n    if (!videoUrl) {\r\n        popUpMadeVideoWIP = scene.add.text(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '         Sorry!\\nWork In Progress');\r\n        popUpTxtList.push(popUpMadeVideoWIP);\r\n    }\r\n    const popUpMadeVideoTxt = scene.add.text(popUpBg.x, popUpMadeVideo.y + popUpMargin, 'Created video');\r\n    const popUpChannel = scene.add.image(popUpBg.x, popUpMadeVideoTxt.y + popUpMargin, 'channelLogo');\r\n    const popUpChannelTxt = scene.add.text(popUpBg.x, popUpChannel.y + popUpMargin, 'This is my channel');\r\n    const popUpExitGuide = scene.add.text(popUpBg.x, font.guideTxtY, 'press anywhere to exit');\r\n    popUpTxtList.push(popUpTitle, popUpMadeVideoTxt, popUpChannelTxt, popUpExitGuide);\r\n    popUpTxtList.map(txt => font_SetFontStyle(txt));\r\n    popUpTxtList.map(txt => commonTextStyle(txt));\r\n    popUpTitle.setFontSize(userSetting/* View.w */.G7.w / 12);\r\n    popUpExitGuide.setAlpha(ui.alpha);\r\n    popUpBg.setAlpha(0.4);\r\n    popUpBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    popUpBg.setInteractive();\r\n    popUpBg.on('pointerup', () => { ChannelAdvertise.youtubeHide(); });\r\n    const openUrlTab = (url) => { window.open(url); };\r\n    [popUpMadeVideo, popUpMadeVideoTxt].map((video) => {\r\n        video.setInteractive();\r\n        video.on('pointerup', () => { openUrlTab(videoUrl); });\r\n    });\r\n    [popUpChannel, popUpChannelTxt].map((channel) => {\r\n        channel.setInteractive();\r\n        channel.on('pointerup', () => { openUrlTab(channelUrl); });\r\n    });\r\n    [popUpChannel, popUpMadeVideo].map((ele) => {\r\n        ele.setDisplaySize(popUpMargin, popUpMargin);\r\n    });\r\n    ChannelAdvertise.youtubePopUpLayer = scene.add.layer([\r\n        popUpBg, popUpMadeVideo, popUpChannel, ...popUpTxtList\r\n    ]);\r\n    InitChannel();\r\n    return ChannelAdvertise;\r\n};\r\nconst InitBlog = () => {\r\n};\r\nconst CreateBlog = (scene, blogUrl, commonTextStyle, channelData) => {\r\n    InitBlog();\r\n};\r\n/* harmony default export */ const sns = ((/* unused pure expression or super */ null && (ChannelAdvertise)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/title.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst VersionNum = '1.0.0';\r\nconst StartTitle = (scene) => {\r\n    scene.scene.remove('title');\r\n    scene.scene.add('title', TitleScene);\r\n    scene.scene.launch('title');\r\n};\r\nconst StopTitle = (scene) => {\r\n    if (scene.scene.get('title')) {\r\n        scene.scene.setActive(false, 'title');\r\n        scene.scene.setVisible(false, 'title');\r\n        setTimeout(() => { scene.scene.remove('title'); }, 1000);\r\n    }\r\n};\r\nclass TitleScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'title',\r\n            active: false\r\n        });\r\n        this.titleFontSize = 50;\r\n        this.fontSize = 30;\r\n        this.middleGap = 5;\r\n        this.bgRndPos = { x: 0, y: 0 };\r\n    }\r\n    create() {\r\n        this.createBg();\r\n        this.logoBg = this.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - TxtTitleHeightGap, 'btnBlue').setScale(1.8);\r\n        this.logo = this.add.text(this.logoBg.x, this.logoBg.y, 'BlockPang').setFontSize(this.titleFontSize);\r\n        this.startBg = this.add.image(this.logo.x, this.logo.y + (TxtTitleHeightGap * 2), 'titleContextBg');\r\n        this.start = this.add.text(this.startBg.x, this.startBg.y, 'start');\r\n        [this.logo, this.start].map((ele) => {\r\n            SetFont2CommonContextStyle(ele);\r\n            ele.setFontSize(TxtTitleSize);\r\n            ele.setColor('black');\r\n        });\r\n        [this.logoBg, this.startBg].map((ele) => {\r\n            ele.setInteractive();\r\n        });\r\n        this.logo.setFontSize(TxtTitleHeadSize);\r\n        this.logo.setColor('white');\r\n        this.logoBg.on('pointerup', () => {\r\n            audio.playSfx('earthquake');\r\n            this.animRndAngle([this.logoBg, this.logo]);\r\n            this.cameras.main.shake(250, 0.02, true);\r\n            // todo: drop one random block\r\n        });\r\n        this.startBg.on('pointerup', () => {\r\n            audio.playSfx('gearAnim');\r\n            StopTitle(this);\r\n            StartPassiveLoading(this);\r\n            setTimeout(() => {\r\n                StartGame(this);\r\n            }, 50);\r\n        });\r\n        CreateChannel(this, '', (txt) => {\r\n            SetFont2CommonContextStyle(txt);\r\n            SetDepth(txt, 'txt');\r\n        });\r\n        CreateGameAudio(this, storage);\r\n        CreateGameInput(this);\r\n        CreateEfx(this);\r\n        CreateFullScreen(this);\r\n        CreateSetting(this);\r\n        CreateGameScroll(this);\r\n        CreateGameGesture(this);\r\n        // DebugLocalStorage(this, GameData, { item: 'best', value: 0 });\r\n    }\r\n    update(time, delta) {\r\n        UpdateGameGesture(delta);\r\n    }\r\n    createBg() {\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        let bgTextureRndIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        this.bg = this.add.tileSprite(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h, bgTextureList[bgTextureRndIdx]).setOrigin(0);\r\n        this.createBgRndDirection();\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 3000, repeat: -1,\r\n            onUpdate: () => {\r\n                this.bg.tilePositionX += this.bgRndPos.x;\r\n                this.bg.tilePositionY += this.bgRndPos.y;\r\n            },\r\n            onRepeat: () => {\r\n                bgTextureRndIdx++;\r\n                if (bgTextureRndIdx >= bgTextureList.length)\r\n                    bgTextureRndIdx = 0;\r\n                this.bg.setTexture(bgTextureList[bgTextureRndIdx]);\r\n                this.createBgRndDirection();\r\n            }\r\n        });\r\n    }\r\n    createBgRndDirection() {\r\n        this.bgRndPos.x = (0,math/* GetRndNum */.hg)(-3, 4);\r\n        this.bgRndPos.y = (0,math/* GetRndNum */.hg)(-3, 4);\r\n    }\r\n    animRndAngle(list) {\r\n        audio.playSfx('gearAnim');\r\n        const rndAngle = (0,math/* GetRndNum */.hg)(-30, 31);\r\n        list.map(ele => ele.setAngle(rndAngle));\r\n        this.cameras.main.shake(50, 0.01, true);\r\n    }\r\n    createCreditContext() {\r\n        this.creditContext = this.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n        const youtubeChannel = 'https://www.youtube.com/channel/UCBJnFgIQ9YORTiz10_Mgy_A';\r\n        const bg = this.add.image(0, 0, 'blackScreen').setAlpha(0.9).setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n        const title = this.add.text(0, -(TxtTitleHeightGap * 3), 'Credit').setFontSize(this.titleFontSize / 2).setOrigin(0.5, 0.5);\r\n        const preVersion = this.add.text(-this.middleGap, -(TxtTitleHeightGap * 2), 'Version').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const version = this.add.text(this.middleGap, preVersion.y, VersionNum).setOrigin(0, 0.5);\r\n        const preName = this.add.text(-this.middleGap, -(TxtTitleHeightGap), 'Maker').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const name = this.add.text(this.middleGap, preName.y, 'Flux Hunter').setOrigin(0, 0.5);\r\n        const preUrl = this.add.text(-this.middleGap, 0, 'Making Blueprint').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const url = this.add.text(this.middleGap, preUrl.y, 'click here for channel').setOrigin(0, 0.5);\r\n        const guide = this.add.text(0, url.y + TxtTitleHeightGap, 'press anywhere to close').setOrigin(0.5, 0.5).setAlpha(0.5);\r\n        this.creditContext.add([\r\n            bg, title, preVersion, version, preName, name, preUrl, url, guide\r\n        ]);\r\n        bg.setInteractive();\r\n        bg.on('pointerup', () => { this.creditContext.hide(); });\r\n        [preUrl, url].map((urlEle) => {\r\n            urlEle.setInteractive();\r\n            urlEle.on('pointerup', () => { window.open(youtubeChannel, '_blank'); });\r\n        });\r\n        this.creditContext.show = () => { this.creditContext.setVisible(true); };\r\n        this.creditContext.hide = () => { this.creditContext.setVisible(false); };\r\n        this.creditContext.hide();\r\n        SetDepth(this.creditContext, 'popUp');\r\n    }\r\n}\r\n/* harmony default export */ const title = (TitleScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/popUp/index.ts\n\r\n\r\n\r\n\r\n\r\nconst GamePopUp = {\r\n    commonLayer: null,\r\n    list: [],\r\n    popAlpha: 0.6, // default alpha\r\n};\r\nconst GetPopUpAssets = (exceptionKeys) => {\r\n    let assetList = [\r\n        { key: 'whiteScreen', url: CommonUI + 'whiteScreen.png', type: 'image' },\r\n        { key: 'blackScreen', url: CommonUI + 'blackScreen.png', type: 'image' },\r\n        { key: 'exitBtn', url: CommonUI + 'exitBtn.png', type: 'image' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst popUp_InitPopUp = (popUpLayer) => {\r\n    popUpLayer.hide();\r\n};\r\nconst CreateBasicPopUp = (scene, name, btn, pop) => {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\r\n    // btn layer setting\r\n    const isBgBlack = (_a = pop === null || pop === void 0 ? void 0 : pop.isBgBlack) !== null && _a !== void 0 ? _a : true;\r\n    const btnX = (_b = btn === null || btn === void 0 ? void 0 : btn.x) !== null && _b !== void 0 ? _b : View.centerX;\r\n    const btnY = (_c = btn === null || btn === void 0 ? void 0 : btn.y) !== null && _c !== void 0 ? _c : View.centerY;\r\n    const exitBtnX = (_e = (_d = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _d === void 0 ? void 0 : _d.x) !== null && _e !== void 0 ? _e : btnX;\r\n    const exitBtnY = (_g = (_f = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _f === void 0 ? void 0 : _f.x) !== null && _g !== void 0 ? _g : btnY;\r\n    const guideTxtX = (_j = (_h = pop === null || pop === void 0 ? void 0 : pop.guideTxt) === null || _h === void 0 ? void 0 : _h.x) !== null && _j !== void 0 ? _j : View.centerX;\r\n    const guideTxtY = (_l = (_k = pop === null || pop === void 0 ? void 0 : pop.guideTxt) === null || _k === void 0 ? void 0 : _k.y) !== null && _l !== void 0 ? _l : GameFont.guideTxtY;\r\n    const btnLayer = scene.add.layer();\r\n    btnLayer.name = name;\r\n    (btn === null || btn === void 0 ? void 0 : btn.depth) && btnLayer.setDepth(btn.depth);\r\n    if (btn === null || btn === void 0 ? void 0 : btn.list) {\r\n        btn.list.map((btnChild) => {\r\n            btnChild.setPosition(btnX, btnY);\r\n            btnLayer.add(btnChild);\r\n        });\r\n    }\r\n    else {\r\n        const defaultBtn = scene.add.text(btnX, btnY, name);\r\n        defaultBtn.setOrigin(0.5);\r\n        defaultBtn.setFontStyle('bold');\r\n        defaultBtn.setFontFamily('Arial Black');\r\n        btnLayer.add(defaultBtn);\r\n    }\r\n    btnLayer.getChildren().map((child) => {\r\n        child.setInteractive();\r\n        child.on('pointerdown', (ptr) => {\r\n            var _a, _b;\r\n            ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.down) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.down(ptr));\r\n        });\r\n        child.on('pointerup', (ptr) => {\r\n            var _a, _b;\r\n            popUpLayer.show();\r\n            ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n        });\r\n        child.on('pointerout', (ptr) => {\r\n            var _a, _b;\r\n            ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.out) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.out(ptr));\r\n        });\r\n    });\r\n    // pop layer setting\r\n    const popLayer = scene.add.layer();\r\n    const popLayerList = [];\r\n    popLayer.name = name;\r\n    (pop === null || pop === void 0 ? void 0 : pop.depth) && popLayer.setDepth(pop.depth);\r\n    const popLayerBg = scene.add.image(View.centerX, View.centerY, isBgBlack ? 'blackScreen' : 'whiteScreen');\r\n    popLayerBg.setAlpha(GamePopUp.popAlpha);\r\n    popLayerBg.setDisplaySize(View.w, View.h);\r\n    popLayerBg.setInteractive();\r\n    popLayerBg.on('pointerdown', (ptr) => { var _a, _b; ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.down) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.down(ptr)); });\r\n    popLayerBg.on('pointermove', (ptr) => { var _a, _b; ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.move) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.move(ptr)); });\r\n    popLayerList.push(popLayerBg);\r\n    // exit btn option setting\r\n    if ((_m = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _m === void 0 ? void 0 : _m.isExist) {\r\n        const exitBtn = scene.add.image(exitBtnX, exitBtnY, 'exitBtn');\r\n        exitBtn.setInteractive();\r\n        exitBtn.on('pointerup', () => {\r\n            popUpLayer.hide();\r\n        });\r\n        SetCommonUIProps(exitBtn);\r\n        CreateUIBtnAnim(scene, exitBtn);\r\n        popLayerList.push(exitBtn);\r\n    }\r\n    else {\r\n        popLayerBg.on('pointerup', (ptr) => {\r\n            var _a, _b;\r\n            popUpLayer.hide();\r\n            ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n        });\r\n        const popGuideTxt = scene.add.text(guideTxtX, guideTxtY, 'press anywhere to exit');\r\n        popGuideTxt.setAlpha(UIProps.alpha);\r\n        SetFontStyle(popGuideTxt);\r\n        popLayerList.push(popGuideTxt);\r\n    }\r\n    // add child to popup layer\r\n    popLayerList.map(popChild => popLayer.add(popChild));\r\n    (pop === null || pop === void 0 ? void 0 : pop.list) && pop.list.map(popChild => popLayer.add(popChild));\r\n    const popUpLayer = {\r\n        name: name,\r\n        isOpen: false,\r\n        btn: btnLayer,\r\n        pop: popLayer,\r\n        show: () => {\r\n            popUpLayer.isOpen = true;\r\n            popUpLayer.pop.setVisible(true);\r\n        },\r\n        hide: () => {\r\n            popUpLayer.isOpen = false;\r\n            const isAllPopLayerClosed = GamePopUp.list.filter(popUpLayer => popUpLayer.isOpen === true).length === 0;\r\n            isAllPopLayerClosed && popUpLayer.pop.setVisible(false);\r\n        }\r\n    };\r\n    // chck nested pop up layer\r\n    let nestedPopUpLayer = GamePopUp.list.find(popUp => popUp.name === name);\r\n    if (nestedPopUpLayer) {\r\n        console.warn(`pop up name nested: ${name} // so lay over it`);\r\n        nestedPopUpLayer = popUpLayer;\r\n    }\r\n    else\r\n        GamePopUp.list.push(popUpLayer);\r\n    popUp_InitPopUp(popUpLayer);\r\n    return GamePopUp;\r\n};\r\n/* harmony default export */ const popUp = ((/* unused pure expression or super */ null && (GamePopUp)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/blockPang.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MainScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'main',\r\n            active: false,\r\n        });\r\n    }\r\n    init() {\r\n        this.game.scene.add('title', title, false);\r\n        this.game.scene.add('game', game, false);\r\n    }\r\n    create() {\r\n        StartTitle(this);\r\n    }\r\n}\r\nconst AssetUrl = 'https://silvertree7622.github.io/webgames/blockPang/assets/';\r\nlet Assets = {\r\n    dynamic: [\r\n        async () => {\r\n            let list = [\r\n                // particle\r\n                {\r\n                    key: 'particleSprite',\r\n                    url: await AssetUrl + 'particleSprite.png',\r\n                    json: await __webpack_require__(442),\r\n                    type: 'atlas'\r\n                },\r\n                { key: 'diamond1', url: await AssetUrl + 'diamond1.png', type: 'image' },\r\n                { key: 'diamond2', url: await AssetUrl + 'diamond2.png', type: 'image' },\r\n                { key: 'diamond3', url: await AssetUrl + 'diamond3.png', type: 'image' },\r\n                { key: 'diamond4', url: await AssetUrl + 'diamond4.png', type: 'image' },\r\n                { key: 'key1', url: await AssetUrl + 'key1.png', type: 'image' },\r\n                { key: 'key2', url: await AssetUrl + 'key2.png', type: 'image' },\r\n                { key: 'key3', url: await AssetUrl + 'key3.png', type: 'image' },\r\n                { key: 'key4', url: await AssetUrl + 'key4.png', type: 'image' },\r\n                { key: 'ruby1', url: await AssetUrl + 'ruby1.png', type: 'image' },\r\n                { key: 'ruby2', url: await AssetUrl + 'ruby2.png', type: 'image' },\r\n                { key: 'ruby3', url: await AssetUrl + 'ruby3.png', type: 'image' },\r\n                { key: 'ruby4', url: await AssetUrl + 'ruby4.png', type: 'image' },\r\n                { key: 'heart', url: await AssetUrl + 'heart.png', type: 'image' },\r\n                // ui\r\n                { key: 'bgBlue', url: await AssetUrl + 'bgBlue.png', type: 'image' },\r\n                { key: 'bgBrown', url: await AssetUrl + 'bgBrown.png', type: 'image' },\r\n                { key: 'bgGreen', url: await AssetUrl + 'bgGreen.png', type: 'image' },\r\n                { key: 'btnBlue', url: await AssetUrl + 'btnBlue.png', type: 'image' },\r\n                { key: 'btnBrown', url: await AssetUrl + 'btnBrown.png', type: 'image' },\r\n                { key: 'btnGreen', url: await AssetUrl + 'btnGreen.png', type: 'image' },\r\n                { key: 'panelGreen', url: await AssetUrl + 'panelGreen.png', type: 'image' },\r\n                { key: 'panelBlue', url: await AssetUrl + 'panelBlue.png', type: 'image' },\r\n                { key: 'panelBrown', url: await AssetUrl + 'panelBrown.png', type: 'image' },\r\n                { key: 'overBtnUpBlue', url: await AssetUrl + 'overBtnUpBlue.png', type: 'image' },\r\n                { key: 'overBtnUpBrown', url: await AssetUrl + 'overBtnUpBrown.png', type: 'image' },\r\n                { key: 'overBtnUpGreen', url: await AssetUrl + 'overBtnUpGreen.png', type: 'image' },\r\n                { key: 'overBtnDownBlue', url: await AssetUrl + 'overBtnDownBlue.png', type: 'image' },\r\n                { key: 'overBtnDownBrown', url: await AssetUrl + 'overBtnDownBrown.png', type: 'image' },\r\n                { key: 'overBtnDownGreen', url: await AssetUrl + 'overBtnDownGreen.png', type: 'image' },\r\n                // { key: 'blackScreen', url: await AssetUrl + 'blackScreen.png', type: 'image' },\r\n                // { key: 'exitBtn', url: await AssetUrl + 'exitBtn.png', type: 'image' },\r\n                { key: 'titleContextBg', url: await AssetUrl + 'titleContextBg.png', type: 'image' },\r\n                { key: 'audioOn', url: await AssetUrl + 'audioOn.png', type: 'image' },\r\n                { key: 'audioOff', url: await AssetUrl + 'audioOff.png', type: 'image' },\r\n                { key: 'musicOn', url: await AssetUrl + 'musicOn.png', type: 'image' },\r\n                { key: 'musicOff', url: await AssetUrl + 'musicOff.png', type: 'image' },\r\n                { key: 'colorBackground', url: await AssetUrl + 'colorBackground.png', type: 'image' },\r\n                { key: 'colorHandle', url: await AssetUrl + 'colorHandle.png', type: 'image' },\r\n                { key: 'colorHandleDown', url: await AssetUrl + 'colorHandleDown.png', type: 'image' },\r\n                { key: 'overBack', url: await AssetUrl + 'overBack.png', type: 'image' },\r\n                { key: 'overRetry', url: await AssetUrl + 'overRetry.png', type: 'image' },\r\n                { key: 'settingBtn', url: await AssetUrl + 'settingBtn.png', type: 'image' },\r\n                { key: 'settingPanel', url: await AssetUrl + 'settingPanel.png', type: 'image' },\r\n                { key: 'settingOverBtnUp', url: await AssetUrl + 'settingOverBtnUp.png', type: 'image' },\r\n                { key: 'settingOverBtnDown', url: await AssetUrl + 'settingOverBtnDown.png', type: 'image' },\r\n                { key: 'btnSettingDown', url: await AssetUrl + 'btnSettingDown.png', type: 'image' },\r\n                { key: 'btnSettingUp', url: await AssetUrl + 'btnSettingUp.png', type: 'image' },\r\n                { key: 'screenSmaller', url: await AssetUrl + 'screenSmaller.png', type: 'image' },\r\n                { key: 'screenLarger', url: await AssetUrl + 'screenLarger.png', type: 'image' },\r\n                { key: 'warningSign', url: await AssetUrl + 'warningSign.png', type: 'image' },\r\n                // ui scene\r\n                { key: 'cloud1', url: await AssetUrl + 'cloud1.png', type: 'image' },\r\n                { key: 'cloud2', url: await AssetUrl + 'cloud2.png', type: 'image' },\r\n                { key: 'cloud3', url: await AssetUrl + 'cloud3.png', type: 'image' },\r\n                { key: 'cloud4', url: await AssetUrl + 'cloud4.png', type: 'image' },\r\n                { key: 'cloud5', url: await AssetUrl + 'cloud5.png', type: 'image' },\r\n                { key: 'cloud6', url: await AssetUrl + 'cloud6.png', type: 'image' },\r\n                { key: 'cloud7', url: await AssetUrl + 'cloud7.png', type: 'image' },\r\n                { key: 'cloud8', url: await AssetUrl + 'cloud8.png', type: 'image' },\r\n                { key: 'cloud9', url: await AssetUrl + 'cloud9.png', type: 'image' },\r\n                { key: 'tree1', url: await AssetUrl + 'tree01.png', type: 'image' },\r\n                { key: 'tree2', url: await AssetUrl + 'tree02.png', type: 'image' },\r\n                { key: 'tree3', url: await AssetUrl + 'tree03.png', type: 'image' },\r\n                { key: 'tree4', url: await AssetUrl + 'tree04.png', type: 'image' },\r\n                { key: 'tree5', url: await AssetUrl + 'tree05.png', type: 'image' },\r\n                { key: 'tree6', url: await AssetUrl + 'tree06.png', type: 'image' },\r\n                { key: 'tree7', url: await AssetUrl + 'tree07.png', type: 'image' },\r\n                { key: 'tree8', url: await AssetUrl + 'tree08.png', type: 'image' },\r\n                { key: 'tree9', url: await AssetUrl + 'tree09.png', type: 'image' },\r\n                { key: 'tree10', url: await AssetUrl + 'tree10.png', type: 'image' },\r\n                { key: 'tree11', url: await AssetUrl + 'tree11.png', type: 'image' },\r\n                { key: 'tree12', url: await AssetUrl + 'tree12.png', type: 'image' },\r\n                { key: 'tree13', url: await AssetUrl + 'tree13.png', type: 'image' },\r\n                { key: 'tree14', url: await AssetUrl + 'tree14.png', type: 'image' },\r\n                { key: 'tree15', url: await AssetUrl + 'tree15.png', type: 'image' },\r\n                { key: 'tree16', url: await AssetUrl + 'tree16.png', type: 'image' },\r\n                { key: 'tree17', url: await AssetUrl + 'tree17.png', type: 'image' },\r\n                { key: 'tree18', url: await AssetUrl + 'tree18.png', type: 'image' },\r\n                { key: 'tree19', url: await AssetUrl + 'tree19.png', type: 'image' },\r\n                { key: 'tree20', url: await AssetUrl + 'tree20.png', type: 'image' },\r\n                { key: 'tree21', url: await AssetUrl + 'tree21.png', type: 'image' },\r\n                { key: 'tree22', url: await AssetUrl + 'tree22.png', type: 'image' },\r\n                { key: 'tree23', url: await AssetUrl + 'tree23.png', type: 'image' },\r\n                { key: 'tree24', url: await AssetUrl + 'tree24.png', type: 'image' },\r\n                { key: 'tree25', url: await AssetUrl + 'tree25.png', type: 'image' },\r\n                { key: 'tree26', url: await AssetUrl + 'tree26.png', type: 'image' },\r\n                { key: 'tree27', url: await AssetUrl + 'tree27.png', type: 'image' },\r\n                { key: 'tree28', url: await AssetUrl + 'tree28.png', type: 'image' },\r\n                { key: 'tree29', url: await AssetUrl + 'tree29.png', type: 'image' },\r\n                { key: 'tree30', url: await AssetUrl + 'tree30.png', type: 'image' },\r\n                { key: 'tree31', url: await AssetUrl + 'tree31.png', type: 'image' },\r\n                { key: 'tree32', url: await AssetUrl + 'tree32.png', type: 'image' },\r\n                { key: 'tree33', url: await AssetUrl + 'tree33.png', type: 'image' },\r\n                { key: 'tree34', url: await AssetUrl + 'tree34.png', type: 'image' },\r\n                { key: 'tree35', url: await AssetUrl + 'tree35.png', type: 'image' },\r\n                { key: 'mist1', url: await AssetUrl + 'mist1.png', type: 'image' },\r\n                { key: 'mist2', url: await AssetUrl + 'mist2.png', type: 'image' },\r\n                { key: 'mist3', url: await AssetUrl + 'mist3.png', type: 'image' },\r\n                { key: 'mist4', url: await AssetUrl + 'mist4.png', type: 'image' },\r\n                // shape\r\n                { key: 'blueBall', url: await AssetUrl + 'blueBall.png', type: 'image' },\r\n                { key: 'greenBall', url: await AssetUrl + 'greenBall.png', type: 'image' },\r\n                { key: 'brownBall', url: await AssetUrl + 'brownBall.png', type: 'image' },\r\n                { key: 'obstacleBall', url: await AssetUrl + 'obstacleBall.png', type: 'image' },\r\n                { key: 'blueRect', url: await AssetUrl + 'blueRect.png', type: 'image' },\r\n                { key: 'greenRect', url: await AssetUrl + 'greenRect.png', type: 'image' },\r\n                { key: 'brownRect', url: await AssetUrl + 'brownRect.png', type: 'image' },\r\n                { key: 'obstacleRect', url: await AssetUrl + 'obstacleRect.png', type: 'image' },\r\n                { key: 'blueSquare', url: await AssetUrl + 'blueSquare.png', type: 'image' },\r\n                { key: 'greenSquare', url: await AssetUrl + 'greenSquare.png', type: 'image' },\r\n                { key: 'brownSquare', url: await AssetUrl + 'brownSquare.png', type: 'image' },\r\n                { key: 'obstacleSquare', url: await AssetUrl + 'obstacleSquare.png', type: 'image' },\r\n                { key: 'lockedRectangle', url: await AssetUrl + 'block_locked_large.png', type: 'image' },\r\n                { key: 'locketSquare', url: await AssetUrl + 'block_locked_square.png', type: 'image' },\r\n                { key: 'key', url: await AssetUrl + 'key.png', type: 'image' },\r\n                // type\r\n                { key: 'arrowLeft', url: await AssetUrl + 'arrowLeft.png', type: 'image' },\r\n                { key: 'locked', url: await AssetUrl + 'locked.png', type: 'image' },\r\n                { key: 'pattern', url: await AssetUrl + 'pattern.png', type: 'image' },\r\n                { key: 'power', url: await AssetUrl + 'power.png', type: 'image' },\r\n                { key: 'random', url: await AssetUrl + 'random.png', type: 'image' },\r\n                { key: 'signal1', url: await AssetUrl + 'signal1.png', type: 'image' },\r\n                { key: 'signal2', url: await AssetUrl + 'signal2.png', type: 'image' },\r\n                { key: 'signal3', url: await AssetUrl + 'signal3.png', type: 'image' },\r\n                { key: 'star', url: await AssetUrl + 'star.png', type: 'image' },\r\n                { key: 'swipeLeft', url: await AssetUrl + 'swipeLeft.png', type: 'image' },\r\n                { key: 'touch', url: await AssetUrl + 'touch.png', type: 'image' },\r\n                { key: 'trashcan', url: await AssetUrl + 'trashcan.png', type: 'image' },\r\n                { key: 'trashcanOpen', url: await AssetUrl + 'trashcanOpen.png', type: 'image' },\r\n                { key: 'unlocked', url: await AssetUrl + 'unlocked.png', type: 'image' },\r\n                // common\r\n                ...GetFullScreenAssets('touchSfx'),\r\n                ...GetSnsAssets(),\r\n                ...GetGageAssets('yellow'),\r\n                ...GetPopUpAssets(),\r\n                ...GetScrollAssets(),\r\n                // audio\r\n                ...GetAudioAssets([\r\n                    // voice sfx\r\n                    { key: 'voice1', url: await AssetUrl + '1.mp3', type: 'audio' },\r\n                    { key: 'voice2', url: await AssetUrl + '2.mp3', type: 'audio' },\r\n                    { key: 'voice3', url: await AssetUrl + '3.mp3', type: 'audio' },\r\n                    { key: 'voice4', url: await AssetUrl + '4.mp3', type: 'audio' },\r\n                    { key: 'voice5', url: await AssetUrl + '5.mp3', type: 'audio' },\r\n                    { key: 'voice6', url: await AssetUrl + '6.mp3', type: 'audio' },\r\n                    { key: 'voice7', url: await AssetUrl + '7.mp3', type: 'audio' },\r\n                    { key: 'voice8', url: await AssetUrl + '8.mp3', type: 'audio' },\r\n                    { key: 'voice9', url: await AssetUrl + '9.mp3', type: 'audio' },\r\n                    { key: 'voice10', url: await AssetUrl + '10.mp3', type: 'audio' },\r\n                    { key: 'voiceGo', url: await AssetUrl + 'go.mp3', type: 'audio' },\r\n                    { key: 'voiceHighScore', url: await AssetUrl + 'new_highscore.mp3', type: 'audio' },\r\n                    { key: 'voiceTimeOver', url: await AssetUrl + 'time_over.mp3', type: 'audio' },\r\n                    { key: 'voiceGameOver', url: await AssetUrl + 'game_over.mp3', type: 'audio' },\r\n                    // other sfx\r\n                    { key: 'gearAnim', url: await AssetUrl + 'gearAnim.mp3', type: 'audio' },\r\n                    { key: 'earthquake', url: await AssetUrl + 'earthquake.mp3', type: 'audio' },\r\n                    { key: 'touchSfx', url: await AssetUrl + 'touchSfx.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockDone', url: await AssetUrl + 'loadingBlockDone.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockOnProcess', url: await AssetUrl + 'loadingBlockOnProcess.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOn', url: await AssetUrl + 'powerBlockOn.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOff', url: await AssetUrl + 'powerBlockOff.mp3', type: 'audio' },\r\n                    { key: 'spawnObstacleSfx', url: await AssetUrl + 'spawnObstacleSfx.mp3', type: 'audio' },\r\n                    { key: 'timeIncreaseSfx', url: await AssetUrl + 'timeIncreaseSfx.mp3', type: 'audio' },\r\n                    { key: 'scoreSfx', url: await AssetUrl + 'scoreSfx.mp3', type: 'audio' },\r\n                    { key: 'warningSfx', url: await AssetUrl + 'warningSfx.mp3', type: 'audio' },\r\n                ], [\r\n                    { key: 'gameBgm', url: await AssetUrl + 'blockpangbgm.mp3', type: 'audio' },\r\n                ]),\r\n            ];\r\n            return list;\r\n        }\r\n    ],\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL2luZGV4LnRzP2U0OWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy91dGlscy9zdG9yYWdlLnRzPzc5OWQiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvYXNzZXRVdGlscy50cz8yNDk5Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2F1ZGlvL2luZGV4LnRzPzYzNTEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2RlcHRoL2luZGV4LnRzPzMyMzgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2ZvbnQvaW5kZXgudHM/MzA3NiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svYmFzaWMudHM/Mzg5MCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9hZC50cz8xYmZmIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9pbnB1dC9pbmRleC50cz8xMWE4Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL3Bvd2VyLnRzPzVmMjUiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvbG9hZGluZy50cz9hNDk0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL3RvdWNoLnRzP2UzM2QiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvb2JzdGFjbGUudHM/YTk0NCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9pbmRleC50cz84MWE2Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9wb3B1cC50cz9kMmEyIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3N0b3JhZ2UvaW5kZXgudHM/MWVjYSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdWkvc2NvcmUudHM/ZmEzYiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZy50cz8wZjU5Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9zdGFydENudC50cz9kNWE0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2lucHV0L2luZGV4LnRzPzY0YTYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2VmeC9pbmRleC50cz85ZWRiIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS93YXJuaW5nLnRzPzkzNWUiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvaW5kZXgudHM/MDQ0OCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy9kZXB0aC9pbmRleC50cz8xMmJlIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2dlc3R1cmUvaW5kZXgudHM/NDY2YSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9mb250L2luZGV4LnRzPzY5MGUiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvc2Nyb2xsL2luZGV4LnRzPzNhMjEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvZnVsbFNjcmVlbi9pbmRleC50cz84ZmUyIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9nYW1lLnRzPzRmYmYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL2dhbWVvdmVyLnRzPzkwYjgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2NpcmNsZS50cz81MzkxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay9zaGFwZS9yZWN0YW5nbGUudHM/MDBhZiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svc2hhcGUvc3F1YXJlLnRzPzMyMWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2luZGV4LnRzPzQ0NDMiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3N5c3RlbS50cz9mMGMxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS90aW1lLnRzPzRlZGMiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvZ2FnZS9pbmRleC50cz8xZTk4Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9zZXR0aW5nLnRzPzE5MWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvc25zL2luZGV4LnRzP2VhZTEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3RpdGxlLnRzP2NmM2MiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvcG9wVXAvaW5kZXgudHM/YTlhOSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9ibG9ja1BhbmcudHM/MjFlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDb250ZXh0TGF5ZXJNYXJnaW4gPSAxMjA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luID0gNTA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyID0gNzA7XHJcbmNvbnN0IFNldHRpbmdDb250ZXh0TWFyZ2luID0gNDA7XHJcbmNvbnN0IFNldHRpbmdUb3BDb250ZXh0TWFyZ2luID0gODA7XHJcbmV4cG9ydCB7IENvbnRleHRMYXllck1hcmdpbiwgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyLCBTZXR0aW5nQ29udGV4dE1hcmdpbiwgU2V0dGluZ1RvcENvbnRleHRNYXJnaW4sIH07XHJcbiIsIi8vIGNvbXBhcmUgaXRlbSBpcyBpbiB0aGUgZGF0YSB0aGVuIFxyXG5jb25zdCBDb21wYXJlQ2FsbGJhY2sgPSAoZGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgaXNJdGVtRXhpc3RJbkRhdGEgPSBkYXRhW2l0ZW1dO1xyXG4gICAgaWYgKGlzSXRlbUV4aXN0SW5EYXRhICE9PSB1bmRlZmluZWQgfHwgbnVsbClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignaXRlbSBpcyBub3QgbWF0Y2hlZCB0byBhY3R1YWwgZGF0YSB0eXBlOicsIGl0ZW0sIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuY29uc3QgR2FtZU5hbWUgPSBkb2N1bWVudC50aXRsZTsgLy8gZ2V0IGdhbWUgdGl0bGUgbmFtZVxyXG5jb25zdCBHZXRMb2NhbFN0b3JhZ2VEYXRhID0gKGRlZmF1bHREYXRhKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEdhbWVOYW1lKTtcclxuICAgIGlmIChkYXRhKVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEdhbWVOYW1lLCBKU09OLnN0cmluZ2lmeShkZWZhdWx0RGF0YSkpO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcclxuICAgIH1cclxufTtcclxuY29uc3QgR2V0TG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgZ2FtZURhdGEgPSBHZXRMb2NhbFN0b3JhZ2VEYXRhKGRlZmF1bHREYXRhKTtcclxuICAgIGxldCBsaXN0ID0gKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyA/IFtpdGVtXSA6IFsuLi5pdGVtXSkubWFwKChlbGUpID0+IHtcclxuICAgICAgICBsZXQgcmV0dXJuSXRlbSA9IGdhbWVEYXRhW2VsZV07XHJcbiAgICAgICAgaWYgKENvbXBhcmVDYWxsYmFjayhnYW1lRGF0YSwgZWxlKSlcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybkl0ZW07XHJcbiAgICB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdpdGVtLCBsaXN0OiAnLCBpdGVtLCBsaXN0KTtcclxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcclxuICAgICAgICByZXR1cm4gbGlzdFswXTtcclxuICAgIGVsc2UgaWYgKGl0ZW0ubGVuZ3RoID09PSBsaXN0Lmxlbmd0aClcclxuICAgICAgICByZXR1cm4gbGlzdDtcclxufTtcclxuY29uc3QgU2V0TG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSwgdmFsdWUpID0+IHtcclxuICAgIGxldCBnYW1lRGF0YSA9IEdldExvY2FsU3RvcmFnZURhdGEoZGVmYXVsdERhdGEpO1xyXG4gICAgaWYgKGdhbWVEYXRhKVxyXG4gICAgICAgIGdhbWVEYXRhW2l0ZW1dID0gdmFsdWU7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oR2FtZU5hbWUsIEpTT04uc3RyaW5naWZ5KGdhbWVEYXRhKSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZ2FtZURhdGEsIGJlc3Q6ICcsIGdhbWVEYXRhLCBnYW1lRGF0YS5iZXN0KTtcclxuICAgIHJldHVybiBnYW1lRGF0YTtcclxufTtcclxuY29uc3QgUmVtb3ZlTG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgaXRlbSwgbnVsbCk7XHJcbn07XHJcbmNvbnN0IENsZWFyR2FtZUxvY2FsU3RvcmFnZURhdGEgPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oR2FtZU5hbWUpO1xyXG59O1xyXG5jb25zdCBDbGVhckFsbExvY2FsU3RvcmFnZUl0ZW0gPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbn07XHJcbmNvbnN0IERlYnVnTG9jYWxTdG9yYWdlID0gKHNjZW5lLCBkZWZhdWx0RGF0YSwgaXRlbXMpID0+IHtcclxuICAgIHNjZW5lLmlucHV0Lm1vdXNlLmRpc2FibGVDb250ZXh0TWVudSgpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgZnVuY3Rpb24gKHBvaW50ZXIpIHtcclxuICAgICAgICBpZiAocG9pbnRlci5yaWdodEJ1dHRvbkRvd24oKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhHZXRMb2NhbFN0b3JhZ2VEYXRhKGRlZmF1bHREYXRhKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBvaW50ZXIubWlkZGxlQnV0dG9uRG93bigpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAgICAgICAgICAgICAgaXRlbXMubWFwKGVsZSA9PiBTZXRMb2NhbFN0b3JhZ2VJdGVtKGRlZmF1bHREYXRhLCBlbGUuaXRlbSwgZWxlLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oZGVmYXVsdERhdGEsIGl0ZW1zLml0ZW0sIGl0ZW1zLnZhbHVlKTtcclxuICAgICAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgJ2Jlc3QnLCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnQgeyBHZXRMb2NhbFN0b3JhZ2VEYXRhLCBHZXRMb2NhbFN0b3JhZ2VJdGVtLCBTZXRMb2NhbFN0b3JhZ2VJdGVtLCBSZW1vdmVMb2NhbFN0b3JhZ2VJdGVtLCBDbGVhckdhbWVMb2NhbFN0b3JhZ2VEYXRhLCBDbGVhckFsbExvY2FsU3RvcmFnZUl0ZW0sIERlYnVnTG9jYWxTdG9yYWdlIH07XHJcbiIsImNvbnN0IENvbW1vblJvb3RVcmwgPSAnaHR0cHM6Ly9zaWx2ZXJ0cmVlNzYyMi5naXRodWIuaW8vd2ViZ2FtZXMvJztcclxuY29uc3QgQ29tbW9uQXNzZXRzID0gQ29tbW9uUm9vdFVybCArICdhc3NldHMvJztcclxuY29uc3QgQ29tbW9uU2Z4ID0gQ29tbW9uQXNzZXRzICsgJ2F1ZGlvL3NmeC8nO1xyXG5jb25zdCBDb21tb25VSSA9IENvbW1vbkFzc2V0cyArICd1aS8nO1xyXG5jb25zdCBDb21tb25GdWxsU2NyZWVuID0gQ29tbW9uVUkgKyAnZnVsbFNjcmVlbi8nO1xyXG5jb25zdCBDb21tb25TY3JvbGwgPSBDb21tb25VSSArICdzY3JvbGwvJztcclxuY29uc3QgQ29tbW9uR2FnZSA9IENvbW1vblVJICsgJ2dhZ2UvJztcclxuY29uc3QgQ29tbW9uRWZ4ID0gQ29tbW9uVUkgKyAnZWZ4Lyc7XHJcbmNvbnN0IENvbW1vblNucyA9IENvbW1vblJvb3RVcmwgKyAnc25zLyc7XHJcbi8qKiBnZXQgY29tbW9uIGFzc2V0IGZpbGUgd2l0aCBleGNlcHRpb24ga2V5ICh3aGVuIGlmIHUgd29ycnkgYWJvdXQgbmVzdGVkIHRoaW5ncylcclxuICogQHBhcmFtIGFzc2V0TGlzdCBjb21tb24gY3VzdG9tIGFzc2VzdCBsaXN0IGNvbXBvc2Ugb2YgdGhlIGtleSwgdXJsLCBldGNcclxuICogQHBhcmFtIGV4Y2VwdGlvbktleXMgZXhjZXB0aW9uIGtleSB3aGljaCB1IHdvcnJ5IGFib3V0IHRoZSBuZXN0ZWQgdGhpbmdzXHJcbiAqIEByZXR1cm5zIGZpbHRlcmVkIGFzc2V0IGxpc3RcclxuICovXHJcbmNvbnN0IEdldEFzc2V0RmlsZXMgPSAoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBpZiAoIWV4Y2VwdGlvbktleXMpXHJcbiAgICAgICAgcmV0dXJuIGFzc2V0TGlzdDtcclxuICAgIGxldCBmaWx0ZXJlZExpc3Q7XHJcbiAgICAvLyBvbmUga2V5IHRvIGV4Y2VwdCBmcm9tIGFzc2V0IGxpc3RcclxuICAgIGlmICh0eXBlb2YgZXhjZXB0aW9uS2V5cyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBmaWx0ZXJlZExpc3QgPSBhc3NldExpc3QuZmlsdGVyKGFzc2V0ID0+IGFzc2V0LmtleSAhPT0gZXhjZXB0aW9uS2V5cyk7XHJcbiAgICB9XHJcbiAgICAvLyBzZXZlcmFsIGtleSBsaXN0IHRvIGV4Y2VwdCBmcm9tIGFzc2V0IGxpc3RcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbHRlcmVkTGlzdCA9IGFzc2V0TGlzdC5maWx0ZXIoKGFzc2V0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGNlcHRpb25LZXlzLmluZGV4T2YoYXNzZXQua2V5KSA8IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsdGVyZWRMaXN0O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBDb21tb25Sb290VXJsO1xyXG5leHBvcnQgeyBDb21tb25TZngsIENvbW1vblVJLCBDb21tb25GdWxsU2NyZWVuLCBDb21tb25TY3JvbGwsIENvbW1vbkdhZ2UsIENvbW1vbkVmeCwgQ29tbW9uU25zLCBHZXRBc3NldEZpbGVzLCB9O1xyXG4iLCJpbXBvcnQgeyBHZXRMb2NhbFN0b3JhZ2VJdGVtLCBTZXRMb2NhbFN0b3JhZ2VJdGVtIH0gZnJvbSAnQHNyYy91dGlscy9zdG9yYWdlJztcclxuaW1wb3J0IHsgR2V0QXNzZXRGaWxlcyB9IGZyb20gJy4uL2Fzc2V0VXRpbHMnO1xyXG5jb25zdCBHYW1lQXVkaW8gPSB7XHJcbiAgICB3aG9sZUdhbWVEYXRhOiB7fSxcclxuICAgIGJnbUxpc3Q6IFtdLFxyXG4gICAgc2Z4TGlzdDogW10sXHJcbiAgICBiZ21LZXlMaXN0OiBbXSxcclxuICAgIHNmeEtleUxpc3Q6IFtdLFxyXG4gICAgaXNCZ21NdXRlOiBmYWxzZSxcclxuICAgIGlzU2Z4TXV0ZTogZmFsc2UsXHJcbiAgICBiZ21Wb2x1bWU6IDAuNSxcclxuICAgIHNmeFZvbHVtZTogMC41LFxyXG4gICAgc2V0QmdtTXV0ZTogZnVuY3Rpb24gKGlzTXV0ZSkge1xyXG4gICAgICAgIHRoaXMuaXNCZ21NdXRlID0gaXNNdXRlO1xyXG4gICAgICAgIHRoaXMuYmdtTGlzdC5mb3JFYWNoKGJnbSA9PiBiZ20uc2V0TXV0ZShpc011dGUpKTtcclxuICAgICAgICBpZiAoaXNNdXRlKVxyXG4gICAgICAgICAgICB0aGlzLmJnbUtleUxpc3QubWFwKGtleSA9PiB0aGlzLnBhdXNlQmdtKGtleSkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5iZ21LZXlMaXN0Lm1hcChrZXkgPT4gdGhpcy5yZXN1bWVCZ20oa2V5KSk7XHJcbiAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ2lzQmdtTXV0ZScsIGlzTXV0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc2V0U2Z4TXV0ZTogZnVuY3Rpb24gKGlzTXV0ZSkge1xyXG4gICAgICAgIHRoaXMuaXNTZnhNdXRlID0gaXNNdXRlO1xyXG4gICAgICAgIHRoaXMuc2Z4TGlzdC5mb3JFYWNoKHNmeCA9PiBzZnguc2V0TXV0ZShpc011dGUpKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnaXNTZnhNdXRlJywgaXNNdXRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRCZ21Wb2x1bWU6IGZ1bmN0aW9uICh2b2x1bWUpIHtcclxuICAgICAgICB0aGlzLmJnbVZvbHVtZSA9IHZvbHVtZTtcclxuICAgICAgICB0aGlzLmJnbUxpc3QuZm9yRWFjaChiZ20gPT4gYmdtLnNldFZvbHVtZSh2b2x1bWUpKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnYmdtVm9sdW1lJywgdm9sdW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRTZnhWb2x1bWU6IGZ1bmN0aW9uICh2b2x1bWUpIHtcclxuICAgICAgICB0aGlzLnNmeFZvbHVtZSA9IHZvbHVtZTtcclxuICAgICAgICB0aGlzLnNmeExpc3QuZm9yRWFjaChzZnggPT4gc2Z4LnNldFZvbHVtZSh2b2x1bWUpKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnc2Z4Vm9sdW1lJywgdm9sdW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBwbGF5QmdtOiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcGxheUJnbSA9IHRoaXMuYmdtTGlzdC5maW5kKGJnbSA9PiBiZ20ua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChwbGF5QmdtKVxyXG4gICAgICAgICAgICBwbGF5QmdtLnBsYXkoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0F1ZGlvXSBwbGF5QmdtOiAke2tleX0gbm90IGZvdW5kYCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgcGF1c2VCZ206IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBiZ20gPSB0aGlzLmJnbUxpc3QuZmluZChiZ20gPT4gYmdtLmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAoYmdtKVxyXG4gICAgICAgICAgICBiZ20ucGF1c2UoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICByZXN1bWVCZ206IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBiZ20gPSB0aGlzLmJnbUxpc3QuZmluZChiZ20gPT4gYmdtLmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAoYmdtKVxyXG4gICAgICAgICAgICBiZ20ucmVzdW1lKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc3RvcEJnbTogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IGJnbSA9IHRoaXMuYmdtTGlzdC5maW5kKGJnbSA9PiBiZ20ua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChiZ20pXHJcbiAgICAgICAgICAgIGJnbS5zdG9wKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgcGxheVNmeDogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IHBsYXlTZnggPSB0aGlzLnNmeExpc3QuZmluZChzZnggPT4gc2Z4LmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAocGxheVNmeClcclxuICAgICAgICAgICAgcGxheVNmeC5wbGF5KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtBdWRpb10gcGxheVNmeDogJHtrZXl9IG5vdCBmb3VuZGApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHN0b3BTZng6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBzZnggPSB0aGlzLnNmeExpc3QuZmluZChzZnggPT4gc2Z4LmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAoc2Z4KVxyXG4gICAgICAgICAgICBzZnguc3RvcCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIC8vIHBsYXkgJiBzdG9wIGNvbnRyb2wgZm9yIGluc3RhbmNlIGFueSBzZnhcclxuICAgIHBsYXlTZnhJbnN0YW5jZUxvb3A6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZnhLZXlMaXN0LmZpbmQoa2V5ID0+IGtleSA9PT0gaW5zdGFuY2Uua2V5KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGluc3RhbmNlLnBsYXkoe1xyXG4gICAgICAgICAgICBtdXRlOiBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnaXNTZnhNdXRlJyksXHJcbiAgICAgICAgICAgIHZvbHVtZTogR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ3NmeFZvbHVtZScpLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHN0b3BTZnhJbnN0YW5jZUxvb3A6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZnhLZXlMaXN0LmZpbmQoa2V5ID0+IGtleSA9PT0gaW5zdGFuY2Uua2V5KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGluc3RhbmNlLnN0b3AoKTtcclxuICAgICAgICBpbnN0YW5jZS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICBpbnN0YW5jZS5kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBHYW1lRGF0YUF1ZGlvID0ge1xyXG4gICAgYmdtVm9sdW1lOiAwLjUsXHJcbiAgICBzZnhWb2x1bWU6IDAuNSxcclxuICAgIGlzQmdtTXV0ZTogZmFsc2UsXHJcbiAgICBpc1NmeE11dGU6IGZhbHNlLFxyXG59O1xyXG5jb25zdCBHZXRBdWRpb0Fzc2V0cyA9IChzZnhLZXlMaXN0LCBiZ21LZXlMaXN0LCBleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBHYW1lQXVkaW8uc2Z4S2V5TGlzdCA9IEdldEFzc2V0RmlsZXMoc2Z4S2V5TGlzdCwgZXhjZXB0aW9uS2V5cykubWFwKGFzc2V0ID0+IGFzc2V0LmtleSk7XHJcbiAgICBpZiAoYmdtS2V5TGlzdClcclxuICAgICAgICBHYW1lQXVkaW8uYmdtS2V5TGlzdCA9IEdldEFzc2V0RmlsZXMoYmdtS2V5TGlzdCwgZXhjZXB0aW9uS2V5cykubWFwKGFzc2V0ID0+IGFzc2V0LmtleSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgR2FtZUF1ZGlvLmJnbUtleUxpc3QgPSBbXTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgLi4uc2Z4S2V5TGlzdCxcclxuICAgICAgICAuLi5iZ21LZXlMaXN0LFxyXG4gICAgXTtcclxufTtcclxuY29uc3QgSW5pdEdhbWVBdWRpbyA9ICgpID0+IHtcclxuICAgIGNvbnN0IFtiZ21Wb2x1bWUsIHNmeFZvbHVtZSwgaXNCZ21NdXRlLCBpc1NmeE11dGVdID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgWydiZ21Wb2x1bWUnLCAnc2Z4Vm9sdW1lJywgJ2lzQmdtTXV0ZScsICdpc1NmeE11dGUnXSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0QmdtVm9sdW1lKGJnbVZvbHVtZSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0U2Z4Vm9sdW1lKHNmeFZvbHVtZSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0QmdtTXV0ZShpc0JnbU11dGUpO1xyXG4gICAgR2FtZUF1ZGlvLnNldFNmeE11dGUoaXNTZnhNdXRlKTtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZUF1ZGlvID0gKHNjZW5lLCBnYW1lRGF0YSkgPT4ge1xyXG4gICAgR2FtZUF1ZGlvLndob2xlR2FtZURhdGEgPSBnYW1lRGF0YTtcclxuICAgIEdhbWVBdWRpby5iZ21MaXN0ID0gR2FtZUF1ZGlvLmJnbUtleUxpc3QgJiYgR2FtZUF1ZGlvLmJnbUtleUxpc3QubWFwKGtleSA9PiBzY2VuZS5zb3VuZC5hZGQoa2V5LCB7IGxvb3A6IHRydWUgfSkpO1xyXG4gICAgR2FtZUF1ZGlvLnNmeExpc3QgPSBHYW1lQXVkaW8uc2Z4S2V5TGlzdCAmJiBHYW1lQXVkaW8uc2Z4S2V5TGlzdC5tYXAoa2V5ID0+IHNjZW5lLnNvdW5kLmFkZChrZXkpKTtcclxuICAgIEluaXRHYW1lQXVkaW8oKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUF1ZGlvO1xyXG5leHBvcnQgeyBHYW1lRGF0YUF1ZGlvLCBHZXRBdWRpb0Fzc2V0cywgSW5pdEdhbWVBdWRpbywgQ3JlYXRlR2FtZUF1ZGlvIH07XHJcbiIsImNvbnN0IERlcHRoID0ge1xyXG4gICAgdHJlZTogOTAsXHJcbiAgICBibG9jazogMTAwLFxyXG4gICAgY2xvdWQ6IDEyMCxcclxuICAgIG1pc3Q6IDEyMCxcclxuICAgIHdhbGw6IDE0MCxcclxuICAgIHR4dDogMTUwLFxyXG4gICAgcG9wVXA6IDQwMCxcclxuICAgIHNldHRpbmc6IDUwMCxcclxuICAgIHdhcm5pbmc6IDYwMCxcclxuICAgIGdhbWVPdmVyOiAxMDAwLFxyXG4gICAgcGFydGljbGU6IDExMDAsXHJcbiAgICBuZXdCZXN0OiAxMjAwLFxyXG4gICAgaGlnaGVzdDogMTUwMCxcclxuICAgIGZ1bGxTY3JlZW46IDE2MDAsXHJcbn07XHJcbmNvbnN0IFNldERlcHRoID0gKHRhcmdldE9iaiwgdHlwZSkgPT4ge1xyXG4gICAgaWYgKCFEZXB0aFt0eXBlXSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignU2V0RGVwdGg6IHR5cGUgaXMgbm90IGZvdW5kIGluIHRoZSBkZXB0aCBsaXN0OicsIHRhcmdldE9iaiwgdHlwZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RhcmdldE9iaiwgdHlwZTogJywgdGFyZ2V0T2JqLCB0eXBlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0T2JqLnNldERlcHRoKVxyXG4gICAgICAgIHRhcmdldE9iai5zZXREZXB0aChEZXB0aFt0eXBlXSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdTZXREZXB0aDogdGFyZ2V0T2JqIGlzIG5vdCBQaGFzZXIuR2FtZU9iamVjdHMnKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRGVwdGg7XHJcbmV4cG9ydCB7IFNldERlcHRoIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5jb25zdCBUeHRUaXRsZUhlYWRTaXplID0gNTA7XHJcbmNvbnN0IFR4dFRpdGxlU2l6ZSA9IDMwO1xyXG5jb25zdCBUeHRUaXRsZUhlaWdodEdhcCA9IDYwO1xyXG5jb25zdCBUeHRPdmVySGVhZFNpemUgPSBWaWV3LncgLyA0O1xyXG5jb25zdCBUeHRNYXJnaW4gPSAyNjtcclxuY29uc3QgVHh0UGFkZGluZyA9IDg7XHJcbmNvbnN0IFR4dEFscGhhID0gMC45O1xyXG5jb25zdCBUeHRTaXplID0gMjA7XHJcbmNvbnN0IFR4dEZhbWlseSA9ICdBcmlhbCBCbGFjayc7XHJcbmNvbnN0IFR4dEJhY2tncm91bmRDb2xvciA9ICcjMjQyNDI0JztcclxuY29uc3QgQ29udGV4dE1hcmdpblcgPSBWaWV3LncgLyAxMjtcclxuY29uc3QgQ29udGV4dE1hcmdpbkggPSBWaWV3LmggLyAxMjtcclxuY29uc3QgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUgPSAodGV4dCkgPT4ge1xyXG4gICAgdGV4dC5zZXRPcmlnaW4oMC41LCAwLjUpO1xyXG4gICAgdGV4dC5zZXRGb250U2l6ZShUeHRTaXplKTtcclxuICAgIHRleHQuc2V0Rm9udEZhbWlseShUeHRGYW1pbHkpO1xyXG4gICAgcmV0dXJuIHRleHQ7XHJcbn07XHJcbmV4cG9ydCB7IFR4dFRpdGxlSGVhZFNpemUsIFR4dFRpdGxlU2l6ZSwgVHh0VGl0bGVIZWlnaHRHYXAsIFR4dE92ZXJIZWFkU2l6ZSwgVHh0TWFyZ2luLCBUeHRQYWRkaW5nLCBUeHRBbHBoYSwgVHh0U2l6ZSwgVHh0RmFtaWx5LCBUeHRCYWNrZ3JvdW5kQ29sb3IsIENvbnRleHRNYXJnaW5XLCBDb250ZXh0TWFyZ2luSCwgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUgfTtcclxuIiwiLy8gaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSAnLi9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuY2xhc3MgQmFzaWNCbG9jayBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xyXG4gICAgLy8gcHVibGljIHRlc3RPYmo7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCAwLCAwKTtcclxuICAgICAgICB0aGlzLmlzRXZ0Q3JlYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHlwZU5hbWUgPSAnJztcclxuICAgICAgICB0aGlzLnNwYXduQ2hhbmNlID0gMDtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLmJEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5pc09uU2NyZWVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbml0UHJwb2VydGllcygpO1xyXG4gICAgICAgIHRoaXMuaW5pdENoaWxkcmVuKHNjZW5lKTtcclxuICAgICAgICB0aGlzLmluaXRQaHlzaWNzKHNjZW5lKTtcclxuICAgICAgICBTZXREZXB0aCh0aGlzLCAnYmxvY2snKTtcclxuICAgICAgICBzY2VuZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB9XHJcbiAgICBpbml0UHJwb2VydGllcygpIHtcclxuICAgICAgICB0aGlzLmlkID0gYCR7bmV3IERhdGUoKS5nZXRUaW1lKCl9LSR7UGhhc2VyLk1hdGguUk5ELnV1aWQoKX1gO1xyXG4gICAgfVxyXG4gICAgaW5pdENoaWxkcmVuKHNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5zaGFwZUltZyA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnYmFsbCcpO1xyXG4gICAgICAgIHRoaXMudHlwZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIDAsICcnKTtcclxuICAgICAgICB0aGlzLnR5cGVJbWcgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJycpO1xyXG4gICAgICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKHRoaXMudHlwZVR4dCk7XHJcbiAgICAgICAgdGhpcy5pbml0VHlwZVR4dCgpO1xyXG4gICAgICAgIHRoaXMuYWRkKFt0aGlzLnNoYXBlSW1nLCB0aGlzLnR5cGVUeHQsIHRoaXMudHlwZUltZ10pO1xyXG4gICAgICAgIC8vIHRoaXMudGVzdE9iaiA9IHNjZW5lLm1hdHRlci5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCAwLCAnYmFsbCcpO1xyXG4gICAgICAgIC8vIHRoaXMudGVzdE9iai5zZXRDaXJjbGUoNDAsIDQwKTtcclxuICAgICAgICAvLyB0aGlzLnRlc3RPYmouc2V0Qm91bmNlKDEpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnRlc3RPYmo6ICcsIHRoaXMudGVzdE9iaik7XHJcbiAgICB9XHJcbiAgICBpbml0UGh5c2ljcyhzY2VuZSkge1xyXG4gICAgICAgIC8vIG51bWJlciBpcyBtZWFuaW5nbGVzcyBqdXN0IGRlZmF1bHQgdmFsdWVcclxuICAgICAgICAvLyBmb3IgYWRkIGNvbnRhaW5lciB0byBtYXR0ZXIgZ2FtZSBvYmplY3RcclxuICAgICAgICB0aGlzLnNldFNpemUoMTAwLCAxMDApO1xyXG4gICAgICAgIC8vIGFkZCB0byBtYXR0ZXIgZ2FtZSBvYmplY3RcclxuICAgICAgICB0aGlzLnBoeXNpY3NDb24gPSBzY2VuZS5tYXR0ZXIuYWRkLmdhbWVPYmplY3QodGhpcyk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzQ29uLnNldEZyaWN0aW9uKDAuMDA1KTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NDb24uc2V0Qm91bmNlKDEpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc0Nvbi5zZXRTZW5zb3IodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXRCb2R5KCkgeyByZXR1cm4gdGhpcy5ib2R5OyB9XHJcbiAgICBnZXRTaGFwZSgpIHsgcmV0dXJuIHRoaXMuc2hhcGU7IH1cclxuICAgIGFkZFNoYXBlKHNoYXBlKSB7IHRoaXMuc2hhcGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2hhcGUpLCBzaGFwZSk7IHJldHVybiB0aGlzOyB9XHJcbiAgICBzZXRTaGFwZShzaGFwZSkgeyB0aGlzLnNoYXBlID0gc2hhcGU7IHJldHVybiB0aGlzOyB9XHJcbiAgICBnZXRTaGFwZU5hbWUoKSB7IHJldHVybiB0aGlzLnNoYXBlTmFtZTsgfVxyXG4gICAgc2V0U2hhcGVOYW1lKG5hbWUpIHsgdGhpcy5zaGFwZU5hbWUgPSBuYW1lOyByZXR1cm4gdGhpczsgfVxyXG4gICAgZ2V0U2hhcGVJbWcoKSB7IHJldHVybiB0aGlzLnNoYXBlSW1nOyB9XHJcbiAgICBnZXRTY29yZSgpIHsgcmV0dXJuIHRoaXMuc2NvcmU7IH1cclxuICAgIHNldFNjb3JlKHNjb3JlKSB7IHRoaXMuc2NvcmUgPSBzY29yZTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGFkZFNjb3JlKHNjb3JlKSB7IHRoaXMuc2NvcmUgKz0gc2NvcmU7IHJldHVybiB0aGlzOyB9XHJcbiAgICBnZXRUaW1lSW5jcmVhc2UoKSB7IHJldHVybiB0aGlzLnRpbWVJbmNyZWFzZTsgfVxyXG4gICAgc2V0VGltZUluY3JlYXNlKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnRpbWVJbmNyZWFzZSA9IHtcclxuICAgICAgICAgICAgY2hhbmNlOiBkYXRhLmNoYW5jZSxcclxuICAgICAgICAgICAgdmFsdWU6IGRhdGEudmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0U3Bhd25SbmRDaGFuY2UoKSB7IHJldHVybiB0aGlzLnNwYXduQ2hhbmNlOyB9XHJcbiAgICBzZXRTcGF3blJuZENoYW5jZShjaGFuY2VOdW0pIHsgcmV0dXJuIHRoaXMuc3Bhd25DaGFuY2UgPSBjaGFuY2VOdW07IH1cclxuICAgIGdldFR5cGVJbWcoKSB7IHJldHVybiB0aGlzLnR5cGVJbWc7IH1cclxuICAgIHNldFR5cGVJbWcodHlwZVRleHR1cmUpIHtcclxuICAgICAgICBpZiAoIXR5cGVUZXh0dXJlKVxyXG4gICAgICAgICAgICB0aGlzLnR5cGVJbWcuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50eXBlSW1nLnNldFRleHR1cmUodHlwZVRleHR1cmUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0VHlwZUltZ0Rpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpIHsgdGhpcy50eXBlSW1nLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpOyByZXR1cm4gdGhpczsgfVxyXG4gICAgaW5pdFR5cGVUeHQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRUeXBlVHh0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5zZXRUeXBlVHh0KCcnKTtcclxuICAgICAgICB0aGlzLnR5cGVUeHQuc2V0Rm9udFNpemUoNTApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VHlwZVR4dCgpIHsgcmV0dXJuIHRoaXMudHlwZVR4dDsgfVxyXG4gICAgc2V0VHlwZVR4dCh0ZXh0KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR5cGVUeHQudmlzaWJsZSlcclxuICAgICAgICAgICAgdGhpcy50eXBlVHh0LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgaWYgKCF0ZXh0KVxyXG4gICAgICAgICAgICB0aGlzLnR5cGVUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50eXBlVHh0LnNldFRleHQodGV4dCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRUeXBlVHh0VmlzaWJsZSh2aXNpYmxlKSB7IHRoaXMudHlwZVR4dC5zZXRWaXNpYmxlKHZpc2libGUpOyByZXR1cm4gdGhpczsgfVxyXG4gICAgZ2V0VHlwZU5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGVOYW1lOyB9XHJcbiAgICBzZXRUeXBlTmFtZSh0eXBlTmFtZSkgeyByZXR1cm4gdGhpcy50eXBlTmFtZSA9IHR5cGVOYW1lOyB9XHJcbiAgICBnZXRCbG9ja0RhdGEoKSB7IHJldHVybiB0aGlzLmJEYXRhOyB9XHJcbiAgICBzZXRCbG9ja0RhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuYkRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmJEYXRhID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGFkZEJsb2NrRGF0YShkYXRhKSB7IHRoaXMuYkRhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYkRhdGEpLCBkYXRhKTsgfVxyXG4gICAgZ2V0UGh5c2ljc0NvbigpIHsgcmV0dXJuIHRoaXMucGh5c2ljc0NvbjsgfVxyXG4gICAgZ2V0V2lkdGgoKSB7IHJldHVybiB0aGlzLnR5cGVJbWcud2lkdGg7IH1cclxuICAgIGdldEhlaWdodCgpIHsgcmV0dXJuIHRoaXMudHlwZUltZy5oZWlnaHQ7IH1cclxufVxyXG5jb25zdCBTcGF3bkJsb2NrID0gKGJsb2NrKSA9PiB7XHJcbiAgICBTZXRCbG9ja0lucHV0U2V0dGluZyhibG9jayk7XHJcbiAgICBibG9jay5zZXRQb3NpdGlvbihCbG9ja1N5c3RlbS5nZXRSbmRTcGF3blgoKSwgQmxvY2tTeXN0ZW0uc3Bhd25ZKTtcclxuICAgIGJsb2NrLnNldEFuZ2xlKEJsb2NrU3lzdGVtLmdldFJuZEFuZ2xlKCkpO1xyXG4gICAgYmxvY2suc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIGJsb2NrLmlzT25TY3JlZW4gPSB0cnVlO1xyXG4gICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldElnbm9yZUdyYXZpdHkoZmFsc2UpO1xyXG4gICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFNlbnNvcihmYWxzZSk7XHJcbiAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5zcGF3biAmJiBibG9jay5nZXRCbG9ja0RhdGEoKS5zcGF3bigpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBTZXRCbG9ja0lucHV0U2V0dGluZyA9IChibG9jaykgPT4ge1xyXG4gICAgYmxvY2sucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICBibG9jay5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgYmxvY2suc2NlbmUuaW5wdXQuc2V0RHJhZ2dhYmxlKGJsb2NrLCB0cnVlKTtcclxuICAgIGJsb2NrLm9uKCdwb2ludGVyZG93bicsIChwdHIpID0+IHtcclxuICAgICAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyRG93bilcclxuICAgICAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyRG93bihibG9jaywgcHRyKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0SWdub3JlR3Jhdml0eSh0cnVlKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U3RhdGljKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgICBibG9jay5vbignZHJhZycsIChwdHIpID0+IHtcclxuICAgICAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkuZHJhZylcclxuICAgICAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkuZHJhZyhibG9jaywgcHRyKTtcclxuICAgIH0pO1xyXG4gICAgYmxvY2sub24oJ3BvaW50ZXJ1cCcsIChwdHIpID0+IHtcclxuICAgICAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyVXApXHJcbiAgICAgICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0clVwKGJsb2NrLCBwdHIpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRJZ25vcmVHcmF2aXR5KGZhbHNlKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U3RhdGljKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gICAgYmxvY2sub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0ck91dClcclxuICAgICAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyT3V0KGJsb2NrKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0SWdub3JlR3Jhdml0eShmYWxzZSk7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFN0YXRpYyhmYWxzZSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgU2V0QmxvY2tUeXBlMkluaXRCYXNpYyA9IChibG9jaykgPT4ge1xyXG4gICAgYmxvY2suc2V0U2NvcmUoMCk7XHJcbiAgICBibG9jay5zZXRUaW1lSW5jcmVhc2UoeyBjaGFuY2U6IDAsIHZhbHVlOiAwIH0pO1xyXG4gICAgYmxvY2suZ2V0VHlwZUltZygpLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICBibG9jay5pbml0VHlwZVR4dCgpO1xyXG4gICAgYmxvY2suc2V0QmxvY2tEYXRhKHt9KTtcclxuICAgIGJsb2NrLnNldEFscGhhKDEpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBibG9jay5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGJsb2NrLnNjZW5lLmlucHV0LnNldERyYWdnYWJsZShibG9jaywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBEZWF0aEJsb2NrID0gKGJsb2NrKSA9PiB7XHJcbiAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkuZGVhdGgpXHJcbiAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkuZGVhdGgoKCkgPT4geyBEaXNhYmxlQmxvY2soYmxvY2spOyB9KTtcclxuICAgIGVsc2VcclxuICAgICAgICBEaXNhYmxlQmxvY2soYmxvY2spO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBEaXNhYmxlQmxvY2sgPSAoYmxvY2spID0+IHtcclxuICAgIGlmIChibG9jay5nZXRCb2R5KCkpIHtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0SWdub3JlR3Jhdml0eSh0cnVlKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U2Vuc29yKHRydWUpO1xyXG4gICAgfVxyXG4gICAgYmxvY2suaXNPblNjcmVlbiA9IGZhbHNlO1xyXG4gICAgYmxvY2suc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBTZXRCbG9ja1R5cGUySW5pdEJhc2ljKGJsb2NrKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgVXBkYXRlQmxvY2sgPSAoYmxvY2ssIHRpbWUsIGRlbHRhKSA9PiB7XHJcbiAgICBpZiAoIWJsb2NrIHx8ICFibG9jay5nZXRCbG9ja0RhdGEoKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkudXBkYXRlKVxyXG4gICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLnVwZGF0ZSh0aW1lLCBkZWx0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEJhc2ljQmxvY2s7XHJcbmV4cG9ydCB7IFNwYXduQmxvY2ssIERlYXRoQmxvY2ssIERpc2FibGVCbG9jaywgU2V0QmxvY2tUeXBlMkluaXRCYXNpYywgVXBkYXRlQmxvY2ssIH07XHJcbiIsImNvbnN0IFNldEJsb2NrMkFkID0gKGJsb2NrKSA9PiB7XHJcbiAgICBsZXQgYkRhdGEgPSB7XHJcbiAgICAgICAgcHRyRG93bjogKGJsb2NrKSA9PiB7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJVcDogKGJsb2NrKSA9PiB7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnOiAoYmxvY2spID0+IHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYWdFbmQ6IChibG9jaykgPT4ge1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0QmxvY2syQWQ7XHJcbiIsImNvbnN0IElucHV0ID0ge1xyXG4gICAgdHlwZTogJycsXHJcbiAgICB0eXBlSGlzdG9yeTogW10sXHJcbiAgICBpbml0UG9zOiB7IHg6IDAsIHk6IDAgfSxcclxuICAgIGlzSG9sZGluZ0Rvd246IGZhbHNlLFxyXG4gICAgaG9sZER1cmF0aW9uOiAwLFxyXG4gICAgaG9sZE1heER1cmF0aW9uOiAxMDAwLFxyXG4gICAgc3RhcnRIb2xkOiBmdW5jdGlvbiAoKSB7IHRoaXMuaXNIb2xkaW5nRG93biA9IHRydWU7IHJldHVybiB0aGlzOyB9LFxyXG4gICAgcmVzZXRIb2xkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pc0hvbGRpbmdEb3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbml0UG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5ob2xkRHVyYXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuc2V0VHlwZSgnJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgZ2V0SXNIb2xkaW5nRG93bjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc0hvbGRpbmdEb3duOyB9LFxyXG4gICAgZ2V0SG9sZER1cmF0aW9uOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmhvbGREdXJhdGlvbjsgfSxcclxuICAgIHNldEhvbGREdXJhdGlvbjogZnVuY3Rpb24gKGR1cmF0aW9uKSB7IHRoaXMuaG9sZER1cmF0aW9uID0gZHVyYXRpb247IHJldHVybiB0aGlzOyB9LFxyXG4gICAgc2V0SW5pdFBvczogZnVuY3Rpb24gKHgsIHkpIHsgdGhpcy5pbml0UG9zID0geyB4OiB4LCB5OiB5IH07IHJldHVybiB0aGlzOyB9LFxyXG4gICAgY2hja0lzSG9sZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhvbGREdXJhdGlvbiA+PSB0aGlzLmhvbGRNYXhEdXJhdGlvbilcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgZ2V0VHlwZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50eXBlOyB9LFxyXG4gICAgc2V0VHlwZTogZnVuY3Rpb24gKHR5cGUpIHsgdGhpcy50eXBlID0gdHlwZTsgcmV0dXJuIHRoaXM7IH0sXHJcbiAgICBpbml0VHlwZUhpc3Rvcnk6IGZ1bmN0aW9uICgpIHsgdGhpcy50eXBlSGlzdG9yeSA9IFtdOyB9LFxyXG4gICAgZ2V0VHlwZUhpc3Rvcnk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudHlwZUhpc3Rvcnk7IH0sXHJcbiAgICBnZXRMYXN0ZXN0SW5wdXRUeXBlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnR5cGVIaXN0b3J5W3RoaXMudHlwZUhpc3RvcnkubGVuZ3RoIC0gMV07IH0sXHJcbiAgICBwdXNoMlR5cGVIaXN0b3J5OiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIHRoaXMudHlwZUhpc3RvcnkucHVzaCh0eXBlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlSGlzdG9yeTtcclxuICAgIH1cclxufTtcclxuY29uc3QgSW5pdElucHV0ID0gKCkgPT4ge1xyXG4gICAgSW5wdXQucmVzZXRIb2xkKCk7XHJcbiAgICBJbnB1dC5pbml0VHlwZUhpc3RvcnkoKTtcclxufTtcclxuY29uc3QgQ3JlYXRlSW5wdXQgPSAoc2NlbmUpID0+IHtcclxuICAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICBJbnB1dC5zdGFydEhvbGQoKTtcclxuICAgIH0pO1xyXG4gICAgSW5pdElucHV0KCk7XHJcbn07XHJcbmNvbnN0IFVwZGF0ZUlucHV0ID0gKGRlbHRhKSA9PiB7XHJcbiAgICBpZiAoSW5wdXQuZ2V0SXNIb2xkaW5nRG93bigpKVxyXG4gICAgICAgIElucHV0LnNldEhvbGREdXJhdGlvbihJbnB1dC5nZXRIb2xkRHVyYXRpb24oKSArIGRlbHRhKTtcclxufTtcclxuY29uc3QgSW5wdXRQdHJEb3duID0gKHB0cikgPT4ge1xyXG4gICAgSW5wdXQuc2V0SW5pdFBvcyhwdHIueCwgcHRyLnkpO1xyXG59O1xyXG5jb25zdCBJbnB1dFB0clVwID0gKHB0cikgPT4ge1xyXG4gICAgcmV0dXJuIFNldElucHV0VHlwZShJbnB1dC5pbml0UG9zLCBwdHIpO1xyXG59O1xyXG5jb25zdCBJbnB1dERyYWcgPSAocHRyKSA9PiB7XHJcbn07XHJcbmNvbnN0IElucHV0UHRyT3V0ID0gKCkgPT4ge1xyXG4gICAgSW5wdXQucmVzZXRIb2xkKCk7XHJcbn07XHJcbmNvbnN0IENoY2tTd2lwZURpcmVjdGlvbiA9IChpbml0UG9zLCBwdHIpID0+IHtcclxuICAgIGNvbnN0IHggPSBwdHIueCAtIGluaXRQb3MueDtcclxuICAgIGNvbnN0IHkgPSBwdHIueSAtIGluaXRQb3MueTtcclxuICAgIGlmIChNYXRoLmFicyh4KSA+IE1hdGguYWJzKHkpKSB7XHJcbiAgICAgICAgaWYgKHggPiAwKVxyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCdzd2lwZVJpZ2h0Jyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCdzd2lwZUxlZnQnKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh5IDwgMClcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgnc3dpcGVVcCcpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgnc3dpcGVEb3duJyk7XHJcbiAgICB9XHJcbn07XHJcbi8vIHNldCBjb21meSB0b3VjaCB0byBub3QganVkZ2UgYXMgc3dpcGUgd2hlbiB1c2Ugd2l0aCBhY3R1YWwgZmluZ2VyXHJcbmNvbnN0IENvbWZ5R2FwVG91Y2hWYWx1ZSA9IDE1O1xyXG5jb25zdCBTZXRJbnB1dFR5cGUgPSAoaW5pdFBvcywgcHRyKSA9PiB7XHJcbiAgICAvLyBzd2lwZSBtb3Rpb25cclxuICAgIGNvbnN0IGNoY2tQb3NYID0gTWF0aC5hYnMoaW5pdFBvcy54IC0gcHRyLngpID4gQ29tZnlHYXBUb3VjaFZhbHVlO1xyXG4gICAgY29uc3QgY2hja1Bvc1kgPSBNYXRoLmFicyhpbml0UG9zLnkgLSBwdHIueSkgPiBDb21meUdhcFRvdWNoVmFsdWU7XHJcbiAgICBpZiAoY2hja1Bvc1ggfHwgY2hja1Bvc1kpXHJcbiAgICAgICAgQ2hja1N3aXBlRGlyZWN0aW9uKGluaXRQb3MsIHB0cik7XHJcbiAgICAvLyBob2xkIG9yIHRvdWNoXHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoSW5wdXQuY2hja0lzSG9sZCgpKSB7XHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ2hvbGQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCd0b3VjaCcpO1xyXG4gICAgfVxyXG4gICAgSW5wdXQucHVzaDJUeXBlSGlzdG9yeShJbnB1dC5nZXRUeXBlKCkpO1xyXG4gICAgSW5wdXQucmVzZXRIb2xkKCk7XHJcbiAgICByZXR1cm4gSW5wdXQuZ2V0TGFzdGVzdElucHV0VHlwZSgpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBJbnB1dDtcclxuZXhwb3J0IHsgQ3JlYXRlSW5wdXQsIFVwZGF0ZUlucHV0LCBJbnB1dFB0ckRvd24sIElucHV0UHRyVXAsIElucHV0RHJhZywgSW5wdXRQdHJPdXQsIFNldElucHV0VHlwZSB9O1xyXG4iLCJpbXBvcnQgeyBHZXRSbmROdW0gfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgSW5wdXRQdHJEb3duLCBJbnB1dFB0clVwLCBJbnB1dFB0ck91dCB9IGZyb20gJy4uLy4uL2lucHV0JztcclxuaW1wb3J0IHsgQWRkT2JzdGFjbGVCbG9jaywgQ2xlYXJCbG9jayB9IGZyb20gJy4uL3N5c3RlbSc7XHJcbmltcG9ydCB7IENvbW1vblNpemUgfSBmcm9tICcuJztcclxuY29uc3QgU2V0QmxvY2syUG93ZXIgPSAoYmxvY2spID0+IHtcclxuICAgIGNvbnN0IHsgc2NlbmUgfSA9IGJsb2NrO1xyXG4gICAgY29uc3Qgcm5kRG93bkR1cmF0aW9uTWF4ID0gR2V0Um5kTnVtKDAuNSwgMS41KTtcclxuICAgIGNvbnN0IGluaXRQdHIgPSAoYkRhdGEsIGJsb2NrKSA9PiB7XHJcbiAgICAgICAgYkRhdGEuaXNQdHJEb3duID0gZmFsc2U7XHJcbiAgICAgICAgYkRhdGEuZG93bkR1cmF0aW9uID0gMDtcclxuICAgICAgICBibG9jay5zZXRBbHBoYSgxKTtcclxuICAgIH07XHJcbiAgICBsZXQgYkRhdGEgPSB7XHJcbiAgICAgICAgaXNQdHJEb3duOiBmYWxzZSxcclxuICAgICAgICBpc0NvbXBsZXRlOiBmYWxzZSxcclxuICAgICAgICBkb3duRHVyYXRpb246IDAsXHJcbiAgICAgICAgZG93bkR1cmF0aW9uTWF4OiBNYXRoLmZsb29yKHJuZERvd25EdXJhdGlvbk1heCAqIDEwMDApLFxyXG4gICAgICAgIHB0ckRvd246IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7XHJcbiAgICAgICAgICAgIElucHV0UHRyRG93bihwdHIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1B0ckRvd24pIHtcclxuICAgICAgICAgICAgICAgIEFkZE9ic3RhY2xlQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQdHJEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3Bvd2VyQmxvY2tPbicpO1xyXG4gICAgICAgICAgICBibG9jay5zZXRBbHBoYSgwLjUpO1xyXG4gICAgICAgICAgICBjb25zdCB0d0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogMCwgdG86IHRoaXMuZG93bkR1cmF0aW9uTWF4LCBkdXJhdGlvbjogdGhpcy5kb3duRHVyYXRpb25NYXgsXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogKHR3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYga2VlcCBwcmVzcyBwb3dlciBidG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1B0ckRvd24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bkR1cmF0aW9uID0gdHcuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWxlYXNlIHBvd2VyIGJ0biBiZWZvcmUgZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0UHRyKHRoaXMsIGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHcucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICh0dykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbmUgcG93ZXIgYnRuIHBsYXkgc2Z4XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHRyRG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0d0xpc3Quc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHcucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdFB0cih0aGlzLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgncG93ZXJCbG9ja09mZicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjEsIGR1cmF0aW9uOiAyNTAsIHlveW86IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0U2NhbGUoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFNjYWxlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd0b3VjaFNmeCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQmxvY2soYmxvY2ssIGJsb2NrLmdldFNjb3JlKCkgKiB0aGlzLmRvd25EdXJhdGlvbk1heCAvIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyVXA6IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLnNldEFscGhhKDEpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NvbXBsZXRlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQdHJEb3duIHx8IElucHV0UHRyVXAocHRyKSAhPT0gJ3RvdWNoJykge1xyXG4gICAgICAgICAgICAgICAgQWRkT2JzdGFjbGVCbG9jayhibG9jayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2hjayBpcyBrZWVwIHByZXNzIHVudGlsIGRvbmVcclxuICAgICAgICAgICAgaW5pdFB0cih0aGlzLCBibG9jayk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJPdXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgSW5wdXRQdHJPdXQoKTtcclxuICAgICAgICAgICAgaW5pdFB0cih0aGlzLCBibG9jayk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBibG9jay5nZXRUeXBlSW1nKCkuc2V0RGlzcGxheVNpemUoQ29tbW9uU2l6ZSwgQ29tbW9uU2l6ZSk7XHJcbiAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTZXRCbG9jazJQb3dlcjtcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IElucHV0UHRyRG93biwgSW5wdXRQdHJPdXQsIElucHV0UHRyVXAgfSBmcm9tICcuLi8uLi9pbnB1dCc7XHJcbmltcG9ydCB7IEFkZE9ic3RhY2xlQmxvY2ssIENsZWFyQmxvY2sgfSBmcm9tICcuLi9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBDb21tb25TaXplIH0gZnJvbSAnLic7XHJcbmNvbnN0IFNldEJsb2NrMkxvYWRpbmcgPSAoYmxvY2spID0+IHtcclxuICAgIGJsb2NrLnNldFR5cGVUeHQoJyUnKTtcclxuICAgIGJsb2NrLmdldFR5cGVUeHQoKS5zZXRGb250U2l6ZSg1MCk7XHJcbiAgICBsZXQgYkRhdGEgPSB7XHJcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBwdHJEb3duOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikgeyBJbnB1dFB0ckRvd24ocHRyKTsgfSxcclxuICAgICAgICBwdHJVcDogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb2FkaW5nIHx8IElucHV0UHRyVXAocHRyKSAhPT0gJ3RvdWNoJykge1xyXG4gICAgICAgICAgICAgICAgQWRkT2JzdGFjbGVCbG9jayhibG9jayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBybmREdXJhdGlvbiA9IEdldFJuZEludCgxLCA0KTtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc1NmeCA9IGJsb2NrLnNjZW5lLnNvdW5kLmFkZCgnbG9hZGluZ0Jsb2NrT25Qcm9jZXNzJyk7XHJcbiAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4SW5zdGFuY2VMb29wKHByb2Nlc3NTZngpO1xyXG4gICAgICAgICAgICBibG9jay5zY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAwLCB0bzogMTAwLCBkdXJhdGlvbjogcm5kRHVyYXRpb24gKiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBkYXRhLnZhbHVlLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0VHlwZVR4dChwZXJjZW50YWdlICsgJyUnKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnN0b3BTZnhJbnN0YW5jZUxvb3AocHJvY2Vzc1NmeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2xvYWRpbmdCbG9ja0RvbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFR5cGVUeHQoJzEwMCUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3RvdWNoU2Z4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsZWFyQmxvY2soYmxvY2ssIGJsb2NrLmdldFNjb3JlKCkgKiBybmREdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyT3V0OiBmdW5jdGlvbiAoKSB7IElucHV0UHRyT3V0KCk7IH0sXHJcbiAgICB9O1xyXG4gICAgYmxvY2suZ2V0VHlwZUltZygpLnNldERpc3BsYXlTaXplKENvbW1vblNpemUsIENvbW1vblNpemUpO1xyXG4gICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0QmxvY2syTG9hZGluZztcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgQWRkT2JzdGFjbGVCbG9jaywgQ2xlYXJCbG9jayB9IGZyb20gJy4uL3N5c3RlbSc7XHJcbmltcG9ydCB7IElucHV0UHRyRG93biwgSW5wdXRQdHJVcCwgSW5wdXRQdHJPdXQgfSBmcm9tICcuLi8uLi9pbnB1dCc7XHJcbmltcG9ydCB7IENvbW1vblNpemUgfSBmcm9tICcuJztcclxuY29uc3QgU2V0QmxvY2syVG91Y2ggPSAoYmxvY2spID0+IHtcclxuICAgIGNvbnN0IHJuZFRvdWNoQ250ID0gR2V0Um5kSW50KDIsIDUpO1xyXG4gICAgY29uc3QgZGlzYWJsZVRvdWNoRGVsYXlUaW1lID0gMjQwO1xyXG4gICAgbGV0IGJEYXRhID0ge1xyXG4gICAgICAgIHRvdWNoQ250OiAwLFxyXG4gICAgICAgIG1heFRvdWNoQ250OiBybmRUb3VjaENudCxcclxuICAgICAgICBpc0FibGUyVG91Y2g6IHRydWUsXHJcbiAgICAgICAgcHRyRG93bjogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHsgSW5wdXRQdHJEb3duKHB0cik7IH0sXHJcbiAgICAgICAgcHRyVXA6IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7XHJcbiAgICAgICAgICAgIGlmIChJbnB1dFB0clVwKHB0cikgIT09ICd0b3VjaCcpIHtcclxuICAgICAgICAgICAgICAgIEFkZE9ic3RhY2xlQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FibGUyVG91Y2gpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hDbnQrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMudG91Y2hDbnQgPj0gdGhpcy5tYXhUb3VjaENudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaENudCA9IDA7XHJcbiAgICAgICAgICAgICAgICBDbGVhckJsb2NrKGJsb2NrLCBibG9jay5nZXRTY29yZSgpICogdGhpcy5tYXhUb3VjaENudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIGNsaWNrLCB0aGVuIGFibGUgYWZ0ZXIgZGVsYXlcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNBYmxlMlRvdWNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBibG9jay5zY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogMSwgdG86IDEuMSwgZHVyYXRpb246IGRpc2FibGVUb3VjaERlbGF5VGltZSwgeW95bzogdHJ1ZSwgZWFzZTogJ0JvdW5jZScsXHJcbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRTY2FsZShkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0U2NhbGUoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBYmxlMlRvdWNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyT3V0OiBmdW5jdGlvbiAoKSB7IElucHV0UHRyT3V0KCk7IH1cclxuICAgIH07XHJcbiAgICBibG9jay5nZXRUeXBlSW1nKCkuc2V0RGlzcGxheVNpemUoQ29tbW9uU2l6ZSwgQ29tbW9uU2l6ZSk7XHJcbiAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTZXRCbG9jazJUb3VjaDtcclxuIiwiaW1wb3J0IHsgSW5wdXRQdHJEb3duLCBJbnB1dFB0clVwLCBJbnB1dFB0ck91dCB9IGZyb20gJy4uLy4uL2lucHV0JztcclxuaW1wb3J0IHsgQWRkT2JzdGFjbGVCbG9jayB9IGZyb20gJy4uL3N5c3RlbSc7XHJcbmNvbnN0IE9ic3RhY2xlVGV4dHVyZUxpc3QgPSBbJ29ic3RhY2xlQmFsbCcsICdvYnN0YWNsZVJlY3QnLCAnb2JzdGFjbGVTcXVhcmUnXTtcclxuY29uc3QgU2V0T2JzdGFjbGUgPSAoYmxvY2spID0+IHtcclxuICAgIGxldCBiRGF0YSA9IHtcclxuICAgICAgICBpc0FibGUyVG91Y2g6IHRydWUsXHJcbiAgICAgICAgcHRyRG93bjogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHsgSW5wdXRQdHJEb3duKHB0cik7IH0sXHJcbiAgICAgICAgcHRyVXA6IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0VHlwZSA9IElucHV0UHRyVXAocHRyKTtcclxuICAgICAgICAgICAgaWYgKGlucHV0VHlwZSAhPT0gJ3RvdWNoJylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWJsZTJUb3VjaClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5pc0FibGUyVG91Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgQWRkT2JzdGFjbGVCbG9jayhibG9jayk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmlzQWJsZTJUb3VjaCA9IHRydWU7IH0sIDEwMDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyT3V0OiBmdW5jdGlvbiAoKSB7IElucHV0UHRyT3V0KCk7IH1cclxuICAgIH07XHJcbiAgICBibG9jay5hZGRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgLy8gc2V0IHNoYXBlIG9ic3RhY2xlIHRleHR1cmVcclxuICAgIGNvbnN0IG5hbWUgPSBibG9jay5nZXRTaGFwZU5hbWUoKTtcclxuICAgIGNvbnN0IGNhcGl0YWxTaGFwZSA9IG5hbWVbMF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XHJcbiAgICBjb25zdCBvYnN0YWNsZVNoYXBlID0gJ29ic3RhY2xlJyArIGNhcGl0YWxTaGFwZTtcclxuICAgIGJsb2NrLmFkZFNoYXBlKHsgc2NvcmU6IDAsIGltZ1RleHR1cmU6IG9ic3RhY2xlU2hhcGUgfSk7XHJcbiAgICBibG9jay5nZXRTaGFwZUltZygpLnNldFRleHR1cmUob2JzdGFjbGVTaGFwZSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldE9ic3RhY2xlO1xyXG5leHBvcnQgeyBPYnN0YWNsZVRleHR1cmVMaXN0IH07XHJcbiIsImltcG9ydCB7IFNldEJsb2NrVHlwZTJJbml0QmFzaWMgfSBmcm9tIFwiLi4vYmFzaWNcIjtcclxuaW1wb3J0IFNldEJsb2NrMkFkIGZyb20gJy4vYWQnO1xyXG5pbXBvcnQgU2V0QmxvY2syUG93ZXIgZnJvbSAnLi9wb3dlcic7XHJcbmltcG9ydCBTZXRCbG9jazJMb2FkaW5nIGZyb20gJy4vbG9hZGluZyc7XHJcbmltcG9ydCBTZXRCbG9jazJUb3VjaCBmcm9tICcuL3RvdWNoJztcclxuaW1wb3J0IFNldE9ic3RhY2xlIGZyb20gJy4vb2JzdGFjbGUnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgQ29tbW9uU2l6ZSA9IFZpZXcuY2FsY1JhdGlvKDEwMCk7XHJcbmNvbnN0IEJsb2NrVW5pcXVlUHJvcGVydGllcyA9IFtcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJycsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDAsXHJcbiAgICAgICAgc2NvcmU6IDAsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICcnLFxyXG4gICAgICAgIGltZ1dpZHRoOiAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgU2V0QmxvY2tUeXBlMkluaXRCYXNpYyhibG9jayk7IHJldHVybiBibG9jazsgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJ29ic3RhY2xlJyxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMCxcclxuICAgICAgICBzY29yZTogMCxcclxuICAgICAgICBpY29uVGV4dHVyZTogJycsXHJcbiAgICAgICAgaW1nV2lkdGg6IDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyBTZXRPYnN0YWNsZShibG9jayk7IHJldHVybiBibG9jazsgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJ2FkJyxcclxuICAgICAgICAvLyBzcGF3bkNoYW5jZTogMSxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMCxcclxuICAgICAgICBzY29yZTogOTAsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICcnLFxyXG4gICAgICAgIGltZ1dpZHRoOiAxMDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiAxMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAzICogMTAwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDUgKiAxMDAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyByZXR1cm4gU2V0QmxvY2syQWQoYmxvY2spOyB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAncG93ZXInLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAxLFxyXG4gICAgICAgIHNjb3JlOiA2MCxcclxuICAgICAgICBpY29uVGV4dHVyZTogJ3Bvd2VyJyxcclxuICAgICAgICBpbWdXaWR0aDogMTAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMTAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogNTAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAxICogMTAwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDIgKiAxMDAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyByZXR1cm4gU2V0QmxvY2syUG93ZXIoYmxvY2spOyB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAnbG9hZGluZycsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDEsXHJcbiAgICAgICAgc2NvcmU6IDUsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICcnLFxyXG4gICAgICAgIGltZ1dpZHRoOiAxMDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiAzMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDAuNSAqIDEwMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiAxICogMTAwMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgcmV0dXJuIFNldEJsb2NrMkxvYWRpbmcoYmxvY2spOyB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAndG91Y2gnLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAxLFxyXG4gICAgICAgIHNjb3JlOiAxMCxcclxuICAgICAgICBpY29uVGV4dHVyZTogJ3RvdWNoJyxcclxuICAgICAgICBpbWdXaWR0aDogMTAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMTAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogMzAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAyICogMTAwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDQgKiAxMDAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyByZXR1cm4gU2V0QmxvY2syVG91Y2goYmxvY2spOyB9XHJcbiAgICB9LFxyXG5dO1xyXG5jb25zdCBUQmxvY2tUeXBlTGlzdCA9IEJsb2NrVW5pcXVlUHJvcGVydGllcy5tYXAoZWxlID0+IHsgaWYgKGVsZS50eXBlTmFtZSAhPT0gJycpXHJcbiAgICByZXR1cm4gZWxlLnR5cGVOYW1lOyB9KTtcclxuY29uc3QgU3Bhd25NYXhDaGFuY2UgPSBCbG9ja1VuaXF1ZVByb3BlcnRpZXMubWFwKGVsZSA9PiBlbGUuc3Bhd25DaGFuY2UpLnJlZHVjZSgocHJldlZhbHVlLCBjdXJyVmFsdWUpID0+IHtcclxuICAgIHJldHVybiBwcmV2VmFsdWUgKyBjdXJyVmFsdWU7XHJcbn0sIDApO1xyXG5jb25zdCBTZXQyVHlwZUJsb2NrID0gKGJsb2NrLCB0eXBlTmFtZSkgPT4ge1xyXG4gICAgbGV0IGZpbHRlcmVkVHlwZSA9IEJsb2NrVW5pcXVlUHJvcGVydGllcy5maW5kKGVsZSA9PiBlbGUudHlwZU5hbWUgPT09IHR5cGVOYW1lKTtcclxuICAgIGlmIChmaWx0ZXJlZFR5cGUpIHtcclxuICAgICAgICBTZXRCbG9ja1R5cGUySW5pdEJhc2ljKGJsb2NrKTtcclxuICAgICAgICBibG9jay5zZXRUeXBlTmFtZSh0eXBlTmFtZSk7XHJcbiAgICAgICAgYmxvY2suc2V0VHlwZUltZyhmaWx0ZXJlZFR5cGUuaWNvblRleHR1cmUpO1xyXG4gICAgICAgIGJsb2NrLnNldFR5cGVJbWdEaXNwbGF5U2l6ZShmaWx0ZXJlZFR5cGUuaW1nV2lkdGgsIGZpbHRlcmVkVHlwZS5pbWdIZWlnaHQpO1xyXG4gICAgICAgIGJsb2NrLmFkZFNjb3JlKGZpbHRlcmVkVHlwZS5zY29yZSk7XHJcbiAgICAgICAgYmxvY2suc2V0VGltZUluY3JlYXNlKHtcclxuICAgICAgICAgICAgY2hhbmNlOiBmaWx0ZXJlZFR5cGUudGltZUluY3JlYXNlQ2hhbmNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogR2V0Um5kSW50KGZpbHRlcmVkVHlwZS50aW1lSW5jcmVhc2VNaW4sIGZpbHRlcmVkVHlwZS50aW1lSW5jcmVhc2VNYXgpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZmlsdGVyZWRUeXBlLnNldEZ1bmMoYmxvY2spO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXQyVHlwZUJsb2NrOiB0eXBlTmFtZSBpcyBub3QgZm91bmQgaW4gdGhlIGJsb2NrIHR5cGUgbGlzdCcpO1xyXG59O1xyXG5leHBvcnQgeyBCbG9ja1VuaXF1ZVByb3BlcnRpZXMsIENvbW1vblNpemUsIFRCbG9ja1R5cGVMaXN0LCBTcGF3bk1heENoYW5jZSwgU2V0MlR5cGVCbG9jaywgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCB7IENvbnRleHRMYXllck1hcmdpbiB9IGZyb20gXCIuXCI7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSBcIi4uL2RlcHRoXCI7XHJcbmNvbnN0IFBvcFVwID0ge1xyXG4gICAgaXNPcGVuOiBmYWxzZSxcclxuICAgIGJvdHRvbUxheWVyOiBudWxsLFxyXG4gICAgY29udGV4dExheWVyOiBudWxsLFxyXG4gICAgZXhpdEJ0bjogbnVsbCxcclxuICAgIHNuZExpc3Q6IFtdLFxyXG4gICAgc2hvdzogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGJEYXRhID0gYmxvY2suZ2V0QmxvY2tEYXRhKCk7XHJcbiAgICAgICAgaWYgKGJEYXRhKSB7XHJcbiAgICAgICAgICAgIGJEYXRhLmlzUG9wdXBPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgICAgICAgICAgaWYgKGJEYXRhLnBvcFVwQ29udGV4dClcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dExheWVyID0gYkRhdGEucG9wVXBDb250ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJvdHRvbUxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0TGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLmV4aXRCdG4uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIH0sXHJcbiAgICBoaWRlOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChibG9jaykge1xyXG4gICAgICAgICAgICBjb25zdCBiRGF0YSA9IGJsb2NrLmdldEJsb2NrRGF0YSgpO1xyXG4gICAgICAgICAgICBiRGF0YS5pc1BvcHVwT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJvdHRvbUxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dExheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuZXhpdEJ0bi5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgSW5pdFBvcFVwID0gKCkgPT4ge1xyXG4gICAgUG9wVXAuY29udGV4dExheWVyLnJlbW92ZUFsbCgpO1xyXG4gICAgUG9wVXAuaGlkZSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVQb3BVcCA9IChzY2VuZSkgPT4ge1xyXG4gICAgUG9wVXAuYm90dG9tTGF5ZXIgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIFBvcFVwLmJvdHRvbUxheWVyLmZpbGxTdHlsZSgweDAwMDAwMCwgMC40KTtcclxuICAgIFBvcFVwLmJvdHRvbUxheWVyLmZpbGxSZWN0KDAsIDAsIFZpZXcudywgVmlldy5oKTtcclxuICAgIFBvcFVwLmJvdHRvbUxheWVyLnNldEludGVyYWN0aXZlKG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoMCwgMCwgVmlldy53LCBWaWV3LmgpLCBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMpO1xyXG4gICAgUG9wVXAuYm90dG9tTGF5ZXIub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgY29uc29sZS5sb2coJ3RvdWNoaW5nIHBvcHVwIGJvdHRvbSBsYXllcicpOyB9KTtcclxuICAgIFBvcFVwLmNvbnRleHRMYXllciA9IHNjZW5lLmFkZC5jb250YWluZXIoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkpO1xyXG4gICAgUG9wVXAuZXhpdEJ0biA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LncgLSBDb250ZXh0TGF5ZXJNYXJnaW4sIENvbnRleHRMYXllck1hcmdpbiwgJ2V4aXRCdG4nKTtcclxuICAgIFBvcFVwLmV4aXRCdG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIFBvcFVwLmV4aXRCdG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBQb3BVcC5oaWRlKCk7XHJcbiAgICB9KTtcclxuICAgIFtQb3BVcC5ib3R0b21MYXllciwgUG9wVXAuY29udGV4dExheWVyLCBQb3BVcC5leGl0QnRuXS5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgIGVsZS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBTZXREZXB0aChlbGUsICdwb3BVcCcpO1xyXG4gICAgfSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFBvcFVwO1xyXG5leHBvcnQgeyBJbml0UG9wVXAsIENyZWF0ZVBvcFVwIH07XHJcbiIsImltcG9ydCB7IEdhbWVEYXRhQXVkaW8gfSBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmNvbnN0IEdhbWVEYXRhID0gT2JqZWN0LmFzc2lnbih7IGJlc3Q6IDAgfSwgR2FtZURhdGFBdWRpbyk7XHJcbi8vIGV4cG9ydCBkZWZhdWx0IFRHYW1lRGF0YTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZURhdGE7XHJcbiIsIi8vIGltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IHsgVHh0RmFtaWx5LCBUeHRNYXJnaW4sIFR4dFBhZGRpbmcsIFR4dFNpemUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IHsgR2V0TG9jYWxTdG9yYWdlSXRlbSwgU2V0TG9jYWxTdG9yYWdlSXRlbSB9IGZyb20gJ0BzcmMvdXRpbHMvc3RvcmFnZSc7XHJcbmltcG9ydCBHYW1lRGF0YSBmcm9tICcuLi8uLi9zdG9yYWdlL2luZGV4JztcclxuaW1wb3J0IHsgU2V0TnVtMkN1cnJlbmN5Rm9ybWF0IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuLi9kZXB0aCc7XHJcbmltcG9ydCBCbG9ja1N5c3RlbSBmcm9tICcuLy4uL2Jsb2NrL3N5c3RlbSc7XHJcbmltcG9ydCBHYW1lVGltZSBmcm9tICcuL3RpbWUnO1xyXG5jb25zdCBTY29yZSA9IHtcclxuICAgIHR4dDogbnVsbCxcclxuICAgIHR4dEJhY2tncm91bmQ6IG51bGwsXHJcbiAgICBiVHh0OiBudWxsLFxyXG4gICAgYlR4dEJhY2tncm91bmQ6IG51bGwsXHJcbiAgICB0eHROdW06IDAsXHJcbiAgICBiVHh0TnVtOiAwLFxyXG4gICAgc2V0Rm9ybWF0OiBmdW5jdGlvbiAoc2NvcmUpIHtcclxuICAgICAgICB0aGlzLnR4dE51bSA9IHNjb3JlO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsU2NvcmUgPSAnJyArIFNldE51bTJDdXJyZW5jeUZvcm1hdChzY29yZSk7XHJcbiAgICAgICAgdGhpcy50eHQuc2V0VGV4dChmaW5hbFNjb3JlKTtcclxuICAgICAgICBpZiAodGhpcy50eHROdW0gPiB0aGlzLmJUeHROdW0pXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QkZvcm1hdChzY29yZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc2V0QkZvcm1hdDogZnVuY3Rpb24gKHNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy5iVHh0TnVtID0gc2NvcmU7XHJcbiAgICAgICAgY29uc3QgZmluYWxTY29yZSA9ICcnICsgU2V0TnVtMkN1cnJlbmN5Rm9ybWF0KHNjb3JlKTtcclxuICAgICAgICB0aGlzLmJUeHQuc2V0VGV4dChmaW5hbFNjb3JlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBhZGQ6IGZ1bmN0aW9uIChzY29yZSkge1xyXG4gICAgICAgIGlmIChCbG9ja1N5c3RlbS5nZXRJc0dhbWVPdmVyKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBsZXQgZmluYWxTY29yZSA9IE51bWJlcih0aGlzLnR4dC50ZXh0KSArIHNjb3JlO1xyXG4gICAgICAgIHRoaXMuc2V0Rm9ybWF0KGZpbmFsU2NvcmUpO1xyXG4gICAgICAgIHJldHVybiBmaW5hbFNjb3JlO1xyXG4gICAgfSxcclxuICAgIGdldFNjb3JlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnR4dE51bTsgfSxcclxuICAgIGdldEJTY29yZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5iVHh0TnVtOyB9LFxyXG4gICAgY29tcGFyZU5vcm1hbEFuZEJlc3Q6IGZ1bmN0aW9uIChzY29yZSkge1xyXG4gICAgICAgIGNvbnN0IHByZXZCZXN0ID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lRGF0YSwgJ2Jlc3QnKTtcclxuICAgICAgICBpZiAocHJldkJlc3QgPCBzY29yZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJGb3JtYXQoc2NvcmUpO1xyXG4gICAgICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVEYXRhLCAnYmVzdCcsIHNjb3JlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBnZXRCb251c1RpbWVTY29yZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKEdhbWVUaW1lLmdldFRpbWVJbmNyZWFzZSgpIC8gMTAwKTtcclxuICAgIH0sXHJcbiAgICBnZXRGaW5hbFNjb3JlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoU2NvcmUuZ2V0U2NvcmUoKSArIHRoaXMuZ2V0Qm9udXNUaW1lU2NvcmUoKSk7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBJbml0U2NvcmUgPSAoKSA9PiB7XHJcbiAgICBTY29yZS50eHROdW0gPSAwO1xyXG4gICAgU2NvcmUuYlR4dE51bSA9IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jyk7XHJcbiAgICBTY29yZS5zZXRGb3JtYXQoMCk7XHJcbiAgICBTY29yZS5zZXRCRm9ybWF0KFNjb3JlLmJUeHROdW0pO1xyXG59O1xyXG5jb25zdCBUeHRHYXAgPSAxMTA7XHJcbmNvbnN0IENyZWF0ZVNjb3JlVHh0ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBTY29yZS5iVHh0ID0gc2NlbmUuYWRkLnRleHQoVHh0TWFyZ2luIC8gMiwgVHh0TWFyZ2luICogMiwgJycpO1xyXG4gICAgU2NvcmUuYlR4dEJhY2tncm91bmQgPSBzY2VuZS5hZGQudGV4dChTY29yZS5iVHh0LnggKyBUeHRHYXAsIFNjb3JlLmJUeHQueSwgJ0Jlc3QnKTtcclxuICAgIFNjb3JlLnR4dCA9IHNjZW5lLmFkZC50ZXh0KFR4dE1hcmdpbiAvIDIsIFR4dE1hcmdpbiAqIDMsICcnKTtcclxuICAgIFNjb3JlLnR4dEJhY2tncm91bmQgPSBzY2VuZS5hZGQudGV4dChTY29yZS50eHQueCArIFR4dEdhcCwgU2NvcmUudHh0LnksICdTY29yZScpO1xyXG4gICAgW1Njb3JlLmJUeHRCYWNrZ3JvdW5kLCBTY29yZS50eHRCYWNrZ3JvdW5kXS5tYXAoKHR4dCkgPT4ge1xyXG4gICAgICAgIHR4dC5zZXRQYWRkaW5nKHsgbGVmdDogVHh0UGFkZGluZywgcmlnaHQ6IFR4dFBhZGRpbmcsIHRvcDogVHh0UGFkZGluZyAvIDIsIGJvdHRvbTogVHh0UGFkZGluZyAvIDIgfSk7XHJcbiAgICAgICAgdHh0LnNldE9yaWdpbigxLCAtMC4xKTtcclxuICAgICAgICB0eHQuc2V0Rm9udFNpemUoVHh0U2l6ZSk7XHJcbiAgICAgICAgdHh0LnNldEZvbnRGYW1pbHkoVHh0RmFtaWx5KTtcclxuICAgICAgICB0eHQuc2V0Rm9udFN0eWxlKCdib2xkIGl0YWxpYycpO1xyXG4gICAgICAgIHR4dC5zZXRBbHBoYSgwLjMpO1xyXG4gICAgfSk7XHJcbiAgICBbU2NvcmUuYlR4dCwgU2NvcmUudHh0XS5tYXAoKHR4dCkgPT4ge1xyXG4gICAgICAgIHR4dC5zZXRQYWRkaW5nKHsgbGVmdDogVHh0UGFkZGluZywgcmlnaHQ6IFR4dFBhZGRpbmcsIHRvcDogVHh0UGFkZGluZyAvIDIsIGJvdHRvbTogVHh0UGFkZGluZyAvIDIgfSk7XHJcbiAgICAgICAgdHh0LnNldE9yaWdpbigwLCAwKTtcclxuICAgICAgICB0eHQuc2V0Rm9udFNpemUoVHh0U2l6ZSk7XHJcbiAgICAgICAgdHh0LnNldEZvbnRGYW1pbHkoVHh0RmFtaWx5KTtcclxuICAgIH0pO1xyXG4gICAgbGV0IGJlc3RTY29yZSA9IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jyk7XHJcbiAgICBTY29yZS5zZXRGb3JtYXQoMCk7XHJcbiAgICBTY29yZS5zZXRCRm9ybWF0KGJlc3RTY29yZSk7XHJcbiAgICBbU2NvcmUuYlR4dEJhY2tncm91bmQsIFNjb3JlLnR4dEJhY2tncm91bmQsIFNjb3JlLmJUeHQsIFNjb3JlLnR4dF0ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICBTZXREZXB0aCh0eHQsICd0eHQnKTtcclxuICAgIH0pO1xyXG4gICAgSW5pdFNjb3JlKCk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNjb3JlO1xyXG5leHBvcnQgeyBJbml0U2NvcmUsIENyZWF0ZVNjb3JlVHh0IH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuY29uc3QgUGFzc2l2ZUxvYWRpbmcgPSB7XHJcbiAgICBzY2VuZTogbnVsbCxcclxuICAgIGlzTG9hZGluZzogZmFsc2UsXHJcbiAgICBvcHRpb246IHt9LFxyXG59O1xyXG5jb25zdCBTdGFydFBhc3NpdmVMb2FkaW5nID0gKHNjZW5lLCBvcHRpb24pID0+IHtcclxuICAgIFBhc3NpdmVMb2FkaW5nLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAvLyBvcHRpb25cclxuICAgIGlmIChvcHRpb24pXHJcbiAgICAgICAgUGFzc2l2ZUxvYWRpbmcub3B0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9uKTtcclxuICAgIC8vIGNoY2sgaXMgZXhpc3QgaWYgbm90IHRoZW4gYWRkIHRvIHNjZW5lXHJcbiAgICBjb25zdCBwYXNzaXZlTG9hZGluZ0luc3RhbmNlID0gc2NlbmUuc2NlbmUuZ2V0KCdwYXNzaXZlTG9hZGluZycpO1xyXG4gICAgaWYgKCFwYXNzaXZlTG9hZGluZ0luc3RhbmNlKVxyXG4gICAgICAgIHNjZW5lLmdhbWUuc2NlbmUuYWRkKCdwYXNzaXZlTG9hZGluZycsIFBhc3NpdmVMb2FkaW5nU2NlbmUsIGZhbHNlKTtcclxuICAgIC8vIGxhdW5jaCBsb2FkaW5nIHNjZW5lXHJcbiAgICBzY2VuZS5zY2VuZS5sYXVuY2goJ3Bhc3NpdmVMb2FkaW5nJyk7XHJcbiAgICBQYXNzaXZlTG9hZGluZy5zY2VuZSA9IHNjZW5lLnNjZW5lLmdldCgncGFzc2l2ZUxvYWRpbmcnKTtcclxufTtcclxuY29uc3QgU3RvcFBhc3NpdmVMb2FkaW5nID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFQYXNzaXZlTG9hZGluZy5zY2VuZSB8fCAhUGFzc2l2ZUxvYWRpbmcuaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdwYXNzaXZlIGxvYWRpbmcgaXMgbm90IGV4aXN0OicsIFBhc3NpdmVMb2FkaW5nLnNjZW5lKTtcclxuICAgICAgICBQYXNzaXZlTG9hZGluZy5zY2VuZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKFBhc3NpdmVMb2FkaW5nLm9wdGlvbikge1xyXG4gICAgICAgIFBhc3NpdmVMb2FkaW5nLm9wdGlvbi5maW5pc2hFdnQgJiYgUGFzc2l2ZUxvYWRpbmcub3B0aW9uLmZpbmlzaEV2dChQYXNzaXZlTG9hZGluZy5zY2VuZSk7XHJcbiAgICB9XHJcbiAgICBQYXNzaXZlTG9hZGluZy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiByZXMoUGFzc2l2ZUxvYWRpbmcuc2NlbmUuc2NlbmUuc3RvcCgncGFzc2l2ZUxvYWRpbmcnKSkpO1xyXG4gICAgUGFzc2l2ZUxvYWRpbmcuc2NlbmUubG9hZGluZ0VuZFNlYyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiByZXMocGVyZm9ybWFuY2Uubm93KCkpKTtcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHtcclxuICAgICAgICByZXMoY29uc29sZS5sb2coYCVjIFBhc3NpdmUgTG9hZGluZyBUaW1lOiAkeygoUGFzc2l2ZUxvYWRpbmcuc2NlbmUubG9hZGluZ0VuZFNlYyAtIFBhc3NpdmVMb2FkaW5nLnNjZW5lLmxvYWRpbmdTdGFydFNlYykgLyAxMDAwKS50b0ZpeGVkKDQpfSBzZWMgYCwgJ2NvbG9yOiBibGFjazsgYmFja2dyb3VuZDogd2hpdGU7IGZvbldlaWdodDogYm9sZDsnKSk7XHJcbiAgICB9KTtcclxufTtcclxuY2xhc3MgUGFzc2l2ZUxvYWRpbmdTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIGtleTogJ3Bhc3NpdmVMb2FkaW5nJyxcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1N0YXJ0U2VjID0gMDtcclxuICAgICAgICB0aGlzLmxvYWRpbmdFbmRTZWMgPSAwO1xyXG4gICAgICAgIHRoaXMucG9pbnRGaXJzdCA9IDA7XHJcbiAgICAgICAgdGhpcy5wb2ludFNlY29uZCA9IDA7XHJcbiAgICAgICAgdGhpcy5nYXBGaXJzdCA9IDAuMjtcclxuICAgICAgICB0aGlzLmdhcFNlY29uZCA9IDAuNDtcclxuICAgIH1cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU3RhcnRTZWMgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJvdGF0ZUxvZ28oZGVsdGEpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUm90YXRlTG9nbyhkZWx0YSkge1xyXG4gICAgICAgIHRoaXMucG9pbnRGaXJzdCA9ICh0aGlzLnBvaW50Rmlyc3QgKyAoZGVsdGEgKiB0aGlzLmdhcEZpcnN0KSkgJSAzNjA7XHJcbiAgICAgICAgdGhpcy5wb2ludFNlY29uZCA9ICh0aGlzLnBvaW50U2Vjb25kICsgKGRlbHRhICogdGhpcy5nYXBTZWNvbmQpKSAlIDM2MDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5wb2ludEZpcnN0LCB0aGlzLnBvaW50U2Vjb25kOiAnLCB0aGlzLnBvaW50Rmlyc3QsIHRoaXMucG9pbnRTZWNvbmQpO1xyXG4gICAgICAgIC8vIHRoaXMucG9pbnRGaXJzdCA9ICh0aGlzLnBvaW50Rmlyc3QgKyAoZGVsdGEgKiB0aGlzLmdhcEZpcnN0KSkgJSAzNjA7XHJcbiAgICAgICAgLy8gdGhpcy5wb2ludFNlY29uZCA9ICh0aGlzLnBvaW50U2Vjb25kICsgKGRlbHRhICogdGhpcy5nYXBTZWNvbmQpKTtcclxuICAgICAgICAvLyBsZXQgc2hvd0Nsb2Nrd2lzZSA9IHRoaXMucG9pbnRGaXJzdCA+IHRoaXMucG9pbnRTZWNvbmQgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgLy8gbGV0IHN0YXJ0QW5nbGUgPSB0aGlzLnBvaW50Rmlyc3QgPiB0aGlzLnBvaW50U2Vjb25kID8gdGhpcy5wb2ludEZpcnN0IDogdGhpcy5wb2ludFNlY29uZDtcclxuICAgICAgICAvLyBsZXQgZW5kQW5nbGUgPSB0aGlzLnBvaW50Rmlyc3QgPiB0aGlzLnBvaW50U2Vjb25kID8gdGhpcy5wb2ludFNlY29uZCA6IHRoaXMucG9pbnRGaXJzdDtcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcy5jbGVhcigpO1xyXG4gICAgICAgIC8vICBXaXRob3V0IHRoaXMgdGhlIGFyYyB3aWxsIGFwcGVhciBjbG9zZWQgd2hlbiBzdHJva2VkXHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3MubGluZVN0eWxlKDEwLCAweGZmMDBmZiwgMik7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3MuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3MuYXJjKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCA2MCwgUGhhc2VyLk1hdGguRGVnVG9SYWQodGhpcy5wb2ludEZpcnN0KSwgUGhhc2VyLk1hdGguRGVnVG9SYWQodGhpcy5wb2ludFNlY29uZCksIHRydWUpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzLnN0cm9rZVBhdGgoKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQYXNzaXZlTG9hZGluZztcclxuZXhwb3J0IHsgU3RhcnRQYXNzaXZlTG9hZGluZywgU3RvcFBhc3NpdmVMb2FkaW5nIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUsIFR4dFRpdGxlSGVhZFNpemUgfSBmcm9tIFwiLi4vZm9udFwiO1xyXG5jb25zdCBHYW1lU3RhcnRDbnQgPSB7XHJcbiAgICBpc1N0YXJ0OiBmYWxzZSxcclxuICAgIGNudFR4dDogbnVsbCxcclxuICAgIGNudE51bTogMyxcclxuICAgIGdldElzU3RhcnQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNTdGFydDsgfSxcclxuICAgIHNldElzU3RhcnQ6IGZ1bmN0aW9uIChpc1N0YXJ0KSB7IHRoaXMuaXNTdGFydCA9IGlzU3RhcnQ7IH0sXHJcbiAgICBzZXRUeHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIEdhbWVTdGFydENudC5jbnRUeHQuc2V0VGV4dCh2YWx1ZS50b1N0cmluZygpKTtcclxuICAgIH0sXHJcbiAgICBzZXRWaXNpYmxlOiBmdW5jdGlvbiAodmlzaWJsZSkgeyBHYW1lU3RhcnRDbnQuY250VHh0LnNldFZpc2libGUodmlzaWJsZSk7IH0sXHJcbiAgICBzZXRBbHBoYTogZnVuY3Rpb24gKGFscGhhKSB7IEdhbWVTdGFydENudC5jbnRUeHQuc2V0QWxwaGEoYWxwaGEpOyB9LFxyXG4gICAgYW5pbUZhZGVPdXQ6IGZ1bmN0aW9uIChzY2VuZSkge1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDAsIGR1cmF0aW9uOiA0MDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWxwaGEoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWxwaGEoMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc1N0YXJ0KHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYW5pbUNudDogZnVuY3Rpb24gKHNjZW5lKSB7XHJcbiAgICAgICAgbGV0IGNudCA9IDM7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMTAwMCwgZHVyYXRpb246IDEwMDAsIHJlcGVhdDogMywgZGVsYXk6IDEwMDAsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHh0KDMpO1xyXG4gICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3ZvaWNlMycpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblJlcGVhdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY250LS07XHJcbiAgICAgICAgICAgICAgICBpZiAoY250ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3ZvaWNlR28nKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFR4dCgnR28hJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUeHQoY250KTtcclxuICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZScgKyBjbnQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1GYWRlT3V0KHNjZW5lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuY29uc3QgSW5pdEdhbWVTdGFydENudCA9ICgpID0+IHtcclxuICAgIEdhbWVTdGFydENudC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIEdhbWVTdGFydENudC5zZXRBbHBoYSgxKTtcclxuICAgIEdhbWVTdGFydENudC5zZXRJc1N0YXJ0KGZhbHNlKTtcclxuICAgIEdhbWVTdGFydENudC5jbnROdW0gPSAzO1xyXG4gICAgR2FtZVN0YXJ0Q250LnNldFR4dChHYW1lU3RhcnRDbnQuY250TnVtKTtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZVN0YXJ0Q250ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBHYW1lU3RhcnRDbnQuY250VHh0ID0gc2NlbmUuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICczJyk7XHJcbiAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShHYW1lU3RhcnRDbnQuY250VHh0KTtcclxuICAgIEdhbWVTdGFydENudC5jbnRUeHQuc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICBJbml0R2FtZVN0YXJ0Q250KCk7XHJcbiAgICBHYW1lU3RhcnRDbnQuYW5pbUNudChzY2VuZSk7XHJcbiAgICAvLyBzY2VuZS5ldmVudHMub24oXCJzdGFydFwiLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ3N0YXJ0IHNjZW5lIGV2dCcpO1xyXG4gICAgLy8gICAgIEdhbWVTdGFydENudC5hbmltQ250KHNjZW5lKTtcclxuICAgIC8vIH0pO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lU3RhcnRDbnQ7XHJcbmV4cG9ydCB7IEluaXRHYW1lU3RhcnRDbnQsIENyZWF0ZUdhbWVTdGFydENudCB9O1xyXG4iLCJjb25zdCBHYW1lSW5wdXQgPSB7XHJcbiAgICBkb3duOiBbXSxcclxuICAgIG1vdmU6IFtdLFxyXG4gICAgdXA6IFtdLFxyXG4gICAgYWRkOiAoY21kLCBldnQpID0+IHtcclxuICAgICAgICBHYW1lSW5wdXRbY21kXS5wdXNoKGV2dCk7XHJcbiAgICAgICAgcmV0dXJuIEdhbWVJbnB1dDtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRHYW1lSW5wdXQgPSAoKSA9PiB7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhbWVJbnB1dCA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgaW5wdXREb3duRXZ0ID0gKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIEdhbWVJbnB1dC5kb3duICYmIEdhbWVJbnB1dC5kb3duLm1hcChkb3duRXZ0ID0+IGRvd25FdnQocHRyLCBjdXJyZW50bHlPdmVyKSk7XHJcbiAgICB9O1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVyZG93bicsIGlucHV0RG93bkV2dCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCBpbnB1dERvd25FdnQpO1xyXG4gICAgY29uc3QgaW5wdXRNb3ZlRXZ0ID0gKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIEdhbWVJbnB1dC5tb3ZlICYmIEdhbWVJbnB1dC5tb3ZlLm1hcChtb3ZlRXZ0ID0+IG1vdmVFdnQocHRyLCBjdXJyZW50bHlPdmVyKSk7XHJcbiAgICB9O1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVybW92ZScsIGlucHV0TW92ZUV2dCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCBpbnB1dE1vdmVFdnQpO1xyXG4gICAgY29uc3QgaW5wdXRVcEV2dCA9IChwdHIsIGN1cnJlbnRseU92ZXIpID0+IHtcclxuICAgICAgICBHYW1lSW5wdXQudXAgJiYgR2FtZUlucHV0LnVwLm1hcCh1cEV2dCA9PiB1cEV2dChwdHIsIGN1cnJlbnRseU92ZXIpKTtcclxuICAgIH07XHJcbiAgICBzY2VuZS5pbnB1dC5vZmYoJ3BvaW50ZXJ1cCcsIGlucHV0VXBFdnQpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJ1cCcsIGlucHV0VXBFdnQpO1xyXG4gICAgSW5pdEdhbWVJbnB1dCgpO1xyXG4gICAgcmV0dXJuIEdhbWVJbnB1dDtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUlucHV0O1xyXG5leHBvcnQgeyBJbml0R2FtZUlucHV0LCBDcmVhdGVHYW1lSW5wdXQgfTtcclxuIiwiaW1wb3J0IHsgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUsIFR4dFRpdGxlU2l6ZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgR2FtZU92ZXIgZnJvbSAnLi4vdWkvZ2FtZW92ZXInO1xyXG5pbXBvcnQgR2FtZVRpbWUsIHsgU2V0bWlsbGllU2VjMlNlY1RpbWVGb3JtYXQgfSBmcm9tICcuLi91aS90aW1lJztcclxuaW1wb3J0IEdhbWVJbnB1dCBmcm9tICdAc3JjL3NjZW5lcy9pbnB1dCc7XHJcbmNvbnN0IEVmeCA9IHtcclxuICAgIGJnUGFydGljbGVMaXN0OiBbXSxcclxuICAgIC8vIHRpbWVJbmNyZWFzZTogPFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0W10+IFtdLCAgIC8vIHdoZW4gYmxvY2sgY2xlYXJlZCwgaW5jcmVhc2UgdGltZSBieSBibG9jaydzIG93biBjaGFuY2VcclxuICAgIC8vIHNjb3JlOiA8UGhhc2VyLkdhbWVPYmplY3RzLlRleHRbXT4gW10sICAgICAgICAgIC8vIHdoZW4gYmxvY2sgY2xlYXJlZCwgaW5jcmVhc2Ugc2NvcmVcclxuICAgIGxpc3Q6IFtdLFxyXG4gICAgc2V0Q29uZmlnOiBmdW5jdGlvbiAocGFydGljbGUsIGNvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IGZpbmFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7IHg6IDAsIHk6IDAsIGFjdGl2ZTogZmFsc2UgfSwgY29uZmlnKTtcclxuICAgICAgICBsZXQgZW1pdHRlcjtcclxuICAgICAgICBjb25zdCBuZXN0ZWRFbWl0dGVySWR4ID0gdGhpcy5saXN0LmZpbmRJbmRleChlbWl0dGVyID0+IGVtaXR0ZXIubmFtZSA9PT0gY29uZmlnLm5hbWUpO1xyXG4gICAgICAgIGlmIChuZXN0ZWRFbWl0dGVySWR4ID49IDApXHJcbiAgICAgICAgICAgIHRoaXMubGlzdFtuZXN0ZWRFbWl0dGVySWR4XSA9IHBhcnRpY2xlLmNyZWF0ZUVtaXR0ZXIoZmluYWxDb25maWcpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbWl0dGVyID0gcGFydGljbGUuY3JlYXRlRW1pdHRlcihmaW5hbENvbmZpZyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKGVtaXR0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW1pdHRlcjtcclxuICAgIH0sXHJcbiAgICBnZXRFbWl0dGVyOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVtaXR0ZXIgPSB0aGlzLmxpc3QuZmluZChlbWl0dGVyID0+IGVtaXR0ZXIubmFtZSA9PT0gbmFtZSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRFbWl0dGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgZW1pdHRlciAke25hbWV9IGlzIG5vdCBpbiB0aGUgcGFydGljbGUgbGlzdGApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRFbWl0dGVyO1xyXG4gICAgfSxcclxuICAgIGFjdGl2ZUVtaXR0ZXIoeCwgeSwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVtaXR0ZXIgPSB0aGlzLmdldEVtaXR0ZXIobmFtZSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRFbWl0dGVyKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGFyZ2V0RW1pdHRlci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRhcmdldEVtaXR0ZXIuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldEVtaXR0ZXI7XHJcbiAgICB9LFxyXG4gICAgYW5pbUVtaXR0ZXI6IGZ1bmN0aW9uICh4LCB5LCBuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RW1pdHRlciA9IHRoaXMuYWN0aXZlRW1pdHRlcih4LCB5LCBuYW1lKTtcclxuICAgICAgICBpZiAoIXRhcmdldEVtaXR0ZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZUV4cGxvZGUgPSB0YXJnZXRFbWl0dGVyLmV4cGxvZGUoKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHBsb2RlO1xyXG4gICAgfSxcclxuICAgIHN0YXJ0RW1pdHRlcjogZnVuY3Rpb24gKHgsIHksIG5hbWUpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFbWl0dGVyID0gdGhpcy5hY3RpdmVFbWl0dGVyKHgsIHksIG5hbWUpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0RW1pdHRlcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlRXhwbG9kZSA9IHRhcmdldEVtaXR0ZXIuc3RhcnQoKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHBsb2RlO1xyXG4gICAgfSxcclxuICAgIGFuaW1TY2FsZTogZnVuY3Rpb24gKHNjZW5lLCB0YXJnZXQpIHtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjIsIGR1cmF0aW9uOiAzMDAsIHlveW86IHRydWUsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCAmJiB0YXJnZXQuc2V0U2NhbGUoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYW5pbVBvczogZnVuY3Rpb24gKHNjZW5lLCB0YXJnZXQsIGFtb3VudCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEluaXRZID0gdGFyZ2V0Lnk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiB0YXJnZXRJbml0WSwgdG86IHRhcmdldEluaXRZICsgYW1vdW50LCBkdXJhdGlvbjogMjQwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIHRhcmdldC5zZXRQb3NpdGlvbih0YXJnZXQueCwgZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYW5pbVRpbWVJbmNyZWFzZTogZnVuY3Rpb24gKGJsb2NrLCBjaGFuY2UsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY2VuZSB9ID0gYmxvY2s7XHJcbiAgICAgICAgY29uc3QgY2hhbmNlUG9zWSA9IGJsb2NrLnkgLSAxMDA7XHJcbiAgICAgICAgY29uc3QgdGltZVNlYyA9IFNldG1pbGxpZVNlYzJTZWNUaW1lRm9ybWF0KHZhbHVlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWCA9IEdhbWVUaW1lLnR4dC54ICsgKEdhbWVUaW1lLnR4dC53aWR0aCAqIDEuNSkgLSA1ICsgR2V0Um5kTnVtKC0zLCAzKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWSA9IEdhbWVUaW1lLnR4dC55ICsgR2FtZVRpbWUudHh0LmhlaWdodCAvIDIgKyBHZXRSbmROdW0oLTEwLCAxMCk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlT25VaSA9IHNjZW5lLmFkZC50ZXh0KHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYLCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWSwgJysnICsgdGltZVNlYykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmxvY2sueCwgY2hhbmNlUG9zWSwgJ1RpbWUgQ3JpdGljYWwhJykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlQ2hhbmNlID0gc2NlbmUuYWRkLnRleHQodGltZUluY3JlYXNlVHh0LngsIHRpbWVJbmNyZWFzZVR4dC55ICsgMjUsIGNoYW5jZS50b1N0cmluZygpICsgJyUnKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPbkJsb2NrID0gc2NlbmUuYWRkLnRleHQodGltZUluY3JlYXNlQ2hhbmNlLngsIHRpbWVJbmNyZWFzZUNoYW5jZS55ICsgMjUsIHRpbWVTZWMpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIFt0aW1lSW5jcmVhc2VPblVpLCB0aW1lSW5jcmVhc2VUeHQsIHRpbWVJbmNyZWFzZUNoYW5jZSwgdGltZUluY3JlYXNlT25CbG9ja10ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUodHh0KTtcclxuICAgICAgICAgICAgU2V0RGVwdGgodHh0LCAndHh0Jyk7XHJcbiAgICAgICAgICAgIHR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1TY2FsZShzY2VuZSwgdGltZUluY3JlYXNlT25VaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgdHdMaXN0ID0gW107XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICBmcm9tOiB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWCwgdG86IHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYICsgMTAsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7IHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTsgfSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7IHRpbWVJbmNyZWFzZU9uVWkueCA9IHR3RGF0YS52YWx1ZTsgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4geyB0aW1lSW5jcmVhc2VPblVpLmRlc3Ryb3koKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDAsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZVR4dC5zZXRBbHBoYSh0d0RhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VPbkJsb2NrLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZVR4dC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2UuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlT25CbG9jay5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VUeHQsIC0zMCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VDaGFuY2UsIC0zMCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VPbkJsb2NrLCAtMzApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGFuaW1TY29yZTogZnVuY3Rpb24gKGJsb2NrLCBzY29yZSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2NlbmUgfSA9IGJsb2NrO1xyXG4gICAgICAgIGNvbnN0IHNjb3JlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmxvY2sueCwgYmxvY2sueSwgTWF0aC5mbG9vcihzY29yZSkudG9TdHJpbmcoKSkuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUoc2NvcmVUeHQpO1xyXG4gICAgICAgIFNldERlcHRoKHNjb3JlVHh0LCAndHh0Jyk7XHJcbiAgICAgICAgc2NvcmVUeHQuc2V0Rm9udFNpemUoVHh0VGl0bGVTaXplKTtcclxuICAgICAgICAvLyBzY29yZSBwYXJ0aWNsZSBlbWl0XHJcbiAgICAgICAgY29uc3Qgc2NvcmVTZnhMaXN0ID0gWydzY29yZUJsdWUnLCAnc2NvcmVHcmVlbicsICdzY29yZUJyb3duJ107XHJcbiAgICAgICAgY29uc3Qgcm5kSWR4ID0gR2V0Um5kSW50KDAsIHNjb3JlU2Z4TGlzdC5sZW5ndGgpO1xyXG4gICAgICAgIEVmeC5hbmltRW1pdHRlcihibG9jay54LCBibG9jay55LCBzY29yZVNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAgICAgLy8gYWxwaGEgdHdcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAwLCBkdXJhdGlvbjogMjQwMCxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2NvcmVUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdzY29yZVNmeCcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7IHNjb3JlVHh0LnNldEFscGhhKGRhdGEudmFsdWUpOyB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7IHNjb3JlVHh0LmRlc3Ryb3koKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYW5pbVNjYWxlKHNjZW5lLCBzY29yZVR4dCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCBzY29yZVR4dCwgLTMwKTtcclxuICAgIH0sXHJcbiAgICBhbmltTmV3QmVzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZUhpZ2hTY29yZScpO1xyXG4gICAgICAgIHRoaXMuYmdQYXJ0aWNsZUxpc3QubWFwKGtleSA9PiB0aGlzLnN0YXJ0RW1pdHRlcihWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSAtIFZpZXcuaCAvIDQsIGtleSkpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRFbWl0dGVyKDAsIDAsICduZXdCZXN0U2NvcmUnKTtcclxuICAgIH0sXHJcbiAgICBzdG9wQWxsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0Lm1hcChlbWl0dGVyID0+IGVtaXR0ZXIuc3RvcCgpKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IENyZWF0ZUVmeCA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgYmxvY2tQYXJ0aWNsZSA9IHNjZW5lLmFkZC5wYXJ0aWNsZXMoJ3BhcnRpY2xlU3ByaXRlJyk7XHJcbiAgICBjb25zdCBjb21tb25Ub3VjaENvbmZpZyA9IHtcclxuICAgICAgICBsaWZlc3BhbjogeyBtaW46IDEwLCBtYXg6IDM1MCB9LFxyXG4gICAgICAgIGFuZ2xlOiB7IHN0YXJ0OiAwLCBlbmQ6IDM2MCwgc3RlcHM6IDY0IH0sXHJcbiAgICAgICAgc3BlZWQ6IDIwMCxcclxuICAgICAgICBxdWFudGl0eTogNjQsXHJcbiAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAuMywgZW5kOiAwLjA1IH0sXHJcbiAgICAgICAgYmxlbmRNb2RlOiAnQUREJyxcclxuICAgIH07XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAndG91Y2hCbHVlJywgZnJhbWU6ICdibHVlJyB9LCBjb21tb25Ub3VjaENvbmZpZykpO1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCBPYmplY3QuYXNzaWduKHsgbmFtZTogJ3RvdWNoR3JlZW4nLCBmcmFtZTogJ2dyZWVuJyB9LCBjb21tb25Ub3VjaENvbmZpZykpO1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCBPYmplY3QuYXNzaWduKHsgbmFtZTogJ3RvdWNoQnJvd24nLCBmcmFtZTogJ3llbGxvdycgfSwgY29tbW9uVG91Y2hDb25maWcpKTtcclxuICAgIGNvbnN0IGNvbW1vblNjb3JlQ29uZmlnID0ge1xyXG4gICAgICAgIGxpZmVzcGFuOiB7IG1pbjogMTAwLCBtYXg6IDUwMCB9LFxyXG4gICAgICAgIGFuZ2xlOiB7IHN0YXJ0OiAwLCBlbmQ6IDM2MCwgc3RlcHM6IDY0IH0sXHJcbiAgICAgICAgc3BlZWQ6IDM1MCxcclxuICAgICAgICBxdWFudGl0eTogNjQsXHJcbiAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAuMiwgZW5kOiAwLjEgfSxcclxuICAgICAgICBibGVuZE1vZGU6ICdBREQnLFxyXG4gICAgfTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwgT2JqZWN0LmFzc2lnbih7IG5hbWU6ICdzY29yZUJsdWUnLCBmcmFtZTogJ2JsdWUnIH0sIGNvbW1vblNjb3JlQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAnc2NvcmVHcmVlbicsIGZyYW1lOiAnZ3JlZW4nIH0sIGNvbW1vblNjb3JlQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAnc2NvcmVCcm93bicsIGZyYW1lOiAneWVsbG93JyB9LCBjb21tb25TY29yZUNvbmZpZykpO1xyXG4gICAgLy8gdG91Y2ggaW5wdXRcclxuICAgIGNvbnN0IHRvdWNoU2Z4TGlzdCA9IFsndG91Y2hCbHVlJywgJ3RvdWNoR3JlZW4nLCAndG91Y2hCcm93biddO1xyXG4gICAgR2FtZUlucHV0LmFkZCgnZG93bicsIChwdHIsIGN1cnJlbnRseU92ZXIpID0+IHtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndG91Y2hTZngnKTtcclxuICAgICAgICBjb25zdCBybmRJZHggPSBHZXRSbmRJbnQoMCwgdG91Y2hTZnhMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgY29uc3QgZW1pdHRlciA9IEVmeC5hbmltRW1pdHRlcihwdHIueCwgcHRyLnksIHRvdWNoU2Z4TGlzdFtybmRJZHhdKTtcclxuICAgICAgICAvLyBzY2VuZS5jYW1lcmFzLm1haW4uc2hha2UoMjAwLCAwLjAxLCB0cnVlKTtcclxuICAgIH0pO1xyXG4gICAgLy8gc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVyZG93bicpO1xyXG4gICAgLy8gc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKHB0cikgPT4ge1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd0b3VjaFNmeCcpO1xyXG4gICAgLy8gICAgIGNvbnN0IHJuZElkeCA9IEdldFJuZEludCgwLCB0b3VjaFNmeExpc3QubGVuZ3RoKTtcclxuICAgIC8vICAgICBjb25zdCBlbWl0dGVyID0gRWZ4LmFuaW1FbWl0dGVyKHB0ci54LCBwdHIueSwgdG91Y2hTZnhMaXN0W3JuZElkeF0pO1xyXG4gICAgLy8gICAgIC8vIGNvbnN0IHNjb3JlU2Z4TGlzdCA9IFsgJ3Njb3JlQmx1ZScsICdzY29yZUdyZWVuJywgJ3Njb3JlQnJvd24nIF07XHJcbiAgICAvLyAgICAgLy8gY29uc3Qgcm5kSWR4ID0gR2V0Um5kSW50KDAsIHNjb3JlU2Z4TGlzdC5sZW5ndGgpO1xyXG4gICAgLy8gICAgIC8vIGNvbnN0IHNjb3JlSW5zdGFuY2UgPSBFZnguYW5pbUVtaXR0ZXIocHRyLngsIHB0ci55LCBzY29yZVNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAvLyAgICAgLy8gRWZ4LmFuaW1FbWl0dGVyKHB0ci54LCBwdHIueSwgJ3Njb3JlJyk7XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2coJ3JuZElkeDogJywgcm5kSWR4LCB0b3VjaFNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2coJ2VtaXR0ZXI6ICcsIGVtaXR0ZXIpO1xyXG4gICAgLy8gICAgIC8vIHB0ci5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgIGNoY2tQdHJEZWZhdWx0KHB0cik7XHJcbiAgICAvLyB9KTtcclxuICAgIFNldERlcHRoKGJsb2NrUGFydGljbGUsICdwYXJ0aWNsZScpO1xyXG4gICAgcmV0dXJuIEVmeDtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZU92ZXJFZnggPSAoc2NlbmUsIGltZykgPT4ge1xyXG4gICAgRWZ4LmJnUGFydGljbGVMaXN0ID0gW1xyXG4gICAgICAgICdkaWFtb25kMicsICdkaWFtb25kMycsICdkaWFtb25kNCcsXHJcbiAgICAgICAgJ3J1YnkxJywgJ3J1YnkyJywgJ3J1YnkzJywgJ3J1Ynk0JyxcclxuICAgICAgICAna2V5MScsICdrZXkyJywgJ2tleTMnLCAna2V5NCcsXHJcbiAgICBdO1xyXG4gICAgRWZ4LmJnUGFydGljbGVMaXN0Lm1hcCgocGFydGljbGVOYW1lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFydGljbGUgPSBzY2VuZS5hZGQucGFydGljbGVzKHBhcnRpY2xlTmFtZSk7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSAyMDAwO1xyXG4gICAgICAgIEVmeC5zZXRDb25maWcocGFydGljbGUsIHtcclxuICAgICAgICAgICAgbmFtZTogcGFydGljbGVOYW1lLFxyXG4gICAgICAgICAgICBhbmdsZTogeyBtaW46IDEwMCwgbWF4OiA0NDAgfSxcclxuICAgICAgICAgICAgc3BlZWQ6IDM1MCxcclxuICAgICAgICAgICAgZ3Jhdml0eVk6IC0yMDAsXHJcbiAgICAgICAgICAgIGxpZmVzcGFuOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgcXVhbnRpdHk6IDEsXHJcbiAgICAgICAgICAgIGZyZXF1ZW5jeTogNjAsXHJcbiAgICAgICAgICAgIHNjYWxlOiB7IG1pbjogMC4xLCBtYXg6IDEgfSxcclxuICAgICAgICAgICAgcm90YXRlOiB7IG9uRW1pdDogKCkgPT4gR2V0Um5kTnVtKDAsIDM2MCkgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNldERlcHRoKHBhcnRpY2xlLCAncGFydGljbGUnKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgYmxvY2tQYXJ0aWNsZSA9IHNjZW5lLmFkZC5wYXJ0aWNsZXMoJ3BhcnRpY2xlU3ByaXRlJyk7XHJcbiAgICBjb25zdCB3aWR0aCA9IGltZy53aWR0aCAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gaW1nLmhlaWdodCAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVIO1xyXG4gICAgY29uc3QgZ2FtZU92ZXJFbWl0Wm9uZSA9IG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoaW1nLnggLSB3aWR0aCAvIDIsIGltZy55IC0gaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIHtcclxuICAgICAgICBuYW1lOiAnbmV3QmVzdFNjb3JlJyxcclxuICAgICAgICBmcmFtZTogJ2JsdWUnLFxyXG4gICAgICAgIGxpZmVzcGFuOiAxMDAwLFxyXG4gICAgICAgIGdyYXZpdHlZOiAxMCxcclxuICAgICAgICBzY2FsZTogeyBzdGFydDogMCwgZW5kOiAwLjI1LCBlYXNlOiAnUXVhZC5lYXNlT3V0JyB9LFxyXG4gICAgICAgIGFscGhhOiB7IHN0YXJ0OiAxLCBlbmQ6IDAsIGVhc2U6ICdRdWFkLmVhc2VJbicgfSxcclxuICAgICAgICBibGVuZE1vZGU6ICdBREQnLFxyXG4gICAgICAgIGVtaXRab25lOiB7IHR5cGU6ICdyYW5kb20nLCBzb3VyY2U6IGdhbWVPdmVyRW1pdFpvbmUgfSxcclxuICAgIH0pO1xyXG4gICAgU2V0RGVwdGgoYmxvY2tQYXJ0aWNsZSwgJ2hpZ2hlc3QnKTtcclxuICAgIHJldHVybiBFZng7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEVmeDtcclxuZXhwb3J0IHsgQ3JlYXRlRWZ4LCBDcmVhdGVHYW1lT3ZlckVmeCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCBCbG9ja1N5c3RlbSBmcm9tIFwiLi4vYmxvY2svc3lzdGVtXCI7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSBcIi4uL2RlcHRoXCI7XHJcbmNvbnN0IEdhbWVXYXJuaW5nID0ge1xyXG4gICAgaGFzT25jZVNob3c6IHRydWUsXHJcbiAgICBoYXNPbmNlSGlkZTogdHJ1ZSxcclxuICAgIHRpbWU6IDYgKiAxMDAwLFxyXG4gICAgc2lnbjogbnVsbCxcclxuICAgIHByb2dyZXNzQmFyOiBudWxsLFxyXG4gICAgcHJvZ3Jlc3NCYXJMaW5lOiBudWxsLFxyXG4gICAgcHJvZ3Jlc3NBbW91bnQ6IDAsXHJcbiAgICBzaGFrZVZhbHVlOiAxLFxyXG4gICAgdXBkYXRlU2hha2VWYWx1ZTogKHJlbWFpbmVkT3ZlckNudCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnNoYWtlVmFsdWUgPSAoR2FtZVdhcm5pbmcudGltZSAtIHJlbWFpbmVkT3ZlckNudCkgLyAxMDAwO1xyXG4gICAgfSxcclxuICAgIHNob3c6ICgpID0+IHtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Ftb3VudCA9IDA7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuc2lnbi5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXJMaW5lLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuZHJhdygpO1xyXG4gICAgICAgIHJldHVybiBHYW1lV2FybmluZztcclxuICAgIH0sXHJcbiAgICBoaWRlOiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuc2lnbi5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuY2xlYXIoKTtcclxuICAgICAgICBHYW1lQXVkaW8uc3RvcFNmeCgnd2FybmluZ1NmeCcpO1xyXG4gICAgfSxcclxuICAgIGFyY0RlZ3JlZTogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSAyNzAgKyAoR2FtZVdhcm5pbmcucHJvZ3Jlc3NBbW91bnQpICogKC0xODApOyAvLyAyNzAgfiA5MFxyXG4gICAgICAgIGNvbnN0IGVuZEFuZ2xlID0gLTkwICsgKEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50KSAqIDE4MDsgLy8gLTkwIH4gOTBcclxuICAgICAgICByZXR1cm4geyBzdGFydEFuZ2xlOiBzdGFydEFuZ2xlLCBlbmRBbmdsZTogZW5kQW5nbGUgfTtcclxuICAgIH0sXHJcbiAgICBkcmF3OiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuY2xlYXIoKTtcclxuICAgICAgICBjb25zdCByID0gR2FtZVdhcm5pbmcuc2lnbi53aWR0aCAqIDQgLyA1O1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5saW5lU3R5bGUoNiwgMHhmYmZmMDAsIDEpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5zdHJva2VDaXJjbGUoMCwgMCwgcik7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuZmlsbFN0eWxlKDB4ZmJmZjAwLCAwLjQpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmFyYygwLCAwLCByLCBQaGFzZXIuTWF0aC5EZWdUb1JhZChHYW1lV2FybmluZy5hcmNEZWdyZWUoKS5zdGFydEFuZ2xlKSwgUGhhc2VyLk1hdGguRGVnVG9SYWQoR2FtZVdhcm5pbmcuYXJjRGVncmVlKCkuZW5kQW5nbGUpLCB0cnVlLCAwLjAxKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5maWxsUGF0aCgpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIHJldHVybiBHYW1lV2FybmluZztcclxuICAgIH0sXHJcbiAgICBjbGVhcjogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmNsZWFyKCk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXJMaW5lLmNsZWFyKCk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlOiAoc2NlbmUpID0+IHtcclxuICAgICAgICBjb25zdCByZW1haW5lZE92ZXJDbnQgPSBCbG9ja1N5c3RlbS5vdmVyQ250TWF4IC0gQmxvY2tTeXN0ZW0ub3ZlckNudDtcclxuICAgICAgICAvLyBoaWRlIHdhcm5pbmdcclxuICAgICAgICBpZiAoQmxvY2tTeXN0ZW0uZ2V0SXNHYW1lT3ZlcigpKVxyXG4gICAgICAgICAgICBHYW1lV2FybmluZy5oYXNPbmNlSGlkZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSB8fCByZW1haW5lZE92ZXJDbnQgPiBHYW1lV2FybmluZy50aW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChHYW1lV2FybmluZy5oYXNPbmNlSGlkZSkge1xyXG4gICAgICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLmhhc09uY2VTaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNob3cgd2FybmluZ1xyXG4gICAgICAgIGlmIChHYW1lV2FybmluZy5oYXNPbmNlU2hvdykge1xyXG4gICAgICAgICAgICBHYW1lV2FybmluZy5oYXNPbmNlU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHYW1lV2FybmluZy5oYXNPbmNlSGlkZSA9IHRydWU7XHJcbiAgICAgICAgICAgIEdhbWVXYXJuaW5nLnNob3coKTtcclxuICAgICAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogMSwgdG86IDAsIGR1cmF0aW9uOiA1MDAsIHlveW86IHRydWUsIHJlcGVhdDogLTEsXHJcbiAgICAgICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7IEdhbWVBdWRpby5wbGF5U2Z4KCd3YXJuaW5nU2Z4Jyk7IH0sXHJcbiAgICAgICAgICAgICAgICBvblJlcGVhdDogKCkgPT4geyBHYW1lQXVkaW8ucGxheVNmeCgnd2FybmluZ1NmeCcpOyB9LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEdhbWVXYXJuaW5nLmhhc09uY2VTaG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0QWxwaGEoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0QWxwaGEodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50ID0gKEdhbWVXYXJuaW5nLnRpbWUgLSByZW1haW5lZE92ZXJDbnQpIC8gR2FtZVdhcm5pbmcudGltZTtcclxuICAgICAgICBHYW1lV2FybmluZy5kcmF3KCk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcudXBkYXRlU2hha2VWYWx1ZShyZW1haW5lZE92ZXJDbnQpO1xyXG4gICAgICAgIHNjZW5lLmNhbWVyYXMubWFpbi5zaGFrZSgxNjAsIDAuMDAxICogR2FtZVdhcm5pbmcuc2hha2VWYWx1ZSwgZmFsc2UpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdEdhbWVXYXJuaW5nID0gKCkgPT4ge1xyXG4gICAgR2FtZVdhcm5pbmcuaGlkZSgpO1xyXG4gICAgR2FtZVdhcm5pbmcuaGFzT25jZVNob3cgPSB0cnVlO1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NBbW91bnQgPSAwO1xyXG4gICAgcmV0dXJuIEdhbWVXYXJuaW5nO1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lV2FybmluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgR2FtZVdhcm5pbmcuc2lnbiA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnd2FybmluZ1NpZ24nKTtcclxuICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0UG9zaXRpb24oVmlldy5jZW50ZXJYLCBHYW1lV2FybmluZy5zaWduLmhlaWdodCk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhciA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuc2V0QWxwaGEoMC45KTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZSA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgY29uc3QgYmFyWCA9IEdhbWVXYXJuaW5nLnNpZ24ueDtcclxuICAgIGNvbnN0IGJhclkgPSBHYW1lV2FybmluZy5zaWduLnk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5zZXRQb3NpdGlvbihiYXJYLCBiYXJZKTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5zZXRQb3NpdGlvbihiYXJYLCBiYXJZKTtcclxuICAgIFtHYW1lV2FybmluZy5wcm9ncmVzc0JhciwgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXJMaW5lLCBHYW1lV2FybmluZy5zaWduXS5tYXAoZWxlID0+IFNldERlcHRoKGVsZSwgJ3dhcm5pbmcnKSk7XHJcbiAgICBJbml0R2FtZVdhcm5pbmcoKTtcclxuICAgIHJldHVybiBHYW1lV2FybmluZztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZVdhcm5pbmc7XHJcbmV4cG9ydCB7IENyZWF0ZUdhbWVXYXJuaW5nIH07XHJcbiIsImNvbnN0IFVJUHJvcHMgPSB7XHJcbiAgICBtYXJnaW46IDMwLFxyXG4gICAgYWxwaGE6IDAuOCxcclxuICAgIHNjYWxlOiAwLjYsXHJcbiAgICBkb3duR2FwOiA0LCAvLyBkb3duIGdhcCBmb3IgYW5pbVxyXG59O1xyXG5jb25zdCBTZXRVSVByb3BzID0gKHByb3BzLCB2YWx1ZSkgPT4ge1xyXG4gICAgaWYgKCFVSVByb3BzW3Byb3BzXSlcclxuICAgICAgICBjb25zb2xlLndhcm4oYHVpIHByb3BzOiAke3Byb3BzfSBpcyBub3QgZXhpc3RgKTtcclxuICAgIFVJUHJvcHNbcHJvcHNdID0gdmFsdWU7XHJcbiAgICByZXR1cm4gVUlQcm9wcztcclxufTtcclxuY29uc3QgU2V0Q29tbW9uVUlQcm9wcyA9IChidG4pID0+IHtcclxuICAgIGJ0bi5zZXRBbHBoYShVSVByb3BzLmFscGhhKTtcclxuICAgIGJ0bi5zZXRTY2FsZShVSVByb3BzLnNjYWxlKTtcclxuICAgIHJldHVybiBidG47XHJcbn07XHJcbmNvbnN0IENyZWF0ZVVJQnRuQW5pbSA9IChzY2VuZSwgYnRuLCBvcHRpb24pID0+IHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGJ0bjtcclxuICAgIGlmICghdG9nZ2xlQnRuKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IGR1ciA9IChfYSA9IG9wdGlvbiA9PT0gbnVsbCB8fCBvcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbi5kdXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDcwO1xyXG4gICAgY29uc3QgRG93biA9ICgpID0+IHtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IHRvZ2dsZUJ0bi55LCB0bzogdG9nZ2xlQnRuLmRvd25Qb3NZLCBkdXJhdGlvbjogZHVyLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2dnbGVCdG4uaXNDaGFuZ2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIFVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHcucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnkgPSB0d0RhdGEudmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi5pc0NoYW5naW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgVXAgPSAoKSA9PiB7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiB0b2dnbGVCdG4ueSwgdG86IHRvZ2dsZUJ0bi51cFBvc1ksIGR1cmF0aW9uOiBkdXIsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi5pc0NoYW5naW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRvZ2dsZUJ0bi5pc0NoYW5naW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnkgPSB0b2dnbGVCdG4udXBQb3NZO1xyXG4gICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi55ID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRvZ2dsZUJ0bi51cFBvc1kgPSBidG4ueTtcclxuICAgIHRvZ2dsZUJ0bi5kb3duUG9zWSA9IGJ0bi55ICsgVUlQcm9wcy5kb3duR2FwO1xyXG4gICAgdG9nZ2xlQnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICB0b2dnbGVCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4geyBEb3duKCk7IH0pO1xyXG4gICAgdG9nZ2xlQnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IFVwKCk7IH0pO1xyXG4gICAgdG9nZ2xlQnRuLm9uKCdwb2ludGVyb3V0JywgKCkgPT4geyBVcCgpOyB9KTtcclxuICAgIHJldHVybiBVSVByb3BzO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBVSVByb3BzO1xyXG5leHBvcnQgeyBTZXRDb21tb25VSVByb3BzLCBTZXRVSVByb3BzLCBDcmVhdGVVSUJ0bkFuaW0gfTtcclxuIiwiY29uc3QgR2FtZURlcHRoID0ge1xyXG4gICAgbGlzdDoge1xyXG4gICAgICAgIGRlZmF1bHQ6IDAsXHJcbiAgICAgICAgaGlnaGVzdDogMTAwMDAsXHJcbiAgICB9LFxyXG4gICAgYWRkOiAoa2V5LCBkZXB0aCkgPT4ge1xyXG4gICAgICAgIGlmIChkZXB0aCA8IEdhbWVEZXB0aC5saXN0LmRlZmF1bHQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBhZGRpbmcgZGVwdGggJHtrZXl9IGtleSBoYXMgYSBsb3dlciBkZXB0aCB2YWx1ZSgke2RlcHRofSkgdGhhbiBkZWZhdWx0YCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlcHRoID4gR2FtZURlcHRoLmxpc3QuaGlnaGVzdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYGFkZGluZyBkZXB0aCAke2tleX0ga2V5IGhhcyBhIGxhcmdlciBkZXB0aCB2YWx1ZSgke2RlcHRofSkgdGhhbiBkZWZhdWx0YCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgR2FtZURlcHRoW2tleV0gPSBkZXB0aDtcclxuICAgICAgICByZXR1cm4gR2FtZURlcHRoO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgU2V0RGVwdGggPSAodGFyZ2V0T2JqLCB0eXBlKSA9PiB7XHJcbiAgICBpZiAoIUdhbWVEZXB0aC5saXN0W3R5cGVdKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdTZXREZXB0aDogdHlwZSBpcyBub3QgZm91bmQgaW4gdGhlIGRlcHRoIGxpc3Q6JywgdGFyZ2V0T2JqLCB0eXBlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygndGFyZ2V0T2JqLCB0eXBlOiAnLCB0YXJnZXRPYmosIHR5cGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0YXJnZXRPYmouc2V0RGVwdGgpXHJcbiAgICAgICAgdGFyZ2V0T2JqLnNldERlcHRoKEdhbWVEZXB0aC5saXN0W3R5cGVdKTtcclxuICAgIGVsc2VcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1NldERlcHRoOiB0YXJnZXRPYmogaXMgbm90IFBoYXNlci5HYW1lT2JqZWN0cycpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lRGVwdGg7XHJcbmV4cG9ydCB7IFNldERlcHRoLCB9O1xyXG4iLCJjb25zdCBHYW1lR2VzdHVyZSA9IHtcclxuICAgIHR5cGU6ICcnLFxyXG4gICAgdHlwZUhpc3Rvcnk6IFtdLFxyXG4gICAgaW5pdFBvczogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICBpc0hvbGRpbmdEb3duOiBmYWxzZSxcclxuICAgIGhvbGREdXJhdGlvbjogMCxcclxuICAgIGhvbGRNYXhEdXJhdGlvbjogMTAwMCxcclxuICAgIGNvbWZ5R2FwVG91Y2hWYWx1ZTogMTUsXHJcbiAgICBzdGFydEhvbGQ6ICgpID0+IHsgR2FtZUdlc3R1cmUuaXNIb2xkaW5nRG93biA9IHRydWU7IHJldHVybiBHYW1lR2VzdHVyZTsgfSxcclxuICAgIHJlc2V0SG9sZDogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVHZXN0dXJlLmlzSG9sZGluZ0Rvd24gPSBmYWxzZTtcclxuICAgICAgICBHYW1lR2VzdHVyZS5pbml0UG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgR2FtZUdlc3R1cmUuaG9sZER1cmF0aW9uID0gMDtcclxuICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCcnKTtcclxuICAgICAgICByZXR1cm4gR2FtZUdlc3R1cmU7XHJcbiAgICB9LFxyXG4gICAgc2V0SG9sZER1cmF0aW9uOiBmdW5jdGlvbiAoZHVyYXRpb24pIHsgR2FtZUdlc3R1cmUuaG9sZER1cmF0aW9uID0gZHVyYXRpb247IHJldHVybiBHYW1lR2VzdHVyZTsgfSxcclxuICAgIHNldEluaXRQb3M6IGZ1bmN0aW9uICh4LCB5KSB7IEdhbWVHZXN0dXJlLmluaXRQb3MgPSB7IHg6IHgsIHk6IHkgfTsgcmV0dXJuIEdhbWVHZXN0dXJlOyB9LFxyXG4gICAgY2hja0lzSG9sZDogKCkgPT4ge1xyXG4gICAgICAgIGlmIChHYW1lR2VzdHVyZS5ob2xkRHVyYXRpb24gPj0gR2FtZUdlc3R1cmUuaG9sZE1heER1cmF0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBnZXRUeXBlOiAoKSA9PiB7IHJldHVybiBHYW1lR2VzdHVyZS50eXBlOyB9LFxyXG4gICAgc2V0VHlwZTogZnVuY3Rpb24gKHR5cGUpIHsgR2FtZUdlc3R1cmUudHlwZSA9IHR5cGU7IHJldHVybiBHYW1lR2VzdHVyZTsgfSxcclxuICAgIGluaXRUeXBlSGlzdG9yeTogKCkgPT4geyBHYW1lR2VzdHVyZS50eXBlSGlzdG9yeSA9IFtdOyB9LFxyXG4gICAgZ2V0VHlwZUhpc3Rvcnk6ICgpID0+IHsgcmV0dXJuIEdhbWVHZXN0dXJlLnR5cGVIaXN0b3J5OyB9LFxyXG4gICAgZ2V0TGFzdGVzdElucHV0VHlwZTogKCkgPT4geyByZXR1cm4gR2FtZUdlc3R1cmUudHlwZUhpc3RvcnlbR2FtZUdlc3R1cmUudHlwZUhpc3RvcnkubGVuZ3RoIC0gMV07IH0sXHJcbiAgICBwdXNoMlR5cGVIaXN0b3J5OiBmdW5jdGlvbiAoZ2VzdHVyZUVsZSkge1xyXG4gICAgICAgIEdhbWVHZXN0dXJlLnR5cGVIaXN0b3J5LnB1c2goZ2VzdHVyZUVsZSk7XHJcbiAgICAgICAgcmV0dXJuIEdhbWVHZXN0dXJlLnR5cGVIaXN0b3J5O1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdEdhbWVHZXN0dXJlID0gKCkgPT4ge1xyXG4gICAgR2FtZUdlc3R1cmUucmVzZXRIb2xkKCk7XHJcbiAgICBHYW1lR2VzdHVyZS5pbml0VHlwZUhpc3RvcnkoKTtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZUdlc3R1cmUgPSAoc2NlbmUpID0+IHtcclxuICAgIHNjZW5lLmlucHV0Lm9mZigncG9pbnRlcmRvd24nLCBQdHJEb3duR2FtZUdlc3R1cmUpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgUHRyRG93bkdhbWVHZXN0dXJlKTtcclxuICAgIHNjZW5lLmlucHV0Lm9mZigncG9pbnRlcm1vdmUnLCBQdHJNb3ZlR2FtZUdlc3R1cmUpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgUHRyTW92ZUdhbWVHZXN0dXJlKTtcclxuICAgIHNjZW5lLmlucHV0Lm9mZigncG9pbnRlcnVwJywgUHRyVXBHYW1lR2VzdHVyZSk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcnVwJywgUHRyVXBHYW1lR2VzdHVyZSk7XHJcbiAgICBJbml0R2FtZUdlc3R1cmUoKTtcclxuICAgIHJldHVybiBHYW1lR2VzdHVyZTtcclxufTtcclxuY29uc3QgVXBkYXRlR2FtZUdlc3R1cmUgPSAoZGVsdGEpID0+IHtcclxuICAgIGlmIChHYW1lR2VzdHVyZS5pc0hvbGRpbmdEb3duKVxyXG4gICAgICAgIEdhbWVHZXN0dXJlLnNldEhvbGREdXJhdGlvbihHYW1lR2VzdHVyZS5ob2xkRHVyYXRpb24gKyBkZWx0YSk7XHJcbn07XHJcbmNvbnN0IFB0ckRvd25HYW1lR2VzdHVyZSA9IChwdHIpID0+IHtcclxuICAgIEdhbWVHZXN0dXJlLnNldEluaXRQb3MocHRyLngsIHB0ci55KTtcclxuICAgIEdhbWVHZXN0dXJlLnN0YXJ0SG9sZCgpO1xyXG59O1xyXG5jb25zdCBQdHJNb3ZlR2FtZUdlc3R1cmUgPSAocHRyKSA9PiB7XHJcbiAgICBpZiAoIXB0ci5pc0Rvd24pXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKCFDaGNrU3dpcGVEaXJlY3Rpb24oR2FtZUdlc3R1cmUuaW5pdFBvcywgcHRyKSkge1xyXG4gICAgICAgIENoY2tIb2xkT3JUb3VjaCgpO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc3QgZ2VzdHVyZUVsZSA9IHtcclxuICAgIC8vICAgICB0eXBlOiBHYW1lR2VzdHVyZS5nZXRUeXBlKCksXHJcbiAgICAvLyAgICAgaW5pdFBvczogR2FtZUdlc3R1cmUuaW5pdFBvcyxcclxuICAgIC8vICAgICBsYXN0UG9zOiB7IHg6IHB0ci54LCB5OiBwdHIueSB9XHJcbiAgICAvLyB9O1xyXG59O1xyXG5jb25zdCBQdHJVcEdhbWVHZXN0dXJlID0gKHB0cikgPT4ge1xyXG4gICAgcmV0dXJuIFNldEdhbWVHZXN0dXJlVHlwZShHYW1lR2VzdHVyZS5pbml0UG9zLCBwdHIpO1xyXG59O1xyXG5jb25zdCBQdHJPdXRHYW1lR2VzdHVyZSA9ICgpID0+IHtcclxuICAgIEdhbWVHZXN0dXJlLnJlc2V0SG9sZCgpO1xyXG59O1xyXG5jb25zdCBDaGNrU3dpcGVEaXJlY3Rpb24gPSAoaW5pdFBvcywgcHRyKSA9PiB7XHJcbiAgICBjb25zdCBjaGNrUG9zWCA9IE1hdGguYWJzKGluaXRQb3MueCAtIHB0ci54KSA+IEdhbWVHZXN0dXJlLmNvbWZ5R2FwVG91Y2hWYWx1ZTtcclxuICAgIGNvbnN0IGNoY2tQb3NZID0gTWF0aC5hYnMoaW5pdFBvcy55IC0gcHRyLnkpID4gR2FtZUdlc3R1cmUuY29tZnlHYXBUb3VjaFZhbHVlO1xyXG4gICAgaWYgKGNoY2tQb3NYIHx8IGNoY2tQb3NZKSB7XHJcbiAgICAgICAgY29uc3QgeCA9IHB0ci54IC0gaW5pdFBvcy54O1xyXG4gICAgICAgIGNvbnN0IHkgPSBwdHIueSAtIGluaXRQb3MueTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoeCkgPiBNYXRoLmFicyh5KSkge1xyXG4gICAgICAgICAgICBpZiAoeCA+IDApXHJcbiAgICAgICAgICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCdzd2lwZVJpZ2h0Jyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIEdhbWVHZXN0dXJlLnNldFR5cGUoJ3N3aXBlTGVmdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHkgPCAwKVxyXG4gICAgICAgICAgICAgICAgR2FtZUdlc3R1cmUuc2V0VHlwZSgnc3dpcGVVcCcpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCdzd2lwZURvd24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5jb25zdCBDaGNrSG9sZE9yVG91Y2ggPSAoKSA9PiB7XHJcbiAgICBpZiAoR2FtZUdlc3R1cmUuY2hja0lzSG9sZCgpKSB7XHJcbiAgICAgICAgR2FtZUdlc3R1cmUuc2V0VHlwZSgnaG9sZCcpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgR2FtZUdlc3R1cmUuc2V0VHlwZSgndG91Y2gnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07XHJcbi8vIHNldCBjb21meSB0b3VjaCB0byBub3QganVkZ2UgYXMgc3dpcGUgd2hlbiB1c2Ugd2l0aCBhY3R1YWwgZmluZ2VyXHJcbmNvbnN0IFNldEdhbWVHZXN0dXJlVHlwZSA9IChpbml0UG9zLCBwdHIpID0+IHtcclxuICAgIC8vIHN3aXBlIG1vdGlvblxyXG4gICAgaWYgKCFDaGNrU3dpcGVEaXJlY3Rpb24oaW5pdFBvcywgcHRyKSkge1xyXG4gICAgICAgIC8vIGhvbGQgb3IgdG91Y2hcclxuICAgICAgICBDaGNrSG9sZE9yVG91Y2goKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGdlc3R1cmVFbGUgPSB7XHJcbiAgICAgICAgdHlwZTogR2FtZUdlc3R1cmUuZ2V0VHlwZSgpLFxyXG4gICAgICAgIGluaXRQb3M6IGluaXRQb3MsXHJcbiAgICAgICAgbGFzdFBvczogeyB4OiBwdHIueCwgeTogcHRyLnkgfVxyXG4gICAgfTtcclxuICAgIEdhbWVHZXN0dXJlLnB1c2gyVHlwZUhpc3RvcnkoZ2VzdHVyZUVsZSk7XHJcbiAgICBHYW1lR2VzdHVyZS5yZXNldEhvbGQoKTtcclxuICAgIHJldHVybiBHYW1lR2VzdHVyZS5nZXRMYXN0ZXN0SW5wdXRUeXBlKCk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVHZXN0dXJlO1xyXG5leHBvcnQgeyBJbml0R2FtZUdlc3R1cmUsIENyZWF0ZUdhbWVHZXN0dXJlLCBVcGRhdGVHYW1lR2VzdHVyZSwgUHRyRG93bkdhbWVHZXN0dXJlLCBQdHJVcEdhbWVHZXN0dXJlLCBQdHJPdXRHYW1lR2VzdHVyZSwgU2V0R2FtZUdlc3R1cmVUeXBlLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgR2FtZUZvbnQgPSB7XHJcbiAgICBndWlkZVR4dFk6IFZpZXcuaCAtIDgwLFxyXG59O1xyXG5jb25zdCBJbml0Rm9udCA9ICgpID0+IHtcclxufTtcclxuY29uc3QgQ3JlYXRlRm9udCA9ICgpID0+IHtcclxufTtcclxuY29uc3QgU2V0Rm9udFN0eWxlID0gKHR4dCkgPT4ge1xyXG4gICAgdHh0LnNldEZvbnRTdHlsZSgnYm9sZCcpO1xyXG4gICAgdHh0LnNldEZvbnRGYW1pbHkoJ0FyaWFsIEJsYWNrJyk7XHJcbiAgICB0eHQuc2V0T3JpZ2luKDAuNSk7XHJcbiAgICByZXR1cm4gdHh0O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lRm9udDtcclxuZXhwb3J0IHsgSW5pdEZvbnQsIENyZWF0ZUZvbnQsIFNldEZvbnRTdHlsZSB9O1xyXG4iLCJpbXBvcnQgeyBDb21tb25TY3JvbGwsIEdldEFzc2V0RmlsZXMgfSBmcm9tIFwiQHNyYy9zY2VuZXMvYXNzZXRVdGlsc1wiO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gXCJAc3JjL3NjZW5lcy9kZXB0aFwiO1xyXG5pbXBvcnQgR2FtZUdlc3R1cmUgZnJvbSBcIkBzcmMvc2NlbmVzL2dlc3R1cmVcIjtcclxuaW1wb3J0IEdhbWVJbnB1dCBmcm9tIFwiQHNyYy9zY2VuZXMvaW5wdXRcIjtcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCB7IEdldFJhdGlvLCBHZXRWYWx1ZVZpYVJhdGlvIH0gZnJvbSBcIkBzcmMvdXRpbHMvbWF0aFwiO1xyXG5pbXBvcnQgV2luZG93TG9iYnkgZnJvbSBcIkBzcmMvd2luZG93XCI7XHJcbmltcG9ydCBVSVByb3BzLCB7IENyZWF0ZVVJQnRuQW5pbSwgU2V0Q29tbW9uVUlQcm9wcyB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBTZXRGb250U3R5bGUgfSBmcm9tIFwiLi4vZm9udFwiO1xyXG5jb25zdCBHYW1lU2Nyb2xsID0ge1xyXG4gICAgYnRuOiBudWxsLFxyXG4gICAgaXNTY3JvbGxhYmxlOiB0cnVlLFxyXG4gICAgYWN0U2Nyb2xsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFHYW1lU2Nyb2xsLmlzU2Nyb2xsYWJsZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIFdpbmRvd0xvYmJ5LnJlcVBhcmVudCgnc2Nyb2xsJyk7XHJcbiAgICB9LFxyXG4gICAgd2hlZWxTY3JvbGw6IGZ1bmN0aW9uIChwdHIpIHtcclxuICAgICAgICBpZiAoR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcHRyLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdE9wdDoge1xyXG4gICAgICAgIHg6IFVJUHJvcHMubWFyZ2luICogNC41ICogVUlQcm9wcy5zY2FsZSxcclxuICAgICAgICB5OiBVSVByb3BzLm1hcmdpbixcclxuICAgICAgICBjbWRLZXk6ICd2JyxcclxuICAgICAgICBpc1N3aXBlR2VzdHVyZUV4aXN0OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG9wdGlvbjoge30sXHJcbn07XHJcbmNvbnN0IEdldFNjcm9sbEFzc2V0cyA9IChleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBjb25zdCBhc3NldExpc3QgPSBbXHJcbiAgICAgICAgeyBrZXk6ICdzY3JvbGxCZWxvdycsIHVybDogQ29tbW9uU2Nyb2xsICsgJ3Njcm9sbEJlbG93LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ3Njcm9sbEFycm93JywgdXJsOiBDb21tb25TY3JvbGwgKyAnc2Nyb2xsQXJyb3cucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgXTtcclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cyk7XHJcbn07XHJcbmNvbnN0IEluaXRHYW1lU2Nyb2xsID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lU2Nyb2xsID0gKHNjZW5lLCBvcHRpb24pID0+IHtcclxuICAgIEdhbWVTY3JvbGwub3B0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBHYW1lU2Nyb2xsLmRlZmF1bHRPcHQpLCBvcHRpb24pO1xyXG4gICAgY29uc3QgeyB4LCB5LCBjbWRLZXksIGlzU3dpcGVHZXN0dXJlRXhpc3QgfSA9IEdhbWVTY3JvbGwub3B0aW9uO1xyXG4gICAgLy8gb2ZmIHRoZSBwcmV2ZW50RGVmYXVsdCBtZXRob2QgdG8gYWxsIGV2dHNcclxuICAgIHNjZW5lLmdhbWUuaW5wdXQubW91c2UucHJldmVudERlZmF1bHRXaGVlbCA9IGZhbHNlO1xyXG4gICAgR2FtZVNjcm9sbC5idG4gPSBzY2VuZS5hZGQuaW1hZ2UoeCwgeSwgJ3Njcm9sbEJlbG93Jyk7XHJcbiAgICBTZXRDb21tb25VSVByb3BzKEdhbWVTY3JvbGwuYnRuKTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgR2FtZVNjcm9sbC5idG4pO1xyXG4gICAgY29uc3QgcHJldldoZWVsU2Nyb2xsID0gR2FtZVNjcm9sbC53aGVlbFNjcm9sbDtcclxuICAgIEdhbWVTY3JvbGwud2hlZWxTY3JvbGwgPSAocHRyKSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAoKF9hID0gb3B0aW9uID09PSBudWxsIHx8IG9wdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9uLmV2dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVwKSAmJiAoKF9iID0gb3B0aW9uID09PSBudWxsIHx8IG9wdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9uLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVwKHB0cikpO1xyXG4gICAgICAgIHByZXZXaGVlbFNjcm9sbChwdHIpO1xyXG4gICAgfTtcclxuICAgIEdhbWVTY3JvbGwuYnRuLm9uKCdwb2ludGVydXAnLCBHYW1lU2Nyb2xsLmFjdFNjcm9sbCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vZmYoJ3doZWVsJywgR2FtZVNjcm9sbC53aGVlbFNjcm9sbCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbignd2hlZWwnLCBHYW1lU2Nyb2xsLndoZWVsU2Nyb2xsKTtcclxuICAgIC8vIGtleSBiaW5kaW5nXHJcbiAgICBXaW5kb3dMb2JieS5hZGQyQWxsKCdkb3duJywgJ3Njcm9sbCcsIChldnQsIGtleSkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgIT09IGNtZEtleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVTY3JvbGwuYWN0U2Nyb2xsKCk7XHJcbiAgICB9KTtcclxuICAgIGlmIChpc1N3aXBlR2VzdHVyZUV4aXN0KVxyXG4gICAgICAgIENyZWF0ZVN3aXBlU2Nyb2xsKHNjZW5lKTtcclxuICAgIEluaXRHYW1lU2Nyb2xsKCk7XHJcbiAgICByZXR1cm4gR2FtZVNjcm9sbDtcclxufTtcclxuY29uc3QgU2V0R2FtZVNjcm9sbGFibGUgPSAoaXNTY3JvbGxhYmxlKSA9PiB7XHJcbiAgICBpZiAoIUdhbWVTY3JvbGwuYnRuKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIEdhbWVTY3JvbGwuaXNTY3JvbGxhYmxlID0gaXNTY3JvbGxhYmxlO1xyXG4gICAgR2FtZVNjcm9sbC5idG4uc2V0QWxwaGEoR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUgPyBVSVByb3BzLmFscGhhIDogMC4yKTtcclxuICAgIHJldHVybiBHYW1lU2Nyb2xsO1xyXG59O1xyXG5jb25zdCBDcmVhdGVTd2lwZVNjcm9sbCA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgZGlzYWJsZUFscGhhID0gMDtcclxuICAgIGNvbnN0IGFibGVBbHBoYSA9IDAuNjtcclxuICAgIGNvbnN0IHNjcm9sbEJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnYmxhY2tTY3JlZW4nKTtcclxuICAgIHNjcm9sbEJnLnNldEFscGhhKDAuNik7XHJcbiAgICBzY3JvbGxCZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBzY3JvbGxCZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgc2Nyb2xsQmcuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBsZXQgaXNTY3JvbGxCZ1RleHR1cmVFeGlzdCA9IHRydWU7XHJcbiAgICBpZiAoIXNjZW5lLnRleHR1cmVzLmdldCgnYmxhY2tTY3JlZW4nKSlcclxuICAgICAgICBpc1Njcm9sbEJnVGV4dHVyZUV4aXN0ID0gZmFsc2U7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgaXNTY3JvbGxCZ1RleHR1cmVFeGlzdCA9IHRydWU7XHJcbiAgICBjb25zdCBzY3JvbGxBcnJvdyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJ3Njcm9sbEFycm93Jyk7XHJcbiAgICBzY3JvbGxBcnJvdy5zZXRPcmlnaW4oMC41LCAwLjUpO1xyXG4gICAgc2Nyb2xsQXJyb3cuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBzY3JvbGxBcnJvdy5zZXRBbHBoYShkaXNhYmxlQWxwaGEpO1xyXG4gICAgY29uc3Qgc2Nyb2xsVHh0ID0gc2NlbmUuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICdTY3JvbGwgVG91Y2ggRG93bicpO1xyXG4gICAgU2V0Rm9udFN0eWxlKHNjcm9sbFR4dCk7XHJcbiAgICBzY3JvbGxUeHQuc2V0QWxwaGEoMC44KTtcclxuICAgIHNjcm9sbFR4dC5zZXRGb250U2l6ZShWaWV3LncgLyAxNik7XHJcbiAgICBzY3JvbGxUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBjb25zdCBzd2lwZVlBbW91bnQgPSBWaWV3LmggKiAyIC8gNTtcclxuICAgIGNvbnN0IHN3aXBlWUxpbWl0ID0gVmlldy5oIC8gMiArIFZpZXcuaCAvIDg7XHJcbiAgICBjb25zdCBTY3JvbGxTaG93ID0gKHNpemVZLCBhbHBoYSkgPT4ge1xyXG4gICAgICAgIHNjcm9sbEFycm93LnNldERpc3BsYXlTaXplKFZpZXcuY2VudGVyWCwgc2l6ZVkpO1xyXG4gICAgICAgIHNjcm9sbEFycm93LnNldEFscGhhKGFscGhhKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBTY3JvbGxIaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIGlzU2Nyb2xsQmdUZXh0dXJlRXhpc3QgJiYgc2Nyb2xsQmcuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgc2Nyb2xsQXJyb3cuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgc2Nyb2xsQXJyb3cuc2V0QWxwaGEoZGlzYWJsZUFscGhhKTtcclxuICAgICAgICBzY3JvbGxUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gbW92ZSBldnRcclxuICAgIEdhbWVJbnB1dC5hZGQoJ21vdmUnLCAocHRyLCBjdXJyZW50bHlPdmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwdHIuaXNEb3duKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCFHYW1lU2Nyb2xsLmlzU2Nyb2xsYWJsZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIHNob3cgb3IgaGlkZSBzY3JvbGwgZG93biBpbWcgJiB0eHRcclxuICAgICAgICBjb25zdCBkaWZmWSA9IEdhbWVHZXN0dXJlLmluaXRQb3MueSAtIHB0ci55O1xyXG4gICAgICAgIGlmIChkaWZmWSA+PSBzd2lwZVlBbW91bnQpIHtcclxuICAgICAgICAgICAgc2Nyb2xsQXJyb3cuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgaWYgKGRpZmZZID49IHN3aXBlWUxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsaW1pdCBzd2lwZVxyXG4gICAgICAgICAgICAgICAgaXNTY3JvbGxCZ1RleHR1cmVFeGlzdCAmJiBzY3JvbGxCZy5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVHh0LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBTY3JvbGxTaG93KHN3aXBlWUxpbWl0LCBhYmxlQWxwaGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGFscGhhIHJhdGlvXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZVJhdGlvID0gR2V0UmF0aW8oc3dpcGVZQW1vdW50LCBzd2lwZVlMaW1pdCwgZGlmZlkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxwaGFSYXRpbyA9IEdldFZhbHVlVmlhUmF0aW8oZGlzYWJsZUFscGhhLCBhYmxlQWxwaGEsIGRpc3RhbmNlUmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgU2Nyb2xsU2hvdyhkaWZmWSwgYWxwaGFSYXRpbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBTY3JvbGxIaWRlKCk7XHJcbiAgICB9KTtcclxuICAgIC8vIGFjdCBzY3JvbGwgd2hlbiBwdHIgdXBcclxuICAgIEdhbWVJbnB1dC5hZGQoJ3VwJywgKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIGlmICghR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUpXHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxIaWRlKCk7XHJcbiAgICAgICAgaWYgKCFzY3JvbGxBcnJvdy52aXNpYmxlKVxyXG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsSGlkZSgpO1xyXG4gICAgICAgIGlmICghc2Nyb2xsVHh0LnZpc2libGUpXHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxIaWRlKCk7XHJcbiAgICAgICAgU2Nyb2xsSGlkZSgpO1xyXG4gICAgICAgIEdhbWVTY3JvbGwuYWN0U2Nyb2xsKCk7XHJcbiAgICB9KTtcclxuICAgIFtzY3JvbGxCZywgc2Nyb2xsQXJyb3csIHNjcm9sbFR4dF0ubWFwKHNjcm9sbEVsZSA9PiBTZXREZXB0aChzY3JvbGxFbGUsICdoaWdoZXN0JykpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lU2Nyb2xsO1xyXG5leHBvcnQgeyBHZXRTY3JvbGxBc3NldHMsIEluaXRHYW1lU2Nyb2xsLCBDcmVhdGVHYW1lU2Nyb2xsLCBTZXRHYW1lU2Nyb2xsYWJsZSwgfTtcclxuIiwiaW1wb3J0IHsgQ29tbW9uU2Z4LCBDb21tb25GdWxsU2NyZWVuLCBHZXRBc3NldEZpbGVzIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2Fzc2V0VXRpbHNcIjtcclxuaW1wb3J0IFdpbmRvd0xvYmJ5IGZyb20gXCJAc3JjL3dpbmRvd1wiO1xyXG5pbXBvcnQgVUlQcm9wcywgeyBDcmVhdGVVSUJ0bkFuaW0sIFNldENvbW1vblVJUHJvcHMgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgU2V0R2FtZVNjcm9sbGFibGUgfSBmcm9tIFwiLi4vc2Nyb2xsXCI7XHJcbmNvbnN0IEdhbWVGdWxsU2NyZWVuID0ge1xyXG4gICAgaXNEZWxheWluZzogZmFsc2UsXHJcbiAgICBkZWxheTogMzAwLFxyXG4gICAgY2hja1RpbWU6IDEwMDAsXHJcbiAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxyXG4gICAgYnRuOiBudWxsLFxyXG4gICAgZGVmYXVsdE9wdDoge1xyXG4gICAgICAgIHg6IFVJUHJvcHMubWFyZ2luLFxyXG4gICAgICAgIHk6IFVJUHJvcHMubWFyZ2luLFxyXG4gICAgICAgIGNtZEtleTogJ2YnLFxyXG4gICAgfSxcclxuICAgIG9wdGlvbjoge30sXHJcbn07XHJcbmNvbnN0IEdldEZ1bGxTY3JlZW5Bc3NldHMgPSAoZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgY29uc3QgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgIHsga2V5OiAnZnVsbFNjcmVlbkxhcmdlcicsIHVybDogQ29tbW9uRnVsbFNjcmVlbiArICdmdWxsU2NyZWVuTGFyZ2VyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ2Z1bGxTY3JlZW5TbWFsbGVyJywgdXJsOiBDb21tb25GdWxsU2NyZWVuICsgJ2Z1bGxTY3JlZW5TbWFsbGVyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ3RvdWNoU2Z4JywgdXJsOiBDb21tb25TZnggKyAndG91Y2hTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgXTtcclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cyk7XHJcbn07XHJcbmNvbnN0IEluaXRGdWxsU2NyZWVuID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBDcmVhdGVGdWxsU2NyZWVuID0gKHNjZW5lLCBvcHRpb24pID0+IHtcclxuICAgIEdhbWVGdWxsU2NyZWVuLm9wdGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgR2FtZUZ1bGxTY3JlZW4uZGVmYXVsdE9wdCksIG9wdGlvbik7XHJcbiAgICBjb25zdCB7IHgsIHksIGNtZEtleSB9ID0gR2FtZUZ1bGxTY3JlZW4ub3B0aW9uO1xyXG4gICAgY29uc3QgYnRuVGV4dHVyZSA9IEdhbWVGdWxsU2NyZWVuLmlzRnVsbFNjcmVlbiA/ICdmdWxsU2NyZWVuU21hbGxlcicgOiAnZnVsbFNjcmVlbkxhcmdlcic7XHJcbiAgICAvLyBhZGQgc2NyZWVuIHNpemUgY29udHJvbGxlclxyXG4gICAgR2FtZUZ1bGxTY3JlZW4uYnRuID0gc2NlbmUuYWRkLmltYWdlKHgsIHksIGJ0blRleHR1cmUpO1xyXG4gICAgU2V0Q29tbW9uVUlQcm9wcyhHYW1lRnVsbFNjcmVlbi5idG4pO1xyXG4gICAgQ3JlYXRlVUlCdG5BbmltKHNjZW5lLCBHYW1lRnVsbFNjcmVlbi5idG4pO1xyXG4gICAgY29uc3QgZGVsYXlFdnQgPSAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUZ1bGxTY3JlZW4uYnRuLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgIEdhbWVGdWxsU2NyZWVuLmlzRGVsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5zZXRBbHBoYSgwLjIpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICAgICAgR2FtZUZ1bGxTY3JlZW4uaXNEZWxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0QWxwaGEoVUlQcm9wcy5hbHBoYSk7XHJcbiAgICAgICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2NlbmUuc2NhbGUuaXNGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXRFdnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHcucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVGdWxsU2NyZWVuLmlzRGVsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0QWxwaGEoVUlQcm9wcy5hbHBoYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIEdhbWVGdWxsU2NyZWVuLmRlbGF5KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZXhpdEV2dCA9ICgpID0+IHtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgICAgICBzY2VuZS5zY2FsZS5zdG9wRnVsbHNjcmVlbigpO1xyXG4gICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5zZXRUZXh0dXJlKCdmdWxsU2NyZWVuTGFyZ2VyJyk7XHJcbiAgICAgICAgU2V0R2FtZVNjcm9sbGFibGUodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdG9nZ2xlRXZ0ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChHYW1lRnVsbFNjcmVlbi5pc0RlbGF5aW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZGVsYXlFdnQoKTtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4gPSAhR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuO1xyXG4gICAgICAgIGlmIChHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgc2NlbmUuc2NhbGUuc3RhcnRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5zZXRUZXh0dXJlKCdmdWxsU2NyZWVuU21hbGxlcicpO1xyXG4gICAgICAgICAgICBTZXRHYW1lU2Nyb2xsYWJsZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZXhpdEV2dCgpO1xyXG4gICAgfTtcclxuICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4geyB0b2dnbGVFdnQoKTsgfSk7XHJcbiAgICAvLyByZXNpemUgZXZlbnQgZm9yIHN0b3AgZnVsbCBzY3JlZW5cclxuICAgIHNjZW5lLnNjYWxlLm9mZigncmVzaXplJyk7XHJcbiAgICBzY2VuZS5zY2FsZS5vbigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChHYW1lRnVsbFNjcmVlbi5idG4uaXNDaGFuZ2luZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChHYW1lRnVsbFNjcmVlbi5pc0RlbGF5aW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCFHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBkZWxheUV2dCgpO1xyXG4gICAgICAgIGV4aXRFdnQoKTtcclxuICAgIH0pO1xyXG4gICAgLy8ga2V5IGJpbmRpbmdcclxuICAgIFdpbmRvd0xvYmJ5LmFkZDJBbGwoJ3VwJywgJ2Z1bGxTY3JlZW4nLCAoZXZ0LCBrZXkpID0+IHtcclxuICAgICAgICBpZiAoa2V5ICE9PSBjbWRLZXkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0b2dnbGVFdnQoKTtcclxuICAgIH0pO1xyXG4gICAgSW5pdEZ1bGxTY3JlZW4oKTtcclxuICAgIHJldHVybiBHYW1lRnVsbFNjcmVlbjtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUZ1bGxTY3JlZW47XHJcbmV4cG9ydCB7IEdldEZ1bGxTY3JlZW5Bc3NldHMsIEluaXRGdWxsU2NyZWVuLCBDcmVhdGVGdWxsU2NyZWVuLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IEluaXRCbG9ja1N5c3RlbSwgVXBkYXRlQWxsQmxvY2tzIH0gZnJvbSAnLi9ibG9jay9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBDcmVhdGVQb3BVcCB9IGZyb20gJy4vdWkvcG9wdXAnO1xyXG5pbXBvcnQgeyBDcmVhdGVTY29yZVR4dCB9IGZyb20gJy4vdWkvc2NvcmUnO1xyXG5pbXBvcnQgeyBDcmVhdGVTZXR0aW5nIH0gZnJvbSAnLi91aS9zZXR0aW5nJztcclxuaW1wb3J0IEdhbWVUaW1lLCB7IENyZWF0ZUdhbWVUaW1lVHh0IH0gZnJvbSAnLi91aS90aW1lJztcclxuaW1wb3J0IEdhbWVBdWRpbywgeyBDcmVhdGVHYW1lQXVkaW8gfSBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFN0b3BQYXNzaXZlTG9hZGluZyB9IGZyb20gJ0BzcmMvc2NlbmVzL3Bhc3NpdmVMb2FkaW5nJztcclxuaW1wb3J0IEdhbWVTdGFydENudCwgeyBDcmVhdGVHYW1lU3RhcnRDbnQgfSBmcm9tICcuL3VpL3N0YXJ0Q250JztcclxuaW1wb3J0IEdhbWVPdmVyLCB7IENyZWF0ZUdhbWVPdmVyIH0gZnJvbSAnLi91aS9nYW1lb3Zlcic7XHJcbmltcG9ydCB7IENyZWF0ZUlucHV0LCBVcGRhdGVJbnB1dCB9IGZyb20gJy4vaW5wdXQnO1xyXG5pbXBvcnQgRWZ4LCB7IENyZWF0ZUVmeCwgQ3JlYXRlR2FtZU92ZXJFZnggfSBmcm9tICcuL2VmeCc7XHJcbmltcG9ydCB7IEdldFJuZENvbG9yLCBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi9kZXB0aCc7XHJcbmltcG9ydCBHYW1lV2FybmluZywgeyBDcmVhdGVHYW1lV2FybmluZyB9IGZyb20gJy4vdWkvd2FybmluZyc7XHJcbmltcG9ydCBHYW1lRGF0YSBmcm9tICcuLi9zdG9yYWdlJztcclxuaW1wb3J0IEdhbWVGdWxsU2NyZWVuLCB7IENyZWF0ZUZ1bGxTY3JlZW4gfSBmcm9tICdAc3JjL3NjZW5lcy91aS9mdWxsU2NyZWVuJztcclxuY29uc3QgU3RhcnRHYW1lID0gKHNjZW5lKSA9PiB7XHJcbiAgICBzY2VuZS5zY2VuZS5yZW1vdmUoJ2dhbWUnKTtcclxuICAgIHNjZW5lLnNjZW5lLmFkZCgnZ2FtZScsIEdhbWVTY2VuZSk7XHJcbiAgICBzY2VuZS5zY2VuZS5sYXVuY2goJ2dhbWUnKTtcclxufTtcclxuY29uc3QgUmVzdGFydEdhbWUgPSAoc2NlbmUpID0+IHtcclxuICAgIEVmeC5zdG9wQWxsKCk7XHJcbiAgICBzY2VuZS5zY2VuZS5yZXN0YXJ0KCk7XHJcbn07XHJcbmNvbnN0IFN0b3BHYW1lID0gKHNjZW5lKSA9PiB7XHJcbiAgICBpZiAoc2NlbmUuc2NlbmUuZ2V0KCdnYW1lJykpIHtcclxuICAgICAgICBzY2VuZS5zY2VuZS5zZXRBY3RpdmUoZmFsc2UsICdnYW1lJyk7XHJcbiAgICAgICAgc2NlbmUuc2NlbmUuc2V0VmlzaWJsZShmYWxzZSwgJ2dhbWUnKTtcclxuICAgICAgICBFZnguc3RvcEFsbCgpO1xyXG4gICAgICAgIEdhbWVBdWRpby5zdG9wQmdtKCdnYW1lQmdtJyk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghc2NlbmUuc2NlbmUuZ2V0KCdnYW1lJykpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHNjZW5lLnNjZW5lLnJlbW92ZSgnZ2FtZScpO1xyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBrZXk6ICdnYW1lJyxcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGhlbWVJZHggPSAwO1xyXG4gICAgICAgIHRoaXMud2FsbEdhcCA9IFZpZXcuY2FsY1JhdGlvKDQ1KTtcclxuICAgICAgICB0aGlzLndhbGxCb3R0b21HYXAgPSBWaWV3LmNhbGNSYXRpbygzMCk7XHJcbiAgICAgICAgdGhpcy5tYXR0ZXJTdGVwRm9yY2UgPSAwLjA4OyAvLyBhcHBseSBkZWx0YSB0byBtYXR0ZXIgZm9yY2UgbWV0aG9kXHJcbiAgICB9XHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVXYWxsKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCZ1NjZW5lKCk7XHJcbiAgICAgICAgLy8gYmxvY2sgc3lzdGVtXHJcbiAgICAgICAgSW5pdEJsb2NrU3lzdGVtKCk7XHJcbiAgICAgICAgLy8gaW5wdXRcclxuICAgICAgICBDcmVhdGVJbnB1dCh0aGlzKTtcclxuICAgICAgICAvLyBhdWRpb1xyXG4gICAgICAgIENyZWF0ZUdhbWVBdWRpbyh0aGlzLCBHYW1lRGF0YSk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlCZ20oJ2dhbWVCZ20nKTtcclxuICAgICAgICAvLyB1aVxyXG4gICAgICAgIENyZWF0ZUdhbWVTdGFydENudCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVTY29yZVR4dCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVHYW1lVGltZVR4dCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVQb3BVcCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVHYW1lV2FybmluZyh0aGlzKTtcclxuICAgICAgICBDcmVhdGVHYW1lT3Zlcih0aGlzLCB0aGlzLnRoZW1lSWR4KTtcclxuICAgICAgICBDcmVhdGVFZngodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlR2FtZU92ZXJFZngodGhpcywgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcpO1xyXG4gICAgICAgIENyZWF0ZUZ1bGxTY3JlZW4odGhpcyk7XHJcbiAgICAgICAgU2V0RGVwdGgoR2FtZUZ1bGxTY3JlZW4uYnRuLCAnZnVsbFNjcmVlbicpO1xyXG4gICAgICAgIENyZWF0ZVNldHRpbmcodGhpcyk7XHJcbiAgICAgICAgLy8gc3RvcCBwYXNzaXZlIGxvYWRpbmdcclxuICAgICAgICBTdG9wUGFzc2l2ZUxvYWRpbmcoKTtcclxuICAgICAgICAvLyAvLyBkZWJ1Z2dpbmdcclxuICAgICAgICAvLyBjb25zdCBpbnNwZWN0b3JXaWR0aCA9IDI1NTtcclxuICAgICAgICAvLyBQR1VJbnNwZWN0b3IodGhpcywgeyByaWdodDogd2luZG93LmlubmVyV2lkdGggLSBpbnNwZWN0b3JXaWR0aCwgdG9wOiA0OCB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIGlmICghR2FtZVN0YXJ0Q250LmdldElzU3RhcnQoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVUaW1lLnVwZGF0ZSh0aGlzLCBkZWx0YSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcudXBkYXRlKHRoaXMpO1xyXG4gICAgICAgIFVwZGF0ZUlucHV0KGRlbHRhKTtcclxuICAgICAgICBVcGRhdGVBbGxCbG9ja3ModGhpcywgdGltZSwgZGVsdGEpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWF0dGVyU3RlcChkZWx0YSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVXYWxsKCkge1xyXG4gICAgICAgIC8vIHNldCBtYXR0ZXIgd2FsbHNcclxuICAgICAgICBjb25zdCB3YWxsVGhpY2tuZXNzID0gdGhpcy53YWxsR2FwICogNTtcclxuICAgICAgICB0aGlzLm1hdHRlci53b3JsZC5zZXRCb3VuZHModGhpcy53YWxsR2FwLCAwLCBWaWV3LncgLSAodGhpcy53YWxsR2FwICogMiksIFZpZXcuaCAtIHRoaXMud2FsbEdhcCwgd2FsbFRoaWNrbmVzcywgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIC8vIGNyZWF0ZSBibG9jayBzcGF3biBzdXBwb3J0IHdhbGxcclxuICAgICAgICBjb25zdCBzdXBwb3J0TGVmdCA9IHRoaXMubWF0dGVyLmFkZC5yZWN0YW5nbGUoMCwgLVZpZXcuaCAvIDIsIHRoaXMud2FsbEdhcCwgVmlldy5oLCB7IGlzU3RhdGljOiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IHN1cHBvcnRSaWdodCA9IHRoaXMubWF0dGVyLmFkZC5yZWN0YW5nbGUoVmlldy53LCAtVmlldy5oIC8gMiwgdGhpcy53YWxsR2FwLCBWaWV3LmgsIHsgaXNTdGF0aWM6IHRydWUgfSk7XHJcbiAgICAgICAgY29uc3QgYmdUZXh0dXJlTGlzdCA9IFsnYmdHcmVlbicsICdiZ0Jyb3duJywgJ2JnQmx1ZSddO1xyXG4gICAgICAgIGNvbnN0IGJ0bkxpc3QgPSBbJ2J0bkdyZWVuJywgJ2J0bkJyb3duJywgJ2J0bkJsdWUnXTtcclxuICAgICAgICB0aGlzLnRoZW1lSWR4ID0gR2V0Um5kSW50KDAsIGJnVGV4dHVyZUxpc3QubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBsZWZ0V2FsbCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgMCwgdGhpcy53YWxsR2FwLCBWaWV3LmgsIGJnVGV4dHVyZUxpc3RbdGhpcy50aGVtZUlkeF0pLnNldE9yaWdpbigwKTtcclxuICAgICAgICBjb25zdCByaWdodFdhbGwgPSB0aGlzLmFkZC50aWxlU3ByaXRlKFZpZXcudyAtIHRoaXMud2FsbEdhcCwgMCwgdGhpcy53YWxsR2FwLCBWaWV3LmgsIGJnVGV4dHVyZUxpc3RbdGhpcy50aGVtZUlkeF0pLnNldE9yaWdpbigwKTtcclxuICAgICAgICBjb25zdCBib3R0b21XYWxsID0gdGhpcy5hZGQuaW1hZ2UoMCwgVmlldy5oIC0gdGhpcy53YWxsR2FwLCBidG5MaXN0W3RoaXMudGhlbWVJZHhdKS5zZXRPcmlnaW4oMCkuc2V0RGlzcGxheVNpemUoVmlldy53LCB0aGlzLndhbGxHYXApO1xyXG4gICAgICAgIFtsZWZ0V2FsbCwgcmlnaHRXYWxsLCBib3R0b21XYWxsXS5tYXAod2FsbCA9PiBTZXREZXB0aCh3YWxsLCAnd2FsbCcpKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEsIGR1cmF0aW9uOiA1MDAwLCByZXBlYXQ6IC0xLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGVmdFdhbGwudGlsZVBvc2l0aW9uWSArPSAxO1xyXG4gICAgICAgICAgICAgICAgcmlnaHRXYWxsLnRpbGVQb3NpdGlvblkgLT0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlQmdTY2VuZSgpIHtcclxuICAgICAgICBjb25zdCBiZ0NvbG9yID0gR2V0Um5kQ29sb3IoKTtcclxuICAgICAgICAvLyBzZWxlY3QgYmcgY29sb3JcclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5zZXRCYWNrZ3JvdW5kQ29sb3IoYmdDb2xvcik7XHJcbiAgICAgICAgLy8gc2VsZWN0IGNsb3VkIHNoYXBlXHJcbiAgICAgICAgdGhpcy5jbG91ZEdyb3VwID0gdGhpcy5hZGQuZ3JvdXAoe1xyXG4gICAgICAgICAgICBkZWZhdWx0S2V5OiAnY2xvdWQnLFxyXG4gICAgICAgICAgICBtYXhTaXplOiAxNVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Bhd25DbG91ZCgpO1xyXG4gICAgICAgIC8vIHNlbGVjdCB0cmVlIHNoYXBlXHJcbiAgICAgICAgdGhpcy50cmVlR3JvdXAgPSB0aGlzLmFkZC5ncm91cCh7XHJcbiAgICAgICAgICAgIGRlZmF1bHRLZXk6ICd0cmVlJyxcclxuICAgICAgICAgICAgbWF4U2l6ZTogMTVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNwYXduVHJlZSgpO1xyXG4gICAgICAgIC8vIHNlbGVjdCBtaXN0XHJcbiAgICAgICAgY29uc3QgYmdNaXN0SWR4ID0gR2V0Um5kSW50KDEsIDQpO1xyXG4gICAgICAgIGNvbnN0IGJnTWlzdCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUodGhpcy53YWxsR2FwLCBWaWV3LmggLSB0aGlzLndhbGxHYXAsIFZpZXcudyAtICh0aGlzLndhbGxHYXAgKiAyKSwgdGhpcy53YWxsR2FwLCAnbWlzdCcgKyBiZ01pc3RJZHgpO1xyXG4gICAgICAgIGJnTWlzdC5zZXRPcmlnaW4oMCwgMSk7XHJcbiAgICAgICAgYmdNaXN0LnNldEFscGhhKDAuNCk7XHJcbiAgICAgICAgU2V0RGVwdGgoYmdNaXN0LCAnbWlzdCcpO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IDUwMDAsIHJlcGVhdDogLTEsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBiZ01pc3QudGlsZVBvc2l0aW9uWCArPSAwLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNwYXduQ2xvdWQoKSB7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBHZXRSbmRJbnQoMTIwMCwgMzAwMCk7XHJcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiAxLCBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3VkR3JvdXAuY2hpbGRyZW4uaXRlcmF0ZSgoY2xvdWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGNrIGRlYXRsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3VkLnggPiBWaWV3LncpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvdWRHcm91cC5raWxsQW5kSGlkZShjbG91ZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBjbG91ZHNcclxuICAgICAgICAgICAgICAgICAgICBjbG91ZC54ICs9IGNsb3VkLm1vdmVHYXBYO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG91ZCA9IHRoaXMuY2xvdWRHcm91cC5nZXQoKTtcclxuICAgICAgICAgICAgICAgIGlmICghY2xvdWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0VGV4dHVyZSgnY2xvdWQnICsgR2V0Um5kSW50KDEsIDEwKSk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRQb3NpdGlvbigtY2xvdWQud2lkdGgsIEdldFJuZEludChWaWV3LmNlbnRlclksIFZpZXcuY2VudGVyWSAtIFZpZXcuY2VudGVyWSAvIDIpKTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldE9yaWdpbigwLCAwLjUpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0QWxwaGEoMC40KTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLm1vdmVHYXBYID0gR2V0Um5kTnVtKDAuMiwgMyk7XHJcbiAgICAgICAgICAgICAgICBTZXREZXB0aChjbG91ZCwgJ2Nsb3VkJyk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGF3bkNsb3VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNwYXduVHJlZSgpIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IEdldFJuZEludCgxMjAwLCAzMDAwKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEsIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJlZUdyb3VwLmNoaWxkcmVuLml0ZXJhdGUoKHRyZWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGNrIGRlYXRsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZWUueCA8IC10cmVlLndpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVHcm91cC5raWxsQW5kSGlkZSh0cmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGNsb3Vkc1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWUueCAtPSAwLjU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWUgPSB0aGlzLnRyZWVHcm91cC5nZXQoKTtcclxuICAgICAgICAgICAgICAgIGlmICghdHJlZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldFRleHR1cmUoJ3RyZWUnICsgR2V0Um5kSW50KDEsIDM2KSk7XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldFBvc2l0aW9uKFZpZXcudywgVmlldy5oIC0gdGhpcy53YWxsR2FwKTtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0T3JpZ2luKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldEFscGhhKDAuMik7XHJcbiAgICAgICAgICAgICAgICBTZXREZXB0aCh0cmVlLCAndHJlZScpO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGF3blRyZWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlTWF0dGVyU3RlcChkZWx0YSkgeyB0aGlzLm1hdHRlci53b3JsZC5zdGVwKGRlbHRhKTsgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVTY2VuZTtcclxuZXhwb3J0IHsgU3RhcnRHYW1lLCBSZXN0YXJ0R2FtZSwgU3RvcEdhbWUgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgUmVzdGFydEdhbWUsIFN0b3BHYW1lIH0gZnJvbSAnLi4vZ2FtZSc7XHJcbmltcG9ydCB7IFN0YXJ0VGl0bGUgfSBmcm9tICcuLi90aXRsZSc7XHJcbmltcG9ydCB7IENvbnRleHRNYXJnaW5ILCBDb250ZXh0TWFyZ2luVywgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUsIFR4dE92ZXJIZWFkU2l6ZSwgVHh0VGl0bGVIZWFkU2l6ZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgU2NvcmUgZnJvbSAnLi9zY29yZSc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgeyBHZXRMb2NhbFN0b3JhZ2VJdGVtIH0gZnJvbSAnQHNyYy91dGlscy9zdG9yYWdlJztcclxuaW1wb3J0IEdhbWVEYXRhIGZyb20gJy4uLy4uL3N0b3JhZ2UnO1xyXG5pbXBvcnQgRWZ4IGZyb20gJy4uL2VmeCc7XHJcbmltcG9ydCBCbG9ja1N5c3RlbSBmcm9tICcuLi9ibG9jay9zeXN0ZW0nO1xyXG5jb25zdCBHYW1lT3ZlciA9IHtcclxuICAgIG92ZXJUeHQ6IG51bGwsXHJcbiAgICBsYXllcjogbnVsbCxcclxuICAgIG5ld0Jlc3RTY29yZUJnU2NhbGVXOiAyLjQsXHJcbiAgICBuZXdCZXN0U2NvcmVCZ1NjYWxlSDogMy4yLFxyXG4gICAgbmV3QmVzdFNjb3JlQmc6IG51bGwsXHJcbiAgICBuZXdCZXN0U2NvcmVUeHQ6IG51bGwsXHJcbiAgICBuZXdCZXN0U2NvcmVOdW06IG51bGwsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgdGl0bGU6ICdUaW1lIE92ZXInLFxyXG4gICAgICAgIGJvbnVzVGltZTogMCxcclxuICAgICAgICBzY29yZTogMCxcclxuICAgICAgICBmaW5hbFNjb3JlOiAwXHJcbiAgICB9LFxyXG4gICAgYW5pbUNvbW1vbk92ZXI6IGZ1bmN0aW9uIChzY2VuZSwgc25kS2V5LCB0eHQpIHtcclxuICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKHRydWUpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KHNuZEtleSk7XHJcbiAgICAgICAgY29uc3Qgb3ZlclNuZCA9IHNjZW5lLnNvdW5kLmdldChzbmRLZXkpO1xyXG4gICAgICAgIGNvbnN0IG92ZXJTbmRUaW1pbmcgPSBvdmVyU25kLmR1cmF0aW9uIC8gMiAqIDEwMDAgLSAxMDA7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogb3ZlclNuZFRpbWluZywgZHVyYXRpb246IG92ZXJTbmRUaW1pbmcsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3ZlclR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVyVHh0LnNldFRleHQodHh0ICsgJ1xcbicpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJUeHQuc2V0VGV4dCh0eHQgKyAnXFxuT3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltU2hvdyhzY2VuZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdHh0ICsgJyBPdmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9udXNUaW1lOiBTY29yZS5nZXRCb251c1RpbWVTY29yZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29yZTogU2NvcmUuZ2V0U2NvcmUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxTY29yZTogU2NvcmUuZ2V0RmluYWxTY29yZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGFuaW1UaW1lT3ZlcjogZnVuY3Rpb24gKHNjZW5lKSB7IHRoaXMuYW5pbUNvbW1vbk92ZXIoc2NlbmUsICd2b2ljZVRpbWVPdmVyJywgJ1RpbWUnKTsgfSxcclxuICAgIGFuaW1HYW1lT3ZlcjogZnVuY3Rpb24gKHNjZW5lKSB7IHRoaXMuYW5pbUNvbW1vbk92ZXIoc2NlbmUsICd2b2ljZUdhbWVPdmVyJywgJ0dhbWUnKTsgfSxcclxuICAgIGFuaW1TaG93OiBmdW5jdGlvbiAoc2NlbmUsIGRhdGEpIHtcclxuICAgICAgICAvLyBzZXQgZGVmYXVsdCBkYXRhIGZvciBwZXJmb3JtYW5jZVxyXG4gICAgICAgIHRoaXMuc2hvdyh7XHJcbiAgICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgICAgICBib251c1RpbWU6IDAsXHJcbiAgICAgICAgICAgIHNjb3JlOiAwLFxyXG4gICAgICAgICAgICBmaW5hbFNjb3JlOiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYW5pbSB0byBib251cyB0aW1lICYgc2NvcmVcclxuICAgICAgICBjb25zdCBwcmV2QmVzdFNjb3JlID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lRGF0YSwgJ2Jlc3QnKTtcclxuICAgICAgICBjb25zdCB7IHNjb3JlLCBib251c1RpbWUsIGZpbmFsU2NvcmUgfSA9IGRhdGE7XHJcbiAgICAgICAgU2NvcmUuY29tcGFyZU5vcm1hbEFuZEJlc3QoZmluYWxTY29yZSk7IC8vIHRlc3RcclxuICAgICAgICBjb25zdCB0d0xpc3QgPSBbXTtcclxuICAgICAgICBjb25zdCBzZnhDb21tb25Ud0NvbmZpZyA9IHtcclxuICAgICAgICAgICAgLy8gdXBkYXRpbmcgc2NvcmUgc2Z4XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiBzY29yZSwgZHVyYXRpb246IDEwMCwgcmVwZWF0OiA5LFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7IHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTsgfSxcclxuICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHsgR2FtZUF1ZGlvLnBsYXlTZngoJ3ZvaWNlU2NvcmUnKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc2NhbGVDb21tb25Ud0NvbmZpZyA9IHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDEuMywgZHVyYXRpb246IDUwMCwgeW95bzogdHJ1ZSwgZWFzZTogJ0JhY2suZWFzZUluT3V0JyxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4geyBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7IH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0d0xpc3QucHVzaChzZnhDb21tb25Ud0NvbmZpZywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzY2FsZUNvbW1vblR3Q29uZmlnKSwgeyBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXIuc2NvcmVUeHQuc2V0U2NhbGUodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSB9KSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2NvcmVcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IHNjb3JlLCBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFRleHQodHdEYXRhLnZhbHVlLnRvRml4ZWQoMCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LCAyMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goc2Z4Q29tbW9uVHdDb25maWcsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGVDb21tb25Ud0NvbmZpZyksIHsgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnRpbWVUeHQuc2V0U2NhbGUodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSB9KSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgYm9udXMgdGltZVxyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogYm9udXNUaW1lLCBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnRpbWVUeHQuc2V0VGV4dCh0d0RhdGEudmFsdWUudG9GaXhlZCgwKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7IH0sIDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0d0xpc3QucHVzaChzZnhDb21tb25Ud0NvbmZpZywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzY2FsZUNvbW1vblR3Q29uZmlnKSwgeyBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXIuc2NvcmVUeHQuc2V0U2NhbGUodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSB9KSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2NvcmUgdmlhIGJvbnVzIHRpbWUgKGZpbmFsIHNjb3JlKVxyXG4gICAgICAgICAgICBmcm9tOiBzY29yZSwgdG86IGZpbmFsU2NvcmUsIGR1cmF0aW9uOiAxMDAwLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXIuc2NvcmVUeHQuc2V0VGV4dCh0d0RhdGEudmFsdWUudG9GaXhlZCgwKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHNob3cgbmV3IGJlc3Qgc2NvcmUgcGVyZm9ybWFuY2UgaWYgc2NvcmUgaXMgYmV0dGVyIHRoYW4gcHJldiBiZXN0IG9uZVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsU2NvcmUgPiBwcmV2QmVzdFNjb3JlKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV3QmVzdFNjb3JlVHh0LnNob3coZmluYWxTY29yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7XHJcbiAgICB9LFxyXG4gICAgc2hvdzogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBkYXRhICYmIHRoaXMuc2V0VHh0RGF0YShkYXRhKTtcclxuICAgICAgICB0aGlzLmxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5uZXdCZXN0U2NvcmVUeHQuaGlkZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldFR4dERhdGE6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICBjb25zdCB7IHRpdGxlLCBib251c1RpbWUsIHNjb3JlLCBmaW5hbFNjb3JlIH0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgdGhpcy5sYXllci50aXRsZVR4dC5zZXRUZXh0KHRpdGxlKTtcclxuICAgICAgICB0aGlzLmxheWVyLnRpbWVUeHQuc2V0VGV4dChib251c1RpbWUpO1xyXG4gICAgICAgIHRoaXMubGF5ZXIuc2NvcmVUeHQuc2V0VGV4dChzY29yZSk7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBJbml0R2FtZU92ZXIgPSAoKSA9PiB7XHJcbiAgICBHYW1lT3Zlci5zZXRUeHREYXRhKHtcclxuICAgICAgICB0aXRsZTogJ1RpbWUgT3ZlcicsXHJcbiAgICAgICAgYm9udXNUaW1lOiAwLFxyXG4gICAgICAgIHNjb3JlOiAwLFxyXG4gICAgICAgIGZpbmFsU2NvcmU6IDBcclxuICAgIH0pO1xyXG4gICAgR2FtZU92ZXIuaGlkZSgpO1xyXG4gICAgR2FtZU92ZXIub3ZlclR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxufTtcclxuY29uc3QgQ29udGV4dFR4dEdhcEggPSBWaWV3LmggLyAxODtcclxuY29uc3QgQnRuR2FwVyA9IFZpZXcudyAvIDg7XHJcbmNvbnN0IENyZWF0ZUdhbWVPdmVyID0gKHNjZW5lLCB0aGVtZUlkeCkgPT4ge1xyXG4gICAgY29uc3QgdGhlbWVDb2xvckxpc3QgPSBbJ0dyZWVuJywgJ0Jyb3duJywgJ0JsdWUnXTtcclxuICAgIGNvbnN0IGNvbG9yID0gdGhlbWVDb2xvckxpc3RbdGhlbWVJZHhdO1xyXG4gICAgR2FtZU92ZXIub3ZlclR4dCA9IHNjZW5lLmFkZC50ZXh0KFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnJykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBHYW1lT3Zlci5sYXllciA9IHNjZW5lLmFkZC5jb250YWluZXIoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkpO1xyXG4gICAgY29uc3QgYmcgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ2JsYWNrU2NyZWVuJyk7XHJcbiAgICBiZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBiZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgYmcuc2V0QWxwaGEoMC40KTtcclxuICAgIGNvbnN0IGNvbnRleHQgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ3BhbmVsJyArIGNvbG9yKTtcclxuICAgIGNvbnRleHQuc2V0RGlzcGxheVNpemUoVmlldy53IC0gQ29udGV4dE1hcmdpblcsIFZpZXcuaCAtIENvbnRleHRNYXJnaW5IKTtcclxuICAgIGNvbnN0IHRpdGxlQmcgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgLVZpZXcuaCAvIDQsICdidG4nICsgY29sb3IpLnNldFNjYWxlKDEuOCk7XHJcbiAgICBjb25zdCB0aXRsZSA9IHNjZW5lLmFkZC50ZXh0KHRpdGxlQmcueCwgdGl0bGVCZy55LCAnR2FtZSBPdmVyJyk7XHJcbiAgICBHYW1lT3Zlci5sYXllci50aXRsZVR4dCA9IHRpdGxlO1xyXG4gICAgY29uc3QgYm9udXNUaW1lID0gc2NlbmUuYWRkLnRleHQoMCwgLUNvbnRleHRUeHRHYXBILCAnQm9udXMgVGltZScpO1xyXG4gICAgY29uc3QgYm9udXNUaW1lVHh0ID0gc2NlbmUuYWRkLnRleHQoMCwgYm9udXNUaW1lLnkgKyBDb250ZXh0VHh0R2FwSCwgJzAnKTtcclxuICAgIEdhbWVPdmVyLmxheWVyLnRpbWVUeHQgPSBib251c1RpbWVUeHQ7XHJcbiAgICBjb25zdCBzY29yZSA9IHNjZW5lLmFkZC50ZXh0KDAsIENvbnRleHRUeHRHYXBILCAnU2NvcmUnKTtcclxuICAgIGNvbnN0IHNjb3JlVHh0ID0gc2NlbmUuYWRkLnRleHQoMCwgc2NvcmUueSArIENvbnRleHRUeHRHYXBILCAnU2NvcmUnKTtcclxuICAgIEdhbWVPdmVyLmxheWVyLnNjb3JlVHh0ID0gc2NvcmVUeHQ7XHJcbiAgICBbR2FtZU92ZXIub3ZlclR4dCwgdGl0bGUsIGJvbnVzVGltZSwgYm9udXNUaW1lVHh0LCBzY29yZSwgc2NvcmVUeHRdLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUoZWxlKTtcclxuICAgIH0pO1xyXG4gICAgR2FtZU92ZXIub3ZlclR4dC5zZXRGb250U2l6ZShUeHRPdmVySGVhZFNpemUpO1xyXG4gICAgdGl0bGUuc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICBjb25zdCB0aXRsZUJ0biA9IHNjZW5lLmFkZC5pbWFnZSgtQnRuR2FwVywgVmlldy5oIC8gNCwgJ292ZXJCdG5VcCcgKyBjb2xvcikuc2V0SW50ZXJhY3RpdmUoKS5zZXRTY2FsZSgyKTtcclxuICAgIGNvbnN0IHRpdGxlQnRuSW1nID0gc2NlbmUuYWRkLmltYWdlKHRpdGxlQnRuLngsIHRpdGxlQnRuLnkgLSA0LCAnb3ZlckJhY2snKS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgY29uc3QgdGl0bGVGdW5jRG93biA9ICgpID0+IHtcclxuICAgICAgICB0aXRsZUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuRG93bicgKyBjb2xvcik7XHJcbiAgICAgICAgdGl0bGVCdG5JbWcuc2V0UG9zaXRpb24odGl0bGVCdG5JbWcueCwgdGl0bGVCdG5JbWcueSArIDQpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHRpdGxlRnVuY1VwID0gKCkgPT4ge1xyXG4gICAgICAgIHRpdGxlQnRuLnNldFRleHR1cmUoJ292ZXJCdG5VcCcgKyBjb2xvcik7XHJcbiAgICAgICAgdGl0bGVCdG5JbWcuc2V0UG9zaXRpb24odGl0bGVCdG5JbWcueCwgdGl0bGVCdG5JbWcueSAtIDQpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgIFN0b3BHYW1lKHNjZW5lKTtcclxuICAgICAgICBTdGFydFRpdGxlKHNjZW5lKTtcclxuICAgIH07XHJcbiAgICBjb25zdCB0aXRsZUZ1bmNPdXQgPSAocHRyKSA9PiB7XHJcbiAgICAgICAgdGl0bGVCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0blVwJyArIGNvbG9yKTtcclxuICAgICAgICBpZiAocHRyLmlzRG93bilcclxuICAgICAgICAgICAgdGl0bGVCdG5JbWcuc2V0UG9zaXRpb24odGl0bGVCdG5JbWcueCwgdGl0bGVCdG5JbWcueSAtIDQpO1xyXG4gICAgfTtcclxuICAgIHRpdGxlQnRuLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgdGl0bGVGdW5jRG93bigpOyB9KTtcclxuICAgIHRpdGxlQnRuSW1nLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgdGl0bGVGdW5jRG93bigpOyB9KTtcclxuICAgIHRpdGxlQnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHRpdGxlRnVuY1VwKCk7IH0pO1xyXG4gICAgdGl0bGVCdG5JbWcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgdGl0bGVGdW5jVXAoKTsgfSk7XHJcbiAgICB0aXRsZUJ0bi5vbigncG9pbnRlcm91dCcsIChwdHIpID0+IHsgdGl0bGVGdW5jT3V0KHB0cik7IH0pO1xyXG4gICAgdGl0bGVCdG5JbWcub24oJ3BvaW50ZXJvdXQnLCAocHRyKSA9PiB7IHRpdGxlRnVuY091dChwdHIpOyB9KTtcclxuICAgIGNvbnN0IHJldHJ5QnRuID0gc2NlbmUuYWRkLmltYWdlKEJ0bkdhcFcsIHRpdGxlQnRuLnksICdvdmVyQnRuVXAnICsgY29sb3IpLnNldEludGVyYWN0aXZlKCkuc2V0U2NhbGUoMik7XHJcbiAgICBjb25zdCByZXRyeUJ0bkltZyA9IHNjZW5lLmFkZC5pbWFnZShyZXRyeUJ0bi54LCByZXRyeUJ0bi55IC0gNCwgJ292ZXJSZXRyeScpLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBjb25zdCByZXRyeUZ1bmNEb3duID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHJ5QnRuLnNldFRleHR1cmUoJ292ZXJCdG5Eb3duJyArIGNvbG9yKTtcclxuICAgICAgICByZXRyeUJ0bkltZy5zZXRQb3NpdGlvbihyZXRyeUJ0bkltZy54LCByZXRyeUJ0bkltZy55ICsgNCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmV0cnlGdW5jVXAgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0cnlCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0blVwJyArIGNvbG9yKTtcclxuICAgICAgICByZXRyeUJ0bkltZy5zZXRQb3NpdGlvbihyZXRyeUJ0bkltZy54LCByZXRyeUJ0bkltZy55IC0gNCk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgUmVzdGFydEdhbWUoc2NlbmUpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJldHJ5RnVuY091dCA9IChwdHIpID0+IHtcclxuICAgICAgICByZXRyeUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuVXAnICsgY29sb3IpO1xyXG4gICAgICAgIGlmIChwdHIuaXNEb3duKVxyXG4gICAgICAgICAgICByZXRyeUJ0bkltZy5zZXRQb3NpdGlvbihyZXRyeUJ0bkltZy54LCByZXRyeUJ0bkltZy55IC0gNCk7XHJcbiAgICB9O1xyXG4gICAgcmV0cnlCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4geyByZXRyeUZ1bmNEb3duKCk7IH0pO1xyXG4gICAgcmV0cnlCdG5JbWcub24oJ3BvaW50ZXJkb3duJywgKCkgPT4geyByZXRyeUZ1bmNEb3duKCk7IH0pO1xyXG4gICAgcmV0cnlCdG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgcmV0cnlGdW5jVXAoKTsgfSk7XHJcbiAgICByZXRyeUJ0bkltZy5vbigncG9pbnRlcnVwJywgKCkgPT4geyByZXRyeUZ1bmNVcCgpOyB9KTtcclxuICAgIHJldHJ5QnRuLm9uKCdwb2ludGVyb3V0JywgKHB0cikgPT4geyByZXRyeUZ1bmNPdXQocHRyKTsgfSk7XHJcbiAgICByZXRyeUJ0bkltZy5vbigncG9pbnRlcm91dCcsIChwdHIpID0+IHsgcmV0cnlGdW5jT3V0KHB0cik7IH0pO1xyXG4gICAgR2FtZU92ZXIubGF5ZXIuYWRkKFtcclxuICAgICAgICBiZyxcclxuICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgIHRpdGxlQmcsIHRpdGxlLFxyXG4gICAgICAgIGJvbnVzVGltZSwgYm9udXNUaW1lVHh0LFxyXG4gICAgICAgIHNjb3JlLCBzY29yZVR4dCxcclxuICAgICAgICB0aXRsZUJ0biwgdGl0bGVCdG5JbWcsXHJcbiAgICAgICAgcmV0cnlCdG4sIHJldHJ5QnRuSW1nLFxyXG4gICAgXSk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSAtIFZpZXcuaCAvIDQsICdidG4nICsgY29sb3IpO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0U2NhbGUoR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZVcsIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVIKTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dCA9IHNjZW5lLmFkZC50ZXh0KEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLngsIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnkgLSA2LCAnICAgICAgTmV3XFxuQmVzdCBTY29yZSEnKTtcclxuICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dCk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0Rm9udEZhbWlseSgnQXJpYWwgQmxhY2snKTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zaG93ID0gKCkgPT4ge1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFNjYWxlKDAuMSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCAwLjEgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFNjYWxlKDAuMSk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAvLyBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAuMSwgdG86IDEsIGR1cmF0aW9uOiA4MDAsIGVhc2U6ICdCYWNrLmVhc2VJbk91dCcsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0d0RhdGEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy5zZXRTY2FsZSh2YWx1ZSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCB2YWx1ZSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVIKTtcclxuICAgICAgICAgICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zZXRTY2FsZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIEVmeC5hbmltTmV3QmVzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LmhpZGUgPSAoKSA9PiB7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0U2NhbGUoMC4xICogR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZVcsIDAuMSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVIKTtcclxuICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFNjYWxlKDEpO1xyXG4gICAgfTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5oaWRlKCk7XHJcbiAgICBTZXREZXB0aChHYW1lT3Zlci5vdmVyVHh0LCAndHh0Jyk7XHJcbiAgICBTZXREZXB0aChHYW1lT3Zlci5sYXllciwgJ2dhbWVPdmVyJyk7XHJcbiAgICBTZXREZXB0aChHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZywgJ25ld0Jlc3QnKTtcclxuICAgIFNldERlcHRoKEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dCwgJ25ld0Jlc3QnKTtcclxuICAgIEluaXRHYW1lT3ZlcigpO1xyXG4gICAgcmV0dXJuIEdhbWVPdmVyO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lT3ZlcjtcclxuZXhwb3J0IHsgSW5pdEdhbWVPdmVyLCBDcmVhdGVHYW1lT3ZlciB9O1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgUm5kQ2lyY2xlSW1nVGV4dHVyZSA9IFsnYmx1ZUJhbGwnLCAnZ3JlZW5CYWxsJywgJ2Jyb3duQmFsbCddO1xyXG5jb25zdCBHZXRDaXJjbGVTaGFwZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IFJhZGl1c1ZhbHVlID0gNjA7XHJcbiAgICBjb25zdCBSYWRpdXMgPSBWaWV3LmNhbGNSYXRpbyhSYWRpdXNWYWx1ZSk7XHJcbiAgICBsZXQgYkRhdGEgPSB7fTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGl0QXJlYTogbmV3IFBoYXNlci5HZW9tLkNpcmNsZShSYWRpdXMgLyAyLCBSYWRpdXMgLyAyLCBSYWRpdXMpLFxyXG4gICAgICAgIGJEYXRhOiBiRGF0YSxcclxuICAgICAgICBjYWxsYmFjazogUGhhc2VyLkdlb20uQ2lyY2xlLkNvbnRhaW5zLFxyXG4gICAgICAgIHNjb3JlOiAoUmFkaXVzVmFsdWUgKiogMikgKiAzIC8gMTAwLFxyXG4gICAgICAgIGJvZHlDb25maWc6IHtcclxuICAgICAgICAgICAgdHlwZTogJ2NpcmNsZScsXHJcbiAgICAgICAgICAgIHJhZGl1czogUmFkaXVzLFxyXG4gICAgICAgICAgICBvZmZzZXQ6IHsgeDogUmFkaXVzIC8gMiwgeTogUmFkaXVzIC8gMiB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWdUZXh0dXJlOiBSbmRDaXJjbGVJbWdUZXh0dXJlW0dldFJuZEludCgwLCBSbmRDaXJjbGVJbWdUZXh0dXJlLmxlbmd0aCldLFxyXG4gICAgICAgIHNldEltZ0Rpc3BsYXlTaXplOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICAgICAgYmxvY2suZ2V0U2hhcGVJbWcoKS5zZXREaXNwbGF5U2l6ZShSYWRpdXMgKiAyLCBSYWRpdXMgKiAyKTtcclxuICAgICAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldENpcmNsZShSYWRpdXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYmxvY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2V0Q2lyY2xlU2hhcGU7XHJcbmV4cG9ydCB7IFJuZENpcmNsZUltZ1RleHR1cmUgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IFJuZFJlY3RJbWdUZXh0dXJlID0gWydibHVlUmVjdCcsICdncmVlblJlY3QnLCAnYnJvd25SZWN0J107XHJcbmNvbnN0IEdldFJlY3RhbmdsZVNoYXBlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgU2hvcnRTaWRlVmFsdWUgPSAxMDA7XHJcbiAgICBjb25zdCBMb25nU2lkZVZhbHVlID0gU2hvcnRTaWRlVmFsdWUgKyBTaG9ydFNpZGVWYWx1ZSAvIDI7XHJcbiAgICBjb25zdCBTaG9ydFNpZGUgPSBWaWV3LmNhbGNSYXRpbyhTaG9ydFNpZGVWYWx1ZSk7XHJcbiAgICBjb25zdCBMb25nU2lkZSA9IFZpZXcuY2FsY1JhdGlvKExvbmdTaWRlVmFsdWUpO1xyXG4gICAgbGV0IGJEYXRhID0ge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhpdEFyZWE6IG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoU2hvcnRTaWRlIC8gMiwgTG9uZ1NpZGUgLyAyLCBTaG9ydFNpZGUsIExvbmdTaWRlKSxcclxuICAgICAgICBiRGF0YTogYkRhdGEsXHJcbiAgICAgICAgY2FsbGJhY2s6IFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyxcclxuICAgICAgICBzY29yZTogU2hvcnRTaWRlVmFsdWUgKiBMb25nU2lkZVZhbHVlIC8gMTAwLFxyXG4gICAgICAgIGJvZHlDb25maWc6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3JlY3RhbmdsZScsXHJcbiAgICAgICAgICAgIHdpZHRoOiBTaG9ydFNpZGUsXHJcbiAgICAgICAgICAgIGhlaWdodDogTG9uZ1NpZGUsXHJcbiAgICAgICAgICAgIG9mZnNldDogeyB4OiBTaG9ydFNpZGUgLyAyLCB5OiBMb25nU2lkZSAvIDIgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1nVGV4dHVyZTogUm5kUmVjdEltZ1RleHR1cmVbR2V0Um5kSW50KDAsIFJuZFJlY3RJbWdUZXh0dXJlLmxlbmd0aCldLFxyXG4gICAgICAgIHNldEltZ0Rpc3BsYXlTaXplOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICAgICAgYmxvY2suZ2V0U2hhcGVJbWcoKS5zZXREaXNwbGF5U2l6ZShTaG9ydFNpZGUsIExvbmdTaWRlKTtcclxuICAgICAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFNpemUoU2hvcnRTaWRlLCBMb25nU2lkZSk7XHJcbiAgICAgICAgICAgIC8vIGJsb2NrLmlucHV0ICYmIGJsb2NrLmlucHV0LmhpdEFyZWEuc2V0VG8oU2hvcnRTaWRlLCBMb25nU2lkZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBibG9jaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHZXRSZWN0YW5nbGVTaGFwZTtcclxuZXhwb3J0IHsgUm5kUmVjdEltZ1RleHR1cmUgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IFJuZFNxdWFyZUltZ1RleHR1cmUgPSBbJ2JsdWVTcXVhcmUnLCAnZ3JlZW5TcXVhcmUnLCAnYnJvd25TcXVhcmUnXTtcclxuY29uc3QgR2V0U3F1YXJlU2hhcGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBTaWRlVmFsdWUgPSAxMDA7XHJcbiAgICBjb25zdCBTaWRlID0gVmlldy5jYWxjUmF0aW8oU2lkZVZhbHVlKTtcclxuICAgIGxldCBiRGF0YSA9IHt9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoaXRBcmVhOiBuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKFNpZGUgLyAyLCBTaWRlIC8gMiwgU2lkZSwgU2lkZSksXHJcbiAgICAgICAgYkRhdGE6IGJEYXRhLFxyXG4gICAgICAgIGNhbGxiYWNrOiBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMsXHJcbiAgICAgICAgc2NvcmU6IFNpZGVWYWx1ZSAqIFNpZGVWYWx1ZSAvIDEwMCxcclxuICAgICAgICBib2R5Q29uZmlnOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdyZWN0YW5nbGUnLFxyXG4gICAgICAgICAgICB3aWR0aDogU2lkZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBTaWRlLFxyXG4gICAgICAgICAgICBvZmZzZXQ6IHsgeDogU2lkZSAvIDIsIHk6IFNpZGUgLyAyIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ1RleHR1cmU6IFJuZFNxdWFyZUltZ1RleHR1cmVbR2V0Um5kSW50KDAsIFJuZFNxdWFyZUltZ1RleHR1cmUubGVuZ3RoKV0sXHJcbiAgICAgICAgc2V0SW1nRGlzcGxheVNpemU6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgICAgICBibG9jay5nZXRTaGFwZUltZygpLnNldERpc3BsYXlTaXplKFNpZGUsIFNpZGUpO1xyXG4gICAgICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U2l6ZShTaWRlLCBTaWRlKTtcclxuICAgICAgICAgICAgLy8gYmxvY2suaW5wdXQgJiYgYmxvY2suaW5wdXQuaGl0QXJlYS5zZXRUbyhTaWRlLCBTaWRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdldFNxdWFyZVNoYXBlO1xyXG5leHBvcnQgeyBSbmRTcXVhcmVJbWdUZXh0dXJlIH07XHJcbiIsImltcG9ydCB7IEdldFJuZEVsZUZyb21BcnJheSB9IGZyb20gJ0BzcmMvdXRpbHMvZXRjJztcclxuaW1wb3J0IEdldENpcmNsZVNoYXBlIGZyb20gJy4vY2lyY2xlJztcclxuaW1wb3J0IEdldFJlY3RhbmdsZVNoYXBlIGZyb20gJy4vcmVjdGFuZ2xlJztcclxuaW1wb3J0IEdldFNxdWFyZVNoYXBlIGZyb20gJy4vc3F1YXJlJztcclxuY29uc3QgU2hhcGVUeXBlTmFtZUxpc3QgPSBbJ2JhbGwnLCAncmVjdCcsICdzcXVhcmUnLF07XHJcbmNvbnN0IFNoYXBlVHlwZVByb3BlcnRpZXNMaXN0ID0gW1xyXG4gICAgR2V0Q2lyY2xlU2hhcGUoKSwgR2V0UmVjdGFuZ2xlU2hhcGUoKSwgR2V0U3F1YXJlU2hhcGUoKSxcclxuXTtcclxuY29uc3QgQ29tbW9uUHRyRXZ0ID0ge1xyXG4gICAgcHRyRG93bjogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvbW1vbiBwdHIgZG93bicpO1xyXG4gICAgfSxcclxuICAgIHB0clVwOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29tbW9uIHB0ciB1cCcpO1xyXG4gICAgfSxcclxuICAgIHB0ck91dDogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvbW1vbiBwdHIgb3V0Jyk7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBQdHJFdnRMaXN0ID0gWydwdHJEb3duJywgJ3B0clVwJywgJ2RyYWcnLCAnZHJhZ0VuZCddO1xyXG5jb25zdCBTaGFwZVR5cGVMaXN0ID0gU2hhcGVUeXBlTmFtZUxpc3QubWFwKChlbGUsIGlkeCkgPT4ge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gc2V0dGluZyBibG9jayBkYXRhIHdpdGggY29tbW9uIGV2dFxyXG4gICAgbGV0IGJEYXRhID0gKF9hID0gU2hhcGVUeXBlUHJvcGVydGllc0xpc3RbaWR4XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJEYXRhO1xyXG4gICAgaWYgKCFiRGF0YSlcclxuICAgICAgICBiRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIENvbW1vblB0ckV2dCk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBQdHJFdnRMaXN0Lm1hcCgocHRyRXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0bXBQcmV2RnVuYyA9IGJEYXRhW3B0ckV2dF07XHJcbiAgICAgICAgICAgIGlmICh0bXBQcmV2RnVuYykge1xyXG4gICAgICAgICAgICAgICAgU2hhcGVUeXBlUHJvcGVydGllc0xpc3RbaWR4XS5iRGF0YVtwdHJFdnRdID0gKGJsb2NrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29tbW9uUHRyRXZ0W3B0ckV2dF0oYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcFByZXZGdW5jKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgdHlwZU5hbWU6IGVsZSB9LCBTaGFwZVR5cGVQcm9wZXJ0aWVzTGlzdFtpZHhdKTtcclxufSk7XHJcbmNvbnN0IFNoYXBlU3lzdGVtID0ge1xyXG4gICAgZ2V0Q2VydGFpblNoYXBlOiBmdW5jdGlvbiAoc2hhcGVUeXBlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBTaGFwZVR5cGVMaXN0LmZpbmQoKGVsZSkgPT4gZWxlLnR5cGVOYW1lID09PSBzaGFwZVR5cGVOYW1lKTtcclxuICAgIH0sXHJcbiAgICBnZXRSbmRTaGFwZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gR2V0Um5kRWxlRnJvbUFycmF5KFNoYXBlVHlwZUxpc3QpOyB9LFxyXG59O1xyXG5jb25zdCBTZXRCbG9ja1NoYXBlID0gKGJsb2NrLCB0eXBlTmFtZSkgPT4ge1xyXG4gICAgaWYgKCF0eXBlTmFtZSlcclxuICAgICAgICBibG9jay5zZXRTaGFwZShTaGFwZVN5c3RlbS5nZXRSbmRTaGFwZSgpKTtcclxuICAgIGVsc2VcclxuICAgICAgICBibG9jay5zZXRTaGFwZShTaGFwZVN5c3RlbS5nZXRDZXJ0YWluU2hhcGUodHlwZU5hbWUpKTtcclxuICAgIGJsb2NrLnNldFNoYXBlTmFtZShibG9jay5nZXRTaGFwZSgpLnR5cGVOYW1lKTtcclxuICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRCb2R5KGJsb2NrLmdldFNoYXBlKCkuYm9keUNvbmZpZyk7XHJcbiAgICBibG9jay5nZXRTaGFwZUltZygpLnNldFRleHR1cmUoYmxvY2suZ2V0U2hhcGUoKS5pbWdUZXh0dXJlKTtcclxuICAgIGJsb2NrLmdldFNoYXBlKCkuc2V0SW1nRGlzcGxheVNpemUoYmxvY2spO1xyXG4gICAgaWYgKGJsb2NrLmdldFNoYXBlKCkuYkRhdGEpXHJcbiAgICAgICAgYmxvY2suYWRkQmxvY2tEYXRhKGJsb2NrLmdldFNoYXBlKCkuYkRhdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTaGFwZVN5c3RlbTtcclxuZXhwb3J0IHsgQ29tbW9uUHRyRXZ0LCBTZXRCbG9ja1NoYXBlIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgR2V0Um5kSW50LCBHZXRSbmROdW0gfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgQmFzaWNCbG9jaywgeyBEZWF0aEJsb2NrLCBTcGF3bkJsb2NrLCBVcGRhdGVCbG9jayB9IGZyb20gJy4vYmFzaWMnO1xyXG5pbXBvcnQgeyBCbG9ja1VuaXF1ZVByb3BlcnRpZXMsIFNldDJUeXBlQmxvY2sgfSBmcm9tICcuL3R5cGUnO1xyXG5pbXBvcnQgR2FtZU92ZXIgZnJvbSAnLi4vdWkvZ2FtZW92ZXInO1xyXG5pbXBvcnQgU2NvcmUgZnJvbSAnLi4vdWkvc2NvcmUnO1xyXG5pbXBvcnQgR2FtZVRpbWUgZnJvbSAnLi4vdWkvdGltZSc7XHJcbmltcG9ydCBFZnggZnJvbSAnLi4vZWZ4JztcclxuaW1wb3J0IHsgU2V0QmxvY2tTaGFwZSB9IGZyb20gJy4vc2hhcGUnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuY29uc3QgQmxvY2tTeXN0ZW0gPSB7XHJcbiAgICAvLyBtYW5hZ2UgYmxvY2sgbGlzdFxyXG4gICAgb25TY3JlZW5MaXN0OiBbXSxcclxuICAgIHN0YW5kYnlMaXN0OiBbXSxcclxuICAgIC8vIHN0YXRpYyBwb3N0aW9uIG9mIGJsb2NrXHJcbiAgICBzdGFuZGJ5UG9zWDogLTUwMCxcclxuICAgIHN0YW5kYnlQb3NZOiAtNTAwLFxyXG4gICAgbGVmdFg6IDAsXHJcbiAgICByaWdodFg6IFZpZXcudyxcclxuICAgIGJvdHRvbVk6IDAsXHJcbiAgICBzcGF3blk6IC0yMDAsXHJcbiAgICBnZXRSbmRTcGF3blg6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEdldFJuZEludCh0aGlzLmxlZnRYLCB0aGlzLnJpZ2h0WCk7IH0sXHJcbiAgICBnZXRSbmRBbmdsZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gR2V0Um5kSW50KDAsIDM2MCk7IH0sXHJcbiAgICAvLyBnYW1lIG92ZXIgcmVsYXRlZCBwcm9wZXJ0aWVzXHJcbiAgICBvdmVyTGluZVk6IDAsXHJcbiAgICBvdmVyQ250OiAwLFxyXG4gICAgb3ZlckNudE1heDogOCAqIDEwMDAsXHJcbiAgICBvdmVyTWF4QmxvY2s6IDgsXHJcbiAgICBpc0dhbWVPdmVyOiBmYWxzZSxcclxuICAgIGdldElzR2FtZU92ZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNHYW1lT3ZlcjsgfSxcclxuICAgIHNldElzR2FtZU92ZXI6IGZ1bmN0aW9uIChpc092ZXIpIHsgcmV0dXJuIHRoaXMuaXNHYW1lT3ZlciA9IGlzT3ZlcjsgfSxcclxuICAgIC8vIHJlc3BvbnNpdmUgc3Bhd25pbmcgYmxvY2sgdGltZVxyXG4gICAgbmV4dFNwYXduVGltZTogMCxcclxuICAgIHNwYXduRGVsYXlCeVNlY0xpc3Q6IFs4MDAsIDk1MCwgMTEwMCwgMTI1MCwgMTQwMCwgMTU1MF0sXHJcbiAgICBzcGF3bkRlbGF5QnlTZWM6IDE4MDAsXHJcbn07XHJcbmNvbnN0IEluaXRCbG9ja1N5c3RlbSA9ICgpID0+IHtcclxuICAgIFJlbW92ZUFsbEJsb2NrT25EaXNwbGF5KCk7XHJcbiAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKGZhbHNlKTtcclxuICAgIEJsb2NrU3lzdGVtLm5leHRTcGF3blRpbWUgPSBHYW1lVGltZS5pbml0O1xyXG4gICAgQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjID0gQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjTGlzdFs1XTtcclxufTtcclxuY29uc3QgQWRkQ2VydGFpbkJsb2NrID0gKHNjZW5lLCB0eXBlTmFtZSkgPT4ge1xyXG4gICAgbGV0IGJsb2NrO1xyXG4gICAgLy8gZ2V0IGJsb2NrIGZyb20gc3RhbmR5IGxpc3Qgb3IgY3JlYXRlIG5ldyBvbmVcclxuICAgIGlmIChCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYmxvY2sgPSBCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdC5zaGlmdCgpO1xyXG4gICAgICAgIGlmICghYmxvY2suc2NlbmUpIHsgLy8gaXMgYmxvY2sgc2NlbmUgcmVtb3ZlZD9cclxuICAgICAgICAgICAgYmxvY2suZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBibG9jayA9IG5ldyBCYXNpY0Jsb2NrKHNjZW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgYmxvY2sgPSBuZXcgQmFzaWNCbG9jayhzY2VuZSk7XHJcbiAgICAvLyBzZXQgYmxvY2sgc2hhcGUgJiB0eXBlLCBwdXNoIHRvIG9uIHNjcmVlbiBsaXN0ICYgc3Bhd25cclxuICAgIFNldEJsb2NrU2hhcGUoYmxvY2spO1xyXG4gICAgU2V0MlR5cGVCbG9jayhibG9jaywgdHlwZU5hbWUpO1xyXG4gICAgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0LnB1c2goYmxvY2spO1xyXG4gICAgU3Bhd25CbG9jayhibG9jayk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IEFkZE9ic3RhY2xlQmxvY2sgPSAoYmxvY2spID0+IHtcclxuICAgIGJsb2NrLnNjZW5lLmNhbWVyYXMubWFpbi5zaGFrZSgyMDAsIDAuMDIsIHRydWUpO1xyXG4gICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3NwYXduT2JzdGFjbGVTZngnKTtcclxuICAgIEFkZENlcnRhaW5CbG9jayhibG9jay5zY2VuZSwgJ29ic3RhY2xlJyk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IEdldFJuZEJsb2NrVHlwZSA9ICgpID0+IHtcclxuICAgIC8vIGdldCByYW5kb20gYmxvY2sgdHlwZSB2aWEgc3Bhd24gY2hhbmNlXHJcbiAgICBsZXQgZGlzdHJpYnV0aW9uQXJyID0gW107XHJcbiAgICBCbG9ja1VuaXF1ZVByb3BlcnRpZXMubWFwKChlbGUpID0+IHtcclxuICAgICAgICAvLyBlbGUuc3Bhd25DaGFuY2UgPSBlbGUuc3Bhd25DaGFuY2UgLyBTcGF3bk1heENoYW5jZTtcclxuICAgICAgICBpZiAoZWxlLnNwYXduQ2hhbmNlID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGUuc3Bhd25DaGFuY2U7IGkrKykge1xyXG4gICAgICAgICAgICBkaXN0cmlidXRpb25BcnIucHVzaChlbGUudHlwZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRpc3RyaWJ1dGlvbkFycltHZXRSbmRJbnQoMCwgZGlzdHJpYnV0aW9uQXJyLmxlbmd0aCldO1xyXG59O1xyXG5jb25zdCBBZGRSbmRCbG9jayA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3Qgcm5kVHlwZSA9IEdldFJuZEJsb2NrVHlwZSgpO1xyXG4gICAgQWRkQ2VydGFpbkJsb2NrKHNjZW5lLCBybmRUeXBlKTtcclxufTtcclxuY29uc3QgQ2xlYXJCbG9jayA9IChibG9jaywgc2NvcmUpID0+IHtcclxuICAgIGlmICghYmxvY2spXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgbGV0IGJsb2NrU2NvcmUgPSBzY29yZSA/IHNjb3JlIDogYmxvY2suZ2V0U2NvcmUoKTtcclxuICAgIFNjb3JlLmFkZChibG9ja1Njb3JlKTtcclxuICAgIEVmeC5hbmltU2NvcmUoYmxvY2ssIGJsb2NrU2NvcmUpO1xyXG4gICAgY29uc3QgeyB2YWx1ZSwgY2hhbmNlIH0gPSBibG9jay5nZXRUaW1lSW5jcmVhc2UoKTtcclxuICAgIGlmIChHYW1lVGltZS5jdXJyID4gR2FtZVRpbWUubGFzdDEwICYmIGNoYW5jZSA+IEdldFJuZE51bSgwLCAxMDApKSB7XHJcbiAgICAgICAgR2FtZVRpbWUuaW5jcmVhc2VUaW1lKHZhbHVlKTtcclxuICAgICAgICBFZnguYW5pbVRpbWVJbmNyZWFzZShibG9jaywgY2hhbmNlLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBSZW1vdmVCbG9jayhibG9jayk7XHJcbn07XHJcbmNvbnN0IFJlbW92ZUJsb2NrID0gKGJsb2NrKSA9PiB7XHJcbiAgICAvLyByZW1vdmUgZnJvbSBvblNjcmVlbkxpc3RcclxuICAgIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdCA9IEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5maWx0ZXIoc2NyZWVuQmxvY2sgPT4gc2NyZWVuQmxvY2suaWQgIT09IGJsb2NrLmlkKTtcclxuICAgIGlmICghYmxvY2suc2NlbmUpIHtcclxuICAgICAgICBibG9jay5kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY2hjayBpcyBhbHJlYWR5IGluIHN0YW5kYnkgbGlzdFxyXG4gICAgaWYgKEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0LnNvbWUoc3RhbmRieUJsb2NrID0+IHN0YW5kYnlCbG9jay5pZCA9PT0gYmxvY2suaWQpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIERlYXRoQmxvY2soYmxvY2spO1xyXG4gICAgYmxvY2suc2V0UG9zaXRpb24oQmxvY2tTeXN0ZW0uc3RhbmRieVBvc1gsIEJsb2NrU3lzdGVtLnN0YW5kYnlQb3NZKTtcclxuICAgIEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0LnB1c2goYmxvY2spO1xyXG59O1xyXG5jb25zdCBSZW1vdmVBbGxCbG9ja09uRGlzcGxheSA9ICgpID0+IHtcclxuICAgIGlmICghQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0KVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5tYXAoKGJsb2NrKSA9PiB7IFJlbW92ZUJsb2NrKGJsb2NrKTsgfSk7XHJcbiAgICBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QgPSBbXTtcclxuICAgIGlmICghQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3QpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3QgPSBCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdC5maWx0ZXIoKHN0YW5kYnlCbG9jaykgPT4ge1xyXG4gICAgICAgIGlmICghc3RhbmRieUJsb2NrLnNjZW5lKSB7XHJcbiAgICAgICAgICAgIHN0YW5kYnlCbG9jay5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHN0YW5kYnlCbG9jaztcclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCBVcGRhdGVCbG9ja0NoY2tJc0dhbWVPdmVyID0gKHNjZW5lLCB0aW1lLCBkZWx0YSkgPT4ge1xyXG4gICAgLy8gY2hjayBldmVyeSBibG9jayB3aGljaCBpcyBnYW1lIG92ZXIgYm9yZGVyIGxpbmVcclxuICAgIGNvbnN0IGlzT3ZlckJvcmRlckxpbmUgPSBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3Quc29tZSgoc2NyZWVuQmxvY2spID0+IHtcclxuICAgICAgICBpZiAoIXNjcmVlbkJsb2NrKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNjcmVlbkJsb2NrLnkgPCBCbG9ja1N5c3RlbS5vdmVyTGluZVk7XHJcbiAgICB9KTtcclxuICAgIC8vIGJsb2NrIGNvdW50IGlzIG92ZXIgbWF4ICYgYXQgbGVhc3Qgb25lIGJsb2NrIGNyb3NzIGdhbWUgb3ZlciBib3JkZXIgbGluZVxyXG4gICAgaWYgKGlzT3ZlckJvcmRlckxpbmUgJiYgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0Lmxlbmd0aCA+IEJsb2NrU3lzdGVtLm92ZXJNYXhCbG9jaykge1xyXG4gICAgICAgIEJsb2NrU3lzdGVtLm92ZXJDbnQgKz0gZGVsdGEgKiBHYW1lVGltZS50aW1lU2NhbGU7XHJcbiAgICAgICAgLy8gZ2FtZSBvdmVyIGNvbmRpdGlvblxyXG4gICAgICAgIGlmIChCbG9ja1N5c3RlbS5vdmVyQ250ID4gQmxvY2tTeXN0ZW0ub3ZlckNudE1heCkge1xyXG4gICAgICAgICAgICBCbG9ja1N5c3RlbS5vdmVyQ250ID0gMDtcclxuICAgICAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3Zlcih0cnVlKTtcclxuICAgICAgICAgICAgR2FtZU92ZXIuYW5pbUdhbWVPdmVyKHNjZW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIGluaXQgZ2FtZSBvdmVyIHdhcm5pbmcgcHJvcGVydGllc1xyXG4gICAgICAgIEJsb2NrU3lzdGVtLm92ZXJDbnQgPSAwO1xyXG4gICAgICAgIEJsb2NrU3lzdGVtLnNldElzR2FtZU92ZXIoZmFsc2UpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBVcGRhdGVTcGF3bkJsb2NrcyA9IChzY2VuZSwgZGVsdGEpID0+IHtcclxuICAgIC8vIGdldCBnYW1lIHRpbWUgJiB0aW1lbGluZSBpZHggY2FsY3VsYXRlXHJcbiAgICBjb25zdCBnYW1lVGltZUN1cnIgPSBHYW1lVGltZS5nZXRDdXJyKCk7XHJcbiAgICBsZXQgdGltZWxpbmVJZHggPSBwYXJzZUludCgoZ2FtZVRpbWVDdXJyIC8gMTAwMCAvIDEwKS50b1N0cmluZygpKTtcclxuICAgIGlmICh0aW1lbGluZUlkeCA8IDApXHJcbiAgICAgICAgdGltZWxpbmVJZHggPSAwO1xyXG4gICAgaWYgKHRpbWVsaW5lSWR4ID49IEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlY0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGltZWxpbmVJZHggPSBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWNMaXN0Lmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgICAvLyBhZGp1c3QgcmVzcG9uc2l2ZSBzcGF3biBibG9jayB0aW1lXHJcbiAgICBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWMgPSBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWNMaXN0W3RpbWVsaW5lSWR4XTtcclxuICAgIC8vIHNwYXduIGJsb2NrXHJcbiAgICBCbG9ja1N5c3RlbS5uZXh0U3Bhd25UaW1lICs9IGRlbHRhICogR2FtZVRpbWUudGltZVNjYWxlO1xyXG4gICAgaWYgKEJsb2NrU3lzdGVtLm5leHRTcGF3blRpbWUgPiBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWMpIHtcclxuICAgICAgICBCbG9ja1N5c3RlbS5uZXh0U3Bhd25UaW1lID0gMDtcclxuICAgICAgICBBZGRSbmRCbG9jayhzY2VuZSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbn07XHJcbmNvbnN0IFVwZGF0ZUFsbEJsb2NrcyA9IChzY2VuZSwgdGltZSwgZGVsdGEpID0+IHtcclxuICAgIGlmIChCbG9ja1N5c3RlbS5nZXRJc0dhbWVPdmVyKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgVXBkYXRlQmxvY2tDaGNrSXNHYW1lT3ZlcihzY2VuZSwgdGltZSwgZGVsdGEpO1xyXG4gICAgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0Lm1hcChibG9jayA9PiBVcGRhdGVCbG9jayhibG9jaywgdGltZSwgZGVsdGEpKTtcclxuICAgIFVwZGF0ZVNwYXduQmxvY2tzKHNjZW5lLCBkZWx0YSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEJsb2NrU3lzdGVtO1xyXG5leHBvcnQgeyBCYXNpY0Jsb2NrLCBBZGRDZXJ0YWluQmxvY2ssIEFkZE9ic3RhY2xlQmxvY2ssIEdldFJuZEJsb2NrVHlwZSwgQWRkUm5kQmxvY2ssIEluaXRCbG9ja1N5c3RlbSwgQ2xlYXJCbG9jaywgUmVtb3ZlQmxvY2ssIFJlbW92ZUFsbEJsb2NrT25EaXNwbGF5LCBVcGRhdGVCbG9ja0NoY2tJc0dhbWVPdmVyLCBVcGRhdGVBbGxCbG9ja3MsIFVwZGF0ZVNwYXduQmxvY2tzIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCBCbG9ja1N5c3RlbSBmcm9tICcuLi9ibG9jay9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuaW1wb3J0IHsgVHh0QWxwaGEsIFR4dEJhY2tncm91bmRDb2xvciwgVHh0RmFtaWx5LCBUeHRNYXJnaW4sIFR4dFBhZGRpbmcsIFR4dFNpemUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IEdhbWVPdmVyIGZyb20gJy4vZ2FtZW92ZXInO1xyXG5pbXBvcnQgeyBIaWRlU2V0dGluZ0J0biB9IGZyb20gJy4vc2V0dGluZyc7XHJcbmNvbnN0IEdhbWVUaW1lID0ge1xyXG4gICAgdHh0OiBudWxsLFxyXG4gICAgbGFzdDEwVHh0OiBudWxsLFxyXG4gICAgbGFzdDEwUHJldlRpbWU6IDExLFxyXG4gICAgaXNMYXN0MTBIYXNPbmNlQ250OiB0cnVlLFxyXG4gICAgaXNHYW1lVGltZUVuZE9uY2VDbnQ6IHRydWUsXHJcbiAgICBpc0ZpcnN0TGFzdDEwSGFzT25jZUNudDogdHJ1ZSxcclxuICAgIHN0YW5kYnlUaW1lOiAzICogMTAwMCxcclxuICAgIGluaXQ6IDYwICogMTAwMCxcclxuICAgIGN1cnI6IDYwICogMTAwMCxcclxuICAgIGxhc3QxMDogMTAgKiAxMDAwLFxyXG4gICAgaW5jcmVhc2VkVGltZTogMCxcclxuICAgIC8vIGFuaW0gb3B0aW9uXHJcbiAgICBhbmltSW5jcmVhc2VUaW1lRHVyYXRpb246IDQwMCxcclxuICAgIGFuaW1UdzogbnVsbCxcclxuICAgIGFuaW1Ud1NjYWxlTWluOiAxLFxyXG4gICAgYW5pbVR3U2NhbGVNYXg6IDEuNCxcclxuICAgIGlzVHdpbmc6IGZhbHNlLFxyXG4gICAgLy8gdGltZSBzY2FsZSBvcHRpb25cclxuICAgIHRpbWVTY2FsZTogMSxcclxuICAgIHNob3dTZXR0aW5nVGltZVNjYWxlOiAwLjEsXHJcbiAgICBoaWRlU2V0dGluZ1RpbWVTY2FsZTogMSxcclxuICAgIHNuZExhc3QxMFZvaWNlOiBmdW5jdGlvbiAoc2NlbmUsIHRpbWUpIHtcclxuICAgICAgICAvLyBzY2VuZS5zb3VuZC5wbGF5KCd2b2ljZScgKyB0aW1lKTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndm9pY2UnICsgdGltZSk7XHJcbiAgICAgICAgdGhpcy5sYXN0MTBUeHQuc2V0VGV4dCh0aW1lKTtcclxuICAgIH0sXHJcbiAgICBpbmNyZWFzZVRpbWU6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgLy8gbGFzdCAxMCBzZWNvbmRzIGxlZnQgc28gaW5jcmVhc2luZyB0aW1lIGlzIHVzZWxlc3NcclxuICAgICAgICBpZiAoIXRoaXMuaXNGaXJzdExhc3QxMEhhc09uY2VDbnQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmN1cnIgKz0gdGltZTtcclxuICAgICAgICB0aGlzLmluY3JlYXNlZFRpbWUgKz0gdGltZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXQyRm9ybWF0OiBmdW5jdGlvbiAobWlsbGlUaW1lKSB7XHJcbiAgICAgICAgLy8gc2VwYXJhdGUgbWludXRlLCBzZWNvbmQgZWFjaFxyXG4gICAgICAgIGNvbnN0IHRpbWVTZWMgPSBtaWxsaVRpbWUgLyAxMDAwO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZFNwbGl0ID0gdGltZVNlYy50b0ZpeGVkKDIpLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWVTZWMgLyA2MCk7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSBNYXRoLmZsb29yKE51bWJlcihzZWNvbmRTcGxpdFswXSkpO1xyXG4gICAgICAgIGxldCB1bmRlclBvaW50RGlnaXROdW0gPSBOdW1iZXIoc2Vjb25kU3BsaXRbMV0pO1xyXG4gICAgICAgIGlmIChtaW51dGVzIDwgMTApXHJcbiAgICAgICAgICAgIG1pbnV0ZXMgPSAnMCcgKyBtaW51dGVzO1xyXG4gICAgICAgIGlmIChzZWNvbmRzIDwgMTApXHJcbiAgICAgICAgICAgIHNlY29uZHMgPSAnMCcgKyBzZWNvbmRzO1xyXG4gICAgICAgIGlmICh1bmRlclBvaW50RGlnaXROdW0gPCAxMClcclxuICAgICAgICAgICAgdW5kZXJQb2ludERpZ2l0TnVtID0gJzAnICsgdW5kZXJQb2ludERpZ2l0TnVtO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBtaW51dGVzICsgJzonICsgc2Vjb25kcyArICcuJyArIHVuZGVyUG9pbnREaWdpdE51bTtcclxuICAgICAgICB0aGlzLnR4dC5zZXRUZXh0KHRpbWUpO1xyXG4gICAgfSxcclxuICAgIHNldFRpbWVTY2FsZTogZnVuY3Rpb24gKHNjZW5lLCB0aW1lU2NhbGUpIHtcclxuICAgICAgICBzY2VuZS5tYXR0ZXIud29ybGQuZW5naW5lLnRpbWluZy50aW1lU2NhbGUgPSB0aW1lU2NhbGU7XHJcbiAgICAgICAgdGhpcy50aW1lU2NhbGUgPSB0aW1lU2NhbGU7XHJcbiAgICB9LFxyXG4gICAgZ2V0Q3VycjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5jdXJyOyB9LFxyXG4gICAgdXBkYXRlTGFzdDEwQ250QW5pbTogZnVuY3Rpb24gKHNjZW5lKSB7XHJcbiAgICAgICAgLy8gc3RvcCBiZ20gJiBoaWRlIHNldHRpbmcgYnRuICYgdGltZSBpbmNyZWFzaW5nIGlzIG5vdCBwb3NzaWJsZVxyXG4gICAgICAgIGlmICh0aGlzLmlzRmlyc3RMYXN0MTBIYXNPbmNlQ250KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExhc3QxMEhhc09uY2VDbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgR2FtZUF1ZGlvLnBhdXNlQmdtKCdnYW1lQmdtJyk7XHJcbiAgICAgICAgICAgIEhpZGVTZXR0aW5nQnRuKHNjZW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXN0MTBUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gTWF0aC5jZWlsKHRoaXMuY3VyciAvIDEwMDApO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3QxMFByZXZUaW1lICE9PSB0aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNMYXN0MTBIYXNPbmNlQ250ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0MTBQcmV2VGltZSA9IHRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5pc0xhc3QxMEhhc09uY2VDbnQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0xhc3QxMEhhc09uY2VDbnQpXHJcbiAgICAgICAgICAgIHRoaXMuc25kTGFzdDEwVm9pY2Uoc2NlbmUsIHRpbWUpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHNjZW5lLCBkZWx0YSkge1xyXG4gICAgICAgIGlmIChCbG9ja1N5c3RlbS5nZXRJc0dhbWVPdmVyKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnIgLT0gZGVsdGEgKiB0aGlzLnRpbWVTY2FsZTtcclxuICAgICAgICAgICAgdGhpcy5zZXQyRm9ybWF0KHRoaXMuY3Vycik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVW5kZXIxMFNlYyA9IHRoaXMuY3VyciA+IDAgJiYgdGhpcy5jdXJyIDw9IDEwICogMTAwMDtcclxuICAgICAgICAgICAgaXNVbmRlcjEwU2VjICYmIHRoaXMudXBkYXRlTGFzdDEwQ250QW5pbShzY2VuZSwgZGVsdGEpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzR2FtZVRpbWVFbmRPbmNlQ250KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNHYW1lVGltZUVuZE9uY2VDbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3Zlcih0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyID0gMDtcclxuICAgICAgICAgICAgdGhpcy5zZXQyRm9ybWF0KDApO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3QxMFR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgR2FtZU92ZXIuYW5pbVRpbWVPdmVyKHNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpbml0VGltZUluY3JlYXNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZWRUaW1lID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmNyZWFzZWRUaW1lO1xyXG4gICAgfSxcclxuICAgIGdldFRpbWVJbmNyZWFzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pbmNyZWFzZWRUaW1lOyB9LFxyXG4gICAgYWRkVGltZUluY3JlYXNlOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHRoaXMuaW5jcmVhc2VkVGltZSArPSB0aW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluY3JlYXNlZFRpbWU7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBJbml0R2FtZVRpbWUgPSAoKSA9PiB7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBQcmV2VGltZSA9IDExO1xyXG4gICAgR2FtZVRpbWUuaXNMYXN0MTBIYXNPbmNlQ250ID0gdHJ1ZTtcclxuICAgIEdhbWVUaW1lLmlzR2FtZVRpbWVFbmRPbmNlQ250ID0gdHJ1ZTtcclxuICAgIEdhbWVUaW1lLmN1cnIgPSBHYW1lVGltZS5pbml0O1xyXG4gICAgR2FtZVRpbWUuaW5jcmVhc2VkVGltZSA9IDA7XHJcbiAgICBHYW1lVGltZS50aW1lU2NhbGUgPSAxO1xyXG4gICAgR2FtZVRpbWUuaW5pdFRpbWVJbmNyZWFzZSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lVGltZVR4dCA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgaW5pdFggPSBUeHRNYXJnaW4gLyAyICsgNDY7XHJcbiAgICBHYW1lVGltZS50eHQgPSBzY2VuZS5hZGQudGV4dChpbml0WCwgVHh0TWFyZ2luIC0gMTAsICcnKTtcclxuICAgIEdhbWVUaW1lLnR4dC5zZXRBbHBoYShUeHRBbHBoYSk7XHJcbiAgICBHYW1lVGltZS50eHQuc2V0T3JpZ2luKDAsIDApO1xyXG4gICAgR2FtZVRpbWUudHh0LnNldEZvbnRTaXplKFR4dFNpemUpO1xyXG4gICAgR2FtZVRpbWUudHh0LnNldEJhY2tncm91bmRDb2xvcihUeHRCYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgR2FtZVRpbWUubGFzdDEwVHh0ID0gc2NlbmUuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICcnKTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRBbHBoYSgwLjUpO1xyXG4gICAgR2FtZVRpbWUubGFzdDEwVHh0LnNldE9yaWdpbigwLjUsIDAuNSk7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0Rm9udFNpemUoVmlldy53IC8gMik7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBbR2FtZVRpbWUudHh0LCBHYW1lVGltZS5sYXN0MTBUeHRdLm1hcCgodHh0KSA9PiB7XHJcbiAgICAgICAgdHh0LnNldFBhZGRpbmcoeyBsZWZ0OiBUeHRQYWRkaW5nLCByaWdodDogVHh0UGFkZGluZywgdG9wOiBUeHRQYWRkaW5nIC8gMiwgYm90dG9tOiBUeHRQYWRkaW5nIC8gMiB9KTtcclxuICAgICAgICB0eHQuc2V0Rm9udEZhbWlseShUeHRGYW1pbHkpO1xyXG4gICAgICAgIFNldERlcHRoKHR4dCwgJ3R4dCcpO1xyXG4gICAgfSk7XHJcbiAgICBJbml0R2FtZVRpbWUoKTtcclxufTtcclxuY29uc3QgU2V0bWlsbGllU2VjMlNlY1RpbWVGb3JtYXQgPSAobWlsbGllU2VjKSA9PiB7XHJcbiAgICBjb25zdCBzZWMgPSAobWlsbGllU2VjIC8gMTAwMCkudG9GaXhlZCgyKSArICcgc2VjJztcclxuICAgIHJldHVybiBzZWM7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVUaW1lO1xyXG5leHBvcnQgeyBJbml0R2FtZVRpbWUsIENyZWF0ZUdhbWVUaW1lVHh0LCBTZXRtaWxsaWVTZWMyU2VjVGltZUZvcm1hdCB9O1xyXG4iLCJpbXBvcnQgeyBDb21tb25HYWdlLCBHZXRBc3NldEZpbGVzIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2Fzc2V0VXRpbHNcIjtcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCB7IFNldEZvbnRTdHlsZSB9IGZyb20gXCIuLi9mb250XCI7XHJcbmNvbnN0IEdhbWVHYWdlQ29sb3JMaXN0ID0gWydibHVlJywgJ3JlZCcsICd5ZWxsb3cnXTtcclxuY29uc3QgR2FtZUdhZ2UgPSB7XHJcbiAgICBoZWlnaHQ6IDIwLFxyXG4gICAgdHh0TWFyZ2luOiAzMCxcclxuICAgIGdhZ2VzOiBbXSxcclxuICAgIGNvbG9yOiAnYmx1ZScsXHJcbn07XHJcbmNvbnN0IEdldEdhZ2VBc3NldHMgPSAoY29sb3IsIGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIGxldCBhc3NldExpc3QgPSBbXTtcclxuICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgIEdhbWVHYWdlLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgICAgICB7IGtleTogY29sb3IgKyAnQmcnLCB1cmw6IENvbW1vbkdhZ2UgKyBjb2xvciArICdCZy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiBjb2xvciArICdCdG4nLCB1cmw6IENvbW1vbkdhZ2UgKyBjb2xvciArICdCdG4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICB7IGtleTogY29sb3IgKyAnSGFuZGxlRG93bicsIHVybDogQ29tbW9uR2FnZSArIGNvbG9yICsgJ0hhbmRsZURvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICB7IGtleTogY29sb3IgKyAnSGFuZGxlVXAnLCB1cmw6IENvbW1vbkdhZ2UgKyBjb2xvciArICdIYW5kbGVVcC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIEdhbWVHYWdlQ29sb3JMaXN0Lm1hcCgoZ2FnZUNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgIGFzc2V0TGlzdC5wdXNoKHsga2V5OiBnYWdlQ29sb3IgKyAnQmcnLCB1cmw6IENvbW1vbkdhZ2UgKyBnYWdlQ29sb3IgKyAnQmcucG5nJywgdHlwZTogJ2ltYWdlJyB9LCB7IGtleTogZ2FnZUNvbG9yICsgJ0J0bicsIHVybDogQ29tbW9uR2FnZSArIGdhZ2VDb2xvciArICdCdG4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LCB7IGtleTogZ2FnZUNvbG9yICsgJ0hhbmRsZURvd24nLCB1cmw6IENvbW1vbkdhZ2UgKyBnYWdlQ29sb3IgKyAnSGFuZGxlRG93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sIHsga2V5OiBnYWdlQ29sb3IgKyAnSGFuZGxlVXAnLCB1cmw6IENvbW1vbkdhZ2UgKyBnYWdlQ29sb3IgKyAnSGFuZGxlVXAucG5nJywgdHlwZTogJ2ltYWdlJyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cyk7XHJcbn07XHJcbmNvbnN0IEluaXRHYWdlID0gKG5hbWUpID0+IHtcclxuICAgIGNvbnN0IGdhZ2VMYXllciA9IEdhbWVHYWdlLmdhZ2VzLmZpbmQoZ2FnZSA9PiBnYWdlLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKGdhZ2VMYXllcikge1xyXG4gICAgICAgIC8vIG5hbWVkR2FnZVxyXG4gICAgfVxyXG59O1xyXG5jb25zdCBDcmVhdGVHYWdlQmFyID0gKHNjZW5lLCB4LCB5LCBlbmRNb3ZlQ2FsbGJhY2ssIGRhdGEpID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbywgX3AsIF9xLCBfcjtcclxuICAgIGNvbnN0IGxheWVyID0gc2NlbmUuYWRkLmxheWVyKCk7XHJcbiAgICAvLyBzZXR0aW5nIHBhcmFtZXRlciBpbml0IGRhdGFcclxuICAgIGxheWVyLnggPSB4O1xyXG4gICAgbGF5ZXIueSA9IHk7XHJcbiAgICBsYXllci5nYWdlTnVtTWluID0gKF9hID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLm51bU1pbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgIGxheWVyLmdhZ2VOdW1NYXggPSAoX2IgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEubnVtTWluKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAxMDA7XHJcbiAgICBsYXllci5nYWdlTnVtID0gKGxheWVyLmdhZ2VOdW1NaW4gKyBsYXllci5nYWdlTnVtTWF4KSAvIDI7XHJcbiAgICBsYXllci5pc0FibGUgPSAoX2MgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuaXNBYmxlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB0cnVlO1xyXG4gICAgY29uc3QgY29sb3IgPSAoX2QgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuY29sb3IpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IEdhbWVHYWdlLmNvbG9yO1xyXG4gICAgY29uc3QgdyA9IChfZSA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS53aWR0aCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogVmlldy5jZW50ZXJYO1xyXG4gICAgY29uc3QgaCA9IChfZiA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5oZWlnaHQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IEdhbWVHYWdlLmhlaWdodDtcclxuICAgIGNvbnN0IGJnVGV4dHVyZSA9IChfZyA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5iZ1R4dHVyZSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogY29sb3IgKyAnQmcnO1xyXG4gICAgY29uc3QgYnRuVGV4dHVyZSA9IChfaCA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5idG5UZXh0dXJlKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBjb2xvciArICdCdG4nO1xyXG4gICAgY29uc3QgaGFuZGxlVXBUZXh0dXJlID0gKF9rID0gKF9qID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmhhbmRsZSkgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLnVwVGV4dHVyZSkgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogY29sb3IgKyAnSGFuZGxlVXAnO1xyXG4gICAgY29uc3QgaGFuZGxlRG93blRleHR1cmUgPSAoX20gPSAoX2wgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuaGFuZGxlKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wudXBUZXh0dXJlKSAhPT0gbnVsbCAmJiBfbSAhPT0gdm9pZCAwID8gX20gOiBjb2xvciArICdIYW5kbGVEb3duJztcclxuICAgIGNvbnN0IHR4dFggPSAoX3AgPSAoX28gPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEudHh0KSA9PT0gbnVsbCB8fCBfbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX28ueCkgIT09IG51bGwgJiYgX3AgIT09IHZvaWQgMCA/IF9wIDogVmlldy5jZW50ZXJYIC8gMiArIEdhbWVHYWdlLnR4dE1hcmdpbjtcclxuICAgIGNvbnN0IHR4dFkgPSAoX3IgPSAoX3EgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEudHh0KSA9PT0gbnVsbCB8fCBfcSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3EueSkgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogMDtcclxuICAgIGNvbnN0IGdhZ2VCZyA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCBiZ1RleHR1cmUpO1xyXG4gICAgZ2FnZUJnLnNldERpc3BsYXlTaXplKHcsIGgpO1xyXG4gICAgY29uc3QgZ2FnZUJhciA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCBidG5UZXh0dXJlKTtcclxuICAgIGdhZ2VCYXIuc2V0RGlzcGxheVNpemUoVmlldy5jZW50ZXJYIC8gMiwgR2FtZUdhZ2UuaGVpZ2h0KTtcclxuICAgIGdhZ2VCYXIuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICBnYWdlQmFyLnNldFBvc2l0aW9uKC1WaWV3LmNlbnRlclggLyAyLCAwKTtcclxuICAgIGNvbnN0IGdhZ2VCYXJIYW5kbGUgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgaGFuZGxlVXBUZXh0dXJlKTtcclxuICAgIGNvbnN0IGdhZ2VUeHQgPSBzY2VuZS5hZGQudGV4dCgwLCAtR2FtZUdhZ2UuaGVpZ2h0LCBsYXllci5nYWdlTnVtLnRvU3RyaW5nKCkpO1xyXG4gICAgZ2FnZVR4dC5zZXRQb3NpdGlvbih0eHRYLCB0eHRZKTtcclxuICAgIFNldEZvbnRTdHlsZShnYWdlVHh0KTtcclxuICAgIGxheWVyLmdhZ2VQb3NYID0gMDsgLy8gZGVmYXVsdCBtaWRkbGUgdmFsdWVcclxuICAgIGxheWVyLmdhZ2VQb3NYTWluID0gLWdhZ2VCZy53aWR0aCAvIDIgKyBnYWdlQmFySGFuZGxlLndpZHRoIC8gMjtcclxuICAgIGxheWVyLmdhZ2VQb3NYTWF4ID0gZ2FnZUJnLndpZHRoIC8gMjtcclxuICAgIGxheWVyLmdhZ2VQb3NYTGVuZ3RoID0gZ2FnZUJnLndpZHRoIC0gZ2FnZUJhckhhbmRsZS53aWR0aCAvIDI7XHJcbiAgICBsYXllci5zZXRHYWdlSGFuZGxlRnJhbWUgPSAoaXNEb3duKSA9PiB7XHJcbiAgICAgICAgZ2FnZUJhckhhbmRsZS5zZXRUZXh0dXJlKGlzRG93biA/IGhhbmRsZURvd25UZXh0dXJlIDogaGFuZGxlVXBUZXh0dXJlKTtcclxuICAgIH07XHJcbiAgICBsYXllci5zZXRHYWdlQmFyU2l6ZSA9IChnYWdlUG9zKSA9PiB7XHJcbiAgICAgICAgbGV0IGdhZ2VQb3NYID0gZ2FnZVBvcyAtIGxheWVyLng7XHJcbiAgICAgICAgaWYgKGdhZ2VQb3NYIDw9IGxheWVyLmdhZ2VQb3NYTWluKVxyXG4gICAgICAgICAgICBnYWdlUG9zWCA9IGxheWVyLmdhZ2VQb3NYTWluO1xyXG4gICAgICAgIGVsc2UgaWYgKGdhZ2VQb3NYID49IGxheWVyLmdhZ2VQb3NYTWF4KVxyXG4gICAgICAgICAgICBnYWdlUG9zWCA9IGxheWVyLmdhZ2VQb3NYTWF4O1xyXG4gICAgICAgIGxheWVyLmdhZ2VQb3NYID0gZ2FnZVBvc1g7XHJcbiAgICAgICAgbGF5ZXIuZ2FnZU51bSA9IE1hdGguZmxvb3IoKGxheWVyLmdhZ2VOdW1NYXggLSBsYXllci5nYWdlTnVtTWluKSAqIE1hdGguYWJzKGdhZ2VQb3NYIC0gbGF5ZXIuZ2FnZVBvc1hNaW4pIC8gbGF5ZXIuZ2FnZVBvc1hMZW5ndGgpO1xyXG4gICAgICAgIGxheWVyLnVwZGF0ZUdhZ2UoKTtcclxuICAgIH07XHJcbiAgICBsYXllci5zZXRHYWdlTnVtID0gKGdhZ2VOdW0pID0+IHtcclxuICAgICAgICBsZXQgZ2FnZU51bWJlciA9IGdhZ2VOdW07XHJcbiAgICAgICAgaWYgKGdhZ2VOdW1iZXIgPCBsYXllci5nYWdlTnVtTWluKVxyXG4gICAgICAgICAgICBnYWdlTnVtYmVyID0gbGF5ZXIuZ2FnZU51bU1pbjtcclxuICAgICAgICBlbHNlIGlmIChnYWdlTnVtYmVyID4gbGF5ZXIuZ2FnZU51bU1heClcclxuICAgICAgICAgICAgZ2FnZU51bWJlciA9IGxheWVyLmdhZ2VOdW1NYXg7XHJcbiAgICAgICAgbGF5ZXIuZ2FnZU51bSA9IGdhZ2VOdW1iZXI7XHJcbiAgICAgICAgbGF5ZXIuZ2FnZVBvc1ggPSBsYXllci5nYWdlUG9zWE1pbiArIChsYXllci5nYWdlTnVtIC8gKGxheWVyLmdhZ2VOdW1NYXggLSBsYXllci5nYWdlTnVtTWluKSAqIGxheWVyLmdhZ2VQb3NYTGVuZ3RoKTtcclxuICAgICAgICBsYXllci51cGRhdGVHYWdlKCk7XHJcbiAgICB9O1xyXG4gICAgbGF5ZXIudXBkYXRlR2FnZSA9ICgpID0+IHtcclxuICAgICAgICBnYWdlQmFyLnNldERpc3BsYXlTaXplKGxheWVyLmdhZ2VQb3NYICsgZ2FnZUJhci53aWR0aCAvIDIsIEdhbWVHYWdlLmhlaWdodCk7XHJcbiAgICAgICAgZ2FnZUJhckhhbmRsZS54ID0gbGF5ZXIuZ2FnZVBvc1ggKyBnYWdlQmFyLndpZHRoIC0gZ2FnZUJhckhhbmRsZS53aWR0aCAvIDI7XHJcbiAgICAgICAgZ2FnZVR4dC5zZXRUZXh0KGxheWVyLmdhZ2VOdW0udG9GaXhlZCgwKSk7XHJcbiAgICB9O1xyXG4gICAgbGF5ZXIuc2V0QWJsZSA9IChpc0FibGUpID0+IHtcclxuICAgICAgICBsYXllci5pc0FibGUgPSBpc0FibGU7XHJcbiAgICAgICAgbGF5ZXIuaXNBYmxlID8gbGF5ZXIuc2V0QWxwaGEoMSkgOiBsYXllci5zZXRBbHBoYSgwLjUpO1xyXG4gICAgICAgIHJldHVybiBsYXllci5pc0FibGU7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZHJhZ1N0YXJ0ID0gKCkgPT4ge1xyXG4gICAgICAgIGxheWVyLmlzQWJsZSAmJiBsYXllci5zZXRHYWdlSGFuZGxlRnJhbWUodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZHJhZ2dpbmcgPSAoZHJhZ1gpID0+IHtcclxuICAgICAgICBsYXllci5pc0FibGUgJiYgbGF5ZXIuc2V0R2FnZUJhclNpemUoZHJhZ1gpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGRyYWdFbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGxheWVyLmlzQWJsZSkge1xyXG4gICAgICAgICAgICBsYXllci5zZXRHYWdlSGFuZGxlRnJhbWUoZmFsc2UpO1xyXG4gICAgICAgICAgICBlbmRNb3ZlQ2FsbGJhY2sgJiYgZW5kTW92ZUNhbGxiYWNrKGxheWVyLmdhZ2VOdW1NaW4sIGxheWVyLmdhZ2VOdW1NYXgsIGxheWVyLmdhZ2VOdW0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBbZ2FnZUJnLCBnYWdlQmFyXS5tYXAoKGJhcikgPT4ge1xyXG4gICAgICAgIGJhci5zZXRJbnRlcmFjdGl2ZSh7IGRyYWdnYWJsZTogdHJ1ZSB9KTtcclxuICAgICAgICBiYXIub24oJ2RyYWdzdGFydCcsIChwdHIpID0+IHtcclxuICAgICAgICAgICAgZHJhZ1N0YXJ0KCk7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nKHB0ci54KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBiYXIub24oJ2RyYWcnLCAocHRyLCBkcmFnWCkgPT4geyBkcmFnZ2luZyhwdHIueCk7IH0pO1xyXG4gICAgICAgIGJhci5vbignZHJhZ2VuZCcsIChwdHIpID0+IHsgZHJhZ0VuZCgpOyB9KTtcclxuICAgIH0pO1xyXG4gICAgZ2FnZUJhckhhbmRsZS5zZXRJbnRlcmFjdGl2ZSh7IGRyYWdnYWJsZTogdHJ1ZSB9KTtcclxuICAgIGdhZ2VCYXJIYW5kbGUub24oJ2RyYWdzdGFydCcsICgpID0+IHsgZHJhZ1N0YXJ0KCk7IH0pO1xyXG4gICAgZ2FnZUJhckhhbmRsZS5vbignZHJhZycsIChwdHIsIGRyYWdYKSA9PiB7IGRyYWdnaW5nKGRyYWdYKTsgfSk7XHJcbiAgICBnYWdlQmFySGFuZGxlLm9uKCdkcmFnZW5kJywgKCkgPT4geyBkcmFnRW5kKCk7IH0pO1xyXG4gICAgbGF5ZXIuc2V0QWJsZShsYXllci5pc0FibGUpO1xyXG4gICAgW2dhZ2VCZywgZ2FnZUJhciwgZ2FnZUJhckhhbmRsZSwgZ2FnZVR4dF0ubWFwKChjaGlsZCkgPT4ge1xyXG4gICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKGNoaWxkLnggKyB4LCBjaGlsZC55ICsgeSk7XHJcbiAgICAgICAgbGF5ZXIuYWRkKGNoaWxkKTtcclxuICAgIH0pO1xyXG4gICAgR2FtZUdhZ2UuZ2FnZXMucHVzaChsYXllcik7XHJcbiAgICBJbml0R2FnZShsYXllci5uYW1lKTtcclxuICAgIHJldHVybiBsYXllcjtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUdhZ2U7XHJcbmV4cG9ydCB7IEdldEdhZ2VBc3NldHMsIEluaXRHYWdlLCBDcmVhdGVHYWdlQmFyLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IFNldHRpbmdDb250ZXh0TWFyZ2luLCBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbiwgU2V0dGluZ0dhcENvbnRleHRNYXJnaW5MYXJnZXIgfSBmcm9tICcuJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWFyZ2luSCwgQ29udGV4dE1hcmdpblcsIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZUhlYWRTaXplLCBUeHRUaXRsZUhlaWdodEdhcCB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgR2FtZVRpbWUgZnJvbSAnLi90aW1lJztcclxuaW1wb3J0IHsgU3RhcnRUaXRsZSB9IGZyb20gJy4uL3RpdGxlJztcclxuaW1wb3J0IHsgU3RvcEdhbWUgfSBmcm9tICcuLi9nYW1lJztcclxuaW1wb3J0IHsgQ3JlYXRlR2FnZUJhciB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpL2dhZ2UnO1xyXG5pbXBvcnQgVUlQcm9wcyBmcm9tICdAc3JjL3NjZW5lcy91aSc7XHJcbmNvbnN0IFNldHRpbmcgPSB7XHJcbiAgICBidG46IG51bGwsXHJcbiAgICBsYXllcjogW10sXHJcbiAgICBsYXllckRhdGE6IHtcclxuICAgICAgICB0eHRHYXA6IDUwLFxyXG4gICAgICAgIGNvbnRyb2xUeHRMaXN0OiBbJ0Z1bGxTY3JlZW4nLCAnTm9ybWFsJ10sXHJcbiAgICAgICAgaXNGdWxsU2NyZWVuOiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBleGl0QnRuOiBudWxsLFxyXG4gICAgaXNPcGVuOiBmYWxzZSxcclxuICAgIGlzVHdpbmc6IGZhbHNlLFxyXG59O1xyXG5jb25zdCBJbml0U2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgU2V0dGluZy5pc1R3aW5nID0gZmFsc2U7XHJcbiAgICBIaWRlU2V0dGluZyhzY2VuZSk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZVNldHRpbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIGNvbnN0IHsgbWFyZ2luLCBhbHBoYSwgc2NhbGUgfSA9IFVJUHJvcHM7XHJcbiAgICBTZXR0aW5nLmJ0biA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LncgLSBtYXJnaW4sIG1hcmdpbiwgJ3NldHRpbmdCdG4nKTtcclxuICAgIFNldHRpbmcuYnRuLnNldFNjYWxlKHNjYWxlKTtcclxuICAgIFNldHRpbmcuYnRuLnNldEFscGhhKGFscGhhKTtcclxuICAgIFNldHRpbmcuYnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBTZXR0aW5nLmJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4geyBTZXR0aW5nLmlzVHdpbmcgfHwgQW5pbVNob3dTZXR0aW5nKHNjZW5lKTsgfSk7XHJcbiAgICAvLyBTZXR0aW5nLmxheWVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcigpO1xyXG4gICAgLy8gU2V0dGluZy5sYXllciA9IHNjZW5lLmFkZC5sYXllcigpO1xyXG4gICAgY29uc3QgYmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICdibGFja1NjcmVlbicpO1xyXG4gICAgYmcuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJnLnNldERpc3BsYXlTaXplKFZpZXcudywgVmlldy5oKTtcclxuICAgIGJnLnNldEFscGhhKDAuNCk7XHJcbiAgICBjb25zdCBwYW5lbCA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJ3NldHRpbmdQYW5lbCcpO1xyXG4gICAgcGFuZWwuc2V0RGlzcGxheVNpemUoVmlldy53IC0gQ29udGV4dE1hcmdpblcsIFZpZXcuaCAtIENvbnRleHRNYXJnaW5IKTtcclxuICAgIGNvbnN0IHRpdGxlID0gc2NlbmUuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSAoVHh0VGl0bGVIZWlnaHRHYXAgKiAzKSwgJ1NldHRpbmcnKTtcclxuICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKHRpdGxlKTtcclxuICAgIHRpdGxlLnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgY29uc3QgYmdtQnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZIC0gVmlldy5oIC8gNiwgJ211c2ljT24nKTtcclxuICAgIGNvbnN0IGJnbUdhZ2UgPSBDcmVhdGVHYWdlQmFyKHNjZW5lLCBWaWV3LmNlbnRlclgsIGJnbUJ0bi55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sIChtaW4sIG1heCwgY3VycikgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRCZ21Wb2x1bWUoY3VyciAvIDEwMCk7XHJcbiAgICB9KTtcclxuICAgIGJnbUdhZ2Uuc2V0R2FnZU51bShHYW1lQXVkaW8uYmdtVm9sdW1lICogMTAwKTtcclxuICAgIGNvbnN0IHNmeEJ0biA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIGJnbUdhZ2UueSArIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCAnYXVkaW9PbicpO1xyXG4gICAgY29uc3Qgc2Z4R2FnZSA9IENyZWF0ZUdhZ2VCYXIoc2NlbmUsIFZpZXcuY2VudGVyWCwgc2Z4QnRuLnkgKyBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbiwgKG1pbiwgbWF4LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldFNmeFZvbHVtZShjdXJyIC8gMTAwKTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgIH0pO1xyXG4gICAgc2Z4R2FnZS5zZXRHYWdlTnVtKEdhbWVBdWRpby5zZnhWb2x1bWUgKiAxMDApO1xyXG4gICAgW2JnbUJ0biwgc2Z4QnRuXS5tYXAoKGJ0bikgPT4ge1xyXG4gICAgICAgIGJ0bi5zZXRTY2FsZSgwLjYpO1xyXG4gICAgICAgIGJ0bi5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBiZ21CdG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCBpc09uID0gYmdtQnRuLnRleHR1cmUua2V5ID09PSAnbXVzaWNPbic7XHJcbiAgICAgICAgYmdtR2FnZS5zZXRBYmxlKCFpc09uKTtcclxuICAgICAgICBiZ21CdG4uc2V0VGV4dHVyZShpc09uID8gJ211c2ljT2ZmJyA6ICdtdXNpY09uJyk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldEJnbU11dGUoaXNPbik7XHJcbiAgICB9KTtcclxuICAgIHNmeEJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzT24gPSBzZnhCdG4udGV4dHVyZS5rZXkgPT09ICdhdWRpb09uJztcclxuICAgICAgICBzZnhHYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIHNmeEJ0bi5zZXRUZXh0dXJlKGlzT24gPyAnYXVkaW9PZmYnIDogJ2F1ZGlvT24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4TXV0ZShpc09uKTtcclxuICAgIH0pO1xyXG4gICAgYmdtQnRuLnNldFRleHR1cmUoR2FtZUF1ZGlvLmlzQmdtTXV0ZSA/ICdtdXNpY09mZicgOiAnbXVzaWNPbicpO1xyXG4gICAgc2Z4QnRuLnNldFRleHR1cmUoR2FtZUF1ZGlvLmlzU2Z4TXV0ZSA/ICdhdWRpb09mZicgOiAnYXVkaW9PbicpO1xyXG4gICAgYmdtR2FnZS5zZXRBYmxlKCFHYW1lQXVkaW8uaXNCZ21NdXRlKTtcclxuICAgIHNmeEdhZ2Uuc2V0QWJsZSghR2FtZUF1ZGlvLmlzU2Z4TXV0ZSk7XHJcbiAgICBjb25zdCB7IHR4dEdhcCB9ID0gU2V0dGluZy5sYXllckRhdGE7XHJcbiAgICAvLyBhZGQgYmFjayB0byB0aXRsZSBidG5cclxuICAgIGNvbnN0IGJhY2syVGl0bGVCZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIHNmeEdhZ2UueSArIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyLCAnc2V0dGluZ092ZXJCdG5VcCcpLnNldFNjYWxlKDEuMik7XHJcbiAgICBjb25zdCBiYWNrMlRpdGxlID0gc2NlbmUuYWRkLmltYWdlKGJhY2syVGl0bGVCZy54LCBiYWNrMlRpdGxlQmcueSAtIDQsICdvdmVyQmFjaycpO1xyXG4gICAgYmFjazJUaXRsZS5zZXRTY2FsZSgwLjYpLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBiYWNrMlRpdGxlLmRvd25Qb3NZID0gYmFjazJUaXRsZS55ICsgNDtcclxuICAgIGJhY2syVGl0bGUudXBQb3NZID0gYmFjazJUaXRsZS55O1xyXG4gICAgYmFjazJUaXRsZS5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgYmFjazJUaXRsZUJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuRG93bicpO1xyXG4gICAgICAgIGJhY2syVGl0bGUuc2V0UG9zaXRpb24oYmFjazJUaXRsZS54LCBiYWNrMlRpdGxlLmRvd25Qb3NZKTtcclxuICAgIH0pO1xyXG4gICAgYmFjazJUaXRsZS5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgIGJhY2syVGl0bGVCZy5zZXRUZXh0dXJlKCdzZXR0aW5nT3ZlckJ0blVwJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZS5zZXRQb3NpdGlvbihiYWNrMlRpdGxlLngsIGJhY2syVGl0bGUudXBQb3NZKTtcclxuICAgICAgICBpZiAoYmFjazJUaXRsZS5pc0NoYW5naW5nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCFzY2VuZS5zY2VuZS5pc0FjdGl2ZSgndGl0bGUnKSkge1xyXG4gICAgICAgICAgICBTdG9wR2FtZShzY2VuZSk7XHJcbiAgICAgICAgICAgIFN0YXJ0VGl0bGUoc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIEFuaW1IaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGJhY2syVGl0bGUuaXNDaGFuZ2luZyA9IGZhbHNlOyB9LCA1MDApO1xyXG4gICAgfSk7XHJcbiAgICBiYWNrMlRpdGxlLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICAgIGJhY2syVGl0bGVCZy5zZXRUZXh0dXJlKCdzZXR0aW5nT3ZlckJ0blVwJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZS5zZXRQb3NpdGlvbihiYWNrMlRpdGxlLngsIGJhY2syVGl0bGUudXBQb3NZKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgYmFjazJUaXRsZVR4dCA9IHNjZW5lLmFkZC50ZXh0KGJhY2syVGl0bGVCZy54LCBiYWNrMlRpdGxlQmcueSArIHR4dEdhcCwgJ0dvIHRvIFRpdGxlJyk7XHJcbiAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShiYWNrMlRpdGxlVHh0KTtcclxuICAgIGJhY2syVGl0bGVUeHQuc2V0Rm9udFNpemUoMTYpO1xyXG4gICAgY29uc3QgYmFjazJUaXRsZUxpc3QgPSBbYmFjazJUaXRsZUJnLCBiYWNrMlRpdGxlLCBiYWNrMlRpdGxlVHh0XTtcclxuICAgIC8vIC8vIGFkZCBzY3JlZW4gc2l6ZSBjb250cm9sbGVyXHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbGxlckJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCArIGNvbnRyb2xHYXAsIGJhY2syVGl0bGVCZy55LCAnc2V0dGluZ092ZXJCdG5VcCcpLnNldFNjYWxlKDEuMik7XHJcbiAgICAvLyBsZXQgc2l6ZUNvbnRyb2xsZXIgPSBzY2VuZS5hZGQuaW1hZ2Uoc2l6ZUNvbnRyb2xsZXJCZy54LCBzaXplQ29udHJvbGxlckJnLnkgLSA0LCAnc2NyZWVuTGFyZ2VyJykgYXMgVFRvZ2dsZUJ0bkltZztcclxuICAgIC8vIHNpemVDb250cm9sbGVyLnNldFNjYWxlKDAuNikuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIC8vIHNpemVDb250cm9sbGVyLmRvd25Qb3NZID0gc2l6ZUNvbnRyb2xsZXIueSArIDQ7XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci51cFBvc1kgPSBzaXplQ29udHJvbGxlci55O1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5Eb3duJyk7XHJcbiAgICAvLyAgICAgc2l6ZUNvbnRyb2xsZXIuc2V0UG9zaXRpb24oc2l6ZUNvbnRyb2xsZXIueCwgc2l6ZUNvbnRyb2xsZXIuZG93blBvc1kpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbGxlckV4aXRFdnQgPSAoKSA9PiB7XHJcbiAgICAvLyAgICAgU2V0dGluZy5sYXllckRhdGEuaXNGdWxsU2NyZWVuID0gZmFsc2U7XHJcbiAgICAvLyAgICAgc2NlbmUuc2NhbGUuc3RvcEZ1bGxzY3JlZW4oKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5zZXRUZXh0dXJlKCdzY3JlZW5MYXJnZXInKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbFR4dC5zZXRUZXh0KGNvbnRyb2xUeHRMaXN0WzBdKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbGxlclRvZ2dsZUV2dCA9ICgpID0+IHtcclxuICAgIC8vICAgICBTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW4gPSAhU2V0dGluZy5sYXllckRhdGEuaXNGdWxsU2NyZWVuO1xyXG4gICAgLy8gICAgIGlmIChTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW4pIHtcclxuICAgIC8vICAgICAgICAgc2NlbmUuc2NhbGUuc3RhcnRGdWxsc2NyZWVuKCk7XHJcbiAgICAvLyAgICAgICAgIHNpemVDb250cm9sbGVyLnNldFRleHR1cmUoJ3NjcmVlblNtYWxsZXInKTtcclxuICAgIC8vICAgICAgICAgc2l6ZUNvbnRyb2xUeHQuc2V0VGV4dChjb250cm9sVHh0TGlzdFsxXSk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGVsc2Ugc2l6ZUNvbnRyb2xsZXJFeGl0RXZ0KCk7XHJcbiAgICAvLyB9O1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgIC8vICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlckJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5zZXRQb3NpdGlvbihzaXplQ29udHJvbGxlci54LCBzaXplQ29udHJvbGxlci51cFBvc1kpO1xyXG4gICAgLy8gICAgIGlmIChzaXplQ29udHJvbGxlci5pc0NoYW5naW5nKSByZXR1cm47XHJcbiAgICAvLyAgICAgc2l6ZUNvbnRyb2xsZXIuaXNDaGFuZ2luZyA9IHRydWU7XHJcbiAgICAvLyAgICAgc2l6ZUNvbnRyb2xsZXJUb2dnbGVFdnQoKTtcclxuICAgIC8vICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2l6ZUNvbnRyb2xsZXIuaXNDaGFuZ2luZyA9IGZhbHNlOyB9LCAzMDApO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlckJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5zZXRQb3NpdGlvbihzaXplQ29udHJvbGxlci54LCBzaXplQ29udHJvbGxlci51cFBvc1kpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbFR4dCA9IHNjZW5lLmFkZC50ZXh0KHNpemVDb250cm9sbGVyQmcueCwgc2l6ZUNvbnRyb2xsZXJCZy55ICsgdHh0R2FwLCBjb250cm9sVHh0TGlzdFswXSk7XHJcbiAgICAvLyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShzaXplQ29udHJvbFR4dCk7XHJcbiAgICAvLyBzaXplQ29udHJvbFR4dC5zZXRGb250U2l6ZSgxNik7XHJcbiAgICAvLyAvLyByZXNpemUgZXZlbnQgZm9yIHN0b3AgZnVsbCBzY3JlZW5cclxuICAgIC8vIHNjZW5lLnNjYWxlLm9mZigncmVzaXplJyk7XHJcbiAgICAvLyBzY2VuZS5zY2FsZS5vbigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIGlmIChzaXplQ29udHJvbGxlci5pc0NoYW5naW5nKSByZXR1cm47XHJcbiAgICAvLyAgICAgaWYgKCFTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW4pIHJldHVybjtcclxuICAgIC8vICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlckV4aXRFdnQoKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gY29uc3Qgc2l6ZUNvbnRyb2xsZXJMaXN0ID0gWyBzaXplQ29udHJvbGxlckJnLCBzaXplQ29udHJvbGxlciwgc2l6ZUNvbnRyb2xUeHQgXTtcclxuICAgIC8vIGNvbnN0IGhvd0NvbnRleHQgPSBDcmVhdGVIb3coc2NlbmUpO1xyXG4gICAgLy8gY29uc3QgaG93QnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgc2l6ZUNvbnRyb2xUeHQueSArIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCAnYnRuU2V0dGluZ1VwJykgYXMgVFRvZ2dsZUJ0bkltZztcclxuICAgIC8vIGhvd0J0bi5zZXRJbnRlcmFjdGl2ZSgpLnNldFNjYWxlKDEpO1xyXG4gICAgLy8gaG93QnRuLmRvd25Qb3NZID0gaG93QnRuLnkgKyA0O1xyXG4gICAgLy8gaG93QnRuLnVwUG9zWSA9IGhvd0J0bi55O1xyXG4gICAgLy8gaG93QnRuLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgIC8vICAgICBob3dCdG4uc2V0VGV4dHVyZSgnYnRuU2V0dGluZ0Rvd24nKTtcclxuICAgIC8vICAgICBob3dUeHQuc2V0UG9zaXRpb24oaG93VHh0LngsIGhvd0J0bi5kb3duUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGhvd0J0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgLy8gICAgIGhvd0J0bi5zZXRUZXh0dXJlKCdidG5TZXR0aW5nVXAnKTtcclxuICAgIC8vICAgICBob3dUeHQuc2V0UG9zaXRpb24oaG93VHh0LngsIGhvd0J0bi51cFBvc1kpO1xyXG4gICAgLy8gICAgIGhvd0NvbnRleHQuc2hvdygpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBob3dCdG4ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgaG93QnRuLnNldFRleHR1cmUoJ2J0blNldHRpbmdVcCcpO1xyXG4gICAgLy8gICAgIGhvd1R4dC5zZXRQb3NpdGlvbihob3dUeHQueCwgaG93QnRuLnVwUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IGhvd1R4dCA9IHNjZW5lLmFkZC50ZXh0KGhvd0J0bi54LCBob3dCdG4ueSwgJ2hvdycpO1xyXG4gICAgLy8gU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUoaG93VHh0KTtcclxuICAgIC8vIGhvd1R4dC5zZXRGb250U2l6ZShUeHRUaXRsZVNpemUpO1xyXG4gICAgLy8gY29uc3QgaG93TGlzdCA9IFsgaG93QnRuLCBob3dUeHQsIGhvd0NvbnRleHQgXTtcclxuICAgIC8vIFNldHRpbmcubGF5ZXIuYWRkKFtcclxuICAgIC8vICAgICBiZywgcGFuZWwsIHRpdGxlLFxyXG4gICAgLy8gICAgIGJnbUJ0biwgc2Z4QnRuLFxyXG4gICAgLy8gICAgIGJnbUdhZ2UsIHNmeEdhZ2UsXHJcbiAgICAvLyAgICAgLi4uYmFjazJUaXRsZUxpc3QsXHJcbiAgICAvLyAgICAgLy8gLi4uc2l6ZUNvbnRyb2xsZXJMaXN0LFxyXG4gICAgLy8gXSk7XHJcbiAgICAvLyBTZXR0aW5nLmxheWVyLmFkZChcclxuICAgIC8vICAgICBiZywgcGFuZWwsIHRpdGxlLFxyXG4gICAgLy8gICAgIGJnbUJ0biwgc2Z4QnRuLFxyXG4gICAgLy8gICAgIGJnbUdhZ2UsIHNmeEdhZ2UsXHJcbiAgICAvLyAgICAgLy8gLi4uYmFjazJUaXRsZUxpc3QsXHJcbiAgICAvLyAgICAgLy8gLi4uc2l6ZUNvbnRyb2xsZXJMaXN0LFxyXG4gICAgLy8gKTtcclxuICAgIFNldHRpbmcubGF5ZXIucHVzaChiZyk7XHJcbiAgICBTZXR0aW5nLmxheWVyLnB1c2gocGFuZWwpO1xyXG4gICAgU2V0dGluZy5sYXllci5wdXNoKHRpdGxlKTtcclxuICAgIFNldHRpbmcubGF5ZXIucHVzaChiZ21CdG4pO1xyXG4gICAgU2V0dGluZy5sYXllci5wdXNoKHNmeEJ0bik7XHJcbiAgICBTZXR0aW5nLmxheWVyLnB1c2goYmdtR2FnZSk7XHJcbiAgICBTZXR0aW5nLmxheWVyLnB1c2goc2Z4R2FnZSk7XHJcbiAgICBiYWNrMlRpdGxlTGlzdC5tYXAoKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgU2V0dGluZy5sYXllci5wdXNoKGNoaWxkKTtcclxuICAgIH0pO1xyXG4gICAgLy8gZXhpdCBidG4gJiBsYXN0IGNvbnRhaW5lciBzZXR1cFxyXG4gICAgU2V0dGluZy5leGl0QnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcudyAtIFNldHRpbmdDb250ZXh0TWFyZ2luLCBTZXR0aW5nQ29udGV4dE1hcmdpbiwgJ2V4aXRCdG4nKS5zZXRTY2FsZSgwLjYpO1xyXG4gICAgU2V0dGluZy5leGl0QnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBTZXR0aW5nLmV4aXRCdG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBBbmltSGlkZVNldHRpbmcoc2NlbmUpO1xyXG4gICAgfSk7XHJcbiAgICBbU2V0dGluZy5idG4sIC4uLlNldHRpbmcubGF5ZXIsIFNldHRpbmcuZXhpdEJ0bl0ubWFwKGVsZSA9PiBTZXREZXB0aChlbGUsICdzZXR0aW5nJykpO1xyXG4gICAgSW5pdFNldHRpbmcoc2NlbmUpO1xyXG4gICAgcmV0dXJuIFNldHRpbmc7XHJcbn07XHJcbi8vIHR5cGUgVEdhZ2VDb250YWluZXIgPSBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyICYge1xyXG4vLyAgICAgZ2FnZU51bTogbnVtYmVyO1xyXG4vLyAgICAgZ2FnZU51bU1pbjogbnVtYmVyO1xyXG4vLyAgICAgZ2FnZU51bU1heDogbnVtYmVyO1xyXG4vLyAgICAgZ2FnZVBvc1g6IG51bWJlcjtcclxuLy8gICAgIGdhZ2VQb3NYTWluOiBudW1iZXI7XHJcbi8vICAgICBnYWdlUG9zWE1heDogbnVtYmVyO1xyXG4vLyAgICAgZ2FnZVBvc1hMZW5ndGg6IG51bWJlcjtcclxuLy8gICAgIGlzQWJsZTogYm9vbGVhbjtcclxuLy8gICAgIHNldEdhZ2VIYW5kbGVGcmFtZTogKGlzRG93bjogYm9vbGVhbikgPT4gdm9pZDtcclxuLy8gICAgIHNldEdhZ2VCYXJTaXplOiAoZ2FnZVBvczogbnVtYmVyKSA9PiB2b2lkO1xyXG4vLyAgICAgc2V0R2FnZU51bTogKGdhZ2VOdW06IG51bWJlcikgPT4gdm9pZDtcclxuLy8gICAgIHNldEdhZ2U6ICgpID0+IHZvaWQ7XHJcbi8vICAgICBzZXRBYmxlOiAoaXNBYmxlOiBib29sZWFuKSA9PiB2b2lkO1xyXG4vLyB9O1xyXG4vLyBjb25zdCBHYWdlSGVpZ2h0ID0gMjA7XHJcbi8vIGNvbnN0IENyZWF0ZUdhZ2VCYXIgPSAoXHJcbi8vICAgICBzY2VuZTogUGhhc2VyLlNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcixcclxuLy8gICAgIGVuZE1vdmVDYWxsYmFjaz86IChtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGN1cnI6IG51bWJlcikgPT4gdm9pZCxcclxuLy8gICAgIGdhZ2VOdW1NaW46IG51bWJlciA9IDAsIGdhZ2VOdW1NYXg6IG51bWJlciA9IDEwMCxcclxuLy8gKSA9PiB7XHJcbi8vICAgICBjb25zdCBjb246IFRHYWdlQ29udGFpbmVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcih4LCB5KSBhcyBUR2FnZUNvbnRhaW5lcjtcclxuLy8gICAgIGNvbi5nYWdlTnVtTWluID0gZ2FnZU51bU1pbjtcclxuLy8gICAgIGNvbi5nYWdlTnVtTWF4ID0gZ2FnZU51bU1heDtcclxuLy8gICAgIGNvbi5nYWdlTnVtID0gKGNvbi5nYWdlTnVtTWluICsgY29uLmdhZ2VOdW1NYXgpIC8gMjtcclxuLy8gICAgIGNvbnN0IGdhZ2VCZyA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnY29sb3JCYWNrZ3JvdW5kJyk7XHJcbi8vICAgICBjb25zdCBnYWdlQmFyID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdidG5CbHVlJyk7XHJcbi8vICAgICBjb25zdCBnYWdlQmFySGFuZGxlID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdjb2xvckhhbmRsZScpO1xyXG4vLyAgICAgY29uc3QgZ2FnZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIDAsIGNvbi5nYWdlTnVtLnRvU3RyaW5nKCkpO1xyXG4vLyAgICAgZ2FnZUJnLnNldERpc3BsYXlTaXplKFZpZXcuY2VudGVyWCwgR2FnZUhlaWdodCk7XHJcbi8vICAgICBnYWdlQmFyLnNldERpc3BsYXlTaXplKFZpZXcuY2VudGVyWC8yLCBHYWdlSGVpZ2h0KTtcclxuLy8gICAgIGdhZ2VCYXIuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbi8vICAgICBnYWdlQmFyLnNldFBvc2l0aW9uKC1WaWV3LmNlbnRlclgvMiwgMCk7XHJcbi8vICAgICBnYWdlVHh0LnNldE9yaWdpbigwLCAwLjUpO1xyXG4vLyAgICAgZ2FnZVR4dC5zZXRQb3NpdGlvbihWaWV3LmNlbnRlclgvMiArIFR4dE1hcmdpbiAtIDUsIDApO1xyXG4vLyAgICAgY29uLmFkZChbIGdhZ2VCZywgZ2FnZUJhciwgZ2FnZUJhckhhbmRsZSwgZ2FnZVR4dCBdKTtcclxuLy8gICAgIGNvbi5nYWdlUG9zWCA9IDA7XHJcbi8vICAgICBjb24uZ2FnZVBvc1hNaW4gPSAtZ2FnZUJnLndpZHRoLzIgLSBnYWdlQmFySGFuZGxlLndpZHRoLzI7XHJcbi8vICAgICBjb24uZ2FnZVBvc1hNYXggPSBnYWdlQmcud2lkdGgvMiArIGdhZ2VCYXJIYW5kbGUud2lkdGgvMjtcclxuLy8gICAgIGNvbi5nYWdlUG9zWExlbmd0aCA9IGdhZ2VCZy53aWR0aCArIGdhZ2VCYXJIYW5kbGUud2lkdGg7XHJcbi8vICAgICBjb24uc2V0R2FnZUhhbmRsZUZyYW1lID0gKGlzRG93bjogYm9vbGVhbikgPT4ge1xyXG4vLyAgICAgICAgIGdhZ2VCYXJIYW5kbGUuc2V0VGV4dHVyZShpc0Rvd24gPyAnY29sb3JIYW5kbGVEb3duJyA6ICdjb2xvckhhbmRsZScpO1xyXG4vLyAgICAgfTtcclxuLy8gICAgIGNvbi5zZXRHYWdlQmFyU2l6ZSA9IChnYWdlUG9zOiBudW1iZXIpID0+IHtcclxuLy8gICAgICAgICBsZXQgZ2FnZVBvc1ggPSBnYWdlUG9zO1xyXG4vLyAgICAgICAgIGlmIChnYWdlUG9zWCA8PSBjb24uZ2FnZVBvc1hNaW4pIGdhZ2VQb3NYID0gY29uLmdhZ2VQb3NYTWluO1xyXG4vLyAgICAgICAgIGVsc2UgaWYgKGdhZ2VQb3NYID49IGNvbi5nYWdlUG9zWE1heCkgZ2FnZVBvc1ggPSBjb24uZ2FnZVBvc1hNYXg7XHJcbi8vICAgICAgICAgY29uLmdhZ2VQb3NYID0gZ2FnZVBvc1g7XHJcbi8vICAgICAgICAgY29uLmdhZ2VOdW0gPSBNYXRoLmZsb29yKChjb24uZ2FnZU51bU1heCAtIGNvbi5nYWdlTnVtTWluKSAqIE1hdGguYWJzKGdhZ2VQb3NYIC0gY29uLmdhZ2VQb3NYTWluKSAvIGNvbi5nYWdlUG9zWExlbmd0aCk7XHJcbi8vICAgICAgICAgY29uLnNldEdhZ2UoKTtcclxuLy8gICAgIH07XHJcbi8vICAgICBjb24uc2V0R2FnZU51bSA9IChnYWdlTnVtOiBudW1iZXIpID0+IHtcclxuLy8gICAgICAgICBsZXQgZ2FnZU51bWJlciA9IGdhZ2VOdW07XHJcbi8vICAgICAgICAgaWYgKGdhZ2VOdW1iZXIgPCBjb24uZ2FnZU51bU1pbikgZ2FnZU51bWJlciA9IGNvbi5nYWdlTnVtTWluO1xyXG4vLyAgICAgICAgIGVsc2UgaWYgKGdhZ2VOdW1iZXIgPiBjb24uZ2FnZU51bU1heCkgZ2FnZU51bWJlciA9IGNvbi5nYWdlTnVtTWF4O1xyXG4vLyAgICAgICAgIGNvbi5nYWdlTnVtID0gZ2FnZU51bWJlcjtcclxuLy8gICAgICAgICBjb24uZ2FnZVBvc1ggPSAoY29uLmdhZ2VOdW0gKiBjb24uZ2FnZVBvc1hMZW5ndGggLyBjb24uZ2FnZU51bU1heCkgLSBjb24uZ2FnZVBvc1hNYXg7XHJcbi8vICAgICAgICAgY29uLnNldEdhZ2UoKTtcclxuLy8gICAgIH07XHJcbi8vICAgICBjb24uc2V0R2FnZSA9ICgpID0+IHtcclxuLy8gICAgICAgICBnYWdlQmFyLnNldERpc3BsYXlTaXplKGNvbi5nYWdlUG9zWCArIGdhZ2VCYXIud2lkdGgvMiArIGdhZ2VCYXJIYW5kbGUud2lkdGgvMiwgR2FnZUhlaWdodCk7XHJcbi8vICAgICAgICAgZ2FnZUJhckhhbmRsZS5zZXRQb3NpdGlvbihjb24uZ2FnZVBvc1gsIDApO1xyXG4vLyAgICAgICAgIGdhZ2VUeHQuc2V0VGV4dChjb24uZ2FnZU51bS50b0ZpeGVkKDApKTtcclxuLy8gICAgIH07XHJcbi8vICAgICBjb24uc2V0QWJsZSA9IChpc0FibGU6IGJvb2xlYW4pID0+IHtcclxuLy8gICAgICAgICBjb24uaXNBYmxlID0gaXNBYmxlO1xyXG4vLyAgICAgICAgIGNvbi5pc0FibGUgPyBjb24uc2V0QWxwaGEoMSkgOiBjb24uc2V0QWxwaGEoMC41KTtcclxuLy8gICAgIH07XHJcbi8vICAgICBjb24uc2V0QWJsZSh0cnVlKTtcclxuLy8gICAgIGdhZ2VCYXJIYW5kbGUuc2V0SW50ZXJhY3RpdmUoeyBkcmFnZ2FibGU6IHRydWUgfSk7XHJcbi8vICAgICBnYWdlQmFySGFuZGxlLm9uKCdkcmFnc3RhcnQnLCAoKSA9PiB7XHJcbi8vICAgICAgICAgY29uLmlzQWJsZSAmJiBjb24uc2V0R2FnZUhhbmRsZUZyYW1lKHRydWUpO1xyXG4vLyAgICAgfSk7XHJcbi8vICAgICBnYWdlQmFySGFuZGxlLm9uKCdkcmFnJywgKHB0ciwgZHJhZ1gpID0+IHtcclxuLy8gICAgICAgICBjb24uaXNBYmxlICYmIGNvbi5zZXRHYWdlQmFyU2l6ZShkcmFnWCk7XHJcbi8vICAgICB9KTtcclxuLy8gICAgIGdhZ2VCYXJIYW5kbGUub24oJ2RyYWdlbmQnLCAoKSA9PiB7XHJcbi8vICAgICAgICAgaWYgKGNvbi5pc0FibGUpIHtcclxuLy8gICAgICAgICAgICAgY29uLnNldEdhZ2VIYW5kbGVGcmFtZShmYWxzZSk7XHJcbi8vICAgICAgICAgICAgIGVuZE1vdmVDYWxsYmFjayAmJiBlbmRNb3ZlQ2FsbGJhY2soY29uLmdhZ2VOdW1NaW4sIGNvbi5nYWdlTnVtTWF4LCBjb24uZ2FnZU51bSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSk7XHJcbi8vICAgICByZXR1cm4gY29uO1xyXG4vLyB9O1xyXG5jb25zdCBBbmltU2hvd1NldHRpbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIFNldHRpbmcuaXNUd2luZyA9IHRydWU7XHJcbiAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICBmcm9tOiAwLCB0bzogNjAsIGR1cmF0aW9uOiAxMjAsXHJcbiAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4geyBTZXR0aW5nLmJ0bi5zZXRBbmdsZShkYXRhLnZhbHVlKTsgfSxcclxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmcuaXNUd2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTaG93U2V0dGluZyhzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcbmNvbnN0IEFuaW1IaWRlU2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgU2V0dGluZy5pc1R3aW5nID0gdHJ1ZTtcclxuICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgSGlkZVNldHRpbmcoc2NlbmUpO1xyXG4gICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgIGZyb206IDE4MCwgdG86IDAsIGR1cmF0aW9uOiAxMjAsXHJcbiAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4geyBTZXR0aW5nLmJ0bi5zZXRBbmdsZShkYXRhLnZhbHVlKTsgfSxcclxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7IFNldHRpbmcuaXNUd2luZyA9IGZhbHNlOyB9XHJcbiAgICB9KTtcclxufTtcclxuY29uc3QgU2hvd1NldHRpbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIEdhbWVUaW1lLnNldFRpbWVTY2FsZShzY2VuZSwgR2FtZVRpbWUuc2hvd1NldHRpbmdUaW1lU2NhbGUpO1xyXG4gICAgU2V0dGluZy5pc09wZW4gPSB0cnVlO1xyXG4gICAgU2V0dGluZy5sYXllci5tYXAobGF5ZXJDaGlsZCA9PiBsYXllckNoaWxkLnNldFZpc2libGUgJiYgbGF5ZXJDaGlsZC5zZXRWaXNpYmxlKHRydWUpKTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5zZXRWaXNpYmxlKHRydWUpO1xyXG59O1xyXG5jb25zdCBIaWRlU2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgR2FtZVRpbWUuc2V0VGltZVNjYWxlKHNjZW5lLCBHYW1lVGltZS5oaWRlU2V0dGluZ1RpbWVTY2FsZSk7XHJcbiAgICBTZXR0aW5nLmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgU2V0dGluZy5sYXllci5tYXAobGF5ZXJDaGlsZCA9PiBsYXllckNoaWxkLnNldFZpc2libGUgJiYgbGF5ZXJDaGlsZC5zZXRWaXNpYmxlKGZhbHNlKSk7XHJcbiAgICBTZXR0aW5nLmV4aXRCdG4uc2V0VmlzaWJsZShmYWxzZSk7XHJcbn07XHJcbmNvbnN0IFNob3dTZXR0aW5nQnRuID0gKHNjZW5lKSA9PiB7XHJcbiAgICBIaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICBTZXR0aW5nLmJ0bi5zZXRWaXNpYmxlKHRydWUpO1xyXG59O1xyXG5jb25zdCBIaWRlU2V0dGluZ0J0biA9IChzY2VuZSkgPT4ge1xyXG4gICAgSGlkZVNldHRpbmcoc2NlbmUpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0VmlzaWJsZShmYWxzZSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldHRpbmc7XHJcbmV4cG9ydCB7IEluaXRTZXR0aW5nLCBDcmVhdGVTZXR0aW5nLCBBbmltU2hvd1NldHRpbmcsIEFuaW1IaWRlU2V0dGluZywgU2hvd1NldHRpbmcsIEhpZGVTZXR0aW5nLCBTaG93U2V0dGluZ0J0biwgSGlkZVNldHRpbmdCdG4sIH07XHJcbiIsImltcG9ydCB7IENvbW1vblNucywgR2V0QXNzZXRGaWxlcyB9IGZyb20gXCJAc3JjL3NjZW5lcy9hc3NldFV0aWxzXCI7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5pbXBvcnQgVUlQcm9wcyBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IEdhbWVGb250LCB7IFNldEZvbnRTdHlsZSB9IGZyb20gXCIuLi9mb250XCI7XHJcbmNvbnN0IENoYW5uZWxBZHZlcnRpc2UgPSB7XHJcbiAgICB0ZXh0dXJlTGlzdDogWydibGFja1NjcmVlbicsICdjaGFubmVsQnRuRG93bicsICdjaGFubmVsQnRuVXAnLCAnY2hhbm5lbExvZ28nLF0sXHJcbiAgICB5b3V0dWJlQnRuTGF5ZXI6IG51bGwsXHJcbiAgICB5b3V0dWJlUG9wVXBMYXllcjogbnVsbCxcclxuICAgIHlvdXR1YmVTaG93OiAoKSA9PiB7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlUG9wVXBMYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgfSxcclxuICAgIHlvdXR1YmVIaWRlOiAoKSA9PiB7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlUG9wVXBMYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIH0sXHJcbiAgICBibG9nQnRuTGF5ZXI6IG51bGwsXHJcbiAgICBibG9nUG9wVXBMYXllcjogbnVsbCxcclxuICAgIGJsb2dTaG93OiAoKSA9PiB7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS5ibG9nUG9wVXBMYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgfSxcclxuICAgIGJsb2dIaWRlOiAoKSA9PiB7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS5ibG9nUG9wVXBMYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEdldFNuc0Fzc2V0cyA9IChleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBjb25zdCBhc3NldExpc3QgPSBbXHJcbiAgICAgICAgLy8geW91dHViZVxyXG4gICAgICAgIHsga2V5OiAneW91dHViZUxvZ28nLCB1cmw6IENvbW1vblNucyArICd5b3V0dWJlTG9nby5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdjaGFubmVsTG9nbycsIHVybDogQ29tbW9uU25zICsgJ2NoYW5uZWxMb2dvLmpwZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAvLyBibG9nXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIEdldEFzc2V0RmlsZXMoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKTtcclxufTtcclxuY29uc3QgSW5pdENoYW5uZWwgPSAoKSA9PiB7XHJcbiAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVIaWRlKCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUNoYW5uZWwgPSAoc2NlbmUsIHZpZGVvVXJsLCBjb21tb25UZXh0U3R5bGUsIGNoYW5uZWxEYXRhKSA9PiB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICBjb25zdCBidG5XID0gKF9hID0gY2hhbm5lbERhdGEgPT09IG51bGwgfHwgY2hhbm5lbERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNoYW5uZWxEYXRhLncpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDYwO1xyXG4gICAgY29uc3QgYnRuSCA9IChfYiA9IGNoYW5uZWxEYXRhID09PSBudWxsIHx8IGNoYW5uZWxEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGFubmVsRGF0YS5oKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiA0NTtcclxuICAgIGNvbnN0IGJ0blNjYWxlVGltZSA9IDEuMTtcclxuICAgIGNvbnN0IGJ0bkJnID0gc2NlbmUuYWRkLmltYWdlKChfYyA9IGNoYW5uZWxEYXRhID09PSBudWxsIHx8IGNoYW5uZWxEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGFubmVsRGF0YS54KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBWaWV3LmNlbnRlclgsIChfZCA9IGNoYW5uZWxEYXRhID09PSBudWxsIHx8IGNoYW5uZWxEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGFubmVsRGF0YS55KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBWaWV3LmggLSAzNiwgJ2NoYW5uZWxCdG5VcCcpO1xyXG4gICAgY29uc3QgYnRuTG9nbyA9IHNjZW5lLmFkZC5pbWFnZShidG5CZy54LCBidG5CZy55LCAneW91dHViZUxvZ28nKTtcclxuICAgIGJ0bkxvZ28uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJ0bkxvZ28ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVyAqIGJ0blNjYWxlVGltZSwgYnRuSCAqIGJ0blNjYWxlVGltZSk7XHJcbiAgICAgICAgYnRuQmcuc2V0VGV4dHVyZSgnY2hhbm5lbEJ0bkRvd24nKTtcclxuICAgIH0pO1xyXG4gICAgYnRuTG9nby5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVywgYnRuSCk7XHJcbiAgICAgICAgYnRuQmcuc2V0VGV4dHVyZSgnY2hhbm5lbEJ0blVwc3MnKTtcclxuICAgICAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVTaG93KCk7XHJcbiAgICB9KTtcclxuICAgIGJ0bkxvZ28ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgYnRuTG9nby5zZXREaXNwbGF5U2l6ZShidG5XLCBidG5IKTtcclxuICAgICAgICBidG5CZy5zZXRUZXh0dXJlKCdjaGFubmVsQnRuVXAnKTtcclxuICAgIH0pO1xyXG4gICAgYnRuTG9nby5zZXREaXNwbGF5U2l6ZShidG5XLCBidG5IKTtcclxuICAgIENoYW5uZWxBZHZlcnRpc2UueW91dHViZUJ0bkxheWVyID0gc2NlbmUuYWRkLmxheWVyKFtcclxuICAgICAgICBidG5CZywgYnRuTG9nb1xyXG4gICAgXSk7XHJcbiAgICBjb25zdCBwb3BVcE1hcmdpbiA9IDcwO1xyXG4gICAgY29uc3QgY2hhbm5lbFVybCA9ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9jaGFubmVsL1VDQkpuRmdJUTlZT1JUaXoxMF9NZ3lfQSc7XHJcbiAgICBjb25zdCB2aWRlb1RodW1ibmFpbCA9IGBodHRwczovL2kxLnl0aW1nLmNvbS92aS8ke3ZpZGVvVXJsLnNwbGl0KCc9JylbMV19L2RlZmF1bHQuanBnYDtcclxuICAgIGNvbnN0IHBvcFVwQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICdibGFja1NjcmVlbicpO1xyXG4gICAgY29uc3QgcG9wVXBUaXRsZSA9IHNjZW5lLmFkZC50ZXh0KHBvcFVwQmcueCwgVmlldy5oIC8gOCwgJ015IFlvdXR1YmUnKTtcclxuICAgIGNvbnN0IHBvcFVwVHh0TGlzdCA9IFtdO1xyXG4gICAgY29uc3QgcG9wVXBNYWRlVmlkZW8gPSBzY2VuZS5hZGQuaW1hZ2UocG9wVXBCZy54LCBWaWV3LmNlbnRlclkgLSBwb3BVcE1hcmdpbiwgJycpO1xyXG4gICAgbGV0IHBvcFVwTWFkZVZpZGVvV0lQO1xyXG4gICAgcG9wVXBNYWRlVmlkZW8uc2V0RGlzcGxheVNpemUocG9wVXBNYXJnaW4sIHBvcFVwTWFyZ2luKTtcclxuICAgIGlmICghdmlkZW9VcmwpIHtcclxuICAgICAgICBwb3BVcE1hZGVWaWRlb1dJUCA9IHNjZW5lLmFkZC50ZXh0KHBvcFVwQmcueCwgVmlldy5jZW50ZXJZIC0gcG9wVXBNYXJnaW4sICcgICAgICAgICBTb3JyeSFcXG5Xb3JrIEluIFByb2dyZXNzJyk7XHJcbiAgICAgICAgcG9wVXBUeHRMaXN0LnB1c2gocG9wVXBNYWRlVmlkZW9XSVApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcG9wVXBNYWRlVmlkZW9UeHQgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIHBvcFVwTWFkZVZpZGVvLnkgKyBwb3BVcE1hcmdpbiwgJ0NyZWF0ZWQgdmlkZW8nKTtcclxuICAgIGNvbnN0IHBvcFVwQ2hhbm5lbCA9IHNjZW5lLmFkZC5pbWFnZShwb3BVcEJnLngsIHBvcFVwTWFkZVZpZGVvVHh0LnkgKyBwb3BVcE1hcmdpbiwgJ2NoYW5uZWxMb2dvJyk7XHJcbiAgICBjb25zdCBwb3BVcENoYW5uZWxUeHQgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIHBvcFVwQ2hhbm5lbC55ICsgcG9wVXBNYXJnaW4sICdUaGlzIGlzIG15IGNoYW5uZWwnKTtcclxuICAgIGNvbnN0IHBvcFVwRXhpdEd1aWRlID0gc2NlbmUuYWRkLnRleHQocG9wVXBCZy54LCBHYW1lRm9udC5ndWlkZVR4dFksICdwcmVzcyBhbnl3aGVyZSB0byBleGl0Jyk7XHJcbiAgICBwb3BVcFR4dExpc3QucHVzaChwb3BVcFRpdGxlLCBwb3BVcE1hZGVWaWRlb1R4dCwgcG9wVXBDaGFubmVsVHh0LCBwb3BVcEV4aXRHdWlkZSk7XHJcbiAgICBwb3BVcFR4dExpc3QubWFwKHR4dCA9PiBTZXRGb250U3R5bGUodHh0KSk7XHJcbiAgICBwb3BVcFR4dExpc3QubWFwKHR4dCA9PiBjb21tb25UZXh0U3R5bGUodHh0KSk7XHJcbiAgICBwb3BVcFRpdGxlLnNldEZvbnRTaXplKFZpZXcudyAvIDEyKTtcclxuICAgIHBvcFVwRXhpdEd1aWRlLnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgcG9wVXBCZy5zZXRBbHBoYSgwLjQpO1xyXG4gICAgcG9wVXBCZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBwb3BVcEJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBwb3BVcEJnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IENoYW5uZWxBZHZlcnRpc2UueW91dHViZUhpZGUoKTsgfSk7XHJcbiAgICBjb25zdCBvcGVuVXJsVGFiID0gKHVybCkgPT4geyB3aW5kb3cub3Blbih1cmwpOyB9O1xyXG4gICAgW3BvcFVwTWFkZVZpZGVvLCBwb3BVcE1hZGVWaWRlb1R4dF0ubWFwKCh2aWRlbykgPT4ge1xyXG4gICAgICAgIHZpZGVvLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgdmlkZW8ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgb3BlblVybFRhYih2aWRlb1VybCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgICBbcG9wVXBDaGFubmVsLCBwb3BVcENoYW5uZWxUeHRdLm1hcCgoY2hhbm5lbCkgPT4ge1xyXG4gICAgICAgIGNoYW5uZWwuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICBjaGFubmVsLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IG9wZW5VcmxUYWIoY2hhbm5lbFVybCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgICBbcG9wVXBDaGFubmVsLCBwb3BVcE1hZGVWaWRlb10ubWFwKChlbGUpID0+IHtcclxuICAgICAgICBlbGUuc2V0RGlzcGxheVNpemUocG9wVXBNYXJnaW4sIHBvcFVwTWFyZ2luKTtcclxuICAgIH0pO1xyXG4gICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlUG9wVXBMYXllciA9IHNjZW5lLmFkZC5sYXllcihbXHJcbiAgICAgICAgcG9wVXBCZywgcG9wVXBNYWRlVmlkZW8sIHBvcFVwQ2hhbm5lbCwgLi4ucG9wVXBUeHRMaXN0XHJcbiAgICBdKTtcclxuICAgIEluaXRDaGFubmVsKCk7XHJcbiAgICByZXR1cm4gQ2hhbm5lbEFkdmVydGlzZTtcclxufTtcclxuY29uc3QgSW5pdEJsb2cgPSAoKSA9PiB7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUJsb2cgPSAoc2NlbmUsIGJsb2dVcmwsIGNvbW1vblRleHRTdHlsZSwgY2hhbm5lbERhdGEpID0+IHtcclxuICAgIEluaXRCbG9nKCk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IENoYW5uZWxBZHZlcnRpc2U7XHJcbmV4cG9ydCB7IEdldFNuc0Fzc2V0cywgSW5pdENoYW5uZWwsIENyZWF0ZUNoYW5uZWwsIEluaXRCbG9nLCBDcmVhdGVCbG9nLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IENyZWF0ZVNldHRpbmcgfSBmcm9tICcuL3VpL3NldHRpbmcnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFN0YXJ0UGFzc2l2ZUxvYWRpbmcgfSBmcm9tICdAc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZyc7XHJcbmltcG9ydCB7IFN0YXJ0R2FtZSB9IGZyb20gJy4vZ2FtZSc7XHJcbmltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZUhlYWRTaXplLCBUeHRUaXRsZUhlaWdodEdhcCwgVHh0VGl0bGVTaXplIH0gZnJvbSAnLi9mb250JztcclxuaW1wb3J0IHsgQ3JlYXRlRWZ4IH0gZnJvbSAnLi9lZngnO1xyXG5pbXBvcnQgR2FtZURhdGEgZnJvbSAnLi4vc3RvcmFnZSc7XHJcbmltcG9ydCB7IENyZWF0ZUNoYW5uZWwgfSBmcm9tICdAc3JjL3NjZW5lcy91aS9zbnMnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4vZGVwdGgnO1xyXG5pbXBvcnQgeyBDcmVhdGVGdWxsU2NyZWVuIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvZnVsbFNjcmVlbic7XHJcbmltcG9ydCBHYW1lQXVkaW8sIHsgQ3JlYXRlR2FtZUF1ZGlvIH0gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBDcmVhdGVHYW1lU2Nyb2xsIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvc2Nyb2xsJztcclxuaW1wb3J0IHsgQ3JlYXRlR2FtZUlucHV0IH0gZnJvbSAnQHNyYy9zY2VuZXMvaW5wdXQnO1xyXG5pbXBvcnQgeyBDcmVhdGVHYW1lR2VzdHVyZSwgVXBkYXRlR2FtZUdlc3R1cmUgfSBmcm9tICdAc3JjL3NjZW5lcy9nZXN0dXJlJztcclxuY29uc3QgVmVyc2lvbk51bSA9ICcxLjAuMCc7XHJcbmNvbnN0IFN0YXJ0VGl0bGUgPSAoc2NlbmUpID0+IHtcclxuICAgIHNjZW5lLnNjZW5lLnJlbW92ZSgndGl0bGUnKTtcclxuICAgIHNjZW5lLnNjZW5lLmFkZCgndGl0bGUnLCBUaXRsZVNjZW5lKTtcclxuICAgIHNjZW5lLnNjZW5lLmxhdW5jaCgndGl0bGUnKTtcclxufTtcclxuY29uc3QgU3RvcFRpdGxlID0gKHNjZW5lKSA9PiB7XHJcbiAgICBpZiAoc2NlbmUuc2NlbmUuZ2V0KCd0aXRsZScpKSB7XHJcbiAgICAgICAgc2NlbmUuc2NlbmUuc2V0QWN0aXZlKGZhbHNlLCAndGl0bGUnKTtcclxuICAgICAgICBzY2VuZS5zY2VuZS5zZXRWaXNpYmxlKGZhbHNlLCAndGl0bGUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2NlbmUuc2NlbmUucmVtb3ZlKCd0aXRsZScpOyB9LCAxMDAwKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgVGl0bGVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIGtleTogJ3RpdGxlJyxcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGl0bGVGb250U2l6ZSA9IDUwO1xyXG4gICAgICAgIHRoaXMuZm9udFNpemUgPSAzMDtcclxuICAgICAgICB0aGlzLm1pZGRsZUdhcCA9IDU7XHJcbiAgICAgICAgdGhpcy5iZ1JuZFBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmcoKTtcclxuICAgICAgICB0aGlzLmxvZ29CZyA9IHRoaXMuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZIC0gVHh0VGl0bGVIZWlnaHRHYXAsICdidG5CbHVlJykuc2V0U2NhbGUoMS44KTtcclxuICAgICAgICB0aGlzLmxvZ28gPSB0aGlzLmFkZC50ZXh0KHRoaXMubG9nb0JnLngsIHRoaXMubG9nb0JnLnksICdCbG9ja1BhbmcnKS5zZXRGb250U2l6ZSh0aGlzLnRpdGxlRm9udFNpemUpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRCZyA9IHRoaXMuYWRkLmltYWdlKHRoaXMubG9nby54LCB0aGlzLmxvZ28ueSArIChUeHRUaXRsZUhlaWdodEdhcCAqIDIpLCAndGl0bGVDb250ZXh0QmcnKTtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5hZGQudGV4dCh0aGlzLnN0YXJ0QmcueCwgdGhpcy5zdGFydEJnLnksICdzdGFydCcpO1xyXG4gICAgICAgIFt0aGlzLmxvZ28sIHRoaXMuc3RhcnRdLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGVsZSk7XHJcbiAgICAgICAgICAgIGVsZS5zZXRGb250U2l6ZShUeHRUaXRsZVNpemUpO1xyXG4gICAgICAgICAgICBlbGUuc2V0Q29sb3IoJ2JsYWNrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgW3RoaXMubG9nb0JnLCB0aGlzLnN0YXJ0QmddLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgICAgIGVsZS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubG9nby5zZXRGb250U2l6ZShUeHRUaXRsZUhlYWRTaXplKTtcclxuICAgICAgICB0aGlzLmxvZ28uc2V0Q29sb3IoJ3doaXRlJyk7XHJcbiAgICAgICAgdGhpcy5sb2dvQmcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2VhcnRocXVha2UnKTtcclxuICAgICAgICAgICAgdGhpcy5hbmltUm5kQW5nbGUoW3RoaXMubG9nb0JnLCB0aGlzLmxvZ29dKTtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uc2hha2UoMjUwLCAwLjAyLCB0cnVlKTtcclxuICAgICAgICAgICAgLy8gdG9kbzogZHJvcCBvbmUgcmFuZG9tIGJsb2NrXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGFydEJnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgICAgICBTdG9wVGl0bGUodGhpcyk7XHJcbiAgICAgICAgICAgIFN0YXJ0UGFzc2l2ZUxvYWRpbmcodGhpcyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgU3RhcnRHYW1lKHRoaXMpO1xyXG4gICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgQ3JlYXRlQ2hhbm5lbCh0aGlzLCAnJywgKHR4dCkgPT4ge1xyXG4gICAgICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSh0eHQpO1xyXG4gICAgICAgICAgICBTZXREZXB0aCh0eHQsICd0eHQnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBDcmVhdGVHYW1lQXVkaW8odGhpcywgR2FtZURhdGEpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVJbnB1dCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVFZngodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlRnVsbFNjcmVlbih0aGlzKTtcclxuICAgICAgICBDcmVhdGVTZXR0aW5nKHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVTY3JvbGwodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlR2FtZUdlc3R1cmUodGhpcyk7XHJcbiAgICAgICAgLy8gRGVidWdMb2NhbFN0b3JhZ2UodGhpcywgR2FtZURhdGEsIHsgaXRlbTogJ2Jlc3QnLCB2YWx1ZTogMCB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIFVwZGF0ZUdhbWVHZXN0dXJlKGRlbHRhKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJnKCkge1xyXG4gICAgICAgIGNvbnN0IGJnVGV4dHVyZUxpc3QgPSBbJ2JnR3JlZW4nLCAnYmdCcm93bicsICdiZ0JsdWUnXTtcclxuICAgICAgICBsZXQgYmdUZXh0dXJlUm5kSWR4ID0gR2V0Um5kSW50KDAsIGJnVGV4dHVyZUxpc3QubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLmJnID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCAwLCBWaWV3LncsIFZpZXcuaCwgYmdUZXh0dXJlTGlzdFtiZ1RleHR1cmVSbmRJZHhdKS5zZXRPcmlnaW4oMCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCZ1JuZERpcmVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IDMwMDAsIHJlcGVhdDogLTEsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnRpbGVQb3NpdGlvblggKz0gdGhpcy5iZ1JuZFBvcy54O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZy50aWxlUG9zaXRpb25ZICs9IHRoaXMuYmdSbmRQb3MueTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJnVGV4dHVyZVJuZElkeCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJnVGV4dHVyZVJuZElkeCA+PSBiZ1RleHR1cmVMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBiZ1RleHR1cmVSbmRJZHggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZy5zZXRUZXh0dXJlKGJnVGV4dHVyZUxpc3RbYmdUZXh0dXJlUm5kSWR4XSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJnUm5kRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJnUm5kRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuYmdSbmRQb3MueCA9IEdldFJuZE51bSgtMywgNCk7XHJcbiAgICAgICAgdGhpcy5iZ1JuZFBvcy55ID0gR2V0Um5kTnVtKC0zLCA0KTtcclxuICAgIH1cclxuICAgIGFuaW1SbmRBbmdsZShsaXN0KSB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgY29uc3Qgcm5kQW5nbGUgPSBHZXRSbmROdW0oLTMwLCAzMSk7XHJcbiAgICAgICAgbGlzdC5tYXAoZWxlID0+IGVsZS5zZXRBbmdsZShybmRBbmdsZSkpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNoYWtlKDUwLCAwLjAxLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUNyZWRpdENvbnRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVkaXRDb250ZXh0ID0gdGhpcy5hZGQuY29udGFpbmVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZKTtcclxuICAgICAgICBjb25zdCB5b3V0dWJlQ2hhbm5lbCA9ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9jaGFubmVsL1VDQkpuRmdJUTlZT1JUaXoxMF9NZ3lfQSc7XHJcbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnYmxhY2tTY3JlZW4nKS5zZXRBbHBoYSgwLjkpLnNldERpc3BsYXlTaXplKFZpZXcudywgVmlldy5oKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoMCwgLShUeHRUaXRsZUhlaWdodEdhcCAqIDMpLCAnQ3JlZGl0Jykuc2V0Rm9udFNpemUodGhpcy50aXRsZUZvbnRTaXplIC8gMikuc2V0T3JpZ2luKDAuNSwgMC41KTtcclxuICAgICAgICBjb25zdCBwcmVWZXJzaW9uID0gdGhpcy5hZGQudGV4dCgtdGhpcy5taWRkbGVHYXAsIC0oVHh0VGl0bGVIZWlnaHRHYXAgKiAyKSwgJ1ZlcnNpb24nKS5zZXRPcmlnaW4oMSwgMC41KS5zZXRBbHBoYSgwLjYpO1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLmFkZC50ZXh0KHRoaXMubWlkZGxlR2FwLCBwcmVWZXJzaW9uLnksIFZlcnNpb25OdW0pLnNldE9yaWdpbigwLCAwLjUpO1xyXG4gICAgICAgIGNvbnN0IHByZU5hbWUgPSB0aGlzLmFkZC50ZXh0KC10aGlzLm1pZGRsZUdhcCwgLShUeHRUaXRsZUhlaWdodEdhcCksICdNYWtlcicpLnNldE9yaWdpbigxLCAwLjUpLnNldEFscGhhKDAuNik7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuYWRkLnRleHQodGhpcy5taWRkbGVHYXAsIHByZU5hbWUueSwgJ0ZsdXggSHVudGVyJykuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICAgICAgY29uc3QgcHJlVXJsID0gdGhpcy5hZGQudGV4dCgtdGhpcy5taWRkbGVHYXAsIDAsICdNYWtpbmcgQmx1ZXByaW50Jykuc2V0T3JpZ2luKDEsIDAuNSkuc2V0QWxwaGEoMC42KTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmFkZC50ZXh0KHRoaXMubWlkZGxlR2FwLCBwcmVVcmwueSwgJ2NsaWNrIGhlcmUgZm9yIGNoYW5uZWwnKS5zZXRPcmlnaW4oMCwgMC41KTtcclxuICAgICAgICBjb25zdCBndWlkZSA9IHRoaXMuYWRkLnRleHQoMCwgdXJsLnkgKyBUeHRUaXRsZUhlaWdodEdhcCwgJ3ByZXNzIGFueXdoZXJlIHRvIGNsb3NlJykuc2V0T3JpZ2luKDAuNSwgMC41KS5zZXRBbHBoYSgwLjUpO1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5hZGQoW1xyXG4gICAgICAgICAgICBiZywgdGl0bGUsIHByZVZlcnNpb24sIHZlcnNpb24sIHByZU5hbWUsIG5hbWUsIHByZVVybCwgdXJsLCBndWlkZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIGJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgYmcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgdGhpcy5jcmVkaXRDb250ZXh0LmhpZGUoKTsgfSk7XHJcbiAgICAgICAgW3ByZVVybCwgdXJsXS5tYXAoKHVybEVsZSkgPT4ge1xyXG4gICAgICAgICAgICB1cmxFbGUuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICAgICAgdXJsRWxlLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHdpbmRvdy5vcGVuKHlvdXR1YmVDaGFubmVsLCAnX2JsYW5rJyk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5zaG93ID0gKCkgPT4geyB0aGlzLmNyZWRpdENvbnRleHQuc2V0VmlzaWJsZSh0cnVlKTsgfTtcclxuICAgICAgICB0aGlzLmNyZWRpdENvbnRleHQuaGlkZSA9ICgpID0+IHsgdGhpcy5jcmVkaXRDb250ZXh0LnNldFZpc2libGUoZmFsc2UpOyB9O1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5oaWRlKCk7XHJcbiAgICAgICAgU2V0RGVwdGgodGhpcy5jcmVkaXRDb250ZXh0LCAncG9wVXAnKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBUaXRsZVNjZW5lO1xyXG5leHBvcnQgeyBTdGFydFRpdGxlLCBTdG9wVGl0bGUgfTtcclxuIiwiaW1wb3J0IHsgR2V0QXNzZXRGaWxlcyB9IGZyb20gJ0BzcmMvc2NlbmVzL2Fzc2V0VXRpbHMnO1xyXG5pbXBvcnQgeyBDb21tb25VSSB9IGZyb20gJ0BzcmMvc2NlbmVzL2Fzc2V0VXRpbHMnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCBVSVByb3BzLCB7IENyZWF0ZVVJQnRuQW5pbSwgU2V0Q29tbW9uVUlQcm9wcyB9IGZyb20gJy4uJztcclxuaW1wb3J0IEdhbWVGb250LCB7IFNldEZvbnRTdHlsZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5jb25zdCBHYW1lUG9wVXAgPSB7XHJcbiAgICBjb21tb25MYXllcjogbnVsbCxcclxuICAgIGxpc3Q6IFtdLFxyXG4gICAgcG9wQWxwaGE6IDAuNiwgLy8gZGVmYXVsdCBhbHBoYVxyXG59O1xyXG5jb25zdCBHZXRQb3BVcEFzc2V0cyA9IChleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBsZXQgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgIHsga2V5OiAnd2hpdGVTY3JlZW4nLCB1cmw6IENvbW1vblVJICsgJ3doaXRlU2NyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ2JsYWNrU2NyZWVuJywgdXJsOiBDb21tb25VSSArICdibGFja1NjcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdleGl0QnRuJywgdXJsOiBDb21tb25VSSArICdleGl0QnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gR2V0QXNzZXRGaWxlcyhhc3NldExpc3QsIGV4Y2VwdGlvbktleXMpO1xyXG59O1xyXG5jb25zdCBJbml0UG9wVXAgPSAocG9wVXBMYXllcikgPT4ge1xyXG4gICAgcG9wVXBMYXllci5oaWRlKCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUJhc2ljUG9wVXAgPSAoc2NlbmUsIG5hbWUsIGJ0biwgcG9wKSA9PiB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbTtcclxuICAgIC8vIGJ0biBsYXllciBzZXR0aW5nXHJcbiAgICBjb25zdCBpc0JnQmxhY2sgPSAoX2EgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuaXNCZ0JsYWNrKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0cnVlO1xyXG4gICAgY29uc3QgYnRuWCA9IChfYiA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi54KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBWaWV3LmNlbnRlclg7XHJcbiAgICBjb25zdCBidG5ZID0gKF9jID0gYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLnkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFZpZXcuY2VudGVyWTtcclxuICAgIGNvbnN0IGV4aXRCdG5YID0gKF9lID0gKF9kID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV4aXRCdG4pID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC54KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBidG5YO1xyXG4gICAgY29uc3QgZXhpdEJ0blkgPSAoX2cgPSAoX2YgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZXhpdEJ0bikgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLngpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IGJ0blk7XHJcbiAgICBjb25zdCBndWlkZVR4dFggPSAoX2ogPSAoX2ggPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZ3VpZGVUeHQpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC54KSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiBWaWV3LmNlbnRlclg7XHJcbiAgICBjb25zdCBndWlkZVR4dFkgPSAoX2wgPSAoX2sgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZ3VpZGVUeHQpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay55KSAhPT0gbnVsbCAmJiBfbCAhPT0gdm9pZCAwID8gX2wgOiBHYW1lRm9udC5ndWlkZVR4dFk7XHJcbiAgICBjb25zdCBidG5MYXllciA9IHNjZW5lLmFkZC5sYXllcigpO1xyXG4gICAgYnRuTGF5ZXIubmFtZSA9IG5hbWU7XHJcbiAgICAoYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmRlcHRoKSAmJiBidG5MYXllci5zZXREZXB0aChidG4uZGVwdGgpO1xyXG4gICAgaWYgKGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5saXN0KSB7XHJcbiAgICAgICAgYnRuLmxpc3QubWFwKChidG5DaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBidG5DaGlsZC5zZXRQb3NpdGlvbihidG5YLCBidG5ZKTtcclxuICAgICAgICAgICAgYnRuTGF5ZXIuYWRkKGJ0bkNoaWxkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRCdG4gPSBzY2VuZS5hZGQudGV4dChidG5YLCBidG5ZLCBuYW1lKTtcclxuICAgICAgICBkZWZhdWx0QnRuLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIGRlZmF1bHRCdG4uc2V0Rm9udFN0eWxlKCdib2xkJyk7XHJcbiAgICAgICAgZGVmYXVsdEJ0bi5zZXRGb250RmFtaWx5KCdBcmlhbCBCbGFjaycpO1xyXG4gICAgICAgIGJ0bkxheWVyLmFkZChkZWZhdWx0QnRuKTtcclxuICAgIH1cclxuICAgIGJ0bkxheWVyLmdldENoaWxkcmVuKCkubWFwKChjaGlsZCkgPT4ge1xyXG4gICAgICAgIGNoaWxkLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgY2hpbGQub24oJ3BvaW50ZXJkb3duJywgKHB0cikgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICAoKF9hID0gYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmV2dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRvd24pICYmICgoX2IgPSBidG4gPT09IG51bGwgfHwgYnRuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidG4uZXZ0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZG93bihwdHIpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjaGlsZC5vbigncG9pbnRlcnVwJywgKHB0cikgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBwb3BVcExheWVyLnNob3coKTtcclxuICAgICAgICAgICAgKChfYSA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51cCkgJiYgKChfYiA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51cChwdHIpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjaGlsZC5vbigncG9pbnRlcm91dCcsIChwdHIpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgKChfYSA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vdXQpICYmICgoX2IgPSBidG4gPT09IG51bGwgfHwgYnRuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidG4uZXZ0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iub3V0KHB0cikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBwb3AgbGF5ZXIgc2V0dGluZ1xyXG4gICAgY29uc3QgcG9wTGF5ZXIgPSBzY2VuZS5hZGQubGF5ZXIoKTtcclxuICAgIGNvbnN0IHBvcExheWVyTGlzdCA9IFtdO1xyXG4gICAgcG9wTGF5ZXIubmFtZSA9IG5hbWU7XHJcbiAgICAocG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmRlcHRoKSAmJiBwb3BMYXllci5zZXREZXB0aChwb3AuZGVwdGgpO1xyXG4gICAgY29uc3QgcG9wTGF5ZXJCZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgaXNCZ0JsYWNrID8gJ2JsYWNrU2NyZWVuJyA6ICd3aGl0ZVNjcmVlbicpO1xyXG4gICAgcG9wTGF5ZXJCZy5zZXRBbHBoYShHYW1lUG9wVXAucG9wQWxwaGEpO1xyXG4gICAgcG9wTGF5ZXJCZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBwb3BMYXllckJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBwb3BMYXllckJnLm9uKCdwb2ludGVyZG93bicsIChwdHIpID0+IHsgdmFyIF9hLCBfYjsgKChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb3duKSAmJiAoKF9iID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRvd24ocHRyKSk7IH0pO1xyXG4gICAgcG9wTGF5ZXJCZy5vbigncG9pbnRlcm1vdmUnLCAocHRyKSA9PiB7IHZhciBfYSwgX2I7ICgoX2EgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZXZ0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubW92ZSkgJiYgKChfYiA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tb3ZlKHB0cikpOyB9KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKHBvcExheWVyQmcpO1xyXG4gICAgLy8gZXhpdCBidG4gb3B0aW9uIHNldHRpbmdcclxuICAgIGlmICgoX20gPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZXhpdEJ0bikgPT09IG51bGwgfHwgX20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tLmlzRXhpc3QpIHtcclxuICAgICAgICBjb25zdCBleGl0QnRuID0gc2NlbmUuYWRkLmltYWdlKGV4aXRCdG5YLCBleGl0QnRuWSwgJ2V4aXRCdG4nKTtcclxuICAgICAgICBleGl0QnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgZXhpdEJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3BVcExheWVyLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBTZXRDb21tb25VSVByb3BzKGV4aXRCdG4pO1xyXG4gICAgICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgZXhpdEJ0bik7XHJcbiAgICAgICAgcG9wTGF5ZXJMaXN0LnB1c2goZXhpdEJ0bik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBwb3BMYXllckJnLm9uKCdwb2ludGVydXAnLCAocHRyKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIHBvcFVwTGF5ZXIuaGlkZSgpO1xyXG4gICAgICAgICAgICAoKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVwKSAmJiAoKF9iID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVwKHB0cikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHBvcEd1aWRlVHh0ID0gc2NlbmUuYWRkLnRleHQoZ3VpZGVUeHRYLCBndWlkZVR4dFksICdwcmVzcyBhbnl3aGVyZSB0byBleGl0Jyk7XHJcbiAgICAgICAgcG9wR3VpZGVUeHQuc2V0QWxwaGEoVUlQcm9wcy5hbHBoYSk7XHJcbiAgICAgICAgU2V0Rm9udFN0eWxlKHBvcEd1aWRlVHh0KTtcclxuICAgICAgICBwb3BMYXllckxpc3QucHVzaChwb3BHdWlkZVR4dCk7XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgY2hpbGQgdG8gcG9wdXAgbGF5ZXJcclxuICAgIHBvcExheWVyTGlzdC5tYXAocG9wQ2hpbGQgPT4gcG9wTGF5ZXIuYWRkKHBvcENoaWxkKSk7XHJcbiAgICAocG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmxpc3QpICYmIHBvcC5saXN0Lm1hcChwb3BDaGlsZCA9PiBwb3BMYXllci5hZGQocG9wQ2hpbGQpKTtcclxuICAgIGNvbnN0IHBvcFVwTGF5ZXIgPSB7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBpc09wZW46IGZhbHNlLFxyXG4gICAgICAgIGJ0bjogYnRuTGF5ZXIsXHJcbiAgICAgICAgcG9wOiBwb3BMYXllcixcclxuICAgICAgICBzaG93OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcFVwTGF5ZXIuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcG9wVXBMYXllci5wb3Auc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhpZGU6ICgpID0+IHtcclxuICAgICAgICAgICAgcG9wVXBMYXllci5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgaXNBbGxQb3BMYXllckNsb3NlZCA9IEdhbWVQb3BVcC5saXN0LmZpbHRlcihwb3BVcExheWVyID0+IHBvcFVwTGF5ZXIuaXNPcGVuID09PSB0cnVlKS5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgICAgIGlzQWxsUG9wTGF5ZXJDbG9zZWQgJiYgcG9wVXBMYXllci5wb3Auc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGNoY2sgbmVzdGVkIHBvcCB1cCBsYXllclxyXG4gICAgbGV0IG5lc3RlZFBvcFVwTGF5ZXIgPSBHYW1lUG9wVXAubGlzdC5maW5kKHBvcFVwID0+IHBvcFVwLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKG5lc3RlZFBvcFVwTGF5ZXIpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYHBvcCB1cCBuYW1lIG5lc3RlZDogJHtuYW1lfSAvLyBzbyBsYXkgb3ZlciBpdGApO1xyXG4gICAgICAgIG5lc3RlZFBvcFVwTGF5ZXIgPSBwb3BVcExheWVyO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIEdhbWVQb3BVcC5saXN0LnB1c2gocG9wVXBMYXllcik7XHJcbiAgICBJbml0UG9wVXAocG9wVXBMYXllcik7XHJcbiAgICByZXR1cm4gR2FtZVBvcFVwO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lUG9wVXA7XHJcbmV4cG9ydCB7IEdldFBvcFVwQXNzZXRzLCBJbml0UG9wVXAsIENyZWF0ZUJhc2ljUG9wVXAsIH07XHJcbiIsIi8vIGltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IFRpdGxlU2NlbmUsIHsgU3RhcnRUaXRsZSB9IGZyb20gJy4vc2NlbmVzL3RpdGxlJztcclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tICcuL3NjZW5lcy9nYW1lJztcclxuaW1wb3J0IHsgR2V0RnVsbFNjcmVlbkFzc2V0cyB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpL2Z1bGxTY3JlZW4nO1xyXG5pbXBvcnQgeyBHZXRBdWRpb0Fzc2V0cyB9IGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgR2V0U25zQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvc25zJztcclxuaW1wb3J0IHsgR2V0R2FnZUFzc2V0cyB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpL2dhZ2UnO1xyXG5pbXBvcnQgeyBHZXRQb3BVcEFzc2V0cyB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpL3BvcFVwJztcclxuaW1wb3J0IHsgR2V0U2Nyb2xsQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvc2Nyb2xsJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAga2V5OiAnbWFpbicsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zY2VuZS5hZGQoJ3RpdGxlJywgVGl0bGVTY2VuZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zY2VuZS5hZGQoJ2dhbWUnLCBHYW1lU2NlbmUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBTdGFydFRpdGxlKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IEFzc2V0VXJsID0gJ2h0dHBzOi8vc2lsdmVydHJlZTc2MjIuZ2l0aHViLmlvL3dlYmdhbWVzL2Jsb2NrUGFuZy9hc3NldHMvJztcclxuZXhwb3J0IGxldCBBc3NldHMgPSB7XHJcbiAgICBkeW5hbWljOiBbXHJcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbGlzdCA9IFtcclxuICAgICAgICAgICAgICAgIC8vIHBhcnRpY2xlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFydGljbGVTcHJpdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncGFydGljbGVTcHJpdGUucG5nJyxcclxuICAgICAgICAgICAgICAgICAgICBqc29uOiBhd2FpdCByZXF1aXJlKCcuL2Fzc2V0cy9wYXJ0aWNsZXMvcGFydGljbGVTcHJpdGUuanNvbicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdGxhcydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleTEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdrZXkyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdrZXkyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAna2V5MycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAna2V5My5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleTQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5NCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdoZWFydCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnaGVhcnQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8gdWlcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmdCbHVlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdiZ0JsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdiZ0Jyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdiZ0Jyb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmdHcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmdHcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2J0bkJsdWUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0bkJsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5Ccm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuQnJvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5HcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwYW5lbEdyZWVuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEdyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncGFuZWxCbHVlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEJsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwYW5lbEJyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEJyb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJ0blVwQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0blVwQmx1ZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5VcEJyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQnRuVXBCcm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5VcEdyZWVuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQnRuVXBHcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5Eb3duQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0bkRvd25CbHVlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJ0bkRvd25Ccm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0bkRvd25Ccm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5Eb3duR3JlZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCdG5Eb3duR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8geyBrZXk6ICdibGFja1NjcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxhY2tTY3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8geyBrZXk6ICdleGl0QnRuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdleGl0QnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndGl0bGVDb250ZXh0QmcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RpdGxlQ29udGV4dEJnLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYXVkaW9PbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYXVkaW9Pbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2F1ZGlvT2ZmJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdhdWRpb09mZi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ211c2ljT24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ211c2ljT24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdtdXNpY09mZicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbXVzaWNPZmYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjb2xvckJhY2tncm91bmQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2NvbG9yQmFja2dyb3VuZC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2NvbG9ySGFuZGxlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjb2xvckhhbmRsZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2NvbG9ySGFuZGxlRG93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY29sb3JIYW5kbGVEb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJhY2snLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCYWNrLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlclJldHJ5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyUmV0cnkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzZXR0aW5nQnRuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nQnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ1BhbmVsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nUGFuZWwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzZXR0aW5nT3ZlckJ0blVwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nT3ZlckJ0blVwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ092ZXJCdG5Eb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nT3ZlckJ0bkRvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5TZXR0aW5nRG93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuU2V0dGluZ0Rvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5TZXR0aW5nVXAnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0blNldHRpbmdVcC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NjcmVlblNtYWxsZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NjcmVlblNtYWxsZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzY3JlZW5MYXJnZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NjcmVlbkxhcmdlci5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3dhcm5pbmdTaWduJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd3YXJuaW5nU2lnbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB1aSBzY2VuZVxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ1LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ2JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkNy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkOCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ4LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTAxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU2JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlNycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA3LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTgnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwOC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTAnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxMC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTExLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTEyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE1JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxNi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxNycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE3LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTgucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxOS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyMCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTIwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTIxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTIzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyNicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI2LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI3JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjcucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjgnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyOC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyOScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTMwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzAucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTMyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTMzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTM1LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3Q0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIHNoYXBlXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVCYWxsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibHVlQmFsbC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2dyZWVuQmFsbCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5CYWxsLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnJvd25CYWxsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdicm93bkJhbGwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZUJhbGwnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ29ic3RhY2xlQmFsbC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVSZWN0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibHVlUmVjdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2dyZWVuUmVjdCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5SZWN0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnJvd25SZWN0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdicm93blJlY3QucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZVJlY3QnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ29ic3RhY2xlUmVjdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVTcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2JsdWVTcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdncmVlblNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5TcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdicm93blNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnJvd25TcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZVNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb2JzdGFjbGVTcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsb2NrZWRSZWN0YW5nbGUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Jsb2NrX2xvY2tlZF9sYXJnZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2xvY2tldFNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxvY2tfbG9ja2VkX3NxdWFyZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAna2V5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIHR5cGVcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYXJyb3dMZWZ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdhcnJvd0xlZnQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsb2NrZWQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2xvY2tlZC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3BhdHRlcm4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3BhdHRlcm4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlcicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncG93ZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdyYW5kb20nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3JhbmRvbS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NpZ25hbDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NpZ25hbDEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzaWduYWwyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzaWduYWwyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2lnbmFsMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2lnbmFsMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3N0YXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3N0YXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzd2lwZUxlZnQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3N3aXBlTGVmdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RvdWNoJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0b3VjaC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyYXNoY2FuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmFzaGNhbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyYXNoY2FuT3BlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJhc2hjYW5PcGVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndW5sb2NrZWQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3VubG9ja2VkLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIGNvbW1vblxyXG4gICAgICAgICAgICAgICAgLi4uR2V0RnVsbFNjcmVlbkFzc2V0cygndG91Y2hTZngnKSxcclxuICAgICAgICAgICAgICAgIC4uLkdldFNuc0Fzc2V0cygpLFxyXG4gICAgICAgICAgICAgICAgLi4uR2V0R2FnZUFzc2V0cygneWVsbG93JyksXHJcbiAgICAgICAgICAgICAgICAuLi5HZXRQb3BVcEFzc2V0cygpLFxyXG4gICAgICAgICAgICAgICAgLi4uR2V0U2Nyb2xsQXNzZXRzKCksXHJcbiAgICAgICAgICAgICAgICAvLyBhdWRpb1xyXG4gICAgICAgICAgICAgICAgLi4uR2V0QXVkaW9Bc3NldHMoW1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZvaWNlIHNmeFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2UxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICcxLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnMi5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzMubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc0Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnNS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzYubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U3JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc3Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlOCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnOC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzkubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2UxMCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnMTAubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VHbycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ28ubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VIaWdoU2NvcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ25ld19oaWdoc2NvcmUubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VUaW1lT3ZlcicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndGltZV9vdmVyLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlR2FtZU92ZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2dhbWVfb3Zlci5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXIgc2Z4XHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdnZWFyQW5pbScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ2VhckFuaW0ubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnZWFydGhxdWFrZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZWFydGhxdWFrZS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd0b3VjaFNmeCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndG91Y2hTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnbG9hZGluZ0Jsb2NrRG9uZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbG9hZGluZ0Jsb2NrRG9uZS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdsb2FkaW5nQmxvY2tPblByb2Nlc3MnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2xvYWRpbmdCbG9ja09uUHJvY2Vzcy5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlckJsb2NrT24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Bvd2VyQmxvY2tPbi5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlckJsb2NrT2ZmJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwb3dlckJsb2NrT2ZmLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3NwYXduT2JzdGFjbGVTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NwYXduT2JzdGFjbGVTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndGltZUluY3JlYXNlU2Z4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0aW1lSW5jcmVhc2VTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnc2NvcmVTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Njb3JlU2Z4Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3dhcm5pbmdTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3dhcm5pbmdTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgXSwgW1xyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnZ2FtZUJnbScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxvY2twYW5nYmdtLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcbiAgICBdLFxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzNRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///550\n")},442:g=>{"use strict";g.exports=JSON.parse('{"frames":{"blue":{"frame":{"x":2,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"green":{"frame":{"x":132,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"red":{"frame":{"x":262,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"white":{"frame":{"x":392,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"yellow":{"frame":{"x":522,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}}},"meta":{"app":"http://www.codeandweb.com/texturepacker","version":"1.0","image":"flares.png","format":"RGBA8888","size":{"w":652,"h":132},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:f2781d89823d5a67fc31381af364b421:da82646b19b2f0c08684086824b1e581:71625947cf221c10549b852c13ffedc7$"}}')}}]);