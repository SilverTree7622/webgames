(self.webpackChunkplayable_ad_test=self.webpackChunkplayable_ad_test||[]).push([[530],{530:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Assets\": () => (/* binding */ Assets),\n  \"default\": () => (/* binding */ MainScene)\n});\n\n// EXTERNAL MODULE: ./src/userSetting.ts\nvar userSetting = __webpack_require__(453);\n// EXTERNAL MODULE: ./src/utils/math.ts\nvar math = __webpack_require__(774);\n;// CONCATENATED MODULE: ./src/scenes/passiveLoading.ts\n\r\nconst PassiveLoading = {\r\n    scene: null,\r\n    isLoading: false,\r\n    option: {},\r\n};\r\nconst StartPassiveLoading = (scene, option) => {\r\n    PassiveLoading.isLoading = true;\r\n    // option\r\n    if (option)\r\n        PassiveLoading.option = Object.assign({}, option);\r\n    // chck is exist if not then add to scene\r\n    const passiveLoadingInstance = scene.scene.get('passiveLoading');\r\n    if (!passiveLoadingInstance)\r\n        scene.game.scene.add('passiveLoading', PassiveLoadingScene, false);\r\n    // launch loading scene\r\n    scene.scene.launch('passiveLoading');\r\n    PassiveLoading.scene = scene.scene.get('passiveLoading');\r\n};\r\nconst StopPassiveLoading = async () => {\r\n    if (!PassiveLoading.scene || !PassiveLoading.isLoading) {\r\n        console.warn('passive loading is not exist:', PassiveLoading.scene);\r\n        PassiveLoading.scene = null;\r\n        return;\r\n    }\r\n    if (PassiveLoading.option) {\r\n        PassiveLoading.option.finishEvt && PassiveLoading.option.finishEvt(PassiveLoading.scene);\r\n    }\r\n    PassiveLoading.isLoading = false;\r\n    await new Promise(res => res(PassiveLoading.scene.scene.stop('passiveLoading')));\r\n    PassiveLoading.scene.loadingEndSec = await new Promise(res => res(performance.now()));\r\n    await new Promise((res) => {\r\n        res(console.log(`%c Passive Loading Time: ${((PassiveLoading.scene.loadingEndSec - PassiveLoading.scene.loadingStartSec) / 1000).toFixed(4)} sec `, 'color: black; background: white; fonWeight: bold;'));\r\n    });\r\n};\r\nclass PassiveLoadingScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'passiveLoading',\r\n            active: false\r\n        });\r\n        this.loadingStartSec = 0;\r\n        this.loadingEndSec = 0;\r\n        this.pointFirst = 0;\r\n        this.pointSecond = 0;\r\n        this.gapFirst = 0.2;\r\n        this.gapSecond = 0.4;\r\n    }\r\n    init() {\r\n        this.loadingStartSec = performance.now();\r\n    }\r\n    create() {\r\n        this.loadingGraphics = this.add.graphics();\r\n    }\r\n    update(time, delta) {\r\n        this.updateRotateLogo(delta);\r\n    }\r\n    updateRotateLogo(delta) {\r\n        this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        this.pointSecond = (this.pointSecond + (delta * this.gapSecond)) % 360;\r\n        // console.log('this.pointFirst, this.pointSecond: ', this.pointFirst, this.pointSecond);\r\n        // this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        // this.pointSecond = (this.pointSecond + (delta * this.gapSecond));\r\n        // let showClockwise = this.pointFirst > this.pointSecond ? true : false;\r\n        // let startAngle = this.pointFirst > this.pointSecond ? this.pointFirst : this.pointSecond;\r\n        // let endAngle = this.pointFirst > this.pointSecond ? this.pointSecond : this.pointFirst;\r\n        this.loadingGraphics.clear();\r\n        //  Without this the arc will appear closed when stroked\r\n        this.loadingGraphics.lineStyle(10, 0xff00ff, 2);\r\n        this.loadingGraphics.beginPath();\r\n        this.loadingGraphics.arc(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 60, Phaser.Math.DegToRad(this.pointFirst), Phaser.Math.DegToRad(this.pointSecond), true);\r\n        this.loadingGraphics.strokePath();\r\n    }\r\n}\r\n/* harmony default export */ const passiveLoading = ((/* unused pure expression or super */ null && (PassiveLoading)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/font/index.ts\n\r\nconst font_TxtTitleHeadSize = 50;\r\nconst TxtTitleSize = 30;\r\nconst font_TxtTitleHeightGap = 60;\r\nconst TxtOverHeadSize = userSetting/* View.w */.G7.w / 4;\r\nconst TxtMargin = 26;\r\nconst TxtPadding = 8;\r\nconst TxtAlpha = 0.9;\r\nconst TxtSize = 20;\r\nconst TxtFamily = 'Arial Black';\r\nconst TxtBackgroundColor = '#242424';\r\nconst font_ContextMarginW = userSetting/* View.w */.G7.w / 12;\r\nconst font_ContextMarginH = userSetting/* View.h */.G7.h / 12;\r\nconst font_SetFont2CommonContextStyle = (text) => {\r\n    text.setOrigin(0.5, 0.5);\r\n    text.setFontSize(TxtSize);\r\n    text.setFontFamily(TxtFamily);\r\n    return text;\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/depth/index.ts\nconst Depth = {\r\n    tree: 90,\r\n    block: 100,\r\n    cloud: 120,\r\n    mist: 120,\r\n    wall: 140,\r\n    txt: 150,\r\n    popUp: 400,\r\n    setting: 500,\r\n    warning: 600,\r\n    gameOver: 1000,\r\n    particle: 1100,\r\n    newBest: 1200,\r\n    highest: 1500,\r\n    fullScreen: 1600,\r\n};\r\nconst depth_SetDepth = (targetObj, type) => {\r\n    if (!Depth[type]) {\r\n        console.warn('SetDepth: type is not found in the depth list:', targetObj, type);\r\n        console.log('targetObj, type: ', targetObj, type);\r\n        return;\r\n    }\r\n    if (targetObj.setDepth)\r\n        targetObj.setDepth(Depth[type]);\r\n    else\r\n        console.warn('SetDepth: targetObj is not Phaser.GameObjects');\r\n};\r\n/* harmony default export */ const depth = ((/* unused pure expression or super */ null && (Depth)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/basic.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\nclass BasicBlock extends Phaser.GameObjects.Container {\r\n    // public testObj;\r\n    constructor(scene) {\r\n        super(scene, 0, 0);\r\n        this.isEvtCreated = false;\r\n        this.typeName = '';\r\n        this.spawnChance = 0;\r\n        this.score = 0;\r\n        this.bData = {};\r\n        this.isOnScreen = false;\r\n        this.initPrpoerties();\r\n        this.initChildren(scene);\r\n        this.initPhysics(scene);\r\n        depth_SetDepth(this, 'block');\r\n        scene.add.existing(this);\r\n    }\r\n    initPrpoerties() {\r\n        this.id = `${new Date().getTime()}-${Phaser.Math.RND.uuid()}`;\r\n    }\r\n    initChildren(scene) {\r\n        this.shapeImg = scene.add.image(0, 0, 'ball');\r\n        this.typeTxt = scene.add.text(0, 0, '');\r\n        this.typeImg = scene.add.image(0, 0, '');\r\n        font_SetFont2CommonContextStyle(this.typeTxt);\r\n        this.initTypeTxt();\r\n        this.add([this.shapeImg, this.typeTxt, this.typeImg]);\r\n        // this.testObj = scene.matter.add.image(View.centerX, 0, 'ball');\r\n        // this.testObj.setCircle(40, 40);\r\n        // this.testObj.setBounce(1);\r\n        // console.log('this.testObj: ', this.testObj);\r\n    }\r\n    initPhysics(scene) {\r\n        // number is meaningless just default value\r\n        // for add container to matter game object\r\n        this.setSize(100, 100);\r\n        // add to matter game object\r\n        this.physicsCon = scene.matter.add.gameObject(this);\r\n        this.physicsCon.setFriction(0.005);\r\n        this.physicsCon.setBounce(1);\r\n        this.physicsCon.setSensor(true);\r\n    }\r\n    getBody() { return this.body; }\r\n    getShape() { return this.shape; }\r\n    addShape(shape) { this.shape = Object.assign(Object.assign({}, this.shape), shape); return this; }\r\n    setShape(shape) { this.shape = shape; return this; }\r\n    getShapeName() { return this.shapeName; }\r\n    setShapeName(name) { this.shapeName = name; return this; }\r\n    getShapeImg() { return this.shapeImg; }\r\n    getScore() { return this.score; }\r\n    setScore(score) { this.score = score; return this; }\r\n    addScore(score) { this.score += score; return this; }\r\n    getTimeIncrease() { return this.timeIncrease; }\r\n    setTimeIncrease(data) {\r\n        this.timeIncrease = {\r\n            chance: data.chance,\r\n            value: data.value\r\n        };\r\n        return this;\r\n    }\r\n    getSpawnRndChance() { return this.spawnChance; }\r\n    setSpawnRndChance(chanceNum) { return this.spawnChance = chanceNum; }\r\n    getTypeImg() { return this.typeImg; }\r\n    setTypeImg(typeTexture) {\r\n        if (!typeTexture)\r\n            this.typeImg.setVisible(false);\r\n        this.typeImg.setTexture(typeTexture);\r\n        return this;\r\n    }\r\n    setTypeImgDisplaySize(width, height) { this.typeImg.setDisplaySize(width, height); return this; }\r\n    initTypeTxt() {\r\n        this.setTypeTxtVisible(false);\r\n        this.setTypeTxt('');\r\n        this.typeTxt.setFontSize(50);\r\n        return this;\r\n    }\r\n    getTypeTxt() { return this.typeTxt; }\r\n    setTypeTxt(text) {\r\n        if (!this.typeTxt.visible)\r\n            this.typeTxt.setVisible(true);\r\n        if (!text)\r\n            this.typeTxt.setVisible(false);\r\n        this.typeTxt.setText(text);\r\n        return this;\r\n    }\r\n    setTypeTxtVisible(visible) { this.typeTxt.setVisible(visible); return this; }\r\n    getTypeName() { return this.typeName; }\r\n    setTypeName(typeName) { return this.typeName = typeName; }\r\n    getBlockData() { return this.bData; }\r\n    setBlockData(data) {\r\n        this.bData = {};\r\n        this.bData = data;\r\n        return this;\r\n    }\r\n    addBlockData(data) { this.bData = Object.assign(Object.assign({}, this.bData), data); }\r\n    getPhysicsCon() { return this.physicsCon; }\r\n    getWidth() { return this.typeImg.width; }\r\n    getHeight() { return this.typeImg.height; }\r\n}\r\nconst SpawnBlock = (block) => {\r\n    SetBlockInputSetting(block);\r\n    block.setPosition(system.getRndSpawnX(), system.spawnY);\r\n    block.setAngle(system.getRndAngle());\r\n    block.setVisible(true);\r\n    block.isOnScreen = true;\r\n    block.getPhysicsCon().setIgnoreGravity(false);\r\n    block.getPhysicsCon().setSensor(false);\r\n    block.getBlockData().spawn && block.getBlockData().spawn();\r\n    return block;\r\n};\r\nconst SetBlockInputSetting = (block) => {\r\n    block.removeAllListeners();\r\n    block.setInteractive();\r\n    block.scene.input.setDraggable(block, true);\r\n    block.on('pointerdown', (ptr) => {\r\n        if (block.getBlockData().ptrDown)\r\n            block.getBlockData().ptrDown(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setStatic(true);\r\n    });\r\n    block.on('drag', (ptr) => {\r\n        if (block.getBlockData().drag)\r\n            block.getBlockData().drag(block, ptr);\r\n    });\r\n    block.on('pointerup', (ptr) => {\r\n        if (block.getBlockData().ptrUp)\r\n            block.getBlockData().ptrUp(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    block.on('pointerout', () => {\r\n        if (block.getBlockData().ptrOut)\r\n            block.getBlockData().ptrOut(block);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    return block;\r\n};\r\nconst SetBlockType2InitBasic = (block) => {\r\n    block.setScore(0);\r\n    block.setTimeIncrease({ chance: 0, value: 0 });\r\n    block.getTypeImg().setVisible(true);\r\n    block.initTypeTxt();\r\n    block.setBlockData({});\r\n    block.setAlpha(1);\r\n    try {\r\n        block.disableInteractive();\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n    try {\r\n        block.scene.input.setDraggable(block, false);\r\n    }\r\n    catch (e) { }\r\n    return block;\r\n};\r\nconst DeathBlock = (block) => {\r\n    if (block.getBlockData().death)\r\n        block.getBlockData().death(() => { DisableBlock(block); });\r\n    else\r\n        DisableBlock(block);\r\n    return block;\r\n};\r\nconst DisableBlock = (block) => {\r\n    if (block.getBody()) {\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setSensor(true);\r\n    }\r\n    block.isOnScreen = false;\r\n    block.setVisible(false);\r\n    SetBlockType2InitBasic(block);\r\n    return block;\r\n};\r\nconst UpdateBlock = (block, time, delta) => {\r\n    if (!block || !block.getBlockData())\r\n        return;\r\n    if (block.getBlockData().update)\r\n        block.getBlockData().update(time, delta);\r\n    return block;\r\n};\r\n/* harmony default export */ const basic = (BasicBlock);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/ad.ts\nconst SetBlock2Ad = (block) => {\r\n    let bData = {\r\n        ptrDown: (block) => {\r\n        },\r\n        ptrUp: (block) => {\r\n        },\r\n        drag: (block) => {\r\n        },\r\n        dragEnd: (block) => {\r\n        },\r\n    };\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const ad = (SetBlock2Ad);\r\n\n;// CONCATENATED MODULE: ./src/utils/storage.ts\n// compare item is in the data then \r\nconst CompareCallback = (data, item) => {\r\n    const isItemExistInData = data[item];\r\n    if (isItemExistInData !== undefined || null)\r\n        return true;\r\n    else {\r\n        console.warn('item is not matched to actual data type:', item, data);\r\n        return false;\r\n    }\r\n};\r\nconst GameName = document.title; // get game title name\r\nconst GetLocalStorageData = (defaultData) => {\r\n    const data = window.localStorage.getItem(GameName);\r\n    if (data)\r\n        return JSON.parse(data);\r\n    else {\r\n        window.localStorage.setItem(GameName, JSON.stringify(defaultData));\r\n        return defaultData;\r\n    }\r\n};\r\nconst GetLocalStorageItem = (defaultData, item, exceptionKeys) => {\r\n    const gameData = GetLocalStorageData(defaultData);\r\n    let list = (typeof item === 'string' ? [item] : [...item]).map((ele) => {\r\n        let returnItem = gameData[ele];\r\n        if (CompareCallback(gameData, ele))\r\n            return returnItem;\r\n    });\r\n    // chck is there undefined data from list then set to default data\r\n    if (list.filter(child => child === undefined).length > 0) {\r\n        ClearGameLocalStorageData();\r\n        if (exceptionKeys) {\r\n            (typeof exceptionKeys === 'string' ? [exceptionKeys] : [...exceptionKeys]).map((exceptionItem) => {\r\n                if (gameData[exceptionItem] === undefined || gameData[exceptionItem] === null)\r\n                    return;\r\n                SetLocalStorageItem(defaultData, exceptionItem, gameData[exceptionItem]);\r\n            });\r\n        }\r\n    }\r\n    // return single item\r\n    if (list.length === 1)\r\n        return list[0];\r\n    // return item array\r\n    else if (item.length === list.length)\r\n        return list;\r\n};\r\nconst SetLocalStorageItem = (defaultData, item, value) => {\r\n    let gameData = GetLocalStorageData(defaultData);\r\n    if (gameData)\r\n        gameData[item] = value;\r\n    window.localStorage.setItem(GameName, JSON.stringify(gameData));\r\n    // console.log('gameData, best: ', gameData, gameData.best);\r\n    return gameData;\r\n};\r\nconst RemoveLocalStorageItem = (defaultData, item) => {\r\n    SetLocalStorageItem(defaultData, item, null);\r\n};\r\nconst ClearGameLocalStorageData = () => {\r\n    window.localStorage.removeItem(GameName);\r\n};\r\nconst ClearAllLocalStorageItem = () => {\r\n    window.localStorage.clear();\r\n};\r\nconst DebugLocalStorage = (scene, defaultData, items) => {\r\n    scene.input.mouse.disableContextMenu();\r\n    scene.input.on('pointerdown', function (pointer) {\r\n        if (pointer.rightButtonDown()) {\r\n            console.log(GetLocalStorageData(defaultData));\r\n            return;\r\n        }\r\n        if (pointer.middleButtonDown()) {\r\n            if (items instanceof Array)\r\n                items.map(ele => SetLocalStorageItem(defaultData, ele.item, ele.value));\r\n            else\r\n                SetLocalStorageItem(defaultData, items.item, items.value);\r\n            SetLocalStorageItem(defaultData, 'best', 0);\r\n            return;\r\n        }\r\n    });\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/assetUtils.ts\nconst CommonRootUrl = 'https://silvertree7622.github.io/webgames/';\r\nconst CommonAssets = CommonRootUrl + 'assets/';\r\nconst CommonSfx = CommonAssets + 'audio/sfx/';\r\nconst CommonUI = CommonAssets + 'ui/';\r\nconst CommonAudio = CommonUI + 'audio/';\r\nconst CommonFullScreen = CommonUI + 'fullScreen/';\r\nconst CommonScroll = CommonUI + 'scroll/';\r\nconst CommonGage = CommonUI + 'gage/';\r\nconst CommonEfx = CommonUI + 'efx/';\r\nconst CommonSns = CommonRootUrl + 'sns/';\r\n/** get common asset file with exception key (when if u worry about nested things)\r\n * @param assetList common custom assest list compose of the key, url, etc\r\n * @param exceptionKeys exception key which u worry about the nested things\r\n * @returns filtered asset list\r\n */\r\nconst GetAssetFiles = (assetList, exceptionKeys) => {\r\n    if (!exceptionKeys)\r\n        return assetList;\r\n    let filteredList;\r\n    // one key to except from asset list\r\n    if (typeof exceptionKeys === 'string') {\r\n        filteredList = assetList.filter(asset => asset.key !== exceptionKeys);\r\n    }\r\n    // several key list to except from asset list\r\n    else {\r\n        filteredList = assetList.filter((asset) => {\r\n            return exceptionKeys.indexOf(asset.key) < 0;\r\n        });\r\n    }\r\n    return filteredList;\r\n};\r\n/* harmony default export */ const assetUtils = ((/* unused pure expression or super */ null && (CommonRootUrl)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/audio/index.ts\n\r\n\r\nconst audio_GameAudio = {\r\n    wholeGameData: {},\r\n    bgmList: [],\r\n    sfxList: [],\r\n    bgmKeyList: [],\r\n    sfxKeyList: [],\r\n    isAllMute: false,\r\n    isBgmMute: false,\r\n    isSfxMute: false,\r\n    allVolume: 0.5,\r\n    bgmVolume: 0.5,\r\n    sfxVolume: 0.5,\r\n    setAllMute: function (isMute) {\r\n        this.isAllMute = isMute;\r\n        this.setBgmMute(isMute);\r\n        this.setSfxMute(isMute);\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'isAllMute', isMute);\r\n        return this;\r\n    },\r\n    setBgmMute: function (isMute) {\r\n        this.isBgmMute = isMute;\r\n        this.bgmList.forEach(bgm => bgm.setMute(isMute));\r\n        if (isMute)\r\n            this.bgmKeyList.map(key => this.pauseBgm(key));\r\n        else\r\n            this.bgmKeyList.map(key => this.resumeBgm(key));\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'isBgmMute', isMute);\r\n        // if (this.isBgmMute === this.isSfxMute) this.setSfxMute(this.isBgmMute);\r\n        return this;\r\n    },\r\n    setSfxMute: function (isMute) {\r\n        this.isSfxMute = isMute;\r\n        this.sfxList.forEach(sfx => sfx.setMute(isMute));\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'isSfxMute', isMute);\r\n        // if (this.isBgmMute === this.isSfxMute) this.setAllMute(this.isBgmMute);\r\n        return this;\r\n    },\r\n    setAllVolume: function (volume) {\r\n        this.allVolume = volume;\r\n        this.setBgmVolume(volume);\r\n        this.setSfxVolume(volume);\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'allVolume', volume);\r\n        return this;\r\n    },\r\n    setBgmVolume: function (volume) {\r\n        this.bgmVolume = volume;\r\n        this.bgmList.forEach(bgm => bgm.setVolume(volume));\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'bgmVolume', volume);\r\n        return this;\r\n    },\r\n    setSfxVolume: function (volume) {\r\n        this.sfxVolume = volume;\r\n        this.sfxList.forEach(sfx => sfx.setVolume(volume));\r\n        SetLocalStorageItem(audio_GameAudio.wholeGameData, 'sfxVolume', volume);\r\n        return this;\r\n    },\r\n    playBgm: function (key) {\r\n        const playBgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (playBgm)\r\n            playBgm.play();\r\n        else\r\n            console.warn(`[Audio] playBgm: ${key} not found`);\r\n        return this;\r\n    },\r\n    pauseBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.pause();\r\n        return this;\r\n    },\r\n    resumeBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.resume();\r\n        return this;\r\n    },\r\n    stopBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.stop();\r\n        return this;\r\n    },\r\n    playSfx: function (key) {\r\n        const playSfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (playSfx)\r\n            playSfx.play();\r\n        else\r\n            console.warn(`[Audio] playSfx: ${key} not found`);\r\n        return this;\r\n    },\r\n    stopSfx: function (key) {\r\n        const sfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (sfx)\r\n            sfx.stop();\r\n        return this;\r\n    },\r\n    // play & stop control for instance any sfx\r\n    playSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.play({\r\n            mute: GetLocalStorageItem(audio_GameAudio.wholeGameData, 'isSfxMute'),\r\n            volume: GetLocalStorageItem(audio_GameAudio.wholeGameData, 'sfxVolume'),\r\n            loop: true,\r\n        });\r\n        return this;\r\n    },\r\n    stopSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.stop();\r\n        instance.removeAllListeners();\r\n        instance.destroy();\r\n        return this;\r\n    },\r\n};\r\nconst GameAudioData = {\r\n    allVolume: 0.5,\r\n    isAllMute: false,\r\n    bgmVolume: 0.5,\r\n    isBgmMute: false,\r\n    sfxVolume: 0.5,\r\n    isSfxMute: false,\r\n};\r\nconst GetGameAudioAssets = (sfxKeyList, bgmKeyList, exceptionKeys) => {\r\n    audio_GameAudio.sfxKeyList = GetAssetFiles(sfxKeyList, exceptionKeys).map(asset => asset.key);\r\n    if (bgmKeyList)\r\n        audio_GameAudio.bgmKeyList = GetAssetFiles(bgmKeyList, exceptionKeys).map(asset => asset.key);\r\n    else\r\n        audio_GameAudio.bgmKeyList = [];\r\n    return [\r\n        ...sfxKeyList,\r\n        ...bgmKeyList,\r\n    ];\r\n};\r\nconst InitGameAudio = () => {\r\n    // ClearGameLocalStorageData();\r\n    const [allVolume, isAllMute, bgmVolume, isBgmMute, sfxVolume, isSfxMute] = GetLocalStorageItem(audio_GameAudio.wholeGameData, [\r\n        'allVolume',\r\n        'isAllMute',\r\n        'bgmVolume',\r\n        'isBgmMute',\r\n        'sfxVolume',\r\n        'isSfxMute',\r\n    ], 'best');\r\n    audio_GameAudio.setAllVolume(allVolume);\r\n    audio_GameAudio.setAllMute(isAllMute);\r\n    audio_GameAudio.setBgmVolume(bgmVolume);\r\n    audio_GameAudio.setBgmMute(isBgmMute);\r\n    audio_GameAudio.setSfxVolume(sfxVolume);\r\n    audio_GameAudio.setSfxMute(isSfxMute);\r\n};\r\nconst CreateGameAudio = (scene, gameData) => {\r\n    audio_GameAudio.wholeGameData = gameData;\r\n    audio_GameAudio.bgmList = audio_GameAudio.bgmKeyList && audio_GameAudio.bgmKeyList.map(key => scene.sound.add(key, { loop: true }));\r\n    audio_GameAudio.sfxList = audio_GameAudio.sfxKeyList && audio_GameAudio.sfxKeyList.map(key => scene.sound.add(key));\r\n    InitGameAudio();\r\n};\r\n/* harmony default export */ const audio = (audio_GameAudio);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/input/index.ts\nconst Input = {\r\n    type: '',\r\n    typeHistory: [],\r\n    initPos: { x: 0, y: 0 },\r\n    isHoldingDown: false,\r\n    holdDuration: 0,\r\n    holdMaxDuration: 1000,\r\n    startHold: function () { this.isHoldingDown = true; return this; },\r\n    resetHold: function () {\r\n        this.isHoldingDown = false;\r\n        this.initPos = { x: 0, y: 0 };\r\n        this.holdDuration = 0;\r\n        this.setType('');\r\n        return this;\r\n    },\r\n    getIsHoldingDown: function () { return this.isHoldingDown; },\r\n    getHoldDuration: function () { return this.holdDuration; },\r\n    setHoldDuration: function (duration) { this.holdDuration = duration; return this; },\r\n    setInitPos: function (x, y) { this.initPos = { x: x, y: y }; return this; },\r\n    chckIsHold: function () {\r\n        if (this.holdDuration >= this.holdMaxDuration)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    getType: function () { return this.type; },\r\n    setType: function (type) { this.type = type; return this; },\r\n    initTypeHistory: function () { this.typeHistory = []; },\r\n    getTypeHistory: function () { return this.typeHistory; },\r\n    getLastestInputType: function () { return this.typeHistory[this.typeHistory.length - 1]; },\r\n    push2TypeHistory: function (type) {\r\n        this.typeHistory.push(type);\r\n        return this.typeHistory;\r\n    }\r\n};\r\nconst InitInput = () => {\r\n    Input.resetHold();\r\n    Input.initTypeHistory();\r\n};\r\nconst CreateInput = (scene) => {\r\n    scene.input.on('pointerdown', () => {\r\n        Input.startHold();\r\n    });\r\n    InitInput();\r\n};\r\nconst UpdateInput = (delta) => {\r\n    if (Input.getIsHoldingDown())\r\n        Input.setHoldDuration(Input.getHoldDuration() + delta);\r\n};\r\nconst InputPtrDown = (ptr) => {\r\n    Input.setInitPos(ptr.x, ptr.y);\r\n};\r\nconst InputPtrUp = (ptr) => {\r\n    return SetInputType(Input.initPos, ptr);\r\n};\r\nconst InputDrag = (ptr) => {\r\n};\r\nconst InputPtrOut = () => {\r\n    Input.resetHold();\r\n};\r\nconst ChckSwipeDirection = (initPos, ptr) => {\r\n    const x = ptr.x - initPos.x;\r\n    const y = ptr.y - initPos.y;\r\n    if (Math.abs(x) > Math.abs(y)) {\r\n        if (x > 0)\r\n            Input.setType('swipeRight');\r\n        else\r\n            Input.setType('swipeLeft');\r\n    }\r\n    else {\r\n        if (y < 0)\r\n            Input.setType('swipeUp');\r\n        else\r\n            Input.setType('swipeDown');\r\n    }\r\n};\r\n// set comfy touch to not judge as swipe when use with actual finger\r\nconst ComfyGapTouchValue = 15;\r\nconst SetInputType = (initPos, ptr) => {\r\n    // swipe motion\r\n    const chckPosX = Math.abs(initPos.x - ptr.x) > ComfyGapTouchValue;\r\n    const chckPosY = Math.abs(initPos.y - ptr.y) > ComfyGapTouchValue;\r\n    if (chckPosX || chckPosY)\r\n        ChckSwipeDirection(initPos, ptr);\r\n    // hold or touch\r\n    else {\r\n        if (Input.chckIsHold()) {\r\n            Input.setType('hold');\r\n        }\r\n        else\r\n            Input.setType('touch');\r\n    }\r\n    Input.push2TypeHistory(Input.getType());\r\n    Input.resetHold();\r\n    return Input.getLastestInputType();\r\n};\r\n/* harmony default export */ const input = ((/* unused pure expression or super */ null && (Input)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/power.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Power = (block) => {\r\n    const { scene } = block;\r\n    const rndDownDurationMax = (0,math/* GetRndNum */.hg)(0.5, 1.5);\r\n    const initPtr = (bData, block) => {\r\n        bData.isPtrDown = false;\r\n        bData.downDuration = 0;\r\n        block.setAlpha(1);\r\n    };\r\n    let bData = {\r\n        isPtrDown: false,\r\n        isComplete: false,\r\n        downDuration: 0,\r\n        downDurationMax: Math.floor(rndDownDurationMax * 1000),\r\n        ptrDown: function (block, ptr) {\r\n            InputPtrDown(ptr);\r\n            if (this.isPtrDown) {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isPtrDown = true;\r\n            audio.playSfx('powerBlockOn');\r\n            block.setAlpha(0.5);\r\n            const twList = [];\r\n            twList.push({\r\n                from: 0, to: this.downDurationMax, duration: this.downDurationMax,\r\n                onUpdate: (tw) => {\r\n                    // if keep press power btn\r\n                    if (this.isPtrDown)\r\n                        this.downDuration = tw.getValue();\r\n                    // if release power btn before done\r\n                    else {\r\n                        initPtr(this, block);\r\n                        tw.remove();\r\n                    }\r\n                },\r\n                onComplete: (tw) => {\r\n                    // done power btn play sfx\r\n                    if (!this.isPtrDown) {\r\n                        twList.shift();\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    initPtr(this, block);\r\n                    this.isComplete = true;\r\n                    audio.playSfx('powerBlockOff');\r\n                    scene.tweens.addCounter(twList.shift());\r\n                }\r\n            });\r\n            twList.push({\r\n                from: 1, to: 1.1, duration: 250, yoyo: true,\r\n                onUpdate: (tw, data) => {\r\n                    block.setScale(data.value);\r\n                },\r\n                onComplete: () => {\r\n                    block.setScale(1);\r\n                    audio.playSfx('touchSfx');\r\n                    ClearBlock(block, block.getScore() * this.downDurationMax / 1000);\r\n                }\r\n            });\r\n            scene.tweens.addCounter(twList.shift());\r\n        },\r\n        ptrUp: function (block, ptr) {\r\n            block.setAlpha(1);\r\n            if (this.isComplete)\r\n                return;\r\n            if (!this.isPtrDown || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            // chck is keep press until done\r\n            initPtr(this, block);\r\n        },\r\n        ptrOut: function () {\r\n            InputPtrOut();\r\n            initPtr(this, block);\r\n        },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const power = (SetBlock2Power);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/loading.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Loading = (block) => {\r\n    block.setTypeTxt('%');\r\n    block.getTypeTxt().setFontSize(50);\r\n    let bData = {\r\n        isLoading: false,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (this.isLoading || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isLoading = true;\r\n            const rndDuration = (0,math/* GetRndInt */.dZ)(1, 4);\r\n            const processSfx = block.scene.sound.add('loadingBlockOnProcess');\r\n            audio.playSfxInstanceLoop(processSfx);\r\n            block.scene.tweens.addCounter({\r\n                from: 0, to: 100, duration: rndDuration * 1000,\r\n                onUpdate: (tw, data) => {\r\n                    const percentage = data.value.toFixed(0);\r\n                    block.setTypeTxt(percentage + '%');\r\n                },\r\n                onComplete: () => {\r\n                    audio.stopSfxInstanceLoop(processSfx);\r\n                    audio.playSfx('loadingBlockDone');\r\n                    this.isLoading = false;\r\n                    block.setTypeTxt('100%');\r\n                    setTimeout(() => {\r\n                        audio.playSfx('touchSfx');\r\n                        ClearBlock(block, block.getScore() * rndDuration);\r\n                    }, 1000);\r\n                }\r\n            });\r\n        },\r\n        ptrOut: function () { InputPtrOut(); },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const loading = (SetBlock2Loading);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/touch.ts\n\r\n\r\n\r\n\r\nconst SetBlock2Touch = (block) => {\r\n    const rndTouchCnt = (0,math/* GetRndInt */.dZ)(2, 5);\r\n    const disableTouchDelayTime = 240;\r\n    let bData = {\r\n        touchCnt: 0,\r\n        maxTouchCnt: rndTouchCnt,\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.touchCnt++;\r\n            if (this.touchCnt >= this.maxTouchCnt) {\r\n                this.touchCnt = 0;\r\n                ClearBlock(block, block.getScore() * this.maxTouchCnt);\r\n            }\r\n            else {\r\n                // disable click, then able after delay\r\n                this.isAble2Touch = false;\r\n                block.scene.tweens.addCounter({\r\n                    from: 1, to: 1.1, duration: disableTouchDelayTime, yoyo: true, ease: 'Bounce',\r\n                    onUpdate: (tw, data) => {\r\n                        block.setScale(data.value);\r\n                    },\r\n                    onComplete: () => {\r\n                        block.setScale(1);\r\n                        this.isAble2Touch = true;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const touch = (SetBlock2Touch);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/obstacle.ts\n\r\n\r\nconst ObstacleTextureList = (/* unused pure expression or super */ null && (['obstacleBall', 'obstacleRect', 'obstacleSquare']));\r\nconst SetObstacle = (block) => {\r\n    let bData = {\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            const inputType = InputPtrUp(ptr);\r\n            if (inputType !== 'touch')\r\n                return;\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.isAble2Touch = false;\r\n            AddObstacleBlock(block);\r\n            setTimeout(() => { this.isAble2Touch = true; }, 1000);\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.addBlockData(bData);\r\n    // set shape obstacle texture\r\n    const name = block.getShapeName();\r\n    const capitalShape = name[0].toUpperCase() + name.slice(1);\r\n    const obstacleShape = 'obstacle' + capitalShape;\r\n    block.addShape({ score: 0, imgTexture: obstacleShape });\r\n    block.getShapeImg().setTexture(obstacleShape);\r\n    return block;\r\n};\r\n/* harmony default export */ const obstacle = (SetObstacle);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CommonSize = userSetting/* View.calcRatio */.G7.calcRatio(100);\r\nconst BlockUniqueProperties = [\r\n    {\r\n        typeName: '',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { SetBlockType2InitBasic(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'obstacle',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { obstacle(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'ad',\r\n        // spawnChance: 1,\r\n        spawnChance: 0,\r\n        score: 90,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 100,\r\n        timeIncreaseMin: 3 * 1000,\r\n        timeIncreaseMax: 5 * 1000,\r\n        setFunc: (block) => { return ad(block); }\r\n    },\r\n    {\r\n        typeName: 'power',\r\n        spawnChance: 1,\r\n        score: 60,\r\n        iconTexture: 'power',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 50,\r\n        timeIncreaseMin: 1 * 1000,\r\n        timeIncreaseMax: 2 * 1000,\r\n        setFunc: (block) => { return power(block); }\r\n    },\r\n    {\r\n        typeName: 'loading',\r\n        spawnChance: 1,\r\n        score: 5,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 0.5 * 1000,\r\n        timeIncreaseMax: 1 * 1000,\r\n        setFunc: (block) => { return loading(block); }\r\n    },\r\n    {\r\n        typeName: 'touch',\r\n        spawnChance: 1,\r\n        score: 10,\r\n        iconTexture: 'touch',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 2 * 1000,\r\n        timeIncreaseMax: 4 * 1000,\r\n        setFunc: (block) => { return touch(block); }\r\n    },\r\n];\r\nconst TBlockTypeList = BlockUniqueProperties.map(ele => { if (ele.typeName !== '')\r\n    return ele.typeName; });\r\nconst SpawnMaxChance = BlockUniqueProperties.map(ele => ele.spawnChance).reduce((prevValue, currValue) => {\r\n    return prevValue + currValue;\r\n}, 0);\r\nconst Set2TypeBlock = (block, typeName) => {\r\n    let filteredType = BlockUniqueProperties.find(ele => ele.typeName === typeName);\r\n    if (filteredType) {\r\n        SetBlockType2InitBasic(block);\r\n        block.setTypeName(typeName);\r\n        block.setTypeImg(filteredType.iconTexture);\r\n        block.setTypeImgDisplaySize(filteredType.imgWidth, filteredType.imgHeight);\r\n        block.addScore(filteredType.score);\r\n        block.setTimeIncrease({\r\n            chance: filteredType.timeIncreaseChance,\r\n            value: (0,math/* GetRndInt */.dZ)(filteredType.timeIncreaseMin, filteredType.timeIncreaseMax)\r\n        });\r\n        filteredType.setFunc(block);\r\n    }\r\n    else\r\n        console.log('Set2TypeBlock: typeName is not found in the block type list');\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/storage/index.ts\n\r\nconst GameData = Object.assign({ best: 0 }, GameAudioData);\r\n// export default TGameData;\r\n/* harmony default export */ const storage = (GameData);\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/font/index.ts\n\r\nconst GameFont = {\r\n    guideTxtY: userSetting/* View.h */.G7.h - 80,\r\n};\r\nconst InitFont = () => {\r\n};\r\nconst CreateFont = () => {\r\n};\r\nconst SetFontStyle = (txt) => {\r\n    txt.setFontStyle('bold');\r\n    txt.setFontFamily('Arial Black');\r\n    txt.setOrigin(0.5);\r\n    return txt;\r\n};\r\n/* harmony default export */ const font = (GameFont);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/gage/index.ts\n\r\n\r\n\r\nconst GameGageColorList = ['blue', 'red', 'yellow'];\r\nconst GameGage = {\r\n    height: 20,\r\n    txtMargin: 30,\r\n    gages: [],\r\n    color: 'blue',\r\n};\r\nconst GetGageAssets = (color, exceptionKeys) => {\r\n    let assetList = [];\r\n    if (color) {\r\n        GameGage.color = color;\r\n        assetList = [\r\n            { key: color + 'Bg', url: CommonGage + color + 'Bg.png', type: 'image' },\r\n            { key: color + 'Btn', url: CommonGage + color + 'Btn.png', type: 'image' },\r\n            { key: color + 'HandleDown', url: CommonGage + color + 'HandleDown.png', type: 'image' },\r\n            { key: color + 'HandleUp', url: CommonGage + color + 'HandleUp.png', type: 'image' },\r\n        ];\r\n    }\r\n    else {\r\n        GameGageColorList.map((gageColor) => {\r\n            assetList.push({ key: gageColor + 'Bg', url: CommonGage + gageColor + 'Bg.png', type: 'image' }, { key: gageColor + 'Btn', url: CommonGage + gageColor + 'Btn.png', type: 'image' }, { key: gageColor + 'HandleDown', url: CommonGage + gageColor + 'HandleDown.png', type: 'image' }, { key: gageColor + 'HandleUp', url: CommonGage + gageColor + 'HandleUp.png', type: 'image' });\r\n        });\r\n    }\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitGage = (name) => {\r\n    const gageLayer = GameGage.gages.find(gage => gage.name === name);\r\n    if (gageLayer) {\r\n        // namedGage\r\n    }\r\n};\r\nconst gage_CreateGageBar = (scene, x, y, endMoveCallback, data) => {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\r\n    const layer = scene.add.layer();\r\n    // setting parameter init data\r\n    layer.x = x;\r\n    layer.y = y;\r\n    layer.gageNumMin = (_a = data === null || data === void 0 ? void 0 : data.numMin) !== null && _a !== void 0 ? _a : 0;\r\n    layer.gageNumMax = (_b = data === null || data === void 0 ? void 0 : data.numMin) !== null && _b !== void 0 ? _b : 100;\r\n    layer.gageNum = (layer.gageNumMin + layer.gageNumMax) / 2;\r\n    layer.isAble = (_c = data === null || data === void 0 ? void 0 : data.isAble) !== null && _c !== void 0 ? _c : true;\r\n    const color = (_d = data === null || data === void 0 ? void 0 : data.color) !== null && _d !== void 0 ? _d : GameGage.color;\r\n    const w = (_e = data === null || data === void 0 ? void 0 : data.width) !== null && _e !== void 0 ? _e : userSetting/* View.centerX */.G7.centerX;\r\n    const h = (_f = data === null || data === void 0 ? void 0 : data.height) !== null && _f !== void 0 ? _f : GameGage.height;\r\n    const bgTexture = (_g = data === null || data === void 0 ? void 0 : data.bgTxture) !== null && _g !== void 0 ? _g : color + 'Bg';\r\n    const btnTexture = (_h = data === null || data === void 0 ? void 0 : data.btnTexture) !== null && _h !== void 0 ? _h : color + 'Btn';\r\n    const handleUpTexture = (_k = (_j = data === null || data === void 0 ? void 0 : data.handle) === null || _j === void 0 ? void 0 : _j.upTexture) !== null && _k !== void 0 ? _k : color + 'HandleUp';\r\n    const handleDownTexture = (_m = (_l = data === null || data === void 0 ? void 0 : data.handle) === null || _l === void 0 ? void 0 : _l.upTexture) !== null && _m !== void 0 ? _m : color + 'HandleDown';\r\n    const txtX = (_p = (_o = data === null || data === void 0 ? void 0 : data.txt) === null || _o === void 0 ? void 0 : _o.x) !== null && _p !== void 0 ? _p : userSetting/* View.centerX */.G7.centerX / 2 + GameGage.txtMargin;\r\n    const txtY = (_r = (_q = data === null || data === void 0 ? void 0 : data.txt) === null || _q === void 0 ? void 0 : _q.y) !== null && _r !== void 0 ? _r : 0;\r\n    const gageBg = scene.add.image(0, 0, bgTexture);\r\n    gageBg.setDisplaySize(w, h);\r\n    const gageBar = scene.add.image(0, 0, btnTexture);\r\n    gageBar.setDisplaySize(userSetting/* View.centerX */.G7.centerX / 2, GameGage.height);\r\n    gageBar.setOrigin(0, 0.5);\r\n    gageBar.setPosition(-userSetting/* View.centerX */.G7.centerX / 2, 0);\r\n    const gageBarHandle = scene.add.image(0, 0, handleUpTexture);\r\n    const gageTxt = scene.add.text(0, -GameGage.height, layer.gageNum.toString());\r\n    gageTxt.setPosition(txtX, txtY);\r\n    SetFontStyle(gageTxt);\r\n    layer.gagePosX = 0; // default middle value\r\n    layer.gagePosXMin = -gageBg.width / 2 + gageBarHandle.width / 2;\r\n    layer.gagePosXMax = gageBg.width / 2;\r\n    layer.gagePosXLength = gageBg.width - gageBarHandle.width / 2;\r\n    layer.setGageHandleFrame = (isDown) => {\r\n        gageBarHandle.setTexture(isDown ? handleDownTexture : handleUpTexture);\r\n    };\r\n    layer.setGageBarSize = (gagePos) => {\r\n        let gagePosX = gagePos - layer.x;\r\n        if (gagePosX <= layer.gagePosXMin)\r\n            gagePosX = layer.gagePosXMin;\r\n        else if (gagePosX >= layer.gagePosXMax)\r\n            gagePosX = layer.gagePosXMax;\r\n        layer.gagePosX = gagePosX;\r\n        layer.gageNum = Math.floor((layer.gageNumMax - layer.gageNumMin) * Math.abs(gagePosX - layer.gagePosXMin) / layer.gagePosXLength);\r\n        layer.updateGage();\r\n    };\r\n    layer.setGageNum = (gageNum) => {\r\n        let gageNumber = gageNum;\r\n        if (gageNumber < layer.gageNumMin)\r\n            gageNumber = layer.gageNumMin;\r\n        else if (gageNumber > layer.gageNumMax)\r\n            gageNumber = layer.gageNumMax;\r\n        layer.gageNum = gageNumber;\r\n        layer.gagePosX = layer.gagePosXMin + (layer.gageNum / (layer.gageNumMax - layer.gageNumMin) * layer.gagePosXLength);\r\n        layer.updateGage();\r\n    };\r\n    layer.updateGage = () => {\r\n        gageBar.setDisplaySize(layer.gagePosX + gageBar.width / 2, GameGage.height);\r\n        gageBarHandle.x = layer.gagePosX + gageBar.width - gageBarHandle.width / 2;\r\n        gageTxt.setText(layer.gageNum.toFixed(0));\r\n    };\r\n    layer.setAble = (isAble) => {\r\n        layer.isAble = isAble;\r\n        layer.isAble ? layer.setAlpha(1) : layer.setAlpha(0.5);\r\n        return layer.isAble;\r\n    };\r\n    const dragStart = () => {\r\n        layer.isAble && layer.setGageHandleFrame(true);\r\n    };\r\n    const dragging = (dragX) => {\r\n        layer.isAble && layer.setGageBarSize(dragX);\r\n    };\r\n    const dragEnd = () => {\r\n        if (layer.isAble) {\r\n            layer.setGageHandleFrame(false);\r\n            endMoveCallback && endMoveCallback(layer.gageNumMin, layer.gageNumMax, layer.gageNum);\r\n        }\r\n    };\r\n    [gageBg, gageBar].map((bar) => {\r\n        bar.setInteractive({ draggable: true });\r\n        bar.on('dragstart', (ptr) => {\r\n            dragStart();\r\n            dragging(ptr.x);\r\n        });\r\n        bar.on('drag', (ptr, dragX) => { dragging(ptr.x); });\r\n        bar.on('dragend', (ptr) => { dragEnd(); });\r\n    });\r\n    gageBarHandle.setInteractive({ draggable: true });\r\n    gageBarHandle.on('dragstart', () => { dragStart(); });\r\n    gageBarHandle.on('drag', (ptr, dragX) => { dragging(dragX); });\r\n    gageBarHandle.on('dragend', () => { dragEnd(); });\r\n    layer.setAble(layer.isAble);\r\n    [gageBg, gageBar, gageBarHandle, gageTxt].map((child) => {\r\n        child.setPosition(child.x + x, child.y + y);\r\n        layer.add(child);\r\n    });\r\n    GameGage.gages.push(layer);\r\n    InitGage(layer.name);\r\n    return layer;\r\n};\r\n/* harmony default export */ const gage = ((/* unused pure expression or super */ null && (GameGage)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/gesture/index.ts\nconst GameGesture = {\r\n    type: '',\r\n    typeHistory: [],\r\n    initPos: { x: 0, y: 0 },\r\n    isHoldingDown: false,\r\n    holdDuration: 0,\r\n    holdMaxDuration: 1000,\r\n    comfyGapTouchValue: 15,\r\n    startHold: () => { GameGesture.isHoldingDown = true; return GameGesture; },\r\n    resetHold: () => {\r\n        GameGesture.isHoldingDown = false;\r\n        GameGesture.initPos = { x: 0, y: 0 };\r\n        GameGesture.holdDuration = 0;\r\n        GameGesture.setType('');\r\n        return GameGesture;\r\n    },\r\n    setHoldDuration: function (duration) { GameGesture.holdDuration = duration; return GameGesture; },\r\n    setInitPos: function (x, y) { GameGesture.initPos = { x: x, y: y }; return GameGesture; },\r\n    chckIsHold: () => {\r\n        if (GameGesture.holdDuration >= GameGesture.holdMaxDuration)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    getType: () => { return GameGesture.type; },\r\n    setType: function (type) { GameGesture.type = type; return GameGesture; },\r\n    initTypeHistory: () => { GameGesture.typeHistory = []; },\r\n    getTypeHistory: () => { return GameGesture.typeHistory; },\r\n    getLastestInputType: () => { return GameGesture.typeHistory[GameGesture.typeHistory.length - 1]; },\r\n    push2TypeHistory: function (gestureEle) {\r\n        GameGesture.typeHistory.push(gestureEle);\r\n        return GameGesture.typeHistory;\r\n    },\r\n};\r\nconst InitGameGesture = () => {\r\n    GameGesture.resetHold();\r\n    GameGesture.initTypeHistory();\r\n};\r\nconst CreateGameGesture = (scene) => {\r\n    scene.input.off('pointerdown', PtrDownGameGesture);\r\n    scene.input.on('pointerdown', PtrDownGameGesture);\r\n    scene.input.off('pointermove', PtrMoveGameGesture);\r\n    scene.input.on('pointermove', PtrMoveGameGesture);\r\n    scene.input.off('pointerup', PtrUpGameGesture);\r\n    scene.input.on('pointerup', PtrUpGameGesture);\r\n    InitGameGesture();\r\n    return GameGesture;\r\n};\r\nconst UpdateGameGesture = (delta) => {\r\n    if (GameGesture.isHoldingDown)\r\n        GameGesture.setHoldDuration(GameGesture.holdDuration + delta);\r\n};\r\nconst PtrDownGameGesture = (ptr) => {\r\n    GameGesture.setInitPos(ptr.x, ptr.y);\r\n    GameGesture.startHold();\r\n};\r\nconst PtrMoveGameGesture = (ptr) => {\r\n    if (!ptr.isDown)\r\n        return;\r\n    if (!gesture_ChckSwipeDirection(GameGesture.initPos, ptr)) {\r\n        ChckHoldOrTouch();\r\n    }\r\n    // const gestureEle = {\r\n    //     type: GameGesture.getType(),\r\n    //     initPos: GameGesture.initPos,\r\n    //     lastPos: { x: ptr.x, y: ptr.y }\r\n    // };\r\n};\r\nconst PtrUpGameGesture = (ptr) => {\r\n    return SetGameGestureType(GameGesture.initPos, ptr);\r\n};\r\nconst PtrOutGameGesture = () => {\r\n    GameGesture.resetHold();\r\n};\r\nconst gesture_ChckSwipeDirection = (initPos, ptr) => {\r\n    const chckPosX = Math.abs(initPos.x - ptr.x) > GameGesture.comfyGapTouchValue;\r\n    const chckPosY = Math.abs(initPos.y - ptr.y) > GameGesture.comfyGapTouchValue;\r\n    if (chckPosX || chckPosY) {\r\n        const x = ptr.x - initPos.x;\r\n        const y = ptr.y - initPos.y;\r\n        if (Math.abs(x) > Math.abs(y)) {\r\n            if (x > 0)\r\n                GameGesture.setType('swipeRight');\r\n            else\r\n                GameGesture.setType('swipeLeft');\r\n        }\r\n        else {\r\n            if (y < 0)\r\n                GameGesture.setType('swipeUp');\r\n            else\r\n                GameGesture.setType('swipeDown');\r\n        }\r\n        return true;\r\n    }\r\n    else\r\n        return false;\r\n};\r\nconst ChckHoldOrTouch = () => {\r\n    if (GameGesture.chckIsHold()) {\r\n        GameGesture.setType('hold');\r\n        return true;\r\n    }\r\n    else {\r\n        GameGesture.setType('touch');\r\n        return false;\r\n    }\r\n};\r\n// set comfy touch to not judge as swipe when use with actual finger\r\nconst SetGameGestureType = (initPos, ptr) => {\r\n    // swipe motion\r\n    if (!gesture_ChckSwipeDirection(initPos, ptr)) {\r\n        // hold or touch\r\n        ChckHoldOrTouch();\r\n    }\r\n    const gestureEle = {\r\n        type: GameGesture.getType(),\r\n        initPos: initPos,\r\n        lastPos: { x: ptr.x, y: ptr.y }\r\n    };\r\n    GameGesture.push2TypeHistory(gestureEle);\r\n    GameGesture.resetHold();\r\n    return GameGesture.getLastestInputType();\r\n};\r\n/* harmony default export */ const gesture = (GameGesture);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/input/index.ts\nconst GameInput = {\r\n    down: [],\r\n    move: [],\r\n    up: [],\r\n    add: (cmd, evt) => {\r\n        GameInput[cmd].push(evt);\r\n        return GameInput;\r\n    },\r\n};\r\nconst InitGameInput = () => {\r\n};\r\nconst CreateGameInput = (scene) => {\r\n    const inputDownEvt = (ptr, currentlyOver) => {\r\n        GameInput.down && GameInput.down.map(downEvt => downEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointerdown', inputDownEvt);\r\n    scene.input.on('pointerdown', inputDownEvt);\r\n    const inputMoveEvt = (ptr, currentlyOver) => {\r\n        GameInput.move && GameInput.move.map(moveEvt => moveEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointermove', inputMoveEvt);\r\n    scene.input.on('pointermove', inputMoveEvt);\r\n    const inputUpEvt = (ptr, currentlyOver) => {\r\n        GameInput.up && GameInput.up.map(upEvt => upEvt(ptr, currentlyOver));\r\n    };\r\n    scene.input.off('pointerup', inputUpEvt);\r\n    scene.input.on('pointerup', inputUpEvt);\r\n    InitGameInput();\r\n    return GameInput;\r\n};\r\n/* harmony default export */ const scenes_input = (GameInput);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/depth/index.ts\nconst GameDepth = {\r\n    list: {\r\n        default: 0,\r\n        highest: 9999,\r\n    },\r\n    add: (key, depth) => {\r\n        if (depth < GameDepth.list.default) {\r\n            console.warn(`adding depth ${key} key has a lower depth value(${depth}) than default`);\r\n            return;\r\n        }\r\n        if (depth > GameDepth.list.highest) {\r\n            console.warn(`adding depth ${key} key has a larger depth value(${depth}) than default`);\r\n            return;\r\n        }\r\n        GameDepth[key] = depth;\r\n        return GameDepth;\r\n    },\r\n};\r\nconst scenes_depth_SetDepth = (targetObj, type, addDepthValue) => {\r\n    if (!GameDepth.list[type]) {\r\n        console.warn('SetDepth: type is not found in the depth list:', targetObj, type);\r\n        console.log('targetObj, type: ', targetObj, type);\r\n        return;\r\n    }\r\n    const extraDetph = addDepthValue !== null && addDepthValue !== void 0 ? addDepthValue : 0;\r\n    // console.log('extraDetph: ', extraDetph, GameDepth.list, GameDepth.list[type], GameDepth.list[type] as number + extraDetph);\r\n    if (targetObj.setDepth)\r\n        targetObj.setDepth(GameDepth.list[type] + extraDetph);\r\n    else\r\n        console.warn('SetDepth: targetObj is not Phaser.GameObjects');\r\n};\r\n/* harmony default export */ const scenes_depth = ((/* unused pure expression or super */ null && (GameDepth)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/popUp/exit.ts\n\r\n\r\n\r\nconst CreateBasicPopUpExitType = (scene, popLayerBg, popUpLayer, btn, pop, option) => {\r\n    var _a, _b, _c, _d;\r\n    const exitIsExist = (_b = (_a = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _a === void 0 ? void 0 : _a.isExist) !== null && _b !== void 0 ? _b : false;\r\n    const exitType = (_d = (_c = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _c === void 0 ? void 0 : _c.type) !== null && _d !== void 0 ? _d : 'anywhere';\r\n    const popLayerList = [];\r\n    // exit btn & bg option setting\r\n    if (exitIsExist) {\r\n        switch (exitType) {\r\n            case 'anywhere':\r\n                popLayerList.push(...CreateExitAnywhere(scene, popLayerBg, popUpLayer, pop));\r\n                break;\r\n            case 'btn':\r\n                popLayerList.push(...CreateExitBtn(scene, popUpLayer, pop));\r\n                break;\r\n            case 'yesOrNo':\r\n                popLayerList.push(...CreateExitYesOrNo(scene, popUpLayer, pop));\r\n                break;\r\n        }\r\n    }\r\n    else\r\n        popLayerList.push(...CreateExitAnywhere(scene, popLayerBg, popUpLayer, pop));\r\n    return popLayerList;\r\n};\r\nconst CreateExitBtn = (scene, popUpLayer, pop) => {\r\n    var _a, _b, _c, _d;\r\n    const exitBtnX = (_b = (_a = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _a === void 0 ? void 0 : _a.x) !== null && _b !== void 0 ? _b : userSetting/* View.centerX */.G7.centerX;\r\n    const exitBtnY = (_d = (_c = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _c === void 0 ? void 0 : _c.y) !== null && _d !== void 0 ? _d : ui.exitPosY;\r\n    const exitBgBtnHeight = (userSetting/* View.h */.G7.h - exitBtnY) * 2;\r\n    const popLayerList = [];\r\n    const exitBtnBg = scene.add.image(exitBtnX, exitBtnY, 'whiteScreen');\r\n    const exitBtn = scene.add.image(exitBtnX, exitBtnY, 'exitBtn');\r\n    const exitPtrDown = (btn) => {\r\n        btn.downEvt();\r\n        exitBtnBg.setAlpha(0.3);\r\n        exitBtn.setAlpha(1);\r\n    };\r\n    const exitPtrUp = (btn) => {\r\n        btn.upEvt();\r\n        exitBtnBg.setAlpha(0.1);\r\n        exitBtn.setAlpha(ui.alpha);\r\n        popUpLayer.hide();\r\n    };\r\n    const exitPtrOut = (btn) => {\r\n        btn.upEvt();\r\n        exitBtnBg.setAlpha(0.1);\r\n        exitBtn.setAlpha(ui.alpha);\r\n    };\r\n    SetCommonUIProps(exitBtnBg);\r\n    CreateUIBtnAnim(scene, exitBtnBg);\r\n    exitBtnBg.setAlpha(0.1);\r\n    exitBtnBg.setInteractive();\r\n    exitBtnBg.on('pointerdown', () => { exitPtrDown(exitBtn); });\r\n    exitBtnBg.on('pointerup', () => { exitPtrUp(exitBtn); });\r\n    exitBtnBg.on('pointerout', () => { exitPtrOut(exitBtn); });\r\n    exitBtnBg.setDisplaySize(userSetting/* View.w */.G7.w, exitBgBtnHeight);\r\n    popLayerList.push(exitBtnBg);\r\n    SetCommonUIProps(exitBtn);\r\n    CreateUIBtnAnim(scene, exitBtn);\r\n    exitBtn.setInteractive();\r\n    exitBtn.on('pointerdown', () => { exitPtrDown(exitBtnBg); });\r\n    exitBtn.on('pointerup', () => { exitPtrUp(exitBtnBg); });\r\n    exitBtn.on('pointerout', () => { exitPtrOut(exitBtnBg); });\r\n    popLayerList.push(exitBtn);\r\n    return popLayerList;\r\n};\r\nconst CreateExitAnywhere = (scene, popLayerBg, popUpLayer, pop) => {\r\n    var _a, _b, _c, _d;\r\n    const popLayerList = [];\r\n    const guideTxtX = (_b = (_a = pop === null || pop === void 0 ? void 0 : pop.guideTxt) === null || _a === void 0 ? void 0 : _a.x) !== null && _b !== void 0 ? _b : userSetting/* View.centerX */.G7.centerX;\r\n    const guideTxtY = (_d = (_c = pop === null || pop === void 0 ? void 0 : pop.guideTxt) === null || _c === void 0 ? void 0 : _c.y) !== null && _d !== void 0 ? _d : font.guideTxtY;\r\n    popLayerBg.on('pointerup', (ptr) => {\r\n        var _a, _b;\r\n        popUpLayer.hide();\r\n        ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n    });\r\n    const popGuideTxt = scene.add.text(guideTxtX, guideTxtY, 'press anywhere to exit');\r\n    popGuideTxt.setAlpha(ui.alpha);\r\n    SetFontStyle(popGuideTxt);\r\n    popLayerList.push(popGuideTxt);\r\n    return popLayerList;\r\n};\r\nconst CreateExitYesOrNo = (scene, popUpLayer, pop) => {\r\n    var _a, _b;\r\n    const exitBtnY = (_b = (_a = pop === null || pop === void 0 ? void 0 : pop.exitBtn) === null || _a === void 0 ? void 0 : _a.y) !== null && _b !== void 0 ? _b : ui.exitPosY;\r\n    const bgAlphaDown = 0.5;\r\n    const bgAlphaUp = 0.1;\r\n    const txtAlphaDown = 1;\r\n    const txtAlphaUp = 0.8;\r\n    const exitBgBtnHeight = (userSetting/* View.h */.G7.h - exitBtnY) * 2;\r\n    const popLayerList = [];\r\n    const leftNoBg = scene.add.image(userSetting/* View.w */.G7.w / 4, exitBtnY, 'whiteScreen');\r\n    const leftNoTxt = scene.add.text(leftNoBg.x, leftNoBg.y, 'No');\r\n    const leftPtrDown = (imgOrTxt) => {\r\n        imgOrTxt.downEvt();\r\n        leftNoBg.setAlpha(bgAlphaDown);\r\n        leftNoTxt.setAlpha(txtAlphaDown);\r\n    };\r\n    const leftPtrUp = (imgOrTxt) => {\r\n        imgOrTxt.upEvt();\r\n        leftPtrOut();\r\n        popUpLayer.hide();\r\n    };\r\n    const leftPtrOut = () => {\r\n        leftNoBg.setAlpha(bgAlphaUp);\r\n        leftNoTxt.setAlpha(txtAlphaUp);\r\n    };\r\n    SetCommonUIProps(leftNoBg);\r\n    CreateUIBtnAnim(scene, leftNoBg);\r\n    leftNoBg.setAlpha(bgAlphaUp);\r\n    leftNoBg.setDisplaySize(userSetting/* View.centerX */.G7.centerX, exitBgBtnHeight);\r\n    leftNoBg.on('pointerdown', () => { leftPtrDown(leftNoTxt); });\r\n    leftNoBg.on('pointerup', () => { leftPtrUp(leftNoTxt); });\r\n    leftNoBg.on('pointerout', () => { leftPtrOut(); });\r\n    CreateUIBtnAnim(scene, leftNoTxt);\r\n    SetFontStyle(leftNoTxt);\r\n    leftNoTxt.setAlpha(txtAlphaUp);\r\n    leftNoTxt.setFontSize(userSetting/* View.w */.G7.w / 14);\r\n    leftNoTxt.on('pointerdown', () => { leftPtrDown(leftNoBg); });\r\n    leftNoTxt.on('pointerup', () => { leftPtrUp(leftNoBg); });\r\n    leftNoTxt.on('pointerout', () => { leftPtrOut(); });\r\n    popLayerList.push(leftNoBg, leftNoTxt);\r\n    const rightNoBg = scene.add.image(userSetting/* View.w */.G7.w * 3 / 4, exitBtnY, 'whiteScreen');\r\n    const rightNoTxt = scene.add.text(rightNoBg.x, rightNoBg.y, 'Yes');\r\n    const rightPtrDown = (imgOrTxt) => {\r\n        imgOrTxt.downEvt();\r\n        rightNoBg.setAlpha(bgAlphaDown);\r\n        rightNoTxt.setAlpha(txtAlphaDown);\r\n    };\r\n    const rightPtrUp = (imgOrTxt, ptr) => {\r\n        var _a;\r\n        imgOrTxt.upEvt();\r\n        rightPtrOut();\r\n        ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.up) && pop.evt.up(ptr);\r\n        popUpLayer.hide();\r\n    };\r\n    const rightPtrOut = () => {\r\n        rightNoBg.setAlpha(bgAlphaUp);\r\n        rightNoTxt.setAlpha(txtAlphaUp);\r\n    };\r\n    SetCommonUIProps(rightNoBg);\r\n    CreateUIBtnAnim(scene, rightNoBg);\r\n    rightNoBg.setAlpha(bgAlphaUp);\r\n    rightNoBg.setDisplaySize(userSetting/* View.centerX */.G7.centerX, exitBgBtnHeight);\r\n    rightNoBg.on('pointerdown', () => { rightPtrDown(rightNoTxt); });\r\n    rightNoBg.on('pointerup', (ptr) => { rightPtrUp(rightNoTxt, ptr); });\r\n    rightNoBg.on('pointerout', () => { rightPtrOut(); });\r\n    CreateUIBtnAnim(scene, rightNoTxt);\r\n    SetFontStyle(rightNoTxt);\r\n    rightNoTxt.setAlpha(txtAlphaUp);\r\n    rightNoTxt.setFontSize(userSetting/* View.w */.G7.w / 14);\r\n    rightNoTxt.on('pointerdown', () => { rightPtrDown(rightNoBg); });\r\n    rightNoTxt.on('pointerup', (ptr) => { rightPtrUp(rightNoBg, ptr); });\r\n    rightNoTxt.on('pointerout', () => { rightPtrOut(); });\r\n    popLayerList.push(rightNoBg, rightNoTxt);\r\n    return popLayerList;\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/popUp/index.ts\n\r\n\r\n\r\n\r\n\r\nconst GamePopUp = {\r\n    commonLayer: null,\r\n    list: [],\r\n    popAlpha: 0.6,\r\n    defaultOpt: {\r\n        cmdKey: 'Escape',\r\n    },\r\n    option: {},\r\n};\r\nconst GetPopUpAssets = (exceptionKeys) => {\r\n    let assetList = [\r\n        { key: 'whiteScreen', url: CommonUI + 'whiteScreen.png', type: 'image' },\r\n        { key: 'blackScreen', url: CommonUI + 'blackScreen.png', type: 'image' },\r\n        { key: 'exitBtn', url: CommonUI + 'exitBtn.png', type: 'image' },\r\n        { key: 'doorExitBtn', url: CommonUI + 'doorExitBtn.png', type: 'image' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitPopUp = (popUpLayer) => {\r\n    popUpLayer.hide();\r\n};\r\nconst CreateBasicPopUp = (scene, name, btn, pop, option) => {\r\n    var _a, _b, _c, _d;\r\n    // btn layer setting\r\n    const isBgBlack = (_a = pop === null || pop === void 0 ? void 0 : pop.isBgBlack) !== null && _a !== void 0 ? _a : true;\r\n    const btnX = (_b = btn === null || btn === void 0 ? void 0 : btn.x) !== null && _b !== void 0 ? _b : userSetting/* View.centerX */.G7.centerX;\r\n    const btnY = (_c = btn === null || btn === void 0 ? void 0 : btn.y) !== null && _c !== void 0 ? _c : userSetting/* View.centerY */.G7.centerY;\r\n    const isBtnExist = (_d = btn === null || btn === void 0 ? void 0 : btn.isExist) !== null && _d !== void 0 ? _d : false;\r\n    GamePopUp.option = Object.assign(Object.assign({}, GamePopUp.defaultOpt), option);\r\n    // const { cmdKey } = GamePopUp.option;\r\n    let btnLayer;\r\n    if (isBtnExist) {\r\n        btnLayer = scene.add.layer();\r\n        btnLayer.name = name;\r\n        (btn === null || btn === void 0 ? void 0 : btn.depth) && btnLayer.setDepth(btn.depth);\r\n        if (btn === null || btn === void 0 ? void 0 : btn.list) {\r\n            btn.list.map((btnChild) => {\r\n                btnChild.setPosition(btnX, btnY);\r\n                btnLayer.add(btnChild);\r\n            });\r\n        }\r\n        else {\r\n            const defaultBtn = scene.add.text(btnX, btnY, name);\r\n            defaultBtn.setOrigin(0.5);\r\n            defaultBtn.setFontStyle('bold');\r\n            defaultBtn.setFontFamily('Arial Black');\r\n            btnLayer.add(defaultBtn);\r\n        }\r\n        btnLayer.getChildren().map((child) => {\r\n            child.setInteractive();\r\n            child.on('pointerdown', (ptr) => {\r\n                var _a, _b;\r\n                ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.down) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.down(ptr));\r\n            });\r\n            child.on('pointerup', (ptr) => {\r\n                var _a, _b;\r\n                popUpLayer.show();\r\n                ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n            });\r\n            child.on('pointerout', (ptr) => {\r\n                var _a, _b;\r\n                ((_a = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _a === void 0 ? void 0 : _a.out) && ((_b = btn === null || btn === void 0 ? void 0 : btn.evt) === null || _b === void 0 ? void 0 : _b.out(ptr));\r\n            });\r\n        });\r\n    }\r\n    // pop layer setting\r\n    const popLayer = scene.add.layer();\r\n    const popLayerList = [];\r\n    popLayer.name = name;\r\n    (pop === null || pop === void 0 ? void 0 : pop.depth) && popLayer.setDepth(pop.depth);\r\n    const popLayerBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, isBgBlack ? 'blackScreen' : 'whiteScreen');\r\n    popLayerBg.setAlpha(GamePopUp.popAlpha);\r\n    popLayerBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    popLayerBg.setInteractive();\r\n    popLayerBg.on('pointerdown', (ptr) => { var _a, _b; ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.down) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.down(ptr)); });\r\n    popLayerBg.on('pointermove', (ptr) => { var _a, _b; ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.move) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.move(ptr)); });\r\n    popLayerList.push(popLayerBg);\r\n    const popUpLayer = {\r\n        name: name,\r\n        isOpen: false,\r\n        btn: btnLayer,\r\n        pop: popLayer,\r\n        add: (child) => {\r\n            popLayer.add(child);\r\n        },\r\n        show: () => {\r\n            var _a, _b;\r\n            popUpLayer.isOpen = true;\r\n            popUpLayer.pop.setVisible(true);\r\n            ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.show) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.show());\r\n        },\r\n        hide: () => {\r\n            var _a, _b;\r\n            popUpLayer.isOpen = false;\r\n            const isAllPopLayerClosed = GamePopUp.list.filter(popUpLayer => popUpLayer.isOpen === true).length === 0;\r\n            isAllPopLayerClosed && popUpLayer.pop.setVisible(false);\r\n            ((_a = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _a === void 0 ? void 0 : _a.hide) && ((_b = pop === null || pop === void 0 ? void 0 : pop.evt) === null || _b === void 0 ? void 0 : _b.hide());\r\n        }\r\n    };\r\n    if (pop === null || pop === void 0 ? void 0 : pop.exitBtn) {\r\n        popLayerList.push(...CreateBasicPopUpExitType(scene, popLayerBg, popUpLayer, btn, pop, option));\r\n    }\r\n    // add child to popup layer\r\n    popLayerList.map(popChild => popLayer.add(popChild));\r\n    (pop === null || pop === void 0 ? void 0 : pop.list) && pop.list.map(popChild => popLayer.add(popChild));\r\n    scenes_depth_SetDepth(popLayer, 'highest');\r\n    // chck nested pop up layer\r\n    let nestedPopUpLayer = GamePopUp.list.find(popUp => popUp.name === name);\r\n    if (nestedPopUpLayer) {\r\n        // console.warn(`pop up name nested: ${name} // so lay over it`);\r\n        nestedPopUpLayer = popUpLayer;\r\n    }\r\n    else\r\n        GamePopUp.list.push(popUpLayer);\r\n    InitPopUp(popUpLayer);\r\n    return popUpLayer;\r\n};\r\n/* harmony default export */ const popUp = ((/* unused pure expression or super */ null && (GamePopUp)));\r\n\r\n\n// EXTERNAL MODULE: ./src/window/index.ts\nvar src_window = __webpack_require__(626);\n;// CONCATENATED MODULE: ./src/scenes/ui/audio/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameAudioUI = {\r\n    btn: null,\r\n    context: [],\r\n    pop: null,\r\n    holdDuration: 1000,\r\n    eleGapValue: 100,\r\n    toggleMute: () => {\r\n        audio.setAllMute(!audio.isAllMute);\r\n        GameAudioUI.btn.setTexture(audio.isAllMute ? 'sfxOff' : 'sfxOn');\r\n    },\r\n    show: () => {\r\n        GameAudioUI.context && GameAudioUI.context.map((contextChild) => {\r\n            contextChild.setVisible && contextChild.setVisible(true);\r\n        });\r\n    },\r\n    hide: () => {\r\n        GameAudioUI.context && GameAudioUI.context.map((contextChild) => {\r\n            contextChild.setVisible && contextChild.setVisible(false);\r\n        });\r\n    },\r\n    defaultOpt: {\r\n        cmdKey: 'm'\r\n    },\r\n    option: {},\r\n};\r\nconst GetGameAudioUIAssets = (exceptionKeys) => {\r\n    const audioUIAssets = [\r\n        { key: 'sfxOff', url: CommonAudio + 'sfxOff.png', type: 'image' },\r\n        { key: 'sfxOn', url: CommonAudio + 'sfxOn.png', type: 'image' },\r\n        { key: 'bgmOff', url: CommonAudio + 'bgmOff.png', type: 'image' },\r\n        { key: 'bgmOn', url: CommonAudio + 'bgmOn.png', type: 'image' },\r\n    ];\r\n    return GetAssetFiles(audioUIAssets, exceptionKeys);\r\n};\r\nconst InitGameAudioUI = () => {\r\n    GameAudioUI.btn.setTexture(audio.isAllMute ? 'sfxOff' : 'sfxOn');\r\n    GameAudioUI.hide();\r\n};\r\nconst CreateGameAudioUI = (scene, option) => {\r\n    GameAudioUI.option = Object.assign(Object.assign(Object.assign({}, GameAudioUI.defaultOpt), { x: ui.margin * 4.5 * ui.scale, y: ui.margin }), option);\r\n    const { x, y, cmdKey } = GameAudioUI.option;\r\n    // btn (simple touch means toggling mute or 0.5 volume)\r\n    GameAudioUI.btn = scene.add.image(x, y, audio.isAllMute ? 'sfxOff' : 'sfxOn');\r\n    SetCommonUIProps(GameAudioUI.btn);\r\n    CreateUIBtnAnim(scene, GameAudioUI.btn);\r\n    GameAudioUI.btn.on('pointerdown', (ptr) => {\r\n        scene.tweens.addCounter({\r\n            duration: GameAudioUI.holdDuration,\r\n            onUpdate: (tw) => {\r\n                if (!ptr.isDown) {\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n            },\r\n            onComplete: () => { GameAudioUI.pop.show(); },\r\n        });\r\n    });\r\n    GameAudioUI.btn.on('pointerup', () => {\r\n        if (GameAudioUI.pop.isOpen)\r\n            return;\r\n        GameAudioUI.toggleMute();\r\n    });\r\n    // context gage (all, sfx, bgm icon & gage)\r\n    const allIcon = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, audio.isAllMute ? 'Mute All' : 'All');\r\n    const sfxIcon = scene.add.image(userSetting/* View.centerX */.G7.centerX, allIcon.y + GameAudioUI.eleGapValue, audio.isSfxMute ? 'sfxOff' : 'sfxOn');\r\n    SetCommonUIProps(sfxIcon);\r\n    CreateUIBtnAnim(scene, sfxIcon);\r\n    const sfxGage = gage_CreateGageBar(scene, sfxIcon.x, sfxIcon.y + sfxIcon.height / 1.5, (min, max, curr) => {\r\n        audio.setSfxVolume(curr / 100);\r\n    }, { color: 'blue' });\r\n    sfxGage.setGageNum(audio.bgmVolume * 100);\r\n    sfxGage.setAble(!audio.isSfxMute);\r\n    sfxIcon.on('pointerup', () => {\r\n        const isOn = sfxIcon.texture.key === 'sfxOn';\r\n        sfxGage.setAble(!isOn);\r\n        sfxIcon.setTexture(isOn ? 'sfxOff' : 'sfxOn');\r\n        audio.setSfxMute(isOn);\r\n    });\r\n    const bgmIcon = scene.add.image(sfxIcon.x, sfxIcon.y + GameAudioUI.eleGapValue, audio.isBgmMute ? 'bgmOff' : 'bgmOn');\r\n    SetCommonUIProps(bgmIcon);\r\n    CreateUIBtnAnim(scene, bgmIcon);\r\n    const bgmGage = gage_CreateGageBar(scene, bgmIcon.x, bgmIcon.y + bgmIcon.height / 1.5, (min, max, curr) => {\r\n        audio.setBgmVolume(curr / 100);\r\n    }, { color: 'blue' });\r\n    bgmGage.setGageNum(audio.bgmVolume * 100);\r\n    bgmGage.setAble(!audio.isBgmMute);\r\n    bgmIcon.on('pointerup', () => {\r\n        const isOn = bgmIcon.texture.key === 'bgmOn';\r\n        bgmGage.setAble(!isOn);\r\n        bgmIcon.setTexture(isOn ? 'bgmOff' : 'bgmOn');\r\n        audio.setBgmMute(isOn);\r\n    });\r\n    SetFontStyle(allIcon);\r\n    allIcon.setFontSize(64);\r\n    SetCommonUIProps(allIcon);\r\n    CreateUIBtnAnim(scene, allIcon);\r\n    const allGage = gage_CreateGageBar(scene, allIcon.x, allIcon.y + 48, (min, max, curr) => {\r\n        audio.setAllVolume(curr / 100);\r\n        audio.setSfxVolume(curr / 100);\r\n        sfxGage.setGageNum(curr);\r\n        audio.setBgmVolume(curr / 100);\r\n        bgmGage.setGageNum(curr);\r\n    }, { color: 'blue' });\r\n    allGage.setGageNum(audio.bgmVolume * 100);\r\n    allGage.setAble(!audio.isSfxMute);\r\n    // override mute\r\n    const tmpToggleMute = GameAudioUI.toggleMute;\r\n    GameAudioUI.toggleMute = () => {\r\n        tmpToggleMute();\r\n        const isOn = allIcon.text === 'All';\r\n        allGage.setAble(!isOn);\r\n        allIcon.setText(isOn ? 'Mute All' : 'All');\r\n        audio.setAllMute(isOn);\r\n        sfxGage.setAble(!isOn);\r\n        sfxIcon.setTexture(isOn ? 'sfxOff' : 'sfxOn');\r\n        audio.setSfxMute(isOn);\r\n        bgmGage.setAble(!isOn);\r\n        bgmIcon.setTexture(isOn ? 'bgmOff' : 'bgmOn');\r\n        audio.setBgmMute(isOn);\r\n    };\r\n    allIcon.on('pointerup', GameAudioUI.toggleMute);\r\n    // add context game object to pop layer\r\n    // [ allIcon, sfxIcon, bgmIcon ].map( child => GameAudioUI.pop.add(child) );\r\n    GameAudioUI.context.push(allIcon, sfxIcon, bgmIcon, allGage, sfxGage, bgmGage);\r\n    const arrangeList = [\r\n        allIcon, ...allGage.getChildren(),\r\n        sfxIcon, ...sfxGage.getChildren(),\r\n        bgmIcon, ...bgmGage.getChildren(),\r\n    ];\r\n    SetElementInMiddle(arrangeList);\r\n    // if holding audio btn 2 seconds, then it appears layer for detail audio option\r\n    GameAudioUI.pop = CreateBasicPopUp(scene, 'audioUI', {}, {\r\n        list: arrangeList,\r\n        exitBtn: {\r\n            isExist: true,\r\n            type: 'btn',\r\n        },\r\n        evt: {\r\n            show: () => { GameAudioUI.show(); },\r\n            hide: () => { GameAudioUI.hide(); },\r\n        }\r\n    });\r\n    scenes_depth_SetDepth(GameAudioUI.btn, 'highest');\r\n    // SetDepth(GameAudioUI.pop, 'highest', 100);\r\n    // key binding\r\n    src_window/* default.add2All */.Z.add2All('up', 'audio', (evt, key) => {\r\n        if (key !== cmdKey)\r\n            return;\r\n        GameAudioUI.toggleMute();\r\n    });\r\n    InitGameAudioUI();\r\n    return GameAudioUI;\r\n};\r\n/* harmony default export */ const ui_audio = ((/* unused pure expression or super */ null && (GameAudioUI)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/scroll/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameScroll = {\r\n    btn: null,\r\n    isScrollable: true,\r\n    actScroll: function () {\r\n        if (!GameScroll.isScrollable)\r\n            return;\r\n        src_window/* default.reqParent */.Z.reqParent('scroll');\r\n    },\r\n    wheelScroll: function (ptr) {\r\n        if (GameScroll.isScrollable)\r\n            return true;\r\n        else\r\n            ptr.event.preventDefault();\r\n    },\r\n    defaultOpt: {\r\n        cmdKey: 'v',\r\n        isSwipeGestureExist: true,\r\n    },\r\n    option: {},\r\n};\r\nconst GetScrollAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        { key: 'scrollBelow', url: CommonScroll + 'scrollBelow.png', type: 'image' },\r\n        { key: 'scrollArrow', url: CommonScroll + 'scrollArrow.png', type: 'image' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitGameScroll = () => {\r\n};\r\nconst CreateGameScroll = (scene, option) => {\r\n    GameScroll.option = Object.assign(Object.assign(Object.assign({}, GameScroll.defaultOpt), option), { x: ui.margin * 4.5 * ui.scale * 1.6, y: ui.margin });\r\n    const { x, y, cmdKey, isSwipeGestureExist } = GameScroll.option;\r\n    // off the preventDefault method to all evts\r\n    scene.game.input.mouse.preventDefaultWheel = false;\r\n    GameScroll.btn = scene.add.image(x, y, 'scrollBelow');\r\n    scenes_depth_SetDepth(GameScroll.btn, 'highest');\r\n    SetCommonUIProps(GameScroll.btn);\r\n    CreateUIBtnAnim(scene, GameScroll.btn);\r\n    const prevWheelScroll = GameScroll.wheelScroll;\r\n    GameScroll.wheelScroll = (ptr) => {\r\n        var _a, _b;\r\n        ((_a = option === null || option === void 0 ? void 0 : option.evt) === null || _a === void 0 ? void 0 : _a.up) && ((_b = option === null || option === void 0 ? void 0 : option.evt) === null || _b === void 0 ? void 0 : _b.up(ptr));\r\n        prevWheelScroll(ptr);\r\n    };\r\n    GameScroll.btn.on('pointerup', GameScroll.actScroll);\r\n    scene.input.off('wheel', GameScroll.wheelScroll);\r\n    scene.input.on('wheel', GameScroll.wheelScroll);\r\n    // key binding\r\n    src_window/* default.add2All */.Z.add2All('down', 'scroll', (evt, key) => {\r\n        if (key !== cmdKey)\r\n            return;\r\n        GameScroll.actScroll();\r\n    });\r\n    if (isSwipeGestureExist)\r\n        CreateSwipeScroll(scene);\r\n    InitGameScroll();\r\n    return GameScroll;\r\n};\r\nconst SetGameScrollable = (isScrollable) => {\r\n    if (!GameScroll.btn)\r\n        return;\r\n    GameScroll.isScrollable = isScrollable;\r\n    GameScroll.btn.setAlpha(GameScroll.isScrollable ? ui.alpha : 0);\r\n    return GameScroll;\r\n};\r\nconst CreateSwipeScroll = (scene) => {\r\n    const disableAlpha = 0;\r\n    const ableAlpha = 0.6;\r\n    const scrollBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    scrollBg.setAlpha(0.6);\r\n    scrollBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    scrollBg.setInteractive();\r\n    scrollBg.setVisible(false);\r\n    let isScrollBgTextureExist = true;\r\n    if (!scene.textures.get('blackScreen'))\r\n        isScrollBgTextureExist = false;\r\n    else\r\n        isScrollBgTextureExist = true;\r\n    const scrollArrow = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'scrollArrow');\r\n    scrollArrow.setOrigin(0.5, 0.5);\r\n    scrollArrow.setVisible(false);\r\n    scrollArrow.setAlpha(disableAlpha);\r\n    const scrollTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'Scroll Touch Down');\r\n    SetFontStyle(scrollTxt);\r\n    scrollTxt.setAlpha(0.8);\r\n    scrollTxt.setFontSize(userSetting/* View.w */.G7.w / 16);\r\n    scrollTxt.setVisible(false);\r\n    const swipeYAmount = userSetting/* View.h */.G7.h * 2 / 5;\r\n    const swipeYLimit = userSetting/* View.h */.G7.h / 2 + userSetting/* View.h */.G7.h / 8;\r\n    const ScrollShow = (sizeY, alpha) => {\r\n        scrollArrow.setDisplaySize(userSetting/* View.centerX */.G7.centerX, sizeY);\r\n        scrollArrow.setAlpha(alpha);\r\n    };\r\n    const ScrollHide = () => {\r\n        isScrollBgTextureExist && scrollBg.setVisible(false);\r\n        scrollArrow.setVisible(false);\r\n        scrollArrow.setAlpha(disableAlpha);\r\n        scrollTxt.setVisible(false);\r\n    };\r\n    // move evt\r\n    scenes_input.add('move', (ptr, currentlyOver) => {\r\n        if (!ptr.isDown)\r\n            return;\r\n        if (!GameScroll.isScrollable)\r\n            return;\r\n        // show or hide scroll down img & txt\r\n        const diffY = gesture.initPos.y - ptr.y;\r\n        if (diffY >= swipeYAmount) {\r\n            scrollArrow.setVisible(true);\r\n            if (diffY >= swipeYLimit) {\r\n                // limit swipe\r\n                isScrollBgTextureExist && scrollBg.setVisible(true);\r\n                scrollTxt.setVisible(true);\r\n                ScrollShow(swipeYLimit, ableAlpha);\r\n            }\r\n            else {\r\n                // calculate alpha ratio\r\n                const distanceRatio = (0,math/* GetRatio */.x7)(swipeYAmount, swipeYLimit, diffY);\r\n                const alphaRatio = (0,math/* GetValueViaRatio */.$S)(disableAlpha, ableAlpha, distanceRatio);\r\n                ScrollShow(diffY, alphaRatio);\r\n            }\r\n        }\r\n        else\r\n            ScrollHide();\r\n    });\r\n    // act scroll when ptr up\r\n    scenes_input.add('up', (ptr, currentlyOver) => {\r\n        if (!GameScroll.isScrollable)\r\n            return ScrollHide();\r\n        if (!scrollArrow.visible)\r\n            return ScrollHide();\r\n        if (!scrollTxt.visible)\r\n            return ScrollHide();\r\n        ScrollHide();\r\n        GameScroll.actScroll();\r\n    });\r\n    [scrollBg, scrollArrow, scrollTxt].map(scrollEle => scenes_depth_SetDepth(scrollEle, 'highest'));\r\n};\r\n/* harmony default export */ const ui_scroll = ((/* unused pure expression or super */ null && (GameScroll)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/fullScreen/index.ts\n\r\n\r\n\r\n\r\n\r\nconst GameFullScreen = {\r\n    isDelaying: false,\r\n    delay: 300,\r\n    chckTime: 1000,\r\n    isFullScreen: false,\r\n    btn: null,\r\n    defaultOpt: {\r\n        cmdKey: 'f',\r\n    },\r\n    option: {},\r\n};\r\nconst GetFullScreenAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        { key: 'fullScreenLarger', url: CommonFullScreen + 'fullScreenLarger.png', type: 'image' },\r\n        { key: 'fullScreenSmaller', url: CommonFullScreen + 'fullScreenSmaller.png', type: 'image' },\r\n        { key: 'touchSfx', url: CommonSfx + 'touchSfx.mp3', type: 'audio' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitFullScreen = () => {\r\n};\r\nconst CreateFullScreen = (scene, option) => {\r\n    GameFullScreen.option = Object.assign(Object.assign(Object.assign({}, GameFullScreen.defaultOpt), { x: ui.margin, y: ui.margin }), option);\r\n    const { x, y, cmdKey } = GameFullScreen.option;\r\n    const btnTexture = GameFullScreen.isFullScreen ? 'fullScreenSmaller' : 'fullScreenLarger';\r\n    // add screen size controller\r\n    GameFullScreen.btn = scene.add.image(x, y, btnTexture);\r\n    scenes_depth_SetDepth(GameFullScreen.btn, 'highest');\r\n    SetCommonUIProps(GameFullScreen.btn);\r\n    CreateUIBtnAnim(scene, GameFullScreen.btn);\r\n    const delayEvt = () => {\r\n        GameFullScreen.btn.disableInteractive();\r\n        GameFullScreen.isDelaying = true;\r\n        GameFullScreen.btn.setAlpha(0.2);\r\n        setTimeout(() => {\r\n            GameFullScreen.btn.setInteractive();\r\n            GameFullScreen.isDelaying = false;\r\n            GameFullScreen.btn.setAlpha(ui.alpha);\r\n            scene.tweens.addCounter({\r\n                duration: 1000,\r\n                onUpdate: (tw) => {\r\n                    if (!scene.scale.isFullscreen) {\r\n                        exitEvt();\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                },\r\n                onComplete: () => {\r\n                    GameFullScreen.btn.setInteractive();\r\n                    GameFullScreen.isDelaying = false;\r\n                    GameFullScreen.btn.setAlpha(ui.alpha);\r\n                }\r\n            });\r\n        }, GameFullScreen.delay);\r\n        return false;\r\n    };\r\n    const exitEvt = () => {\r\n        GameFullScreen.isFullScreen = false;\r\n        scene.scale.stopFullscreen();\r\n        GameFullScreen.btn.setTexture('fullScreenLarger');\r\n        SetGameScrollable(true);\r\n    };\r\n    const toggleEvt = () => {\r\n        if (GameFullScreen.isDelaying)\r\n            return;\r\n        delayEvt();\r\n        GameFullScreen.isFullScreen = !GameFullScreen.isFullScreen;\r\n        if (GameFullScreen.isFullScreen) {\r\n            scene.scale.startFullscreen();\r\n            GameFullScreen.btn.setTexture('fullScreenSmaller');\r\n            SetGameScrollable(false);\r\n        }\r\n        else\r\n            exitEvt();\r\n    };\r\n    GameFullScreen.btn.on('pointerup', () => { toggleEvt(); });\r\n    // resize event for stop full screen\r\n    scene.scale.off('resize');\r\n    scene.scale.on('resize', () => {\r\n        if (GameFullScreen.btn.isChanging)\r\n            return;\r\n        if (GameFullScreen.isDelaying)\r\n            return;\r\n        if (!GameFullScreen.isFullScreen)\r\n            return;\r\n        delayEvt();\r\n        exitEvt();\r\n    });\r\n    // key binding\r\n    src_window/* default.add2All */.Z.add2All('up', 'fullScreen', (evt, key) => {\r\n        if (key !== cmdKey)\r\n            return;\r\n        toggleEvt();\r\n    });\r\n    InitFullScreen();\r\n    return GameFullScreen;\r\n};\r\n/* harmony default export */ const fullScreen = ((/* unused pure expression or super */ null && (GameFullScreen)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst ui_UIProps = {\r\n    exitPosY: userSetting/* View.h */.G7.h - 36,\r\n    margin: 30,\r\n    alpha: 0.8,\r\n    scale: 0.6,\r\n    downGap: 4, // down gap for anim\r\n};\r\nconst SetUIProps = (props, value) => {\r\n    if (!ui_UIProps[props])\r\n        console.warn(`ui props: ${props} is not exist`);\r\n    ui_UIProps[props] = value;\r\n    return ui_UIProps;\r\n};\r\nconst SetCommonUIProps = (btn) => {\r\n    btn.setAlpha(ui_UIProps.alpha);\r\n    btn.setScale(ui_UIProps.scale);\r\n    return btn;\r\n};\r\nconst CreateUIBtnAnim = (scene, btn, option) => {\r\n    var _a;\r\n    const toggleBtn = btn;\r\n    if (!toggleBtn)\r\n        return;\r\n    const dur = (_a = option === null || option === void 0 ? void 0 : option.dur) !== null && _a !== void 0 ? _a : 70;\r\n    const ChckIsMoved = () => {\r\n        if (!toggleBtn.isMovedOnce)\r\n            return;\r\n        toggleBtn.isMovedOnce = false;\r\n        if (toggleBtn.downPosY !== toggleBtn.y + ui_UIProps.downGap) {\r\n            toggleBtn.upPosY = toggleBtn.y;\r\n            toggleBtn.downPosY = toggleBtn.y + ui_UIProps.downGap;\r\n        }\r\n    };\r\n    toggleBtn.downEvt = () => {\r\n        ChckIsMoved();\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.downPosY, duration: dur,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    toggleBtn.upEvt();\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    toggleBtn.upEvt = () => {\r\n        ChckIsMoved();\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.upPosY, duration: dur,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    toggleBtn.y = toggleBtn.upPosY;\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    toggleBtn.upPosY = btn.y;\r\n    toggleBtn.downPosY = btn.y + ui_UIProps.downGap;\r\n    toggleBtn.isMovedOnce = true;\r\n    toggleBtn.setInteractive();\r\n    toggleBtn.on('pointerdown', toggleBtn.downEvt);\r\n    toggleBtn.on('pointerup', toggleBtn.upEvt);\r\n    toggleBtn.on('pointerout', toggleBtn.upEvt);\r\n    return ui_UIProps;\r\n};\r\nconst SetElementInMiddle = (list, initY) => {\r\n    const contentInitY = initY !== null && initY !== void 0 ? initY : 0;\r\n    const yList = list.map(child => child.y);\r\n    const topY = Math.min(...yList);\r\n    const bottomY = Math.max(...yList);\r\n    const gapLength = bottomY - topY - contentInitY;\r\n    if (gapLength > userSetting/* View.h */.G7.h) {\r\n        console.warn('content gap is more than view height, this should be a scrollable layer');\r\n    }\r\n    else {\r\n        const gapY = (userSetting/* View.h */.G7.h - gapLength) / 2;\r\n        const contentY = topY - gapY;\r\n        const last = list.map(child => child.y -= contentY);\r\n    }\r\n};\r\nconst GetGameCommonUIAssets = () => {\r\n    const commonUIAssetsList = [\r\n        ...GetScrollAssets(),\r\n        ...GetFullScreenAssets(),\r\n        ...GetPopUpAssets(),\r\n        ...GetGageAssets('blue'),\r\n        ...GetGameAudioUIAssets(),\r\n    ];\r\n    return commonUIAssetsList;\r\n};\r\nconst CreateGameCommonUI = (scene, exceptionKeys) => {\r\n    CreateGameInput(scene);\r\n    CreateFullScreen(scene);\r\n    CreateGameScroll(scene);\r\n    CreateGameGesture(scene);\r\n    CreateGameAudioUI(scene);\r\n};\r\nconst UpdateGameCommonUI = (delta) => {\r\n    UpdateGameGesture(delta);\r\n};\r\n/* harmony default export */ const ui = (ui_UIProps);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/setting.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Setting = {\r\n    btn: null,\r\n    layer: [],\r\n    layerData: {\r\n        txtGap: 50,\r\n        controlTxtList: ['FullScreen', 'Normal'],\r\n        isFullScreen: false,\r\n    },\r\n    exitBtn: null,\r\n    isOpen: false,\r\n    isTwing: false,\r\n};\r\nconst InitSetting = (scene) => {\r\n    Setting.isTwing = false;\r\n    HideSetting(scene);\r\n};\r\nconst CreateSetting = (scene) => {\r\n    const { margin, alpha, scale } = UIProps;\r\n    Setting.btn = scene.add.image(View.w - margin, margin, 'settingBtn');\r\n    Setting.btn.setScale(scale);\r\n    Setting.btn.setAlpha(alpha);\r\n    Setting.btn.setInteractive();\r\n    Setting.btn.on('pointerup', () => { Setting.isTwing || AnimShowSetting(scene); });\r\n    // Setting.layer = scene.add.container();\r\n    // Setting.layer = scene.add.layer();\r\n    const bg = scene.add.image(View.centerX, View.centerY, 'blackScreen');\r\n    bg.setInteractive();\r\n    bg.setDisplaySize(View.w, View.h);\r\n    bg.setAlpha(0.4);\r\n    const panel = scene.add.image(View.centerX, View.centerY, 'settingPanel');\r\n    panel.setDisplaySize(View.w - ContextMarginW, View.h - ContextMarginH);\r\n    const title = scene.add.text(View.centerX, View.centerY - (TxtTitleHeightGap * 3), 'Setting');\r\n    SetFont2CommonContextStyle(title);\r\n    title.setFontSize(TxtTitleHeadSize);\r\n    const bgmBtn = scene.add.image(View.centerX, View.centerY - View.h / 6, 'musicOn');\r\n    const bgmGage = CreateGageBar(scene, View.centerX, bgmBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        GameAudio.setBgmVolume(curr / 100);\r\n    });\r\n    bgmGage.setGageNum(GameAudio.bgmVolume * 100);\r\n    const sfxBtn = scene.add.image(View.centerX, bgmGage.y + SettingGapContextMargin, 'audioOn');\r\n    const sfxGage = CreateGageBar(scene, View.centerX, sfxBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        GameAudio.setSfxVolume(curr / 100);\r\n        GameAudio.playSfx('gearAnim');\r\n    });\r\n    sfxGage.setGageNum(GameAudio.sfxVolume * 100);\r\n    [bgmBtn, sfxBtn].map((btn) => {\r\n        btn.setScale(0.6);\r\n        btn.setInteractive();\r\n    });\r\n    bgmBtn.on('pointerup', () => {\r\n        const isOn = bgmBtn.texture.key === 'musicOn';\r\n        bgmGage.setAble(!isOn);\r\n        bgmBtn.setTexture(isOn ? 'musicOff' : 'musicOn');\r\n        GameAudio.setBgmMute(isOn);\r\n    });\r\n    sfxBtn.on('pointerup', () => {\r\n        const isOn = sfxBtn.texture.key === 'audioOn';\r\n        sfxGage.setAble(!isOn);\r\n        sfxBtn.setTexture(isOn ? 'audioOff' : 'audioOn');\r\n        GameAudio.setSfxMute(isOn);\r\n    });\r\n    bgmBtn.setTexture(GameAudio.isBgmMute ? 'musicOff' : 'musicOn');\r\n    sfxBtn.setTexture(GameAudio.isSfxMute ? 'audioOff' : 'audioOn');\r\n    bgmGage.setAble(!GameAudio.isBgmMute);\r\n    sfxGage.setAble(!GameAudio.isSfxMute);\r\n    const { txtGap } = Setting.layerData;\r\n    // add back to title btn\r\n    const back2TitleBg = scene.add.image(View.centerX, sfxGage.y + SettingGapContextMarginLarger, 'settingOverBtnUp').setScale(1.2);\r\n    const back2Title = scene.add.image(back2TitleBg.x, back2TitleBg.y - 4, 'overBack');\r\n    back2Title.setScale(0.6).setInteractive();\r\n    back2Title.downPosY = back2Title.y + 4;\r\n    back2Title.upPosY = back2Title.y;\r\n    back2Title.on('pointerdown', () => {\r\n        back2TitleBg.setTexture('settingOverBtnDown');\r\n        back2Title.setPosition(back2Title.x, back2Title.downPosY);\r\n    });\r\n    back2Title.on('pointerup', () => {\r\n        GameAudio.playSfx('gearAnim');\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n        if (back2Title.isChanging)\r\n            return;\r\n        if (!scene.scene.isActive('title')) {\r\n            StopGame(scene);\r\n            StartTitle(scene);\r\n        }\r\n        else\r\n            AnimHideSetting(scene);\r\n        setTimeout(() => { back2Title.isChanging = false; }, 500);\r\n    });\r\n    back2Title.on('pointerout', () => {\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n    });\r\n    const back2TitleTxt = scene.add.text(back2TitleBg.x, back2TitleBg.y + txtGap, 'Go to Title');\r\n    SetFont2CommonContextStyle(back2TitleTxt);\r\n    back2TitleTxt.setFontSize(16);\r\n    const back2TitleList = [back2TitleBg, back2Title, back2TitleTxt];\r\n    // // add screen size controller\r\n    // const sizeControllerBg = scene.add.image(View.centerX + controlGap, back2TitleBg.y, 'settingOverBtnUp').setScale(1.2);\r\n    // let sizeController = scene.add.image(sizeControllerBg.x, sizeControllerBg.y - 4, 'screenLarger') as TToggleBtnImg;\r\n    // sizeController.setScale(0.6).setInteractive();\r\n    // sizeController.downPosY = sizeController.y + 4;\r\n    // sizeController.upPosY = sizeController.y;\r\n    // sizeController.on('pointerdown', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnDown');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.downPosY);\r\n    // });\r\n    // const sizeControllerExitEvt = () => {\r\n    //     Setting.layerData.isFullScreen = false;\r\n    //     scene.scale.stopFullscreen();\r\n    //     sizeController.setTexture('screenLarger');\r\n    //     sizeControlTxt.setText(controlTxtList[0]);\r\n    // };\r\n    // const sizeControllerToggleEvt = () => {\r\n    //     Setting.layerData.isFullScreen = !Setting.layerData.isFullScreen;\r\n    //     if (Setting.layerData.isFullScreen) {\r\n    //         scene.scale.startFullscreen();\r\n    //         sizeController.setTexture('screenSmaller');\r\n    //         sizeControlTxt.setText(controlTxtList[1]);\r\n    //     }\r\n    //     else sizeControllerExitEvt();\r\n    // };\r\n    // sizeController.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    //     if (sizeController.isChanging) return;\r\n    //     sizeController.isChanging = true;\r\n    //     sizeControllerToggleEvt();\r\n    //     setTimeout(() => { sizeController.isChanging = false; }, 300);\r\n    // });\r\n    // sizeController.on('pointerout', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    // });\r\n    // const sizeControlTxt = scene.add.text(sizeControllerBg.x, sizeControllerBg.y + txtGap, controlTxtList[0]);\r\n    // SetFont2CommonContextStyle(sizeControlTxt);\r\n    // sizeControlTxt.setFontSize(16);\r\n    // // resize event for stop full screen\r\n    // scene.scale.off('resize');\r\n    // scene.scale.on('resize', () => {\r\n    //     if (sizeController.isChanging) return;\r\n    //     if (!Setting.layerData.isFullScreen) return;\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerExitEvt();\r\n    // });\r\n    // const sizeControllerList = [ sizeControllerBg, sizeController, sizeControlTxt ];\r\n    // const howContext = CreateHow(scene);\r\n    // const howBtn = scene.add.image(View.centerX, sizeControlTxt.y + SettingGapContextMargin, 'btnSettingUp') as TToggleBtnImg;\r\n    // howBtn.setInteractive().setScale(1);\r\n    // howBtn.downPosY = howBtn.y + 4;\r\n    // howBtn.upPosY = howBtn.y;\r\n    // howBtn.on('pointerdown', () => {\r\n    //     howBtn.setTexture('btnSettingDown');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.downPosY);\r\n    // });\r\n    // howBtn.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    //     howContext.show();\r\n    // });\r\n    // howBtn.on('pointerout', () => {\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    // });\r\n    // const howTxt = scene.add.text(howBtn.x, howBtn.y, 'how');\r\n    // SetFont2CommonContextStyle(howTxt);\r\n    // howTxt.setFontSize(TxtTitleSize);\r\n    // const howList = [ howBtn, howTxt, howContext ];\r\n    // Setting.layer.add([\r\n    //     bg, panel, title,\r\n    //     bgmBtn, sfxBtn,\r\n    //     bgmGage, sfxGage,\r\n    //     ...back2TitleList,\r\n    //     // ...sizeControllerList,\r\n    // ]);\r\n    // Setting.layer.add(\r\n    //     bg, panel, title,\r\n    //     bgmBtn, sfxBtn,\r\n    //     bgmGage, sfxGage,\r\n    //     // ...back2TitleList,\r\n    //     // ...sizeControllerList,\r\n    // );\r\n    Setting.layer.push(bg);\r\n    Setting.layer.push(panel);\r\n    Setting.layer.push(title);\r\n    Setting.layer.push(bgmBtn);\r\n    Setting.layer.push(sfxBtn);\r\n    Setting.layer.push(bgmGage);\r\n    Setting.layer.push(sfxGage);\r\n    back2TitleList.map((child) => {\r\n        Setting.layer.push(child);\r\n    });\r\n    // exit btn & last container setup\r\n    Setting.exitBtn = scene.add.image(View.w - SettingContextMargin, SettingContextMargin, 'exitBtn').setScale(0.6);\r\n    Setting.exitBtn.setInteractive();\r\n    Setting.exitBtn.on('pointerup', () => {\r\n        AnimHideSetting(scene);\r\n    });\r\n    [Setting.btn, ...Setting.layer, Setting.exitBtn].map(ele => SetDepth(ele, 'setting'));\r\n    InitSetting(scene);\r\n    return Setting;\r\n};\r\n// type TGageContainer = Phaser.GameObjects.Container & {\r\n//     gageNum: number;\r\n//     gageNumMin: number;\r\n//     gageNumMax: number;\r\n//     gagePosX: number;\r\n//     gagePosXMin: number;\r\n//     gagePosXMax: number;\r\n//     gagePosXLength: number;\r\n//     isAble: boolean;\r\n//     setGageHandleFrame: (isDown: boolean) => void;\r\n//     setGageBarSize: (gagePos: number) => void;\r\n//     setGageNum: (gageNum: number) => void;\r\n//     setGage: () => void;\r\n//     setAble: (isAble: boolean) => void;\r\n// };\r\n// const GageHeight = 20;\r\n// const CreateGageBar = (\r\n//     scene: Phaser.Scene, x: number, y: number,\r\n//     endMoveCallback?: (min: number, max: number, curr: number) => void,\r\n//     gageNumMin: number = 0, gageNumMax: number = 100,\r\n// ) => {\r\n//     const con: TGageContainer = scene.add.container(x, y) as TGageContainer;\r\n//     con.gageNumMin = gageNumMin;\r\n//     con.gageNumMax = gageNumMax;\r\n//     con.gageNum = (con.gageNumMin + con.gageNumMax) / 2;\r\n//     const gageBg = scene.add.image(0, 0, 'colorBackground');\r\n//     const gageBar = scene.add.image(0, 0, 'btnBlue');\r\n//     const gageBarHandle = scene.add.image(0, 0, 'colorHandle');\r\n//     const gageTxt = scene.add.text(0, 0, con.gageNum.toString());\r\n//     gageBg.setDisplaySize(View.centerX, GageHeight);\r\n//     gageBar.setDisplaySize(View.centerX/2, GageHeight);\r\n//     gageBar.setOrigin(0, 0.5);\r\n//     gageBar.setPosition(-View.centerX/2, 0);\r\n//     gageTxt.setOrigin(0, 0.5);\r\n//     gageTxt.setPosition(View.centerX/2 + TxtMargin - 5, 0);\r\n//     con.add([ gageBg, gageBar, gageBarHandle, gageTxt ]);\r\n//     con.gagePosX = 0;\r\n//     con.gagePosXMin = -gageBg.width/2 - gageBarHandle.width/2;\r\n//     con.gagePosXMax = gageBg.width/2 + gageBarHandle.width/2;\r\n//     con.gagePosXLength = gageBg.width + gageBarHandle.width;\r\n//     con.setGageHandleFrame = (isDown: boolean) => {\r\n//         gageBarHandle.setTexture(isDown ? 'colorHandleDown' : 'colorHandle');\r\n//     };\r\n//     con.setGageBarSize = (gagePos: number) => {\r\n//         let gagePosX = gagePos;\r\n//         if (gagePosX <= con.gagePosXMin) gagePosX = con.gagePosXMin;\r\n//         else if (gagePosX >= con.gagePosXMax) gagePosX = con.gagePosXMax;\r\n//         con.gagePosX = gagePosX;\r\n//         con.gageNum = Math.floor((con.gageNumMax - con.gageNumMin) * Math.abs(gagePosX - con.gagePosXMin) / con.gagePosXLength);\r\n//         con.setGage();\r\n//     };\r\n//     con.setGageNum = (gageNum: number) => {\r\n//         let gageNumber = gageNum;\r\n//         if (gageNumber < con.gageNumMin) gageNumber = con.gageNumMin;\r\n//         else if (gageNumber > con.gageNumMax) gageNumber = con.gageNumMax;\r\n//         con.gageNum = gageNumber;\r\n//         con.gagePosX = (con.gageNum * con.gagePosXLength / con.gageNumMax) - con.gagePosXMax;\r\n//         con.setGage();\r\n//     };\r\n//     con.setGage = () => {\r\n//         gageBar.setDisplaySize(con.gagePosX + gageBar.width/2 + gageBarHandle.width/2, GageHeight);\r\n//         gageBarHandle.setPosition(con.gagePosX, 0);\r\n//         gageTxt.setText(con.gageNum.toFixed(0));\r\n//     };\r\n//     con.setAble = (isAble: boolean) => {\r\n//         con.isAble = isAble;\r\n//         con.isAble ? con.setAlpha(1) : con.setAlpha(0.5);\r\n//     };\r\n//     con.setAble(true);\r\n//     gageBarHandle.setInteractive({ draggable: true });\r\n//     gageBarHandle.on('dragstart', () => {\r\n//         con.isAble && con.setGageHandleFrame(true);\r\n//     });\r\n//     gageBarHandle.on('drag', (ptr, dragX) => {\r\n//         con.isAble && con.setGageBarSize(dragX);\r\n//     });\r\n//     gageBarHandle.on('dragend', () => {\r\n//         if (con.isAble) {\r\n//             con.setGageHandleFrame(false);\r\n//             endMoveCallback && endMoveCallback(con.gageNumMin, con.gageNumMax, con.gageNum);\r\n//         }\r\n//     });\r\n//     return con;\r\n// };\r\nconst AnimShowSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    GameAudio.playSfx('gearAnim');\r\n    scene.tweens.addCounter({\r\n        from: 0, to: 60, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => {\r\n            Setting.isTwing = false;\r\n            ShowSetting(scene);\r\n        }\r\n    });\r\n};\r\nconst AnimHideSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    GameAudio.playSfx('gearAnim');\r\n    HideSetting(scene);\r\n    scene.tweens.addCounter({\r\n        from: 180, to: 0, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => { Setting.isTwing = false; }\r\n    });\r\n};\r\nconst ShowSetting = (scene) => {\r\n    GameTime.setTimeScale(scene, GameTime.showSettingTimeScale);\r\n    Setting.isOpen = true;\r\n    Setting.layer.map(layerChild => layerChild.setVisible && layerChild.setVisible(true));\r\n    Setting.exitBtn.setVisible(true);\r\n};\r\nconst HideSetting = (scene) => {\r\n    ui_time.setTimeScale(scene, ui_time.hideSettingTimeScale);\r\n    Setting.isOpen = false;\r\n    Setting.layer.map(layerChild => layerChild.setVisible && layerChild.setVisible(false));\r\n    Setting.exitBtn.setVisible(false);\r\n};\r\nconst ShowSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(true);\r\n};\r\nconst HideSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(false);\r\n};\r\n/* harmony default export */ const setting = ((/* unused pure expression or super */ null && (Setting)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/time.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst time_GameTime = {\r\n    txt: null,\r\n    last10Txt: null,\r\n    last10PrevTime: 11,\r\n    isLast10HasOnceCnt: true,\r\n    isGameTimeEndOnceCnt: true,\r\n    isFirstLast10HasOnceCnt: true,\r\n    standbyTime: 3 * 1000,\r\n    init: 60 * 1000,\r\n    curr: 60 * 1000,\r\n    last10: 10 * 1000,\r\n    increasedTime: 0,\r\n    // anim option\r\n    animIncreaseTimeDuration: 400,\r\n    animTw: null,\r\n    animTwScaleMin: 1,\r\n    animTwScaleMax: 1.4,\r\n    isTwing: false,\r\n    // time scale option\r\n    timeScale: 1,\r\n    showSettingTimeScale: 0.1,\r\n    hideSettingTimeScale: 1,\r\n    sndLast10Voice: function (scene, time) {\r\n        // scene.sound.play('voice' + time);\r\n        audio.playSfx('voice' + time);\r\n        this.last10Txt.setText(time);\r\n    },\r\n    increaseTime: function (time) {\r\n        // last 10 seconds left so increasing time is useless\r\n        if (!this.isFirstLast10HasOnceCnt)\r\n            return;\r\n        this.curr += time;\r\n        this.increasedTime += time;\r\n        return this;\r\n    },\r\n    set2Format: function (milliTime) {\r\n        // separate minute, second each\r\n        const timeSec = milliTime / 1000;\r\n        const secondSplit = timeSec.toFixed(2).split('.');\r\n        let minutes = Math.floor(timeSec / 60);\r\n        let seconds = Math.floor(Number(secondSplit[0]));\r\n        let underPointDigitNum = Number(secondSplit[1]);\r\n        if (minutes < 10)\r\n            minutes = '0' + minutes;\r\n        if (seconds < 10)\r\n            seconds = '0' + seconds;\r\n        if (underPointDigitNum < 10)\r\n            underPointDigitNum = '0' + underPointDigitNum;\r\n        const time = minutes + ':' + seconds + '.' + underPointDigitNum;\r\n        this.txt.setText(time);\r\n    },\r\n    setTimeScale: function (scene, timeScale) {\r\n        scene.matter.world.engine.timing.timeScale = timeScale;\r\n        this.timeScale = timeScale;\r\n    },\r\n    getCurr: function () { return this.curr; },\r\n    updateLast10CntAnim: function (scene) {\r\n        // stop bgm & hide setting btn & time increasing is not possible\r\n        if (this.isFirstLast10HasOnceCnt) {\r\n            this.isFirstLast10HasOnceCnt = false;\r\n            audio.pauseBgm('gameBgm');\r\n            HideSettingBtn(scene);\r\n        }\r\n        this.last10Txt.setVisible(true);\r\n        const time = Math.ceil(this.curr / 1000);\r\n        if (this.last10PrevTime !== time) {\r\n            this.isLast10HasOnceCnt = true;\r\n            this.last10PrevTime = time;\r\n        }\r\n        else\r\n            this.isLast10HasOnceCnt = false;\r\n        if (this.isLast10HasOnceCnt)\r\n            this.sndLast10Voice(scene, time);\r\n    },\r\n    update: function (scene, delta) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        if (this.curr > 0) {\r\n            this.curr -= delta * this.timeScale;\r\n            this.set2Format(this.curr);\r\n            const isUnder10Sec = this.curr > 0 && this.curr <= 10 * 1000;\r\n            isUnder10Sec && this.updateLast10CntAnim(scene, delta);\r\n            return;\r\n        }\r\n        if (this.isGameTimeEndOnceCnt) {\r\n            this.isGameTimeEndOnceCnt = false;\r\n            system.setIsGameOver(true);\r\n            this.curr = 0;\r\n            this.set2Format(0);\r\n            this.last10Txt.setVisible(false);\r\n            gameover.animTimeOver(scene);\r\n            return;\r\n        }\r\n    },\r\n    initTimeIncrease: function () {\r\n        this.increasedTime = 0;\r\n        return this.increasedTime;\r\n    },\r\n    getTimeIncrease: function () { return this.increasedTime; },\r\n    addTimeIncrease: function (time) {\r\n        this.increasedTime += time;\r\n        return this.increasedTime;\r\n    },\r\n};\r\nconst InitGameTime = () => {\r\n    time_GameTime.last10Txt.setVisible(false);\r\n    time_GameTime.last10PrevTime = 11;\r\n    time_GameTime.isLast10HasOnceCnt = true;\r\n    time_GameTime.isGameTimeEndOnceCnt = true;\r\n    time_GameTime.curr = time_GameTime.init;\r\n    time_GameTime.increasedTime = 0;\r\n    time_GameTime.timeScale = 1;\r\n    time_GameTime.initTimeIncrease();\r\n};\r\nconst CreateGameTimeTxt = (scene) => {\r\n    const initX = TxtMargin - 10;\r\n    const initY = 120;\r\n    time_GameTime.txt = scene.add.text(initX, initY, '');\r\n    time_GameTime.txt.setAlpha(TxtAlpha);\r\n    time_GameTime.txt.setOrigin(0, 0);\r\n    time_GameTime.txt.setFontSize(TxtSize);\r\n    time_GameTime.txt.setBackgroundColor(TxtBackgroundColor);\r\n    time_GameTime.last10Txt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '');\r\n    time_GameTime.last10Txt.setAlpha(0.5);\r\n    time_GameTime.last10Txt.setOrigin(0.5, 0.5);\r\n    time_GameTime.last10Txt.setFontSize(userSetting/* View.w */.G7.w / 2);\r\n    time_GameTime.last10Txt.setVisible(false);\r\n    [time_GameTime.txt, time_GameTime.last10Txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setFontFamily(TxtFamily);\r\n        depth_SetDepth(txt, 'txt');\r\n    });\r\n    InitGameTime();\r\n};\r\nconst SetmillieSec2SecTimeFormat = (millieSec) => {\r\n    const sec = (millieSec / 1000).toFixed(2) + ' sec';\r\n    return sec;\r\n};\r\n/* harmony default export */ const ui_time = (time_GameTime);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/score.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Score = {\r\n    txt: null,\r\n    txtBackground: null,\r\n    bTxt: null,\r\n    bTxtBackground: null,\r\n    txtNum: 0,\r\n    bTxtNum: 0,\r\n    setFormat: function (score) {\r\n        this.txtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.txt.setText(finalScore);\r\n        if (this.txtNum > this.bTxtNum)\r\n            this.setBFormat(score);\r\n        return this;\r\n    },\r\n    setBFormat: function (score) {\r\n        this.bTxtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.bTxt.setText(finalScore);\r\n        return this;\r\n    },\r\n    add: function (score) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        let finalScore = Number(this.txt.text) + score;\r\n        this.setFormat(finalScore);\r\n        return finalScore;\r\n    },\r\n    getScore: function () { return this.txtNum; },\r\n    getBScore: function () { return this.bTxtNum; },\r\n    compareNormalAndBest: function (score) {\r\n        const prevBest = GetLocalStorageItem(storage, 'best');\r\n        if (prevBest < score) {\r\n            this.setBFormat(score);\r\n            SetLocalStorageItem(storage, 'best', score);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    getBonusTimeScore: function () {\r\n        return Math.floor(ui_time.getTimeIncrease() / 100);\r\n    },\r\n    getFinalScore: function () {\r\n        return Math.floor(Score.getScore() + this.getBonusTimeScore());\r\n    },\r\n};\r\nconst InitScore = () => {\r\n    Score.txtNum = 0;\r\n    Score.bTxtNum = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(Score.bTxtNum);\r\n};\r\nconst TxtGap = 110;\r\nconst CreateScoreTxt = (scene) => {\r\n    Score.bTxt = scene.add.text(TxtMargin / 2, TxtMargin * 2, '');\r\n    Score.bTxtBackground = scene.add.text(Score.bTxt.x + TxtGap, Score.bTxt.y, 'Best');\r\n    Score.txt = scene.add.text(TxtMargin / 2, TxtMargin * 3, '');\r\n    Score.txtBackground = scene.add.text(Score.txt.x + TxtGap, Score.txt.y, 'Score');\r\n    [Score.bTxtBackground, Score.txtBackground].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(1, -0.1);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n        txt.setFontStyle('bold italic');\r\n        txt.setAlpha(0.3);\r\n    });\r\n    [Score.bTxt, Score.txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(0, 0);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n    });\r\n    let bestScore = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(bestScore);\r\n    [Score.bTxtBackground, Score.txtBackground, Score.bTxt, Score.txt].map((txt) => {\r\n        depth_SetDepth(txt, 'txt');\r\n    });\r\n    InitScore();\r\n};\r\n/* harmony default export */ const ui_score = (Score);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/efx/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Efx = {\r\n    bgParticleList: [],\r\n    // timeIncrease: <Phaser.GameObjects.Text[]> [],   // when block cleared, increase time by block's own chance\r\n    // score: <Phaser.GameObjects.Text[]> [],          // when block cleared, increase score\r\n    list: [],\r\n    setConfig: function (particle, config) {\r\n        const finalConfig = Object.assign({ x: 0, y: 0, active: false }, config);\r\n        let emitter;\r\n        const nestedEmitterIdx = this.list.findIndex(emitter => emitter.name === config.name);\r\n        if (nestedEmitterIdx >= 0)\r\n            this.list[nestedEmitterIdx] = particle.createEmitter(finalConfig);\r\n        else {\r\n            emitter = particle.createEmitter(finalConfig);\r\n            this.list.push(emitter);\r\n        }\r\n        return emitter;\r\n    },\r\n    getEmitter: function (name) {\r\n        const targetEmitter = this.list.find(emitter => emitter.name === name);\r\n        if (!targetEmitter) {\r\n            console.warn(`emitter ${name} is not in the particle list`);\r\n            return;\r\n        }\r\n        return targetEmitter;\r\n    },\r\n    activeEmitter(x, y, name) {\r\n        const targetEmitter = this.getEmitter(name);\r\n        if (!targetEmitter)\r\n            return false;\r\n        targetEmitter.active = true;\r\n        targetEmitter.setPosition(x, y);\r\n        return targetEmitter;\r\n    },\r\n    animEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.explode();\r\n        return instanceExplode;\r\n    },\r\n    startEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.start();\r\n        return instanceExplode;\r\n    },\r\n    animScale: function (scene, target) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 1.2, duration: 300, yoyo: true,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setScale(data.value);\r\n            },\r\n        });\r\n    },\r\n    animPos: function (scene, target, amount) {\r\n        const targetInitY = target.y;\r\n        scene.tweens.addCounter({\r\n            from: targetInitY, to: targetInitY + amount, duration: 2400,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setPosition(target.x, data.value);\r\n            },\r\n        });\r\n    },\r\n    animTimeIncrease: function (block, chance, value) {\r\n        const { scene } = block;\r\n        const chancePosY = block.y - 100;\r\n        const timeSec = SetmillieSec2SecTimeFormat(value);\r\n        const timeIncreaseOnUiRndPosX = ui_time.txt.x + (ui_time.txt.width * 1.5) - 5 + (0,math/* GetRndNum */.hg)(-3, 3);\r\n        const timeIncreaseOnUiRndPosY = ui_time.txt.y + ui_time.txt.height / 2 + (0,math/* GetRndNum */.hg)(-10, 10);\r\n        const timeIncreaseOnUi = scene.add.text(timeIncreaseOnUiRndPosX, timeIncreaseOnUiRndPosY, '+' + timeSec).setVisible(false);\r\n        const timeIncreaseTxt = scene.add.text(block.x, chancePosY, 'Time Critical!').setVisible(false);\r\n        const timeIncreaseChance = scene.add.text(timeIncreaseTxt.x, timeIncreaseTxt.y + 25, chance.toString() + '%').setVisible(false);\r\n        const timeIncreaseOnBlock = scene.add.text(timeIncreaseChance.x, timeIncreaseChance.y + 25, timeSec).setVisible(false);\r\n        [timeIncreaseOnUi, timeIncreaseTxt, timeIncreaseChance, timeIncreaseOnBlock].map((txt) => {\r\n            font_SetFont2CommonContextStyle(txt);\r\n            depth_SetDepth(txt, 'txt');\r\n            txt.setVisible(true);\r\n            this.animScale(scene, timeIncreaseOnUi);\r\n        });\r\n        const twList = [];\r\n        twList.push({\r\n            from: timeIncreaseOnUiRndPosX, to: timeIncreaseOnUiRndPosX + 10, duration: 2400,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            onUpdate: (tw, twData) => { timeIncreaseOnUi.x = twData.value; },\r\n            onComplete: () => { timeIncreaseOnUi.destroy(); }\r\n        });\r\n        twList.push({\r\n            from: 1, to: 0, duration: 2400,\r\n            onUpdate: (tw, twData) => {\r\n                timeIncreaseTxt.setAlpha(twData.value);\r\n                timeIncreaseChance.setAlpha(twData.value);\r\n                timeIncreaseOnBlock.setAlpha(twData.value);\r\n            },\r\n            onComplete: () => {\r\n                timeIncreaseTxt.destroy();\r\n                timeIncreaseChance.destroy();\r\n                timeIncreaseOnBlock.destroy();\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n        this.animPos(scene, timeIncreaseTxt, -30);\r\n        this.animPos(scene, timeIncreaseChance, -30);\r\n        this.animPos(scene, timeIncreaseOnBlock, -30);\r\n        return this;\r\n    },\r\n    animScore: function (block, score) {\r\n        const { scene } = block;\r\n        const scoreTxt = scene.add.text(block.x, block.y, Math.floor(score).toString()).setVisible(false);\r\n        font_SetFont2CommonContextStyle(scoreTxt);\r\n        depth_SetDepth(scoreTxt, 'txt');\r\n        scoreTxt.setFontSize(TxtTitleSize);\r\n        // score particle emit\r\n        const scoreSfxList = ['scoreBlue', 'scoreGreen', 'scoreBrown'];\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, scoreSfxList.length);\r\n        Efx.animEmitter(block.x, block.y, scoreSfxList[rndIdx]);\r\n        // alpha tw\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 2400,\r\n            onStart: () => {\r\n                scoreTxt.setVisible(true);\r\n                audio.playSfx('scoreSfx');\r\n            },\r\n            onUpdate: (tw, data) => { scoreTxt.setAlpha(data.value); },\r\n            onComplete: () => { scoreTxt.destroy(); }\r\n        });\r\n        this.animScale(scene, scoreTxt);\r\n        this.animPos(scene, scoreTxt, -30);\r\n    },\r\n    animNewBest: function () {\r\n        audio.playSfx('voiceHighScore');\r\n        this.bgParticleList.map(key => this.startEmitter(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, key));\r\n        this.startEmitter(0, 0, 'newBestScore');\r\n    },\r\n    stopAll: function () {\r\n        this.list.map(emitter => emitter.stop());\r\n    },\r\n};\r\nconst CreateEfx = (scene) => {\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const commonTouchConfig = {\r\n        lifespan: { min: 10, max: 350 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 200,\r\n        quantity: 64,\r\n        scale: { start: 0.3, end: 0.05 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBlue', frame: 'blue' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchGreen', frame: 'green' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBrown', frame: 'yellow' }, commonTouchConfig));\r\n    const commonScoreConfig = {\r\n        lifespan: { min: 100, max: 500 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 350,\r\n        quantity: 64,\r\n        scale: { start: 0.2, end: 0.1 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBlue', frame: 'blue' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreGreen', frame: 'green' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBrown', frame: 'yellow' }, commonScoreConfig));\r\n    // touch input\r\n    const touchSfxList = ['touchBlue', 'touchGreen', 'touchBrown'];\r\n    scenes_input.add('down', (ptr, currentlyOver) => {\r\n        audio.playSfx('touchSfx');\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, touchSfxList.length);\r\n        const emitter = Efx.animEmitter(ptr.x, ptr.y, touchSfxList[rndIdx]);\r\n        // scene.cameras.main.shake(200, 0.01, true);\r\n    });\r\n    // scene.input.off('pointerdown');\r\n    // scene.input.on('pointerdown', (ptr) => {\r\n    //     GameAudio.playSfx('touchSfx');\r\n    //     const rndIdx = GetRndInt(0, touchSfxList.length);\r\n    //     const emitter = Efx.animEmitter(ptr.x, ptr.y, touchSfxList[rndIdx]);\r\n    //     // const scoreSfxList = [ 'scoreBlue', 'scoreGreen', 'scoreBrown' ];\r\n    //     // const rndIdx = GetRndInt(0, scoreSfxList.length);\r\n    //     // const scoreInstance = Efx.animEmitter(ptr.x, ptr.y, scoreSfxList[rndIdx]);\r\n    //     // Efx.animEmitter(ptr.x, ptr.y, 'score');\r\n    //     // console.log('rndIdx: ', rndIdx, touchSfxList[rndIdx]);\r\n    //     // console.log('emitter: ', emitter);\r\n    //     // ptr.event.preventDefault();\r\n    //     chckPtrDefault(ptr);\r\n    // });\r\n    depth_SetDepth(blockParticle, 'particle');\r\n    return Efx;\r\n};\r\nconst CreateGameOverEfx = (scene, img) => {\r\n    Efx.bgParticleList = [\r\n        'diamond2', 'diamond3', 'diamond4',\r\n        'ruby1', 'ruby2', 'ruby3', 'ruby4',\r\n        'key1', 'key2', 'key3', 'key4',\r\n    ];\r\n    Efx.bgParticleList.map((particleName) => {\r\n        const particle = scene.add.particles(particleName);\r\n        const duration = 2000;\r\n        Efx.setConfig(particle, {\r\n            name: particleName,\r\n            angle: { min: 100, max: 440 },\r\n            speed: 350,\r\n            gravityY: -200,\r\n            lifespan: duration,\r\n            quantity: 1,\r\n            frequency: 60,\r\n            scale: { min: 0.1, max: 1 },\r\n            rotate: { onEmit: () => (0,math/* GetRndNum */.hg)(0, 360) }\r\n        });\r\n        depth_SetDepth(particle, 'particle');\r\n    });\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const width = img.width * gameover.newBestScoreBgScaleW;\r\n    const height = img.height * gameover.newBestScoreBgScaleH;\r\n    const gameOverEmitZone = new Phaser.Geom.Rectangle(img.x - width / 2, img.y - height / 2, width, height);\r\n    Efx.setConfig(blockParticle, {\r\n        name: 'newBestScore',\r\n        frame: 'blue',\r\n        lifespan: 1000,\r\n        gravityY: 10,\r\n        scale: { start: 0, end: 0.25, ease: 'Quad.easeOut' },\r\n        alpha: { start: 1, end: 0, ease: 'Quad.easeIn' },\r\n        blendMode: 'ADD',\r\n        emitZone: { type: 'random', source: gameOverEmitZone },\r\n    });\r\n    depth_SetDepth(blockParticle, 'highest');\r\n    return Efx;\r\n};\r\n/* harmony default export */ const efx = (Efx);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/gameover.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameOver = {\r\n    overTxt: null,\r\n    layer: null,\r\n    newBestScoreBgScaleW: 2.4,\r\n    newBestScoreBgScaleH: 3.2,\r\n    newBestScoreBg: null,\r\n    newBestScoreTxt: null,\r\n    newBestScoreNum: null,\r\n    data: {\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    },\r\n    animCommonOver: function (scene, sndKey, txt) {\r\n        system.setIsGameOver(true);\r\n        audio.playSfx(sndKey);\r\n        const overSnd = scene.sound.get(sndKey);\r\n        const overSndTiming = overSnd.duration / 2 * 1000 - 100;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: overSndTiming, duration: overSndTiming,\r\n            onStart: () => {\r\n                this.overTxt.setVisible(true);\r\n                this.overTxt.setText(txt + '\\n');\r\n            },\r\n            onComplete: () => {\r\n                this.overTxt.setText(txt + '\\nOver');\r\n                setTimeout(() => {\r\n                    this.animShow(scene, {\r\n                        title: txt + ' Over',\r\n                        bonusTime: ui_score.getBonusTimeScore(),\r\n                        score: ui_score.getScore(),\r\n                        finalScore: ui_score.getFinalScore()\r\n                    });\r\n                }, 1000);\r\n            }\r\n        });\r\n    },\r\n    animTimeOver: function (scene) { this.animCommonOver(scene, 'voiceTimeOver', 'Time'); },\r\n    animGameOver: function (scene) { this.animCommonOver(scene, 'voiceGameOver', 'Game'); },\r\n    animShow: function (scene, data) {\r\n        // set default data for performance\r\n        this.show({\r\n            title: data.title,\r\n            bonusTime: 0,\r\n            score: 0,\r\n            finalScore: 0\r\n        });\r\n        // anim to bonus time & score\r\n        const prevBestScore = GetLocalStorageItem(storage, 'best');\r\n        const { score, bonusTime, finalScore } = data;\r\n        ui_score.compareNormalAndBest(finalScore); // test\r\n        const twList = [];\r\n        const sfxCommonTwConfig = {\r\n            // updating score sfx\r\n            from: 0, to: score, duration: 100, repeat: 9,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            // onRepeat: () => { GameAudio.playSfx('voiceScore'); }\r\n        };\r\n        const scaleCommonTwConfig = {\r\n            from: 1, to: 1.3, duration: 500, yoyo: true, ease: 'Back.easeInOut',\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n        };\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score\r\n            from: 0, to: score, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update bonus time\r\n            from: 0, to: bonusTime, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score via bonus time (final score)\r\n            from: score, to: finalScore, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                // show new best score performance if score is better than prev best one\r\n                if (finalScore > prevBestScore)\r\n                    this.newBestScoreTxt.show(finalScore);\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n    },\r\n    show: function (data) {\r\n        data && this.setTxtData(data);\r\n        this.layer.setVisible(true);\r\n        return this;\r\n    },\r\n    hide: function () {\r\n        this.layer.setVisible(false);\r\n        this.newBestScoreTxt.hide();\r\n        return this;\r\n    },\r\n    setTxtData: function (data) {\r\n        this.data = data;\r\n        const { title, bonusTime, score, finalScore } = this.data;\r\n        this.layer.titleTxt.setText(title);\r\n        this.layer.timeTxt.setText(bonusTime);\r\n        this.layer.scoreTxt.setText(score);\r\n    },\r\n};\r\nconst InitGameOver = () => {\r\n    GameOver.setTxtData({\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    });\r\n    GameOver.hide();\r\n    GameOver.overTxt.setVisible(false);\r\n};\r\nconst ContextTxtGapH = userSetting/* View.h */.G7.h / 18;\r\nconst BtnGapW = userSetting/* View.w */.G7.w / 6;\r\nconst CreateGameOver = (scene, themeIdx) => {\r\n    const themeColorList = ['Green', 'Brown', 'Blue'];\r\n    const color = themeColorList[themeIdx];\r\n    GameOver.overTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '').setVisible(false);\r\n    GameOver.layer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    const bg = scene.add.image(0, 0, 'blackScreen');\r\n    bg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    bg.setInteractive();\r\n    bg.setAlpha(0.4);\r\n    const context = scene.add.image(0, 0, 'panel' + color);\r\n    context.setDisplaySize(userSetting/* View.w */.G7.w - font_ContextMarginW, userSetting/* View.h */.G7.h - font_ContextMarginH);\r\n    const titleBg = scene.add.image(0, -userSetting/* View.h */.G7.h / 4, 'btn' + color).setScale(1.8);\r\n    const title = scene.add.text(titleBg.x, titleBg.y, 'Game Over');\r\n    GameOver.layer.titleTxt = title;\r\n    const bonusTime = scene.add.text(0, -ContextTxtGapH, 'Bonus Time');\r\n    const bonusTimeTxt = scene.add.text(0, bonusTime.y + ContextTxtGapH, '0');\r\n    GameOver.layer.timeTxt = bonusTimeTxt;\r\n    const score = scene.add.text(0, ContextTxtGapH, 'Score');\r\n    const scoreTxt = scene.add.text(0, score.y + ContextTxtGapH, 'Score');\r\n    GameOver.layer.scoreTxt = scoreTxt;\r\n    [GameOver.overTxt, title, bonusTime, bonusTimeTxt, score, scoreTxt].map((ele) => {\r\n        font_SetFont2CommonContextStyle(ele);\r\n    });\r\n    GameOver.overTxt.setFontSize(TxtOverHeadSize);\r\n    title.setFontSize(font_TxtTitleHeadSize);\r\n    const titleBtn = scene.add.image(-BtnGapW, userSetting/* View.h */.G7.h / 4, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const titleBtnImg = scene.add.image(titleBtn.x, titleBtn.y - 4, 'overBack').setInteractive();\r\n    const titleFuncDown = () => {\r\n        titleBtn.setTexture('overBtnDown' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y + 4);\r\n    };\r\n    const titleFuncUp = () => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        game_StopGame(scene);\r\n        title_StartTitle(scene);\r\n    };\r\n    const titleFuncOut = (ptr) => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n    };\r\n    titleBtn.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtnImg.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtn.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtnImg.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtn.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    titleBtnImg.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    const retryBtn = scene.add.image(BtnGapW, titleBtn.y, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const retryBtnImg = scene.add.image(retryBtn.x, retryBtn.y - 4, 'overRetry').setInteractive();\r\n    const retryFuncDown = () => {\r\n        retryBtn.setTexture('overBtnDown' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y + 4);\r\n    };\r\n    const retryFuncUp = () => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        RestartGame(scene);\r\n    };\r\n    const retryFuncOut = (ptr) => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n    };\r\n    retryBtn.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtnImg.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtn.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtnImg.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtn.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    retryBtnImg.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    GameOver.layer.add([\r\n        bg,\r\n        context,\r\n        titleBg, title,\r\n        bonusTime, bonusTimeTxt,\r\n        score, scoreTxt,\r\n        titleBtn, titleBtnImg,\r\n        retryBtn, retryBtnImg,\r\n    ]);\r\n    GameOver.newBestScoreBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, 'btn' + color);\r\n    GameOver.newBestScoreBg.setScale(GameOver.newBestScoreBgScaleW, GameOver.newBestScoreBgScaleH);\r\n    GameOver.newBestScoreTxt = scene.add.text(GameOver.newBestScoreBg.x, GameOver.newBestScoreBg.y - 6, '      New\\nBest Score!');\r\n    font_SetFont2CommonContextStyle(GameOver.newBestScoreTxt);\r\n    GameOver.newBestScoreTxt.setFontSize(font_TxtTitleHeadSize);\r\n    GameOver.newBestScoreTxt.setFontFamily('Arial Black');\r\n    GameOver.newBestScoreTxt.show = () => {\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setScale(0.1);\r\n        GameOver.newBestScoreBg.setVisible(true);\r\n        GameOver.newBestScoreTxt.setVisible(true);\r\n        // GameAudio.playSfx('gearAnim');\r\n        scene.tweens.addCounter({\r\n            from: 0.1, to: 1, duration: 800, ease: 'Back.easeInOut',\r\n            onUpdate: (tw, twData) => {\r\n                const value = twData.value;\r\n                GameOver.newBestScoreBg.setScale(value * GameOver.newBestScoreBgScaleW, value * GameOver.newBestScoreBgScaleH);\r\n                GameOver.newBestScoreTxt.setScale(value);\r\n            },\r\n            onComplete: () => {\r\n                efx.animNewBest();\r\n            }\r\n        });\r\n    };\r\n    GameOver.newBestScoreTxt.hide = () => {\r\n        GameOver.newBestScoreBg.setVisible(false);\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setVisible(false);\r\n        GameOver.newBestScoreTxt.setScale(1);\r\n    };\r\n    GameOver.newBestScoreTxt.hide();\r\n    depth_SetDepth(GameOver.overTxt, 'txt');\r\n    depth_SetDepth(GameOver.layer, 'gameOver');\r\n    depth_SetDepth(GameOver.newBestScoreBg, 'newBest');\r\n    depth_SetDepth(GameOver.newBestScoreTxt, 'newBest');\r\n    InitGameOver();\r\n    return GameOver;\r\n};\r\n/* harmony default export */ const gameover = (GameOver);\r\n\r\n\n// EXTERNAL MODULE: ./src/utils/etc.ts\nvar etc = __webpack_require__(663);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/circle.ts\n\r\n\r\nconst RndCircleImgTexture = ['blueBall', 'greenBall', 'brownBall'];\r\nconst GetCircleShape = () => {\r\n    const RadiusValue = 60;\r\n    const Radius = userSetting/* View.calcRatio */.G7.calcRatio(RadiusValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Circle(Radius / 2, Radius / 2, Radius),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Circle.Contains,\r\n        score: (RadiusValue ** 2) * 3 / 100,\r\n        bodyConfig: {\r\n            type: 'circle',\r\n            radius: Radius,\r\n            offset: { x: Radius / 2, y: Radius / 2 }\r\n        },\r\n        imgTexture: RndCircleImgTexture[(0,math/* GetRndInt */.dZ)(0, RndCircleImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Radius * 2, Radius * 2);\r\n            block.getPhysicsCon().setCircle(Radius);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const circle = (GetCircleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/rectangle.ts\n\r\n\r\nconst RndRectImgTexture = ['blueRect', 'greenRect', 'brownRect'];\r\nconst GetRectangleShape = () => {\r\n    const ShortSideValue = 100;\r\n    const LongSideValue = ShortSideValue + ShortSideValue / 2;\r\n    const ShortSide = userSetting/* View.calcRatio */.G7.calcRatio(ShortSideValue);\r\n    const LongSide = userSetting/* View.calcRatio */.G7.calcRatio(LongSideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(ShortSide / 2, LongSide / 2, ShortSide, LongSide),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: ShortSideValue * LongSideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: ShortSide,\r\n            height: LongSide,\r\n            offset: { x: ShortSide / 2, y: LongSide / 2 }\r\n        },\r\n        imgTexture: RndRectImgTexture[(0,math/* GetRndInt */.dZ)(0, RndRectImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(ShortSide, LongSide);\r\n            block.getPhysicsCon().setSize(ShortSide, LongSide);\r\n            // block.input && block.input.hitArea.setTo(ShortSide, LongSide);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const rectangle = (GetRectangleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/square.ts\n\r\n\r\nconst RndSquareImgTexture = ['blueSquare', 'greenSquare', 'brownSquare'];\r\nconst GetSquareShape = () => {\r\n    const SideValue = 100;\r\n    const Side = userSetting/* View.calcRatio */.G7.calcRatio(SideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(Side / 2, Side / 2, Side, Side),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: SideValue * SideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: Side,\r\n            height: Side,\r\n            offset: { x: Side / 2, y: Side / 2 }\r\n        },\r\n        imgTexture: RndSquareImgTexture[(0,math/* GetRndInt */.dZ)(0, RndSquareImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Side, Side);\r\n            block.getPhysicsCon().setSize(Side, Side);\r\n            // block.input && block.input.hitArea.setTo(Side, Side);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const square = (GetSquareShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/index.ts\n\r\n\r\n\r\n\r\nconst ShapeTypeNameList = ['ball', 'rect', 'square',];\r\nconst ShapeTypePropertiesList = [\r\n    circle(), rectangle(), square(),\r\n];\r\nconst CommonPtrEvt = {\r\n    ptrDown: function (block) {\r\n        console.log('common ptr down');\r\n    },\r\n    ptrUp: function (block) {\r\n        console.log('common ptr up');\r\n    },\r\n    ptrOut: function (block) {\r\n        console.log('common ptr out');\r\n    },\r\n};\r\nconst PtrEvtList = ['ptrDown', 'ptrUp', 'drag', 'dragEnd'];\r\nconst ShapeTypeList = ShapeTypeNameList.map((ele, idx) => {\r\n    var _a;\r\n    // setting block data with common evt\r\n    let bData = (_a = ShapeTypePropertiesList[idx]) === null || _a === void 0 ? void 0 : _a.bData;\r\n    if (!bData)\r\n        bData = Object.assign({}, CommonPtrEvt);\r\n    else {\r\n        PtrEvtList.map((ptrEvt) => {\r\n            let tmpPrevFunc = bData[ptrEvt];\r\n            if (tmpPrevFunc) {\r\n                ShapeTypePropertiesList[idx].bData[ptrEvt] = (block) => {\r\n                    CommonPtrEvt[ptrEvt](block);\r\n                    tmpPrevFunc(block);\r\n                };\r\n            }\r\n        });\r\n    }\r\n    return Object.assign({ typeName: ele }, ShapeTypePropertiesList[idx]);\r\n});\r\nconst ShapeSystem = {\r\n    getCertainShape: function (shapeTypeName) {\r\n        return ShapeTypeList.find((ele) => ele.typeName === shapeTypeName);\r\n    },\r\n    getRndShape: function () { return (0,etc/* GetRndEleFromArray */.fB)(ShapeTypeList); },\r\n};\r\nconst SetBlockShape = (block, typeName) => {\r\n    if (!typeName)\r\n        block.setShape(ShapeSystem.getRndShape());\r\n    else\r\n        block.setShape(ShapeSystem.getCertainShape(typeName));\r\n    block.setShapeName(block.getShape().typeName);\r\n    block.getPhysicsCon().setBody(block.getShape().bodyConfig);\r\n    block.getShapeImg().setTexture(block.getShape().imgTexture);\r\n    block.getShape().setImgDisplaySize(block);\r\n    if (block.getShape().bData)\r\n        block.addBlockData(block.getShape().bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const shape = ((/* unused pure expression or super */ null && (ShapeSystem)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/system.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst BlockSystem = {\r\n    // manage block list\r\n    onScreenList: [],\r\n    standbyList: [],\r\n    // static postion of block\r\n    standbyPosX: -500,\r\n    standbyPosY: -500,\r\n    leftX: 0,\r\n    rightX: userSetting/* View.w */.G7.w,\r\n    bottomY: 0,\r\n    spawnY: -200,\r\n    getRndSpawnX: function () { return (0,math/* GetRndInt */.dZ)(this.leftX, this.rightX); },\r\n    getRndAngle: function () { return (0,math/* GetRndInt */.dZ)(0, 360); },\r\n    // game over related properties\r\n    overLineY: 0,\r\n    overCnt: 0,\r\n    overCntMax: 8 * 1000,\r\n    overMaxBlock: 8,\r\n    isGameOver: false,\r\n    getIsGameOver: function () { return this.isGameOver; },\r\n    setIsGameOver: function (isOver) { return this.isGameOver = isOver; },\r\n    // responsive spawning block time\r\n    nextSpawnTime: 0,\r\n    spawnDelayBySecList: [800, 950, 1100, 1250, 1400, 1550],\r\n    spawnDelayBySec: 1800,\r\n};\r\nconst InitBlockSystem = () => {\r\n    RemoveAllBlockOnDisplay();\r\n    BlockSystem.setIsGameOver(false);\r\n    BlockSystem.nextSpawnTime = ui_time.init;\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[5];\r\n};\r\nconst AddCertainBlock = (scene, typeName) => {\r\n    let block;\r\n    // get block from standy list or create new one\r\n    if (BlockSystem.standbyList.length > 0) {\r\n        block = BlockSystem.standbyList.shift();\r\n        if (!block.scene) { // is block scene removed?\r\n            block.destroy();\r\n            block = new basic(scene);\r\n        }\r\n    }\r\n    else\r\n        block = new basic(scene);\r\n    // set block shape & type, push to on screen list & spawn\r\n    SetBlockShape(block);\r\n    Set2TypeBlock(block, typeName);\r\n    BlockSystem.onScreenList.push(block);\r\n    SpawnBlock(block);\r\n    return block;\r\n};\r\nconst AddObstacleBlock = (block) => {\r\n    block.scene.cameras.main.shake(200, 0.02, true);\r\n    audio.playSfx('spawnObstacleSfx');\r\n    AddCertainBlock(block.scene, 'obstacle');\r\n    return block;\r\n};\r\nconst GetRndBlockType = () => {\r\n    // get random block type via spawn chance\r\n    let distributionArr = [];\r\n    BlockUniqueProperties.map((ele) => {\r\n        // ele.spawnChance = ele.spawnChance / SpawnMaxChance;\r\n        if (ele.spawnChance === 0)\r\n            return;\r\n        for (let i = 0; i < ele.spawnChance; i++) {\r\n            distributionArr.push(ele.typeName);\r\n        }\r\n    });\r\n    return distributionArr[(0,math/* GetRndInt */.dZ)(0, distributionArr.length)];\r\n};\r\nconst AddRndBlock = (scene) => {\r\n    const rndType = GetRndBlockType();\r\n    AddCertainBlock(scene, rndType);\r\n};\r\nconst ClearBlock = (block, score) => {\r\n    if (!block)\r\n        return;\r\n    let blockScore = score ? score : block.getScore();\r\n    ui_score.add(blockScore);\r\n    efx.animScore(block, blockScore);\r\n    const { value, chance } = block.getTimeIncrease();\r\n    if (ui_time.curr > ui_time.last10 && chance > (0,math/* GetRndNum */.hg)(0, 100)) {\r\n        ui_time.increaseTime(value);\r\n        efx.animTimeIncrease(block, chance, value);\r\n    }\r\n    RemoveBlock(block);\r\n};\r\nconst RemoveBlock = (block) => {\r\n    // remove from onScreenList\r\n    BlockSystem.onScreenList = BlockSystem.onScreenList.filter(screenBlock => screenBlock.id !== block.id);\r\n    if (!block.scene) {\r\n        block.destroy();\r\n        return;\r\n    }\r\n    // chck is already in standby list\r\n    if (BlockSystem.standbyList.some(standbyBlock => standbyBlock.id === block.id))\r\n        return;\r\n    DeathBlock(block);\r\n    block.setPosition(BlockSystem.standbyPosX, BlockSystem.standbyPosY);\r\n    BlockSystem.standbyList.push(block);\r\n};\r\nconst RemoveAllBlockOnDisplay = () => {\r\n    if (!BlockSystem.onScreenList)\r\n        return;\r\n    BlockSystem.onScreenList.map((block) => { RemoveBlock(block); });\r\n    BlockSystem.onScreenList = [];\r\n    if (!BlockSystem.standbyList)\r\n        return;\r\n    BlockSystem.standbyList = BlockSystem.standbyList.filter((standbyBlock) => {\r\n        if (!standbyBlock.scene) {\r\n            standbyBlock.destroy();\r\n        }\r\n        else\r\n            return standbyBlock;\r\n    });\r\n};\r\nconst UpdateBlockChckIsGameOver = (scene, time, delta) => {\r\n    // chck every block which is game over border line\r\n    const isOverBorderLine = BlockSystem.onScreenList.some((screenBlock) => {\r\n        if (!screenBlock)\r\n            return false;\r\n        return screenBlock.y < BlockSystem.overLineY;\r\n    });\r\n    // block count is over max & at least one block cross game over border line\r\n    if (isOverBorderLine && BlockSystem.onScreenList.length > BlockSystem.overMaxBlock) {\r\n        BlockSystem.overCnt += delta * ui_time.timeScale;\r\n        // game over condition\r\n        if (BlockSystem.overCnt > BlockSystem.overCntMax) {\r\n            BlockSystem.overCnt = 0;\r\n            BlockSystem.setIsGameOver(true);\r\n            gameover.animGameOver(scene);\r\n        }\r\n        else\r\n            BlockSystem.setIsGameOver(false);\r\n    }\r\n    else {\r\n        // init game over warning properties\r\n        BlockSystem.overCnt = 0;\r\n        BlockSystem.setIsGameOver(false);\r\n    }\r\n};\r\nconst UpdateSpawnBlocks = (scene, delta) => {\r\n    // get game time & timeline idx calculate\r\n    const gameTimeCurr = ui_time.getCurr();\r\n    let timelineIdx = parseInt((gameTimeCurr / 1000 / 10).toString());\r\n    if (timelineIdx < 0)\r\n        timelineIdx = 0;\r\n    if (timelineIdx >= BlockSystem.spawnDelayBySecList.length) {\r\n        timelineIdx = BlockSystem.spawnDelayBySecList.length - 1;\r\n    }\r\n    // adjust responsive spawn block time\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[timelineIdx];\r\n    // spawn block\r\n    BlockSystem.nextSpawnTime += delta * ui_time.timeScale;\r\n    if (BlockSystem.nextSpawnTime > BlockSystem.spawnDelayBySec) {\r\n        BlockSystem.nextSpawnTime = 0;\r\n        AddRndBlock(scene);\r\n    }\r\n    ;\r\n};\r\nconst UpdateAllBlocks = (scene, time, delta) => {\r\n    if (BlockSystem.getIsGameOver())\r\n        return;\r\n    UpdateBlockChckIsGameOver(scene, time, delta);\r\n    BlockSystem.onScreenList.map(block => UpdateBlock(block, time, delta));\r\n    UpdateSpawnBlocks(scene, delta);\r\n};\r\n/* harmony default export */ const system = (BlockSystem);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/index.ts\nconst ContextLayerMargin = 120;\r\nconst ui_SettingGapContextMargin = 50;\r\nconst ui_SettingGapContextMarginLarger = 70;\r\nconst ui_SettingContextMargin = 40;\r\nconst SettingTopContextMargin = 80;\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/popup.ts\n\r\n\r\n\r\nconst PopUp = {\r\n    isOpen: false,\r\n    bottomLayer: null,\r\n    contextLayer: null,\r\n    exitBtn: null,\r\n    sndList: [],\r\n    show: function (block) {\r\n        this.isOpen = true;\r\n        const bData = block.getBlockData();\r\n        if (bData) {\r\n            bData.isPopupOpen = true;\r\n            block.setBlockData(bData);\r\n            if (bData.popUpContext)\r\n                this.contextLayer = bData.popUpContext;\r\n        }\r\n        this.bottomLayer.setVisible(true);\r\n        this.contextLayer.setVisible(true);\r\n        this.exitBtn.setVisible(true);\r\n    },\r\n    hide: function (block) {\r\n        this.isOpen = false;\r\n        if (block) {\r\n            const bData = block.getBlockData();\r\n            bData.isPopupOpen = false;\r\n            block.setBlockData(bData);\r\n        }\r\n        this.bottomLayer.setVisible(false);\r\n        this.contextLayer.setVisible(false);\r\n        this.exitBtn.setVisible(false);\r\n    }\r\n};\r\nconst popup_InitPopUp = () => {\r\n    PopUp.contextLayer.removeAll();\r\n    PopUp.hide();\r\n};\r\nconst CreatePopUp = (scene) => {\r\n    PopUp.bottomLayer = scene.add.graphics();\r\n    PopUp.bottomLayer.fillStyle(0x000000, 0.4);\r\n    PopUp.bottomLayer.fillRect(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    PopUp.bottomLayer.setInteractive(new Phaser.Geom.Rectangle(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h), Phaser.Geom.Rectangle.Contains);\r\n    PopUp.bottomLayer.on('pointerup', () => { console.log('touching popup bottom layer'); });\r\n    PopUp.contextLayer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    PopUp.exitBtn = scene.add.image(userSetting/* View.w */.G7.w - ContextLayerMargin, ContextLayerMargin, 'exitBtn');\r\n    PopUp.exitBtn.setInteractive();\r\n    PopUp.exitBtn.on('pointerup', () => {\r\n        PopUp.hide();\r\n    });\r\n    [PopUp.bottomLayer, PopUp.contextLayer, PopUp.exitBtn].map((ele) => {\r\n        ele.setVisible(false);\r\n        depth_SetDepth(ele, 'popUp');\r\n    });\r\n};\r\n/* harmony default export */ const popup = ((/* unused pure expression or super */ null && (PopUp)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/startCnt.ts\n\r\n\r\n\r\nconst GameStartCnt = {\r\n    isStart: false,\r\n    cntTxt: null,\r\n    cntNum: 3,\r\n    getIsStart: function () { return this.isStart; },\r\n    setIsStart: function (isStart) { this.isStart = isStart; },\r\n    setTxt: function (value) {\r\n        GameStartCnt.cntTxt.setText(value.toString());\r\n    },\r\n    setVisible: function (visible) { GameStartCnt.cntTxt.setVisible(visible); },\r\n    setAlpha: function (alpha) { GameStartCnt.cntTxt.setAlpha(alpha); },\r\n    animFadeOut: function (scene) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 400,\r\n            onUpdate: (tw, data) => {\r\n                this.setAlpha(data.value);\r\n            },\r\n            onComplete: () => {\r\n                this.setAlpha(0);\r\n                this.setVisible(false);\r\n                this.setIsStart(true);\r\n            }\r\n        });\r\n    },\r\n    animCnt: function (scene) {\r\n        let cnt = 3;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: 1000, duration: 1000, repeat: 3, delay: 1000,\r\n            onStart: () => {\r\n                this.setVisible(true);\r\n                this.setTxt(3);\r\n                audio.playSfx('voice3');\r\n            },\r\n            onRepeat: () => {\r\n                cnt--;\r\n                if (cnt === 0) {\r\n                    audio.playSfx('voiceGo');\r\n                    this.setTxt('Go!');\r\n                    return;\r\n                }\r\n                this.setTxt(cnt);\r\n                audio.playSfx('voice' + cnt);\r\n            },\r\n            onComplete: () => {\r\n                this.animFadeOut(scene);\r\n            },\r\n        });\r\n    }\r\n};\r\nconst InitGameStartCnt = () => {\r\n    GameStartCnt.setVisible(false);\r\n    GameStartCnt.setAlpha(1);\r\n    GameStartCnt.setIsStart(false);\r\n    GameStartCnt.cntNum = 3;\r\n    GameStartCnt.setTxt(GameStartCnt.cntNum);\r\n};\r\nconst CreateGameStartCnt = (scene) => {\r\n    GameStartCnt.cntTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '3');\r\n    font_SetFont2CommonContextStyle(GameStartCnt.cntTxt);\r\n    GameStartCnt.cntTxt.setFontSize(font_TxtTitleHeadSize);\r\n    InitGameStartCnt();\r\n    GameStartCnt.animCnt(scene);\r\n    // scene.events.on(\"start\", () => {\r\n    //     console.log('start scene evt');\r\n    //     GameStartCnt.animCnt(scene);\r\n    // });\r\n};\r\n/* harmony default export */ const startCnt = (GameStartCnt);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/warning.ts\n\r\n\r\n\r\n\r\nconst GameWarning = {\r\n    hasOnceShow: true,\r\n    hasOnceHide: true,\r\n    time: 6 * 1000,\r\n    sign: null,\r\n    progressBar: null,\r\n    progressBarLine: null,\r\n    progressAmount: 0,\r\n    shakeValue: 1,\r\n    updateShakeValue: (remainedOverCnt) => {\r\n        GameWarning.shakeValue = (GameWarning.time - remainedOverCnt) / 1000;\r\n    },\r\n    show: () => {\r\n        GameWarning.progressAmount = 0;\r\n        GameWarning.sign.setVisible(true);\r\n        GameWarning.progressBar.setVisible(true);\r\n        GameWarning.progressBarLine.setVisible(true);\r\n        GameWarning.draw();\r\n        return GameWarning;\r\n    },\r\n    hide: () => {\r\n        GameWarning.sign.setVisible(false);\r\n        GameWarning.progressBar.setVisible(false);\r\n        GameWarning.progressBarLine.setVisible(false);\r\n        GameWarning.clear();\r\n        audio.stopSfx('warningSfx');\r\n    },\r\n    arcDegree: () => {\r\n        const startAngle = 270 + (GameWarning.progressAmount) * (-180); // 270 ~ 90\r\n        const endAngle = -90 + (GameWarning.progressAmount) * 180; // -90 ~ 90\r\n        return { startAngle: startAngle, endAngle: endAngle };\r\n    },\r\n    draw: () => {\r\n        GameWarning.clear();\r\n        const r = GameWarning.sign.width * 4 / 5;\r\n        GameWarning.progressBarLine.lineStyle(6, 0xfbff00, 1);\r\n        GameWarning.progressBarLine.strokeCircle(0, 0, r);\r\n        GameWarning.progressBar.fillStyle(0xfbff00, 0.4);\r\n        GameWarning.progressBar.beginPath();\r\n        GameWarning.progressBar.arc(0, 0, r, Phaser.Math.DegToRad(GameWarning.arcDegree().startAngle), Phaser.Math.DegToRad(GameWarning.arcDegree().endAngle), true, 0.01);\r\n        GameWarning.progressBar.fillPath();\r\n        GameWarning.progressBar.closePath();\r\n        return GameWarning;\r\n    },\r\n    clear: () => {\r\n        GameWarning.progressBar.clear();\r\n        GameWarning.progressBarLine.clear();\r\n    },\r\n    update: (scene) => {\r\n        const remainedOverCnt = system.overCntMax - system.overCnt;\r\n        // hide warning\r\n        if (system.getIsGameOver())\r\n            GameWarning.hasOnceHide = true;\r\n        if (system.getIsGameOver() || remainedOverCnt > GameWarning.time) {\r\n            if (GameWarning.hasOnceHide) {\r\n                GameWarning.hasOnceHide = false;\r\n                GameWarning.hasOnceShow = true;\r\n                GameWarning.hide();\r\n            }\r\n            return;\r\n        }\r\n        // show warning\r\n        if (GameWarning.hasOnceShow) {\r\n            GameWarning.hasOnceShow = false;\r\n            GameWarning.hasOnceHide = true;\r\n            GameWarning.show();\r\n            scene.tweens.addCounter({\r\n                from: 1, to: 0, duration: 500, yoyo: true, repeat: -1,\r\n                onStart: () => { audio.playSfx('warningSfx'); },\r\n                onRepeat: () => { audio.playSfx('warningSfx'); },\r\n                onUpdate: (tw, twData) => {\r\n                    if (GameWarning.hasOnceShow) {\r\n                        GameWarning.sign.setAlpha(1);\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    GameWarning.sign.setAlpha(twData.value);\r\n                }\r\n            });\r\n        }\r\n        GameWarning.progressAmount = (GameWarning.time - remainedOverCnt) / GameWarning.time;\r\n        GameWarning.draw();\r\n        GameWarning.updateShakeValue(remainedOverCnt);\r\n        scene.cameras.main.shake(160, 0.001 * GameWarning.shakeValue, false);\r\n    },\r\n};\r\nconst InitGameWarning = () => {\r\n    GameWarning.hide();\r\n    GameWarning.hasOnceShow = true;\r\n    GameWarning.progressAmount = 0;\r\n    return GameWarning;\r\n};\r\nconst CreateGameWarning = (scene) => {\r\n    GameWarning.sign = scene.add.image(0, 0, 'warningSign');\r\n    GameWarning.sign.setPosition(userSetting/* View.centerX */.G7.centerX, GameWarning.sign.height);\r\n    GameWarning.progressBar = scene.add.graphics();\r\n    GameWarning.progressBar.setAlpha(0.9);\r\n    GameWarning.progressBarLine = scene.add.graphics();\r\n    const barX = GameWarning.sign.x;\r\n    const barY = GameWarning.sign.y;\r\n    GameWarning.progressBar.setPosition(barX, barY);\r\n    GameWarning.progressBarLine.setPosition(barX, barY);\r\n    [GameWarning.progressBar, GameWarning.progressBarLine, GameWarning.sign].map(ele => depth_SetDepth(ele, 'warning'));\r\n    InitGameWarning();\r\n    return GameWarning;\r\n};\r\n/* harmony default export */ const warning = (GameWarning);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/game.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst StartGame = (scene) => {\r\n    scene.scene.remove('game');\r\n    scene.scene.add('game', GameScene);\r\n    scene.scene.launch('game');\r\n};\r\nconst RestartGame = (scene) => {\r\n    efx.stopAll();\r\n    scene.scene.restart();\r\n};\r\nconst game_StopGame = (scene) => {\r\n    if (scene.scene.get('game')) {\r\n        scene.scene.setActive(false, 'game');\r\n        scene.scene.setVisible(false, 'game');\r\n        efx.stopAll();\r\n        audio.stopBgm('gameBgm');\r\n        setTimeout(() => {\r\n            if (!scene.scene.get('game'))\r\n                return;\r\n            scene.scene.remove('game');\r\n        }, 1000);\r\n    }\r\n};\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'game',\r\n            active: false\r\n        });\r\n        this.themeIdx = 0;\r\n        this.wallGap = userSetting/* View.calcRatio */.G7.calcRatio(45);\r\n        this.wallBottomGap = userSetting/* View.calcRatio */.G7.calcRatio(30);\r\n        this.matterStepForce = 0.08; // apply delta to matter force method\r\n    }\r\n    create() {\r\n        this.createWall();\r\n        this.createBgScene();\r\n        // block system\r\n        InitBlockSystem();\r\n        // input\r\n        CreateInput(this);\r\n        // audio\r\n        CreateGameAudio(this, storage);\r\n        audio.playBgm('gameBgm');\r\n        // ui\r\n        CreateGameStartCnt(this);\r\n        CreateScoreTxt(this);\r\n        CreateGameTimeTxt(this);\r\n        CreatePopUp(this);\r\n        CreateGameWarning(this);\r\n        CreateGameOver(this, this.themeIdx);\r\n        CreateEfx(this);\r\n        CreateGameOverEfx(this, gameover.newBestScoreBg);\r\n        // CreateSetting(this);\r\n        this.createExitBtn();\r\n        // common\r\n        CreateGameCommonUI(this);\r\n        // stop passive loading\r\n        StopPassiveLoading();\r\n        // // debugging\r\n        // const inspectorWidth = 255;\r\n        // PGUInspector(this, { right: window.innerWidth - inspectorWidth, top: 48 });\r\n    }\r\n    update(time, delta) {\r\n        if (!startCnt.getIsStart())\r\n            return;\r\n        ui_time.update(this, delta);\r\n        warning.update(this);\r\n        UpdateInput(delta);\r\n        UpdateAllBlocks(this, time, delta);\r\n        this.updateMatterStep(delta);\r\n        UpdateGameCommonUI(delta);\r\n    }\r\n    createWall() {\r\n        // set matter walls\r\n        const wallThickness = this.wallGap * 5;\r\n        this.matter.world.setBounds(this.wallGap, 0, userSetting/* View.w */.G7.w - (this.wallGap * 2), userSetting/* View.h */.G7.h - this.wallGap, wallThickness, true, true, false, true);\r\n        // create block spawn support wall\r\n        const supportLeft = this.matter.add.rectangle(0, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const supportRight = this.matter.add.rectangle(userSetting/* View.w */.G7.w, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        const btnList = ['btnGreen', 'btnBrown', 'btnBlue'];\r\n        this.themeIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        const leftWall = this.add.tileSprite(0, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const rightWall = this.add.tileSprite(userSetting/* View.w */.G7.w - this.wallGap, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const bottomWall = this.add.image(0, userSetting/* View.h */.G7.h - this.wallGap, btnList[this.themeIdx]).setOrigin(0).setDisplaySize(userSetting/* View.w */.G7.w, this.wallGap);\r\n        [leftWall, rightWall, bottomWall].map(wall => depth_SetDepth(wall, 'wall'));\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                leftWall.tilePositionY += 1;\r\n                rightWall.tilePositionY -= 1;\r\n            }\r\n        });\r\n    }\r\n    createBgScene() {\r\n        const bgColor = (0,math/* GetRndColor */.k8)();\r\n        // select bg color\r\n        this.cameras.main.setBackgroundColor(bgColor);\r\n        // select cloud shape\r\n        this.cloudGroup = this.add.group({\r\n            defaultKey: 'cloud',\r\n            maxSize: 15\r\n        });\r\n        this.spawnCloud();\r\n        // select tree shape\r\n        this.treeGroup = this.add.group({\r\n            defaultKey: 'tree',\r\n            maxSize: 15\r\n        });\r\n        this.spawnTree();\r\n        // select mist\r\n        const bgMistIdx = (0,math/* GetRndInt */.dZ)(1, 4);\r\n        const bgMist = this.add.tileSprite(this.wallGap, userSetting/* View.h */.G7.h - this.wallGap, userSetting/* View.w */.G7.w - (this.wallGap * 2), this.wallGap, 'mist' + bgMistIdx);\r\n        bgMist.setOrigin(0, 1);\r\n        bgMist.setAlpha(0.4);\r\n        depth_SetDepth(bgMist, 'mist');\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                bgMist.tilePositionX += 0.5;\r\n            }\r\n        });\r\n    }\r\n    spawnCloud() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.cloudGroup.children.iterate((cloud) => {\r\n                    // chck deatline\r\n                    if (cloud.x > userSetting/* View.w */.G7.w)\r\n                        this.cloudGroup.killAndHide(cloud);\r\n                    // move clouds\r\n                    cloud.x += cloud.moveGapX;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const cloud = this.cloudGroup.get();\r\n                if (!cloud)\r\n                    return;\r\n                cloud.setTexture('cloud' + (0,math/* GetRndInt */.dZ)(1, 10));\r\n                cloud.setPosition(-cloud.width, (0,math/* GetRndInt */.dZ)(userSetting/* View.centerY */.G7.centerY, userSetting/* View.centerY */.G7.centerY - userSetting/* View.centerY */.G7.centerY / 2));\r\n                cloud.setOrigin(0, 0.5);\r\n                cloud.setActive(true);\r\n                cloud.setAlpha(0.4);\r\n                cloud.moveGapX = (0,math/* GetRndNum */.hg)(0.2, 3);\r\n                depth_SetDepth(cloud, 'cloud');\r\n                cloud.setVisible(true);\r\n                this.spawnCloud();\r\n            }\r\n        });\r\n    }\r\n    spawnTree() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.treeGroup.children.iterate((tree) => {\r\n                    // chck deatline\r\n                    if (tree.x < -tree.width)\r\n                        this.treeGroup.killAndHide(tree);\r\n                    // move clouds\r\n                    tree.x -= 0.5;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const tree = this.treeGroup.get();\r\n                if (!tree)\r\n                    return;\r\n                tree.setTexture('tree' + (0,math/* GetRndInt */.dZ)(1, 36));\r\n                tree.setPosition(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h - this.wallGap);\r\n                tree.setOrigin(0, 1);\r\n                tree.setActive(true);\r\n                tree.setAlpha(0.2);\r\n                depth_SetDepth(tree, 'tree');\r\n                tree.setVisible(true);\r\n                this.spawnTree();\r\n            }\r\n        });\r\n    }\r\n    createExitBtn() {\r\n        const { margin } = ui;\r\n        const doorExitBtn = this.add.image(userSetting/* View.w */.G7.w - margin, margin, 'doorExitBtn');\r\n        CreateUIBtnAnim(this, doorExitBtn);\r\n        SetCommonUIProps(doorExitBtn);\r\n        depth_SetDepth(doorExitBtn, 'highest');\r\n        const popContext = this.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'Go back to title?');\r\n        SetFontStyle(popContext);\r\n        popContext.setFontSize(userSetting/* View.w */.G7.w / 14);\r\n        const doorExitPop = CreateBasicPopUp(this, 'doorExit', {}, {\r\n            exitBtn: {\r\n                isExist: true,\r\n                type: 'yesOrNo',\r\n            },\r\n            evt: {\r\n                show: () => { ui_time.setTimeScale(this, ui_time.showSettingTimeScale); },\r\n                hide: () => { ui_time.setTimeScale(this, ui_time.hideSettingTimeScale); },\r\n                up: (ptr) => {\r\n                    if (!this.scene.isActive('title')) {\r\n                        game_StopGame(this);\r\n                        title_StartTitle(this);\r\n                    }\r\n                },\r\n            },\r\n        });\r\n        doorExitPop.add(popContext);\r\n        doorExitBtn.on('pointerup', () => { doorExitPop.show(); });\r\n    }\r\n    updateMatterStep(delta) { this.matter.world.step(delta); }\r\n}\r\n/* harmony default export */ const game = (GameScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/sns/index.ts\n\r\n\r\n\r\n\r\nconst ChannelAdvertise = {\r\n    textureList: ['blackScreen', 'channelBtnDown', 'channelBtnUp', 'channelLogo',],\r\n    youtubeBtnLayer: null,\r\n    youtubePopUpLayer: null,\r\n    youtubeShow: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(true);\r\n    },\r\n    youtubeHide: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(false);\r\n    },\r\n    blogBtnLayer: null,\r\n    blogPopUpLayer: null,\r\n    blogShow: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(true);\r\n    },\r\n    blogHide: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(false);\r\n    },\r\n};\r\nconst GetSnsAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        // youtube\r\n        { key: 'youtubeLogo', url: CommonSns + 'youtubeLogo.png', type: 'image' },\r\n        { key: 'channelLogo', url: CommonSns + 'channelLogo.jpg', type: 'image' },\r\n        // blog\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitChannel = () => {\r\n    ChannelAdvertise.youtubeHide();\r\n};\r\nconst CreateChannel = (scene, videoUrl, commonTextStyle, channelData) => {\r\n    var _a, _b, _c, _d;\r\n    const btnW = (_a = channelData === null || channelData === void 0 ? void 0 : channelData.w) !== null && _a !== void 0 ? _a : 60;\r\n    const btnH = (_b = channelData === null || channelData === void 0 ? void 0 : channelData.h) !== null && _b !== void 0 ? _b : 45;\r\n    const btnScaleTime = 1.1;\r\n    const btnBg = scene.add.image((_c = channelData === null || channelData === void 0 ? void 0 : channelData.x) !== null && _c !== void 0 ? _c : userSetting/* View.centerX */.G7.centerX, (_d = channelData === null || channelData === void 0 ? void 0 : channelData.y) !== null && _d !== void 0 ? _d : ui.exitPosY, 'channelBtnUp');\r\n    const btnLogo = scene.add.image(btnBg.x, btnBg.y, 'youtubeLogo');\r\n    btnLogo.setInteractive();\r\n    btnLogo.on('pointerdown', () => {\r\n        btnLogo.setDisplaySize(btnW * btnScaleTime, btnH * btnScaleTime);\r\n        btnBg.setTexture('channelBtnDown');\r\n    });\r\n    btnLogo.on('pointerup', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUpss');\r\n        ChannelAdvertise.youtubeShow();\r\n    });\r\n    btnLogo.on('pointerout', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUp');\r\n    });\r\n    btnLogo.setDisplaySize(btnW, btnH);\r\n    ChannelAdvertise.youtubeBtnLayer = scene.add.layer([\r\n        btnBg, btnLogo\r\n    ]);\r\n    const popUpMargin = 70;\r\n    const channelUrl = 'https://www.youtube.com/channel/UCBJnFgIQ9YORTiz10_Mgy_A';\r\n    const videoThumbnail = `https://i1.ytimg.com/vi/${videoUrl.split('=')[1]}/default.jpg`;\r\n    const popUpBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    const popUpTitle = scene.add.text(popUpBg.x, userSetting/* View.h */.G7.h / 8, 'My Youtube');\r\n    const popUpTxtList = [];\r\n    const popUpMadeVideo = scene.add.image(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '');\r\n    let popUpMadeVideoWIP;\r\n    popUpMadeVideo.setDisplaySize(popUpMargin, popUpMargin);\r\n    if (!videoUrl) {\r\n        popUpMadeVideoWIP = scene.add.text(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '         Sorry!\\nWork In Progress');\r\n        popUpTxtList.push(popUpMadeVideoWIP);\r\n    }\r\n    const popUpMadeVideoTxt = scene.add.text(popUpBg.x, popUpMadeVideo.y + popUpMargin, 'Created video');\r\n    const popUpChannel = scene.add.image(popUpBg.x, popUpMadeVideoTxt.y + popUpMargin, 'channelLogo');\r\n    const popUpChannelTxt = scene.add.text(popUpBg.x, popUpChannel.y + popUpMargin, 'This is my channel');\r\n    const popUpExitGuide = scene.add.text(popUpBg.x, font.guideTxtY, 'press anywhere to exit');\r\n    popUpTxtList.push(popUpTitle, popUpMadeVideoTxt, popUpChannelTxt, popUpExitGuide);\r\n    popUpTxtList.map(txt => SetFontStyle(txt));\r\n    popUpTxtList.map(txt => commonTextStyle(txt));\r\n    popUpTitle.setFontSize(userSetting/* View.w */.G7.w / 12);\r\n    popUpExitGuide.setAlpha(ui.alpha);\r\n    popUpBg.setAlpha(0.4);\r\n    popUpBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    popUpBg.setInteractive();\r\n    popUpBg.on('pointerup', () => { ChannelAdvertise.youtubeHide(); });\r\n    const openUrlTab = (url) => { window.open(url); };\r\n    [popUpMadeVideo, popUpMadeVideoTxt].map((video) => {\r\n        video.setInteractive();\r\n        video.on('pointerup', () => { openUrlTab(videoUrl); });\r\n    });\r\n    [popUpChannel, popUpChannelTxt].map((channel) => {\r\n        channel.setInteractive();\r\n        channel.on('pointerup', () => { openUrlTab(channelUrl); });\r\n    });\r\n    [popUpChannel, popUpMadeVideo].map((ele) => {\r\n        ele.setDisplaySize(popUpMargin, popUpMargin);\r\n    });\r\n    ChannelAdvertise.youtubePopUpLayer = scene.add.layer([\r\n        popUpBg, popUpMadeVideo, popUpChannel, ...popUpTxtList\r\n    ]);\r\n    InitChannel();\r\n    return ChannelAdvertise;\r\n};\r\nconst InitBlog = () => {\r\n};\r\nconst CreateBlog = (scene, blogUrl, commonTextStyle, channelData) => {\r\n    InitBlog();\r\n};\r\n/* harmony default export */ const sns = ((/* unused pure expression or super */ null && (ChannelAdvertise)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/title.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst title_StartTitle = (scene) => {\r\n    scene.scene.remove('title');\r\n    scene.scene.add('title', TitleScene);\r\n    scene.scene.launch('title');\r\n};\r\nconst StopTitle = (scene) => {\r\n    if (scene.scene.get('title')) {\r\n        scene.scene.setActive(false, 'title');\r\n        scene.scene.setVisible(false, 'title');\r\n        setTimeout(() => { scene.scene.remove('title'); }, 1000);\r\n    }\r\n};\r\nclass TitleScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'title',\r\n            active: false\r\n        });\r\n        this.titleFontSize = 50;\r\n        this.fontSize = 30;\r\n        this.middleGap = 5;\r\n        this.bgRndPos = { x: 0, y: 0 };\r\n    }\r\n    create() {\r\n        this.createBg();\r\n        this.logoBg = this.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - font_TxtTitleHeightGap, 'btnBlue').setScale(1.8);\r\n        this.logo = this.add.text(this.logoBg.x, this.logoBg.y, 'BlockPang').setFontSize(this.titleFontSize);\r\n        this.startBg = this.add.image(this.logo.x, this.logo.y + (font_TxtTitleHeightGap * 2), 'titleContextBg');\r\n        this.start = this.add.text(this.startBg.x, this.startBg.y, 'start');\r\n        [this.logo, this.start].map((ele) => {\r\n            font_SetFont2CommonContextStyle(ele);\r\n            ele.setFontSize(TxtTitleSize);\r\n            ele.setColor('black');\r\n        });\r\n        [this.logoBg, this.startBg].map((ele) => {\r\n            ele.setInteractive();\r\n        });\r\n        this.logo.setFontSize(font_TxtTitleHeadSize);\r\n        this.logo.setColor('white');\r\n        this.logoBg.on('pointerup', () => {\r\n            audio.playSfx('earthquake');\r\n            this.animRndAngle([this.logoBg, this.logo]);\r\n            this.cameras.main.shake(250, 0.02, true);\r\n            // todo: drop one random block\r\n        });\r\n        this.startBg.on('pointerup', () => {\r\n            audio.playSfx('gearAnim');\r\n            StopTitle(this);\r\n            StartPassiveLoading(this);\r\n            setTimeout(() => {\r\n                StartGame(this);\r\n            }, 50);\r\n        });\r\n        CreateChannel(this, '', (txt) => {\r\n            font_SetFont2CommonContextStyle(txt);\r\n            depth_SetDepth(txt, 'txt');\r\n        });\r\n        CreateGameAudio(this, storage);\r\n        CreateEfx(this);\r\n        // CreateSetting(this);\r\n        CreateGameCommonUI(this);\r\n    }\r\n    update(time, delta) {\r\n        UpdateGameCommonUI(delta);\r\n    }\r\n    createBg() {\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        let bgTextureRndIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        this.bg = this.add.tileSprite(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h, bgTextureList[bgTextureRndIdx]).setOrigin(0);\r\n        this.createBgRndDirection();\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 3000, repeat: -1,\r\n            onUpdate: () => {\r\n                this.bg.tilePositionX += this.bgRndPos.x;\r\n                this.bg.tilePositionY += this.bgRndPos.y;\r\n            },\r\n            onRepeat: () => {\r\n                bgTextureRndIdx++;\r\n                if (bgTextureRndIdx >= bgTextureList.length)\r\n                    bgTextureRndIdx = 0;\r\n                this.bg.setTexture(bgTextureList[bgTextureRndIdx]);\r\n                this.createBgRndDirection();\r\n            }\r\n        });\r\n    }\r\n    createBgRndDirection() {\r\n        this.bgRndPos.x = (0,math/* GetRndNum */.hg)(-3, 4);\r\n        this.bgRndPos.y = (0,math/* GetRndNum */.hg)(-3, 4);\r\n    }\r\n    animRndAngle(list) {\r\n        audio.playSfx('gearAnim');\r\n        const rndAngle = (0,math/* GetRndNum */.hg)(-30, 31);\r\n        list.map(ele => ele.setAngle(rndAngle));\r\n        this.cameras.main.shake(50, 0.01, true);\r\n    }\r\n}\r\n/* harmony default export */ const title = (TitleScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/blockPang.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MainScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'main',\r\n            active: false,\r\n        });\r\n    }\r\n    init() {\r\n        this.game.scene.add('title', title, false);\r\n        this.game.scene.add('game', game, false);\r\n    }\r\n    create() {\r\n        title_StartTitle(this);\r\n    }\r\n}\r\nconst AssetUrl = 'https://silvertree7622.github.io/webgames/blockPang/assets/';\r\nlet Assets = {\r\n    dynamic: [\r\n        async () => {\r\n            let list = [\r\n                // particle\r\n                {\r\n                    key: 'particleSprite',\r\n                    url: await AssetUrl + 'particleSprite.png',\r\n                    json: await __webpack_require__(442),\r\n                    type: 'atlas'\r\n                },\r\n                { key: 'diamond1', url: await AssetUrl + 'diamond1.png', type: 'image' },\r\n                { key: 'diamond2', url: await AssetUrl + 'diamond2.png', type: 'image' },\r\n                { key: 'diamond3', url: await AssetUrl + 'diamond3.png', type: 'image' },\r\n                { key: 'diamond4', url: await AssetUrl + 'diamond4.png', type: 'image' },\r\n                { key: 'key1', url: await AssetUrl + 'key1.png', type: 'image' },\r\n                { key: 'key2', url: await AssetUrl + 'key2.png', type: 'image' },\r\n                { key: 'key3', url: await AssetUrl + 'key3.png', type: 'image' },\r\n                { key: 'key4', url: await AssetUrl + 'key4.png', type: 'image' },\r\n                { key: 'ruby1', url: await AssetUrl + 'ruby1.png', type: 'image' },\r\n                { key: 'ruby2', url: await AssetUrl + 'ruby2.png', type: 'image' },\r\n                { key: 'ruby3', url: await AssetUrl + 'ruby3.png', type: 'image' },\r\n                { key: 'ruby4', url: await AssetUrl + 'ruby4.png', type: 'image' },\r\n                { key: 'heart', url: await AssetUrl + 'heart.png', type: 'image' },\r\n                // ui\r\n                { key: 'bgBlue', url: await AssetUrl + 'bgBlue.png', type: 'image' },\r\n                { key: 'bgBrown', url: await AssetUrl + 'bgBrown.png', type: 'image' },\r\n                { key: 'bgGreen', url: await AssetUrl + 'bgGreen.png', type: 'image' },\r\n                { key: 'btnBlue', url: await AssetUrl + 'btnBlue.png', type: 'image' },\r\n                { key: 'btnBrown', url: await AssetUrl + 'btnBrown.png', type: 'image' },\r\n                { key: 'btnGreen', url: await AssetUrl + 'btnGreen.png', type: 'image' },\r\n                { key: 'panelGreen', url: await AssetUrl + 'panelGreen.png', type: 'image' },\r\n                { key: 'panelBlue', url: await AssetUrl + 'panelBlue.png', type: 'image' },\r\n                { key: 'panelBrown', url: await AssetUrl + 'panelBrown.png', type: 'image' },\r\n                { key: 'overBtnUpBlue', url: await AssetUrl + 'overBtnUpBlue.png', type: 'image' },\r\n                { key: 'overBtnUpBrown', url: await AssetUrl + 'overBtnUpBrown.png', type: 'image' },\r\n                { key: 'overBtnUpGreen', url: await AssetUrl + 'overBtnUpGreen.png', type: 'image' },\r\n                { key: 'overBtnDownBlue', url: await AssetUrl + 'overBtnDownBlue.png', type: 'image' },\r\n                { key: 'overBtnDownBrown', url: await AssetUrl + 'overBtnDownBrown.png', type: 'image' },\r\n                { key: 'overBtnDownGreen', url: await AssetUrl + 'overBtnDownGreen.png', type: 'image' },\r\n                // { key: 'blackScreen', url: await AssetUrl + 'blackScreen.png', type: 'image' },\r\n                // { key: 'exitBtn', url: await AssetUrl + 'exitBtn.png', type: 'image' },\r\n                { key: 'titleContextBg', url: await AssetUrl + 'titleContextBg.png', type: 'image' },\r\n                { key: 'audioOn', url: await AssetUrl + 'audioOn.png', type: 'image' },\r\n                { key: 'audioOff', url: await AssetUrl + 'audioOff.png', type: 'image' },\r\n                { key: 'musicOn', url: await AssetUrl + 'musicOn.png', type: 'image' },\r\n                { key: 'musicOff', url: await AssetUrl + 'musicOff.png', type: 'image' },\r\n                { key: 'colorBackground', url: await AssetUrl + 'colorBackground.png', type: 'image' },\r\n                { key: 'colorHandle', url: await AssetUrl + 'colorHandle.png', type: 'image' },\r\n                { key: 'colorHandleDown', url: await AssetUrl + 'colorHandleDown.png', type: 'image' },\r\n                { key: 'overBack', url: await AssetUrl + 'overBack.png', type: 'image' },\r\n                { key: 'overRetry', url: await AssetUrl + 'overRetry.png', type: 'image' },\r\n                { key: 'settingBtn', url: await AssetUrl + 'settingBtn.png', type: 'image' },\r\n                { key: 'settingPanel', url: await AssetUrl + 'settingPanel.png', type: 'image' },\r\n                { key: 'settingOverBtnUp', url: await AssetUrl + 'settingOverBtnUp.png', type: 'image' },\r\n                { key: 'settingOverBtnDown', url: await AssetUrl + 'settingOverBtnDown.png', type: 'image' },\r\n                { key: 'btnSettingDown', url: await AssetUrl + 'btnSettingDown.png', type: 'image' },\r\n                { key: 'btnSettingUp', url: await AssetUrl + 'btnSettingUp.png', type: 'image' },\r\n                { key: 'screenSmaller', url: await AssetUrl + 'screenSmaller.png', type: 'image' },\r\n                { key: 'screenLarger', url: await AssetUrl + 'screenLarger.png', type: 'image' },\r\n                { key: 'warningSign', url: await AssetUrl + 'warningSign.png', type: 'image' },\r\n                // ui scene\r\n                { key: 'cloud1', url: await AssetUrl + 'cloud1.png', type: 'image' },\r\n                { key: 'cloud2', url: await AssetUrl + 'cloud2.png', type: 'image' },\r\n                { key: 'cloud3', url: await AssetUrl + 'cloud3.png', type: 'image' },\r\n                { key: 'cloud4', url: await AssetUrl + 'cloud4.png', type: 'image' },\r\n                { key: 'cloud5', url: await AssetUrl + 'cloud5.png', type: 'image' },\r\n                { key: 'cloud6', url: await AssetUrl + 'cloud6.png', type: 'image' },\r\n                { key: 'cloud7', url: await AssetUrl + 'cloud7.png', type: 'image' },\r\n                { key: 'cloud8', url: await AssetUrl + 'cloud8.png', type: 'image' },\r\n                { key: 'cloud9', url: await AssetUrl + 'cloud9.png', type: 'image' },\r\n                { key: 'tree1', url: await AssetUrl + 'tree01.png', type: 'image' },\r\n                { key: 'tree2', url: await AssetUrl + 'tree02.png', type: 'image' },\r\n                { key: 'tree3', url: await AssetUrl + 'tree03.png', type: 'image' },\r\n                { key: 'tree4', url: await AssetUrl + 'tree04.png', type: 'image' },\r\n                { key: 'tree5', url: await AssetUrl + 'tree05.png', type: 'image' },\r\n                { key: 'tree6', url: await AssetUrl + 'tree06.png', type: 'image' },\r\n                { key: 'tree7', url: await AssetUrl + 'tree07.png', type: 'image' },\r\n                { key: 'tree8', url: await AssetUrl + 'tree08.png', type: 'image' },\r\n                { key: 'tree9', url: await AssetUrl + 'tree09.png', type: 'image' },\r\n                { key: 'tree10', url: await AssetUrl + 'tree10.png', type: 'image' },\r\n                { key: 'tree11', url: await AssetUrl + 'tree11.png', type: 'image' },\r\n                { key: 'tree12', url: await AssetUrl + 'tree12.png', type: 'image' },\r\n                { key: 'tree13', url: await AssetUrl + 'tree13.png', type: 'image' },\r\n                { key: 'tree14', url: await AssetUrl + 'tree14.png', type: 'image' },\r\n                { key: 'tree15', url: await AssetUrl + 'tree15.png', type: 'image' },\r\n                { key: 'tree16', url: await AssetUrl + 'tree16.png', type: 'image' },\r\n                { key: 'tree17', url: await AssetUrl + 'tree17.png', type: 'image' },\r\n                { key: 'tree18', url: await AssetUrl + 'tree18.png', type: 'image' },\r\n                { key: 'tree19', url: await AssetUrl + 'tree19.png', type: 'image' },\r\n                { key: 'tree20', url: await AssetUrl + 'tree20.png', type: 'image' },\r\n                { key: 'tree21', url: await AssetUrl + 'tree21.png', type: 'image' },\r\n                { key: 'tree22', url: await AssetUrl + 'tree22.png', type: 'image' },\r\n                { key: 'tree23', url: await AssetUrl + 'tree23.png', type: 'image' },\r\n                { key: 'tree24', url: await AssetUrl + 'tree24.png', type: 'image' },\r\n                { key: 'tree25', url: await AssetUrl + 'tree25.png', type: 'image' },\r\n                { key: 'tree26', url: await AssetUrl + 'tree26.png', type: 'image' },\r\n                { key: 'tree27', url: await AssetUrl + 'tree27.png', type: 'image' },\r\n                { key: 'tree28', url: await AssetUrl + 'tree28.png', type: 'image' },\r\n                { key: 'tree29', url: await AssetUrl + 'tree29.png', type: 'image' },\r\n                { key: 'tree30', url: await AssetUrl + 'tree30.png', type: 'image' },\r\n                { key: 'tree31', url: await AssetUrl + 'tree31.png', type: 'image' },\r\n                { key: 'tree32', url: await AssetUrl + 'tree32.png', type: 'image' },\r\n                { key: 'tree33', url: await AssetUrl + 'tree33.png', type: 'image' },\r\n                { key: 'tree34', url: await AssetUrl + 'tree34.png', type: 'image' },\r\n                { key: 'tree35', url: await AssetUrl + 'tree35.png', type: 'image' },\r\n                { key: 'mist1', url: await AssetUrl + 'mist1.png', type: 'image' },\r\n                { key: 'mist2', url: await AssetUrl + 'mist2.png', type: 'image' },\r\n                { key: 'mist3', url: await AssetUrl + 'mist3.png', type: 'image' },\r\n                { key: 'mist4', url: await AssetUrl + 'mist4.png', type: 'image' },\r\n                // shape\r\n                { key: 'blueBall', url: await AssetUrl + 'blueBall.png', type: 'image' },\r\n                { key: 'greenBall', url: await AssetUrl + 'greenBall.png', type: 'image' },\r\n                { key: 'brownBall', url: await AssetUrl + 'brownBall.png', type: 'image' },\r\n                { key: 'obstacleBall', url: await AssetUrl + 'obstacleBall.png', type: 'image' },\r\n                { key: 'blueRect', url: await AssetUrl + 'blueRect.png', type: 'image' },\r\n                { key: 'greenRect', url: await AssetUrl + 'greenRect.png', type: 'image' },\r\n                { key: 'brownRect', url: await AssetUrl + 'brownRect.png', type: 'image' },\r\n                { key: 'obstacleRect', url: await AssetUrl + 'obstacleRect.png', type: 'image' },\r\n                { key: 'blueSquare', url: await AssetUrl + 'blueSquare.png', type: 'image' },\r\n                { key: 'greenSquare', url: await AssetUrl + 'greenSquare.png', type: 'image' },\r\n                { key: 'brownSquare', url: await AssetUrl + 'brownSquare.png', type: 'image' },\r\n                { key: 'obstacleSquare', url: await AssetUrl + 'obstacleSquare.png', type: 'image' },\r\n                { key: 'lockedRectangle', url: await AssetUrl + 'block_locked_large.png', type: 'image' },\r\n                { key: 'locketSquare', url: await AssetUrl + 'block_locked_square.png', type: 'image' },\r\n                { key: 'key', url: await AssetUrl + 'key.png', type: 'image' },\r\n                // type\r\n                { key: 'arrowLeft', url: await AssetUrl + 'arrowLeft.png', type: 'image' },\r\n                { key: 'locked', url: await AssetUrl + 'locked.png', type: 'image' },\r\n                { key: 'pattern', url: await AssetUrl + 'pattern.png', type: 'image' },\r\n                { key: 'power', url: await AssetUrl + 'power.png', type: 'image' },\r\n                { key: 'random', url: await AssetUrl + 'random.png', type: 'image' },\r\n                { key: 'signal1', url: await AssetUrl + 'signal1.png', type: 'image' },\r\n                { key: 'signal2', url: await AssetUrl + 'signal2.png', type: 'image' },\r\n                { key: 'signal3', url: await AssetUrl + 'signal3.png', type: 'image' },\r\n                { key: 'star', url: await AssetUrl + 'star.png', type: 'image' },\r\n                { key: 'swipeLeft', url: await AssetUrl + 'swipeLeft.png', type: 'image' },\r\n                { key: 'touch', url: await AssetUrl + 'touch.png', type: 'image' },\r\n                { key: 'trashcan', url: await AssetUrl + 'trashcan.png', type: 'image' },\r\n                { key: 'trashcanOpen', url: await AssetUrl + 'trashcanOpen.png', type: 'image' },\r\n                { key: 'unlocked', url: await AssetUrl + 'unlocked.png', type: 'image' },\r\n                // common\r\n                ...GetGameCommonUIAssets(),\r\n                ...GetSnsAssets(),\r\n                ...GetGageAssets('yellow'),\r\n                // audio\r\n                ...GetGameAudioAssets([\r\n                    // voice sfx\r\n                    { key: 'voice1', url: await AssetUrl + '1.mp3', type: 'audio' },\r\n                    { key: 'voice2', url: await AssetUrl + '2.mp3', type: 'audio' },\r\n                    { key: 'voice3', url: await AssetUrl + '3.mp3', type: 'audio' },\r\n                    { key: 'voice4', url: await AssetUrl + '4.mp3', type: 'audio' },\r\n                    { key: 'voice5', url: await AssetUrl + '5.mp3', type: 'audio' },\r\n                    { key: 'voice6', url: await AssetUrl + '6.mp3', type: 'audio' },\r\n                    { key: 'voice7', url: await AssetUrl + '7.mp3', type: 'audio' },\r\n                    { key: 'voice8', url: await AssetUrl + '8.mp3', type: 'audio' },\r\n                    { key: 'voice9', url: await AssetUrl + '9.mp3', type: 'audio' },\r\n                    { key: 'voice10', url: await AssetUrl + '10.mp3', type: 'audio' },\r\n                    { key: 'voiceGo', url: await AssetUrl + 'go.mp3', type: 'audio' },\r\n                    { key: 'voiceHighScore', url: await AssetUrl + 'new_highscore.mp3', type: 'audio' },\r\n                    { key: 'voiceTimeOver', url: await AssetUrl + 'time_over.mp3', type: 'audio' },\r\n                    { key: 'voiceGameOver', url: await AssetUrl + 'game_over.mp3', type: 'audio' },\r\n                    // other sfx\r\n                    { key: 'gearAnim', url: await AssetUrl + 'gearAnim.mp3', type: 'audio' },\r\n                    { key: 'earthquake', url: await AssetUrl + 'earthquake.mp3', type: 'audio' },\r\n                    { key: 'touchSfx', url: await AssetUrl + 'touchSfx.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockDone', url: await AssetUrl + 'loadingBlockDone.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockOnProcess', url: await AssetUrl + 'loadingBlockOnProcess.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOn', url: await AssetUrl + 'powerBlockOn.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOff', url: await AssetUrl + 'powerBlockOff.mp3', type: 'audio' },\r\n                    { key: 'spawnObstacleSfx', url: await AssetUrl + 'spawnObstacleSfx.mp3', type: 'audio' },\r\n                    { key: 'timeIncreaseSfx', url: await AssetUrl + 'timeIncreaseSfx.mp3', type: 'audio' },\r\n                    { key: 'scoreSfx', url: await AssetUrl + 'scoreSfx.mp3', type: 'audio' },\r\n                    { key: 'warningSfx', url: await AssetUrl + 'warningSfx.mp3', type: 'audio' },\r\n                ], [\r\n                    { key: 'gameBgm', url: await AssetUrl + 'blockpangbgm.mp3', type: 'audio' },\r\n                ]),\r\n            ];\r\n            return list;\r\n        }\r\n    ],\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvcGFzc2l2ZUxvYWRpbmcudHM/MGY1OSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvZm9udC9pbmRleC50cz8zMDc2Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9kZXB0aC9pbmRleC50cz8zMjM4Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay9iYXNpYy50cz8zODkwIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL2FkLnRzPzFiZmYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy91dGlscy9zdG9yYWdlLnRzPzc5OWQiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvYXNzZXRVdGlscy50cz8yNDk5Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2F1ZGlvL2luZGV4LnRzPzYzNTEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2lucHV0L2luZGV4LnRzPzExYTgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvcG93ZXIudHM/NWYyNSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9sb2FkaW5nLnRzP2E0OTQiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvdG91Y2gudHM/ZTMzZCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9vYnN0YWNsZS50cz9hOTQ0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL2luZGV4LnRzPzgxYTYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc3RvcmFnZS9pbmRleC50cz8xZWNhIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL3VpL2ZvbnQvaW5kZXgudHM/NjkwZSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9nYWdlL2luZGV4LnRzPzFlOTgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvZ2VzdHVyZS9pbmRleC50cz80NjZhIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2lucHV0L2luZGV4LnRzPzY0YTYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvZGVwdGgvaW5kZXgudHM/MTJiZSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9wb3BVcC9leGl0LnRzP2NkZDEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvcG9wVXAvaW5kZXgudHM/YTlhOSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9hdWRpby9pbmRleC50cz81ZDhhIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL3VpL3Njcm9sbC9pbmRleC50cz8zYTIxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL3VpL2Z1bGxTY3JlZW4vaW5kZXgudHM/OGZlMiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9pbmRleC50cz8wNDQ4Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9zZXR0aW5nLnRzPzE5MWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL3RpbWUudHM/NGVkYyIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdWkvc2NvcmUudHM/ZmEzYiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvZWZ4L2luZGV4LnRzPzllZGIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL2dhbWVvdmVyLnRzPzkwYjgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2NpcmNsZS50cz81MzkxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay9zaGFwZS9yZWN0YW5nbGUudHM/MDBhZiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svc2hhcGUvc3F1YXJlLnRzPzMyMWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2luZGV4LnRzPzQ0NDMiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3N5c3RlbS50cz9mMGMxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9pbmRleC50cz9lNDliIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9wb3B1cC50cz9kMmEyIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9zdGFydENudC50cz9kNWE0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS93YXJuaW5nLnRzPzkzNWUiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2dhbWUudHM/NGZiZiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9zbnMvaW5kZXgudHM/ZWFlMSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdGl0bGUudHM/Y2YzYyIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9ibG9ja1BhbmcudHM/MjFlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmNvbnN0IFBhc3NpdmVMb2FkaW5nID0ge1xyXG4gICAgc2NlbmU6IG51bGwsXHJcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgb3B0aW9uOiB7fSxcclxufTtcclxuY29uc3QgU3RhcnRQYXNzaXZlTG9hZGluZyA9IChzY2VuZSwgb3B0aW9uKSA9PiB7XHJcbiAgICBQYXNzaXZlTG9hZGluZy5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgLy8gb3B0aW9uXHJcbiAgICBpZiAob3B0aW9uKVxyXG4gICAgICAgIFBhc3NpdmVMb2FkaW5nLm9wdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbik7XHJcbiAgICAvLyBjaGNrIGlzIGV4aXN0IGlmIG5vdCB0aGVuIGFkZCB0byBzY2VuZVxyXG4gICAgY29uc3QgcGFzc2l2ZUxvYWRpbmdJbnN0YW5jZSA9IHNjZW5lLnNjZW5lLmdldCgncGFzc2l2ZUxvYWRpbmcnKTtcclxuICAgIGlmICghcGFzc2l2ZUxvYWRpbmdJbnN0YW5jZSlcclxuICAgICAgICBzY2VuZS5nYW1lLnNjZW5lLmFkZCgncGFzc2l2ZUxvYWRpbmcnLCBQYXNzaXZlTG9hZGluZ1NjZW5lLCBmYWxzZSk7XHJcbiAgICAvLyBsYXVuY2ggbG9hZGluZyBzY2VuZVxyXG4gICAgc2NlbmUuc2NlbmUubGF1bmNoKCdwYXNzaXZlTG9hZGluZycpO1xyXG4gICAgUGFzc2l2ZUxvYWRpbmcuc2NlbmUgPSBzY2VuZS5zY2VuZS5nZXQoJ3Bhc3NpdmVMb2FkaW5nJyk7XHJcbn07XHJcbmNvbnN0IFN0b3BQYXNzaXZlTG9hZGluZyA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghUGFzc2l2ZUxvYWRpbmcuc2NlbmUgfHwgIVBhc3NpdmVMb2FkaW5nLmlzTG9hZGluZykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybigncGFzc2l2ZSBsb2FkaW5nIGlzIG5vdCBleGlzdDonLCBQYXNzaXZlTG9hZGluZy5zY2VuZSk7XHJcbiAgICAgICAgUGFzc2l2ZUxvYWRpbmcuc2NlbmUgPSBudWxsO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChQYXNzaXZlTG9hZGluZy5vcHRpb24pIHtcclxuICAgICAgICBQYXNzaXZlTG9hZGluZy5vcHRpb24uZmluaXNoRXZ0ICYmIFBhc3NpdmVMb2FkaW5nLm9wdGlvbi5maW5pc2hFdnQoUGFzc2l2ZUxvYWRpbmcuc2NlbmUpO1xyXG4gICAgfVxyXG4gICAgUGFzc2l2ZUxvYWRpbmcuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gcmVzKFBhc3NpdmVMb2FkaW5nLnNjZW5lLnNjZW5lLnN0b3AoJ3Bhc3NpdmVMb2FkaW5nJykpKTtcclxuICAgIFBhc3NpdmVMb2FkaW5nLnNjZW5lLmxvYWRpbmdFbmRTZWMgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gcmVzKHBlcmZvcm1hbmNlLm5vdygpKSk7XHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XHJcbiAgICAgICAgcmVzKGNvbnNvbGUubG9nKGAlYyBQYXNzaXZlIExvYWRpbmcgVGltZTogJHsoKFBhc3NpdmVMb2FkaW5nLnNjZW5lLmxvYWRpbmdFbmRTZWMgLSBQYXNzaXZlTG9hZGluZy5zY2VuZS5sb2FkaW5nU3RhcnRTZWMpIC8gMTAwMCkudG9GaXhlZCg0KX0gc2VjIGAsICdjb2xvcjogYmxhY2s7IGJhY2tncm91bmQ6IHdoaXRlOyBmb25XZWlnaHQ6IGJvbGQ7JykpO1xyXG4gICAgfSk7XHJcbn07XHJcbmNsYXNzIFBhc3NpdmVMb2FkaW5nU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBrZXk6ICdwYXNzaXZlTG9hZGluZycsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTdGFydFNlYyA9IDA7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nRW5kU2VjID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50Rmlyc3QgPSAwO1xyXG4gICAgICAgIHRoaXMucG9pbnRTZWNvbmQgPSAwO1xyXG4gICAgICAgIHRoaXMuZ2FwRmlyc3QgPSAwLjI7XHJcbiAgICAgICAgdGhpcy5nYXBTZWNvbmQgPSAwLjQ7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1N0YXJ0U2VjID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3MgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKHRpbWUsIGRlbHRhKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSb3RhdGVMb2dvKGRlbHRhKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVJvdGF0ZUxvZ28oZGVsdGEpIHtcclxuICAgICAgICB0aGlzLnBvaW50Rmlyc3QgPSAodGhpcy5wb2ludEZpcnN0ICsgKGRlbHRhICogdGhpcy5nYXBGaXJzdCkpICUgMzYwO1xyXG4gICAgICAgIHRoaXMucG9pbnRTZWNvbmQgPSAodGhpcy5wb2ludFNlY29uZCArIChkZWx0YSAqIHRoaXMuZ2FwU2Vjb25kKSkgJSAzNjA7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMucG9pbnRGaXJzdCwgdGhpcy5wb2ludFNlY29uZDogJywgdGhpcy5wb2ludEZpcnN0LCB0aGlzLnBvaW50U2Vjb25kKTtcclxuICAgICAgICAvLyB0aGlzLnBvaW50Rmlyc3QgPSAodGhpcy5wb2ludEZpcnN0ICsgKGRlbHRhICogdGhpcy5nYXBGaXJzdCkpICUgMzYwO1xyXG4gICAgICAgIC8vIHRoaXMucG9pbnRTZWNvbmQgPSAodGhpcy5wb2ludFNlY29uZCArIChkZWx0YSAqIHRoaXMuZ2FwU2Vjb25kKSk7XHJcbiAgICAgICAgLy8gbGV0IHNob3dDbG9ja3dpc2UgPSB0aGlzLnBvaW50Rmlyc3QgPiB0aGlzLnBvaW50U2Vjb25kID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIC8vIGxldCBzdGFydEFuZ2xlID0gdGhpcy5wb2ludEZpcnN0ID4gdGhpcy5wb2ludFNlY29uZCA/IHRoaXMucG9pbnRGaXJzdCA6IHRoaXMucG9pbnRTZWNvbmQ7XHJcbiAgICAgICAgLy8gbGV0IGVuZEFuZ2xlID0gdGhpcy5wb2ludEZpcnN0ID4gdGhpcy5wb2ludFNlY29uZCA/IHRoaXMucG9pbnRTZWNvbmQgOiB0aGlzLnBvaW50Rmlyc3Q7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3MuY2xlYXIoKTtcclxuICAgICAgICAvLyAgV2l0aG91dCB0aGlzIHRoZSBhcmMgd2lsbCBhcHBlYXIgY2xvc2VkIHdoZW4gc3Ryb2tlZFxyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzLmxpbmVTdHlsZSgxMCwgMHhmZjAwZmYsIDIpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzLmFyYyhWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgNjAsIFBoYXNlci5NYXRoLkRlZ1RvUmFkKHRoaXMucG9pbnRGaXJzdCksIFBoYXNlci5NYXRoLkRlZ1RvUmFkKHRoaXMucG9pbnRTZWNvbmQpLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcy5zdHJva2VQYXRoKCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUGFzc2l2ZUxvYWRpbmc7XHJcbmV4cG9ydCB7IFN0YXJ0UGFzc2l2ZUxvYWRpbmcsIFN0b3BQYXNzaXZlTG9hZGluZyB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgVHh0VGl0bGVIZWFkU2l6ZSA9IDUwO1xyXG5jb25zdCBUeHRUaXRsZVNpemUgPSAzMDtcclxuY29uc3QgVHh0VGl0bGVIZWlnaHRHYXAgPSA2MDtcclxuY29uc3QgVHh0T3ZlckhlYWRTaXplID0gVmlldy53IC8gNDtcclxuY29uc3QgVHh0TWFyZ2luID0gMjY7XHJcbmNvbnN0IFR4dFBhZGRpbmcgPSA4O1xyXG5jb25zdCBUeHRBbHBoYSA9IDAuOTtcclxuY29uc3QgVHh0U2l6ZSA9IDIwO1xyXG5jb25zdCBUeHRGYW1pbHkgPSAnQXJpYWwgQmxhY2snO1xyXG5jb25zdCBUeHRCYWNrZ3JvdW5kQ29sb3IgPSAnIzI0MjQyNCc7XHJcbmNvbnN0IENvbnRleHRNYXJnaW5XID0gVmlldy53IC8gMTI7XHJcbmNvbnN0IENvbnRleHRNYXJnaW5IID0gVmlldy5oIC8gMTI7XHJcbmNvbnN0IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlID0gKHRleHQpID0+IHtcclxuICAgIHRleHQuc2V0T3JpZ2luKDAuNSwgMC41KTtcclxuICAgIHRleHQuc2V0Rm9udFNpemUoVHh0U2l6ZSk7XHJcbiAgICB0ZXh0LnNldEZvbnRGYW1pbHkoVHh0RmFtaWx5KTtcclxuICAgIHJldHVybiB0ZXh0O1xyXG59O1xyXG5leHBvcnQgeyBUeHRUaXRsZUhlYWRTaXplLCBUeHRUaXRsZVNpemUsIFR4dFRpdGxlSGVpZ2h0R2FwLCBUeHRPdmVySGVhZFNpemUsIFR4dE1hcmdpbiwgVHh0UGFkZGluZywgVHh0QWxwaGEsIFR4dFNpemUsIFR4dEZhbWlseSwgVHh0QmFja2dyb3VuZENvbG9yLCBDb250ZXh0TWFyZ2luVywgQ29udGV4dE1hcmdpbkgsIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlIH07XHJcbiIsImNvbnN0IERlcHRoID0ge1xyXG4gICAgdHJlZTogOTAsXHJcbiAgICBibG9jazogMTAwLFxyXG4gICAgY2xvdWQ6IDEyMCxcclxuICAgIG1pc3Q6IDEyMCxcclxuICAgIHdhbGw6IDE0MCxcclxuICAgIHR4dDogMTUwLFxyXG4gICAgcG9wVXA6IDQwMCxcclxuICAgIHNldHRpbmc6IDUwMCxcclxuICAgIHdhcm5pbmc6IDYwMCxcclxuICAgIGdhbWVPdmVyOiAxMDAwLFxyXG4gICAgcGFydGljbGU6IDExMDAsXHJcbiAgICBuZXdCZXN0OiAxMjAwLFxyXG4gICAgaGlnaGVzdDogMTUwMCxcclxuICAgIGZ1bGxTY3JlZW46IDE2MDAsXHJcbn07XHJcbmNvbnN0IFNldERlcHRoID0gKHRhcmdldE9iaiwgdHlwZSkgPT4ge1xyXG4gICAgaWYgKCFEZXB0aFt0eXBlXSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignU2V0RGVwdGg6IHR5cGUgaXMgbm90IGZvdW5kIGluIHRoZSBkZXB0aCBsaXN0OicsIHRhcmdldE9iaiwgdHlwZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RhcmdldE9iaiwgdHlwZTogJywgdGFyZ2V0T2JqLCB0eXBlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0T2JqLnNldERlcHRoKVxyXG4gICAgICAgIHRhcmdldE9iai5zZXREZXB0aChEZXB0aFt0eXBlXSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgY29uc29sZS53YXJuKCdTZXREZXB0aDogdGFyZ2V0T2JqIGlzIG5vdCBQaGFzZXIuR2FtZU9iamVjdHMnKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRGVwdGg7XHJcbmV4cG9ydCB7IFNldERlcHRoIH07XHJcbiIsIi8vIGltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IEJsb2NrU3lzdGVtIGZyb20gJy4vc3lzdGVtJztcclxuaW1wb3J0IHsgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuLi9kZXB0aCc7XHJcbmNsYXNzIEJhc2ljQmxvY2sgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcclxuICAgIC8vIHB1YmxpYyB0ZXN0T2JqO1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5pc0V2dENyZWF0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnR5cGVOYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5zcGF3bkNoYW5jZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICAgICAgdGhpcy5iRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuaXNPblNjcmVlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW5pdFBycG9lcnRpZXMoKTtcclxuICAgICAgICB0aGlzLmluaXRDaGlsZHJlbihzY2VuZSk7XHJcbiAgICAgICAgdGhpcy5pbml0UGh5c2ljcyhzY2VuZSk7XHJcbiAgICAgICAgU2V0RGVwdGgodGhpcywgJ2Jsb2NrJyk7XHJcbiAgICAgICAgc2NlbmUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgaW5pdFBycG9lcnRpZXMoKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGAke25ldyBEYXRlKCkuZ2V0VGltZSgpfS0ke1BoYXNlci5NYXRoLlJORC51dWlkKCl9YDtcclxuICAgIH1cclxuICAgIGluaXRDaGlsZHJlbihzY2VuZSkge1xyXG4gICAgICAgIHRoaXMuc2hhcGVJbWcgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ2JhbGwnKTtcclxuICAgICAgICB0aGlzLnR5cGVUeHQgPSBzY2VuZS5hZGQudGV4dCgwLCAwLCAnJyk7XHJcbiAgICAgICAgdGhpcy50eXBlSW1nID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICcnKTtcclxuICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSh0aGlzLnR5cGVUeHQpO1xyXG4gICAgICAgIHRoaXMuaW5pdFR5cGVUeHQoKTtcclxuICAgICAgICB0aGlzLmFkZChbdGhpcy5zaGFwZUltZywgdGhpcy50eXBlVHh0LCB0aGlzLnR5cGVJbWddKTtcclxuICAgICAgICAvLyB0aGlzLnRlc3RPYmogPSBzY2VuZS5tYXR0ZXIuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgMCwgJ2JhbGwnKTtcclxuICAgICAgICAvLyB0aGlzLnRlc3RPYmouc2V0Q2lyY2xlKDQwLCA0MCk7XHJcbiAgICAgICAgLy8gdGhpcy50ZXN0T2JqLnNldEJvdW5jZSgxKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy50ZXN0T2JqOiAnLCB0aGlzLnRlc3RPYmopO1xyXG4gICAgfVxyXG4gICAgaW5pdFBoeXNpY3Moc2NlbmUpIHtcclxuICAgICAgICAvLyBudW1iZXIgaXMgbWVhbmluZ2xlc3MganVzdCBkZWZhdWx0IHZhbHVlXHJcbiAgICAgICAgLy8gZm9yIGFkZCBjb250YWluZXIgdG8gbWF0dGVyIGdhbWUgb2JqZWN0XHJcbiAgICAgICAgdGhpcy5zZXRTaXplKDEwMCwgMTAwKTtcclxuICAgICAgICAvLyBhZGQgdG8gbWF0dGVyIGdhbWUgb2JqZWN0XHJcbiAgICAgICAgdGhpcy5waHlzaWNzQ29uID0gc2NlbmUubWF0dGVyLmFkZC5nYW1lT2JqZWN0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc0Nvbi5zZXRGcmljdGlvbigwLjAwNSk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzQ29uLnNldEJvdW5jZSgxKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NDb24uc2V0U2Vuc29yKHRydWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0Qm9keSgpIHsgcmV0dXJuIHRoaXMuYm9keTsgfVxyXG4gICAgZ2V0U2hhcGUoKSB7IHJldHVybiB0aGlzLnNoYXBlOyB9XHJcbiAgICBhZGRTaGFwZShzaGFwZSkgeyB0aGlzLnNoYXBlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNoYXBlKSwgc2hhcGUpOyByZXR1cm4gdGhpczsgfVxyXG4gICAgc2V0U2hhcGUoc2hhcGUpIHsgdGhpcy5zaGFwZSA9IHNoYXBlOyByZXR1cm4gdGhpczsgfVxyXG4gICAgZ2V0U2hhcGVOYW1lKCkgeyByZXR1cm4gdGhpcy5zaGFwZU5hbWU7IH1cclxuICAgIHNldFNoYXBlTmFtZShuYW1lKSB7IHRoaXMuc2hhcGVOYW1lID0gbmFtZTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGdldFNoYXBlSW1nKCkgeyByZXR1cm4gdGhpcy5zaGFwZUltZzsgfVxyXG4gICAgZ2V0U2NvcmUoKSB7IHJldHVybiB0aGlzLnNjb3JlOyB9XHJcbiAgICBzZXRTY29yZShzY29yZSkgeyB0aGlzLnNjb3JlID0gc2NvcmU7IHJldHVybiB0aGlzOyB9XHJcbiAgICBhZGRTY29yZShzY29yZSkgeyB0aGlzLnNjb3JlICs9IHNjb3JlOyByZXR1cm4gdGhpczsgfVxyXG4gICAgZ2V0VGltZUluY3JlYXNlKCkgeyByZXR1cm4gdGhpcy50aW1lSW5jcmVhc2U7IH1cclxuICAgIHNldFRpbWVJbmNyZWFzZShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy50aW1lSW5jcmVhc2UgPSB7XHJcbiAgICAgICAgICAgIGNoYW5jZTogZGF0YS5jaGFuY2UsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLnZhbHVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdldFNwYXduUm5kQ2hhbmNlKCkgeyByZXR1cm4gdGhpcy5zcGF3bkNoYW5jZTsgfVxyXG4gICAgc2V0U3Bhd25SbmRDaGFuY2UoY2hhbmNlTnVtKSB7IHJldHVybiB0aGlzLnNwYXduQ2hhbmNlID0gY2hhbmNlTnVtOyB9XHJcbiAgICBnZXRUeXBlSW1nKCkgeyByZXR1cm4gdGhpcy50eXBlSW1nOyB9XHJcbiAgICBzZXRUeXBlSW1nKHR5cGVUZXh0dXJlKSB7XHJcbiAgICAgICAgaWYgKCF0eXBlVGV4dHVyZSlcclxuICAgICAgICAgICAgdGhpcy50eXBlSW1nLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudHlwZUltZy5zZXRUZXh0dXJlKHR5cGVUZXh0dXJlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFR5cGVJbWdEaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KSB7IHRoaXMudHlwZUltZy5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGluaXRUeXBlVHh0KCkge1xyXG4gICAgICAgIHRoaXMuc2V0VHlwZVR4dFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc2V0VHlwZVR4dCgnJyk7XHJcbiAgICAgICAgdGhpcy50eXBlVHh0LnNldEZvbnRTaXplKDUwKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdldFR5cGVUeHQoKSB7IHJldHVybiB0aGlzLnR5cGVUeHQ7IH1cclxuICAgIHNldFR5cGVUeHQodGV4dCkge1xyXG4gICAgICAgIGlmICghdGhpcy50eXBlVHh0LnZpc2libGUpXHJcbiAgICAgICAgICAgIHRoaXMudHlwZVR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIGlmICghdGV4dClcclxuICAgICAgICAgICAgdGhpcy50eXBlVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudHlwZVR4dC5zZXRUZXh0KHRleHQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0VHlwZVR4dFZpc2libGUodmlzaWJsZSkgeyB0aGlzLnR5cGVUeHQuc2V0VmlzaWJsZSh2aXNpYmxlKTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGdldFR5cGVOYW1lKCkgeyByZXR1cm4gdGhpcy50eXBlTmFtZTsgfVxyXG4gICAgc2V0VHlwZU5hbWUodHlwZU5hbWUpIHsgcmV0dXJuIHRoaXMudHlwZU5hbWUgPSB0eXBlTmFtZTsgfVxyXG4gICAgZ2V0QmxvY2tEYXRhKCkgeyByZXR1cm4gdGhpcy5iRGF0YTsgfVxyXG4gICAgc2V0QmxvY2tEYXRhKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmJEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5iRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhZGRCbG9ja0RhdGEoZGF0YSkgeyB0aGlzLmJEYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJEYXRhKSwgZGF0YSk7IH1cclxuICAgIGdldFBoeXNpY3NDb24oKSB7IHJldHVybiB0aGlzLnBoeXNpY3NDb247IH1cclxuICAgIGdldFdpZHRoKCkgeyByZXR1cm4gdGhpcy50eXBlSW1nLndpZHRoOyB9XHJcbiAgICBnZXRIZWlnaHQoKSB7IHJldHVybiB0aGlzLnR5cGVJbWcuaGVpZ2h0OyB9XHJcbn1cclxuY29uc3QgU3Bhd25CbG9jayA9IChibG9jaykgPT4ge1xyXG4gICAgU2V0QmxvY2tJbnB1dFNldHRpbmcoYmxvY2spO1xyXG4gICAgYmxvY2suc2V0UG9zaXRpb24oQmxvY2tTeXN0ZW0uZ2V0Um5kU3Bhd25YKCksIEJsb2NrU3lzdGVtLnNwYXduWSk7XHJcbiAgICBibG9jay5zZXRBbmdsZShCbG9ja1N5c3RlbS5nZXRSbmRBbmdsZSgpKTtcclxuICAgIGJsb2NrLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICBibG9jay5pc09uU2NyZWVuID0gdHJ1ZTtcclxuICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRJZ25vcmVHcmF2aXR5KGZhbHNlKTtcclxuICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTZW5zb3IoZmFsc2UpO1xyXG4gICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkuc3Bhd24gJiYgYmxvY2suZ2V0QmxvY2tEYXRhKCkuc3Bhd24oKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgU2V0QmxvY2tJbnB1dFNldHRpbmcgPSAoYmxvY2spID0+IHtcclxuICAgIGJsb2NrLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgYmxvY2suc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJsb2NrLnNjZW5lLmlucHV0LnNldERyYWdnYWJsZShibG9jaywgdHJ1ZSk7XHJcbiAgICBibG9jay5vbigncG9pbnRlcmRvd24nLCAocHRyKSA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0ckRvd24pXHJcbiAgICAgICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0ckRvd24oYmxvY2ssIHB0cik7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldElnbm9yZUdyYXZpdHkodHJ1ZSk7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFN0YXRpYyh0cnVlKTtcclxuICAgIH0pO1xyXG4gICAgYmxvY2sub24oJ2RyYWcnLCAocHRyKSA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLmRyYWcpXHJcbiAgICAgICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLmRyYWcoYmxvY2ssIHB0cik7XHJcbiAgICB9KTtcclxuICAgIGJsb2NrLm9uKCdwb2ludGVydXAnLCAocHRyKSA9PiB7XHJcbiAgICAgICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0clVwKVxyXG4gICAgICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJVcChibG9jaywgcHRyKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0SWdub3JlR3Jhdml0eShmYWxzZSk7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFN0YXRpYyhmYWxzZSk7XHJcbiAgICB9KTtcclxuICAgIGJsb2NrLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJPdXQpXHJcbiAgICAgICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLnB0ck91dChibG9jayk7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldElnbm9yZUdyYXZpdHkoZmFsc2UpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTdGF0aWMoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IFNldEJsb2NrVHlwZTJJbml0QmFzaWMgPSAoYmxvY2spID0+IHtcclxuICAgIGJsb2NrLnNldFNjb3JlKDApO1xyXG4gICAgYmxvY2suc2V0VGltZUluY3JlYXNlKHsgY2hhbmNlOiAwLCB2YWx1ZTogMCB9KTtcclxuICAgIGJsb2NrLmdldFR5cGVJbWcoKS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgYmxvY2suaW5pdFR5cGVUeHQoKTtcclxuICAgIGJsb2NrLnNldEJsb2NrRGF0YSh7fSk7XHJcbiAgICBibG9jay5zZXRBbHBoYSgxKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYmxvY2suZGlzYWJsZUludGVyYWN0aXZlKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBibG9jay5zY2VuZS5pbnB1dC5zZXREcmFnZ2FibGUoYmxvY2ssIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgRGVhdGhCbG9jayA9IChibG9jaykgPT4ge1xyXG4gICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLmRlYXRoKVxyXG4gICAgICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLmRlYXRoKCgpID0+IHsgRGlzYWJsZUJsb2NrKGJsb2NrKTsgfSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgRGlzYWJsZUJsb2NrKGJsb2NrKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgRGlzYWJsZUJsb2NrID0gKGJsb2NrKSA9PiB7XHJcbiAgICBpZiAoYmxvY2suZ2V0Qm9keSgpKSB7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldElnbm9yZUdyYXZpdHkodHJ1ZSk7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFNlbnNvcih0cnVlKTtcclxuICAgIH1cclxuICAgIGJsb2NrLmlzT25TY3JlZW4gPSBmYWxzZTtcclxuICAgIGJsb2NrLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgU2V0QmxvY2tUeXBlMkluaXRCYXNpYyhibG9jayk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IFVwZGF0ZUJsb2NrID0gKGJsb2NrLCB0aW1lLCBkZWx0YSkgPT4ge1xyXG4gICAgaWYgKCFibG9jayB8fCAhYmxvY2suZ2V0QmxvY2tEYXRhKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgaWYgKGJsb2NrLmdldEJsb2NrRGF0YSgpLnVwZGF0ZSlcclxuICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS51cGRhdGUodGltZSwgZGVsdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBCYXNpY0Jsb2NrO1xyXG5leHBvcnQgeyBTcGF3bkJsb2NrLCBEZWF0aEJsb2NrLCBEaXNhYmxlQmxvY2ssIFNldEJsb2NrVHlwZTJJbml0QmFzaWMsIFVwZGF0ZUJsb2NrLCB9O1xyXG4iLCJjb25zdCBTZXRCbG9jazJBZCA9IChibG9jaykgPT4ge1xyXG4gICAgbGV0IGJEYXRhID0ge1xyXG4gICAgICAgIHB0ckRvd246IChibG9jaykgPT4ge1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyVXA6IChibG9jaykgPT4ge1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZzogKGJsb2NrKSA9PiB7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnRW5kOiAoYmxvY2spID0+IHtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldEJsb2NrMkFkO1xyXG4iLCIvLyBjb21wYXJlIGl0ZW0gaXMgaW4gdGhlIGRhdGEgdGhlbiBcclxuY29uc3QgQ29tcGFyZUNhbGxiYWNrID0gKGRhdGEsIGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGlzSXRlbUV4aXN0SW5EYXRhID0gZGF0YVtpdGVtXTtcclxuICAgIGlmIChpc0l0ZW1FeGlzdEluRGF0YSAhPT0gdW5kZWZpbmVkIHx8IG51bGwpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ2l0ZW0gaXMgbm90IG1hdGNoZWQgdG8gYWN0dWFsIGRhdGEgdHlwZTonLCBpdGVtLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEdhbWVOYW1lID0gZG9jdW1lbnQudGl0bGU7IC8vIGdldCBnYW1lIHRpdGxlIG5hbWVcclxuY29uc3QgR2V0TG9jYWxTdG9yYWdlRGF0YSA9IChkZWZhdWx0RGF0YSkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShHYW1lTmFtZSk7XHJcbiAgICBpZiAoZGF0YSlcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShHYW1lTmFtZSwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdERhdGEpKTtcclxuICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEdldExvY2FsU3RvcmFnZUl0ZW0gPSAoZGVmYXVsdERhdGEsIGl0ZW0sIGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIGNvbnN0IGdhbWVEYXRhID0gR2V0TG9jYWxTdG9yYWdlRGF0YShkZWZhdWx0RGF0YSk7XHJcbiAgICBsZXQgbGlzdCA9ICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgPyBbaXRlbV0gOiBbLi4uaXRlbV0pLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgbGV0IHJldHVybkl0ZW0gPSBnYW1lRGF0YVtlbGVdO1xyXG4gICAgICAgIGlmIChDb21wYXJlQ2FsbGJhY2soZ2FtZURhdGEsIGVsZSkpXHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5JdGVtO1xyXG4gICAgfSk7XHJcbiAgICAvLyBjaGNrIGlzIHRoZXJlIHVuZGVmaW5lZCBkYXRhIGZyb20gbGlzdCB0aGVuIHNldCB0byBkZWZhdWx0IGRhdGFcclxuICAgIGlmIChsaXN0LmZpbHRlcihjaGlsZCA9PiBjaGlsZCA9PT0gdW5kZWZpbmVkKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgQ2xlYXJHYW1lTG9jYWxTdG9yYWdlRGF0YSgpO1xyXG4gICAgICAgIGlmIChleGNlcHRpb25LZXlzKSB7XHJcbiAgICAgICAgICAgICh0eXBlb2YgZXhjZXB0aW9uS2V5cyA9PT0gJ3N0cmluZycgPyBbZXhjZXB0aW9uS2V5c10gOiBbLi4uZXhjZXB0aW9uS2V5c10pLm1hcCgoZXhjZXB0aW9uSXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWVEYXRhW2V4Y2VwdGlvbkl0ZW1dID09PSB1bmRlZmluZWQgfHwgZ2FtZURhdGFbZXhjZXB0aW9uSXRlbV0gPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgZXhjZXB0aW9uSXRlbSwgZ2FtZURhdGFbZXhjZXB0aW9uSXRlbV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyByZXR1cm4gc2luZ2xlIGl0ZW1cclxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcclxuICAgICAgICByZXR1cm4gbGlzdFswXTtcclxuICAgIC8vIHJldHVybiBpdGVtIGFycmF5XHJcbiAgICBlbHNlIGlmIChpdGVtLmxlbmd0aCA9PT0gbGlzdC5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbn07XHJcbmNvbnN0IFNldExvY2FsU3RvcmFnZUl0ZW0gPSAoZGVmYXVsdERhdGEsIGl0ZW0sIHZhbHVlKSA9PiB7XHJcbiAgICBsZXQgZ2FtZURhdGEgPSBHZXRMb2NhbFN0b3JhZ2VEYXRhKGRlZmF1bHREYXRhKTtcclxuICAgIGlmIChnYW1lRGF0YSlcclxuICAgICAgICBnYW1lRGF0YVtpdGVtXSA9IHZhbHVlO1xyXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEdhbWVOYW1lLCBKU09OLnN0cmluZ2lmeShnYW1lRGF0YSkpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2dhbWVEYXRhLCBiZXN0OiAnLCBnYW1lRGF0YSwgZ2FtZURhdGEuYmVzdCk7XHJcbiAgICByZXR1cm4gZ2FtZURhdGE7XHJcbn07XHJcbmNvbnN0IFJlbW92ZUxvY2FsU3RvcmFnZUl0ZW0gPSAoZGVmYXVsdERhdGEsIGl0ZW0pID0+IHtcclxuICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oZGVmYXVsdERhdGEsIGl0ZW0sIG51bGwpO1xyXG59O1xyXG5jb25zdCBDbGVhckdhbWVMb2NhbFN0b3JhZ2VEYXRhID0gKCkgPT4ge1xyXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEdhbWVOYW1lKTtcclxufTtcclxuY29uc3QgQ2xlYXJBbGxMb2NhbFN0b3JhZ2VJdGVtID0gKCkgPT4ge1xyXG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG59O1xyXG5jb25zdCBEZWJ1Z0xvY2FsU3RvcmFnZSA9IChzY2VuZSwgZGVmYXVsdERhdGEsIGl0ZW1zKSA9PiB7XHJcbiAgICBzY2VuZS5pbnB1dC5tb3VzZS5kaXNhYmxlQ29udGV4dE1lbnUoKTtcclxuICAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVyZG93bicsIGZ1bmN0aW9uIChwb2ludGVyKSB7XHJcbiAgICAgICAgaWYgKHBvaW50ZXIucmlnaHRCdXR0b25Eb3duKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coR2V0TG9jYWxTdG9yYWdlRGF0YShkZWZhdWx0RGF0YSkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb2ludGVyLm1pZGRsZUJ1dHRvbkRvd24oKSkge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgICAgIGl0ZW1zLm1hcChlbGUgPT4gU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgZWxlLml0ZW0sIGVsZS52YWx1ZSkpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKGRlZmF1bHREYXRhLCBpdGVtcy5pdGVtLCBpdGVtcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oZGVmYXVsdERhdGEsICdiZXN0JywgMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuZXhwb3J0IHsgR2V0TG9jYWxTdG9yYWdlRGF0YSwgR2V0TG9jYWxTdG9yYWdlSXRlbSwgU2V0TG9jYWxTdG9yYWdlSXRlbSwgUmVtb3ZlTG9jYWxTdG9yYWdlSXRlbSwgQ2xlYXJHYW1lTG9jYWxTdG9yYWdlRGF0YSwgQ2xlYXJBbGxMb2NhbFN0b3JhZ2VJdGVtLCBEZWJ1Z0xvY2FsU3RvcmFnZSB9O1xyXG4iLCJjb25zdCBDb21tb25Sb290VXJsID0gJ2h0dHBzOi8vc2lsdmVydHJlZTc2MjIuZ2l0aHViLmlvL3dlYmdhbWVzLyc7XHJcbmNvbnN0IENvbW1vbkFzc2V0cyA9IENvbW1vblJvb3RVcmwgKyAnYXNzZXRzLyc7XHJcbmNvbnN0IENvbW1vblNmeCA9IENvbW1vbkFzc2V0cyArICdhdWRpby9zZngvJztcclxuY29uc3QgQ29tbW9uVUkgPSBDb21tb25Bc3NldHMgKyAndWkvJztcclxuY29uc3QgQ29tbW9uQXVkaW8gPSBDb21tb25VSSArICdhdWRpby8nO1xyXG5jb25zdCBDb21tb25GdWxsU2NyZWVuID0gQ29tbW9uVUkgKyAnZnVsbFNjcmVlbi8nO1xyXG5jb25zdCBDb21tb25TY3JvbGwgPSBDb21tb25VSSArICdzY3JvbGwvJztcclxuY29uc3QgQ29tbW9uR2FnZSA9IENvbW1vblVJICsgJ2dhZ2UvJztcclxuY29uc3QgQ29tbW9uRWZ4ID0gQ29tbW9uVUkgKyAnZWZ4Lyc7XHJcbmNvbnN0IENvbW1vblNucyA9IENvbW1vblJvb3RVcmwgKyAnc25zLyc7XHJcbi8qKiBnZXQgY29tbW9uIGFzc2V0IGZpbGUgd2l0aCBleGNlcHRpb24ga2V5ICh3aGVuIGlmIHUgd29ycnkgYWJvdXQgbmVzdGVkIHRoaW5ncylcclxuICogQHBhcmFtIGFzc2V0TGlzdCBjb21tb24gY3VzdG9tIGFzc2VzdCBsaXN0IGNvbXBvc2Ugb2YgdGhlIGtleSwgdXJsLCBldGNcclxuICogQHBhcmFtIGV4Y2VwdGlvbktleXMgZXhjZXB0aW9uIGtleSB3aGljaCB1IHdvcnJ5IGFib3V0IHRoZSBuZXN0ZWQgdGhpbmdzXHJcbiAqIEByZXR1cm5zIGZpbHRlcmVkIGFzc2V0IGxpc3RcclxuICovXHJcbmNvbnN0IEdldEFzc2V0RmlsZXMgPSAoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBpZiAoIWV4Y2VwdGlvbktleXMpXHJcbiAgICAgICAgcmV0dXJuIGFzc2V0TGlzdDtcclxuICAgIGxldCBmaWx0ZXJlZExpc3Q7XHJcbiAgICAvLyBvbmUga2V5IHRvIGV4Y2VwdCBmcm9tIGFzc2V0IGxpc3RcclxuICAgIGlmICh0eXBlb2YgZXhjZXB0aW9uS2V5cyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBmaWx0ZXJlZExpc3QgPSBhc3NldExpc3QuZmlsdGVyKGFzc2V0ID0+IGFzc2V0LmtleSAhPT0gZXhjZXB0aW9uS2V5cyk7XHJcbiAgICB9XHJcbiAgICAvLyBzZXZlcmFsIGtleSBsaXN0IHRvIGV4Y2VwdCBmcm9tIGFzc2V0IGxpc3RcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZpbHRlcmVkTGlzdCA9IGFzc2V0TGlzdC5maWx0ZXIoKGFzc2V0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGNlcHRpb25LZXlzLmluZGV4T2YoYXNzZXQua2V5KSA8IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsdGVyZWRMaXN0O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBDb21tb25Sb290VXJsO1xyXG5leHBvcnQgeyBDb21tb25TZngsIENvbW1vblVJLCBDb21tb25BdWRpbywgQ29tbW9uRnVsbFNjcmVlbiwgQ29tbW9uU2Nyb2xsLCBDb21tb25HYWdlLCBDb21tb25FZngsIENvbW1vblNucywgR2V0QXNzZXRGaWxlcywgfTtcclxuIiwiaW1wb3J0IHsgR2V0TG9jYWxTdG9yYWdlSXRlbSwgU2V0TG9jYWxTdG9yYWdlSXRlbSB9IGZyb20gJ0BzcmMvdXRpbHMvc3RvcmFnZSc7XHJcbmltcG9ydCB7IEdldEFzc2V0RmlsZXMgfSBmcm9tICcuLi9hc3NldFV0aWxzJztcclxuY29uc3QgR2FtZUF1ZGlvID0ge1xyXG4gICAgd2hvbGVHYW1lRGF0YToge30sXHJcbiAgICBiZ21MaXN0OiBbXSxcclxuICAgIHNmeExpc3Q6IFtdLFxyXG4gICAgYmdtS2V5TGlzdDogW10sXHJcbiAgICBzZnhLZXlMaXN0OiBbXSxcclxuICAgIGlzQWxsTXV0ZTogZmFsc2UsXHJcbiAgICBpc0JnbU11dGU6IGZhbHNlLFxyXG4gICAgaXNTZnhNdXRlOiBmYWxzZSxcclxuICAgIGFsbFZvbHVtZTogMC41LFxyXG4gICAgYmdtVm9sdW1lOiAwLjUsXHJcbiAgICBzZnhWb2x1bWU6IDAuNSxcclxuICAgIHNldEFsbE11dGU6IGZ1bmN0aW9uIChpc011dGUpIHtcclxuICAgICAgICB0aGlzLmlzQWxsTXV0ZSA9IGlzTXV0ZTtcclxuICAgICAgICB0aGlzLnNldEJnbU11dGUoaXNNdXRlKTtcclxuICAgICAgICB0aGlzLnNldFNmeE11dGUoaXNNdXRlKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnaXNBbGxNdXRlJywgaXNNdXRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRCZ21NdXRlOiBmdW5jdGlvbiAoaXNNdXRlKSB7XHJcbiAgICAgICAgdGhpcy5pc0JnbU11dGUgPSBpc011dGU7XHJcbiAgICAgICAgdGhpcy5iZ21MaXN0LmZvckVhY2goYmdtID0+IGJnbS5zZXRNdXRlKGlzTXV0ZSkpO1xyXG4gICAgICAgIGlmIChpc011dGUpXHJcbiAgICAgICAgICAgIHRoaXMuYmdtS2V5TGlzdC5tYXAoa2V5ID0+IHRoaXMucGF1c2VCZ20oa2V5KSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmJnbUtleUxpc3QubWFwKGtleSA9PiB0aGlzLnJlc3VtZUJnbShrZXkpKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnaXNCZ21NdXRlJywgaXNNdXRlKTtcclxuICAgICAgICAvLyBpZiAodGhpcy5pc0JnbU11dGUgPT09IHRoaXMuaXNTZnhNdXRlKSB0aGlzLnNldFNmeE11dGUodGhpcy5pc0JnbU11dGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldFNmeE11dGU6IGZ1bmN0aW9uIChpc011dGUpIHtcclxuICAgICAgICB0aGlzLmlzU2Z4TXV0ZSA9IGlzTXV0ZTtcclxuICAgICAgICB0aGlzLnNmeExpc3QuZm9yRWFjaChzZnggPT4gc2Z4LnNldE11dGUoaXNNdXRlKSk7XHJcbiAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ2lzU2Z4TXV0ZScsIGlzTXV0ZSk7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuaXNCZ21NdXRlID09PSB0aGlzLmlzU2Z4TXV0ZSkgdGhpcy5zZXRBbGxNdXRlKHRoaXMuaXNCZ21NdXRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRBbGxWb2x1bWU6IGZ1bmN0aW9uICh2b2x1bWUpIHtcclxuICAgICAgICB0aGlzLmFsbFZvbHVtZSA9IHZvbHVtZTtcclxuICAgICAgICB0aGlzLnNldEJnbVZvbHVtZSh2b2x1bWUpO1xyXG4gICAgICAgIHRoaXMuc2V0U2Z4Vm9sdW1lKHZvbHVtZSk7XHJcbiAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ2FsbFZvbHVtZScsIHZvbHVtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc2V0QmdtVm9sdW1lOiBmdW5jdGlvbiAodm9sdW1lKSB7XHJcbiAgICAgICAgdGhpcy5iZ21Wb2x1bWUgPSB2b2x1bWU7XHJcbiAgICAgICAgdGhpcy5iZ21MaXN0LmZvckVhY2goYmdtID0+IGJnbS5zZXRWb2x1bWUodm9sdW1lKSk7XHJcbiAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ2JnbVZvbHVtZScsIHZvbHVtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc2V0U2Z4Vm9sdW1lOiBmdW5jdGlvbiAodm9sdW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZnhWb2x1bWUgPSB2b2x1bWU7XHJcbiAgICAgICAgdGhpcy5zZnhMaXN0LmZvckVhY2goc2Z4ID0+IHNmeC5zZXRWb2x1bWUodm9sdW1lKSk7XHJcbiAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ3NmeFZvbHVtZScsIHZvbHVtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgcGxheUJnbTogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IHBsYXlCZ20gPSB0aGlzLmJnbUxpc3QuZmluZChiZ20gPT4gYmdtLmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAocGxheUJnbSlcclxuICAgICAgICAgICAgcGxheUJnbS5wbGF5KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtBdWRpb10gcGxheUJnbTogJHtrZXl9IG5vdCBmb3VuZGApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHBhdXNlQmdtOiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgYmdtID0gdGhpcy5iZ21MaXN0LmZpbmQoYmdtID0+IGJnbS5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKGJnbSlcclxuICAgICAgICAgICAgYmdtLnBhdXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgcmVzdW1lQmdtOiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgYmdtID0gdGhpcy5iZ21MaXN0LmZpbmQoYmdtID0+IGJnbS5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKGJnbSlcclxuICAgICAgICAgICAgYmdtLnJlc3VtZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHN0b3BCZ206IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBiZ20gPSB0aGlzLmJnbUxpc3QuZmluZChiZ20gPT4gYmdtLmtleSA9PT0ga2V5KTtcclxuICAgICAgICBpZiAoYmdtKVxyXG4gICAgICAgICAgICBiZ20uc3RvcCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHBsYXlTZng6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBwbGF5U2Z4ID0gdGhpcy5zZnhMaXN0LmZpbmQoc2Z4ID0+IHNmeC5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKHBsYXlTZngpXHJcbiAgICAgICAgICAgIHBsYXlTZngucGxheSgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQXVkaW9dIHBsYXlTZng6ICR7a2V5fSBub3QgZm91bmRgKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzdG9wU2Z4OiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgc2Z4ID0gdGhpcy5zZnhMaXN0LmZpbmQoc2Z4ID0+IHNmeC5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKHNmeClcclxuICAgICAgICAgICAgc2Z4LnN0b3AoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICAvLyBwbGF5ICYgc3RvcCBjb250cm9sIGZvciBpbnN0YW5jZSBhbnkgc2Z4XHJcbiAgICBwbGF5U2Z4SW5zdGFuY2VMb29wOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2Z4S2V5TGlzdC5maW5kKGtleSA9PiBrZXkgPT09IGluc3RhbmNlLmtleSkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpbnN0YW5jZS5wbGF5KHtcclxuICAgICAgICAgICAgbXV0ZTogR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgJ2lzU2Z4TXV0ZScpLFxyXG4gICAgICAgICAgICB2b2x1bWU6IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZUF1ZGlvLndob2xlR2FtZURhdGEsICdzZnhWb2x1bWUnKSxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzdG9wU2Z4SW5zdGFuY2VMb29wOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2Z4S2V5TGlzdC5maW5kKGtleSA9PiBrZXkgPT09IGluc3RhbmNlLmtleSkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpbnN0YW5jZS5zdG9wKCk7XHJcbiAgICAgICAgaW5zdGFuY2UucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgaW5zdGFuY2UuZGVzdHJveSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgR2FtZUF1ZGlvRGF0YSA9IHtcclxuICAgIGFsbFZvbHVtZTogMC41LFxyXG4gICAgaXNBbGxNdXRlOiBmYWxzZSxcclxuICAgIGJnbVZvbHVtZTogMC41LFxyXG4gICAgaXNCZ21NdXRlOiBmYWxzZSxcclxuICAgIHNmeFZvbHVtZTogMC41LFxyXG4gICAgaXNTZnhNdXRlOiBmYWxzZSxcclxufTtcclxuY29uc3QgR2V0R2FtZUF1ZGlvQXNzZXRzID0gKHNmeEtleUxpc3QsIGJnbUtleUxpc3QsIGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIEdhbWVBdWRpby5zZnhLZXlMaXN0ID0gR2V0QXNzZXRGaWxlcyhzZnhLZXlMaXN0LCBleGNlcHRpb25LZXlzKS5tYXAoYXNzZXQgPT4gYXNzZXQua2V5KTtcclxuICAgIGlmIChiZ21LZXlMaXN0KVxyXG4gICAgICAgIEdhbWVBdWRpby5iZ21LZXlMaXN0ID0gR2V0QXNzZXRGaWxlcyhiZ21LZXlMaXN0LCBleGNlcHRpb25LZXlzKS5tYXAoYXNzZXQgPT4gYXNzZXQua2V5KTtcclxuICAgIGVsc2VcclxuICAgICAgICBHYW1lQXVkaW8uYmdtS2V5TGlzdCA9IFtdO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAuLi5zZnhLZXlMaXN0LFxyXG4gICAgICAgIC4uLmJnbUtleUxpc3QsXHJcbiAgICBdO1xyXG59O1xyXG5jb25zdCBJbml0R2FtZUF1ZGlvID0gKCkgPT4ge1xyXG4gICAgLy8gQ2xlYXJHYW1lTG9jYWxTdG9yYWdlRGF0YSgpO1xyXG4gICAgY29uc3QgW2FsbFZvbHVtZSwgaXNBbGxNdXRlLCBiZ21Wb2x1bWUsIGlzQmdtTXV0ZSwgc2Z4Vm9sdW1lLCBpc1NmeE11dGVdID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSwgW1xyXG4gICAgICAgICdhbGxWb2x1bWUnLFxyXG4gICAgICAgICdpc0FsbE11dGUnLFxyXG4gICAgICAgICdiZ21Wb2x1bWUnLFxyXG4gICAgICAgICdpc0JnbU11dGUnLFxyXG4gICAgICAgICdzZnhWb2x1bWUnLFxyXG4gICAgICAgICdpc1NmeE11dGUnLFxyXG4gICAgXSwgJ2Jlc3QnKTtcclxuICAgIEdhbWVBdWRpby5zZXRBbGxWb2x1bWUoYWxsVm9sdW1lKTtcclxuICAgIEdhbWVBdWRpby5zZXRBbGxNdXRlKGlzQWxsTXV0ZSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0QmdtVm9sdW1lKGJnbVZvbHVtZSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0QmdtTXV0ZShpc0JnbU11dGUpO1xyXG4gICAgR2FtZUF1ZGlvLnNldFNmeFZvbHVtZShzZnhWb2x1bWUpO1xyXG4gICAgR2FtZUF1ZGlvLnNldFNmeE11dGUoaXNTZnhNdXRlKTtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZUF1ZGlvID0gKHNjZW5lLCBnYW1lRGF0YSkgPT4ge1xyXG4gICAgR2FtZUF1ZGlvLndob2xlR2FtZURhdGEgPSBnYW1lRGF0YTtcclxuICAgIEdhbWVBdWRpby5iZ21MaXN0ID0gR2FtZUF1ZGlvLmJnbUtleUxpc3QgJiYgR2FtZUF1ZGlvLmJnbUtleUxpc3QubWFwKGtleSA9PiBzY2VuZS5zb3VuZC5hZGQoa2V5LCB7IGxvb3A6IHRydWUgfSkpO1xyXG4gICAgR2FtZUF1ZGlvLnNmeExpc3QgPSBHYW1lQXVkaW8uc2Z4S2V5TGlzdCAmJiBHYW1lQXVkaW8uc2Z4S2V5TGlzdC5tYXAoa2V5ID0+IHNjZW5lLnNvdW5kLmFkZChrZXkpKTtcclxuICAgIEluaXRHYW1lQXVkaW8oKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUF1ZGlvO1xyXG5leHBvcnQgeyBHYW1lQXVkaW9EYXRhLCBHZXRHYW1lQXVkaW9Bc3NldHMsIEluaXRHYW1lQXVkaW8sIENyZWF0ZUdhbWVBdWRpbyB9O1xyXG4iLCJjb25zdCBJbnB1dCA9IHtcclxuICAgIHR5cGU6ICcnLFxyXG4gICAgdHlwZUhpc3Rvcnk6IFtdLFxyXG4gICAgaW5pdFBvczogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICBpc0hvbGRpbmdEb3duOiBmYWxzZSxcclxuICAgIGhvbGREdXJhdGlvbjogMCxcclxuICAgIGhvbGRNYXhEdXJhdGlvbjogMTAwMCxcclxuICAgIHN0YXJ0SG9sZDogZnVuY3Rpb24gKCkgeyB0aGlzLmlzSG9sZGluZ0Rvd24gPSB0cnVlOyByZXR1cm4gdGhpczsgfSxcclxuICAgIHJlc2V0SG9sZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXNIb2xkaW5nRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW5pdFBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIHRoaXMuaG9sZER1cmF0aW9uID0gMDtcclxuICAgICAgICB0aGlzLnNldFR5cGUoJycpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGdldElzSG9sZGluZ0Rvd246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaXNIb2xkaW5nRG93bjsgfSxcclxuICAgIGdldEhvbGREdXJhdGlvbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5ob2xkRHVyYXRpb247IH0sXHJcbiAgICBzZXRIb2xkRHVyYXRpb246IGZ1bmN0aW9uIChkdXJhdGlvbikgeyB0aGlzLmhvbGREdXJhdGlvbiA9IGR1cmF0aW9uOyByZXR1cm4gdGhpczsgfSxcclxuICAgIHNldEluaXRQb3M6IGZ1bmN0aW9uICh4LCB5KSB7IHRoaXMuaW5pdFBvcyA9IHsgeDogeCwgeTogeSB9OyByZXR1cm4gdGhpczsgfSxcclxuICAgIGNoY2tJc0hvbGQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5ob2xkRHVyYXRpb24gPj0gdGhpcy5ob2xkTWF4RHVyYXRpb24pXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIGdldFR5cGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudHlwZTsgfSxcclxuICAgIHNldFR5cGU6IGZ1bmN0aW9uICh0eXBlKSB7IHRoaXMudHlwZSA9IHR5cGU7IHJldHVybiB0aGlzOyB9LFxyXG4gICAgaW5pdFR5cGVIaXN0b3J5OiBmdW5jdGlvbiAoKSB7IHRoaXMudHlwZUhpc3RvcnkgPSBbXTsgfSxcclxuICAgIGdldFR5cGVIaXN0b3J5OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnR5cGVIaXN0b3J5OyB9LFxyXG4gICAgZ2V0TGFzdGVzdElucHV0VHlwZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50eXBlSGlzdG9yeVt0aGlzLnR5cGVIaXN0b3J5Lmxlbmd0aCAtIDFdOyB9LFxyXG4gICAgcHVzaDJUeXBlSGlzdG9yeTogZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICB0aGlzLnR5cGVIaXN0b3J5LnB1c2godHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZUhpc3Rvcnk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEluaXRJbnB1dCA9ICgpID0+IHtcclxuICAgIElucHV0LnJlc2V0SG9sZCgpO1xyXG4gICAgSW5wdXQuaW5pdFR5cGVIaXN0b3J5KCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUlucHV0ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAgICAgSW5wdXQuc3RhcnRIb2xkKCk7XHJcbiAgICB9KTtcclxuICAgIEluaXRJbnB1dCgpO1xyXG59O1xyXG5jb25zdCBVcGRhdGVJbnB1dCA9IChkZWx0YSkgPT4ge1xyXG4gICAgaWYgKElucHV0LmdldElzSG9sZGluZ0Rvd24oKSlcclxuICAgICAgICBJbnB1dC5zZXRIb2xkRHVyYXRpb24oSW5wdXQuZ2V0SG9sZER1cmF0aW9uKCkgKyBkZWx0YSk7XHJcbn07XHJcbmNvbnN0IElucHV0UHRyRG93biA9IChwdHIpID0+IHtcclxuICAgIElucHV0LnNldEluaXRQb3MocHRyLngsIHB0ci55KTtcclxufTtcclxuY29uc3QgSW5wdXRQdHJVcCA9IChwdHIpID0+IHtcclxuICAgIHJldHVybiBTZXRJbnB1dFR5cGUoSW5wdXQuaW5pdFBvcywgcHRyKTtcclxufTtcclxuY29uc3QgSW5wdXREcmFnID0gKHB0cikgPT4ge1xyXG59O1xyXG5jb25zdCBJbnB1dFB0ck91dCA9ICgpID0+IHtcclxuICAgIElucHV0LnJlc2V0SG9sZCgpO1xyXG59O1xyXG5jb25zdCBDaGNrU3dpcGVEaXJlY3Rpb24gPSAoaW5pdFBvcywgcHRyKSA9PiB7XHJcbiAgICBjb25zdCB4ID0gcHRyLnggLSBpbml0UG9zLng7XHJcbiAgICBjb25zdCB5ID0gcHRyLnkgLSBpbml0UG9zLnk7XHJcbiAgICBpZiAoTWF0aC5hYnMoeCkgPiBNYXRoLmFicyh5KSkge1xyXG4gICAgICAgIGlmICh4ID4gMClcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgnc3dpcGVSaWdodCcpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgnc3dpcGVMZWZ0Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoeSA8IDApXHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ3N3aXBlVXAnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ3N3aXBlRG93bicpO1xyXG4gICAgfVxyXG59O1xyXG4vLyBzZXQgY29tZnkgdG91Y2ggdG8gbm90IGp1ZGdlIGFzIHN3aXBlIHdoZW4gdXNlIHdpdGggYWN0dWFsIGZpbmdlclxyXG5jb25zdCBDb21meUdhcFRvdWNoVmFsdWUgPSAxNTtcclxuY29uc3QgU2V0SW5wdXRUeXBlID0gKGluaXRQb3MsIHB0cikgPT4ge1xyXG4gICAgLy8gc3dpcGUgbW90aW9uXHJcbiAgICBjb25zdCBjaGNrUG9zWCA9IE1hdGguYWJzKGluaXRQb3MueCAtIHB0ci54KSA+IENvbWZ5R2FwVG91Y2hWYWx1ZTtcclxuICAgIGNvbnN0IGNoY2tQb3NZID0gTWF0aC5hYnMoaW5pdFBvcy55IC0gcHRyLnkpID4gQ29tZnlHYXBUb3VjaFZhbHVlO1xyXG4gICAgaWYgKGNoY2tQb3NYIHx8IGNoY2tQb3NZKVxyXG4gICAgICAgIENoY2tTd2lwZURpcmVjdGlvbihpbml0UG9zLCBwdHIpO1xyXG4gICAgLy8gaG9sZCBvciB0b3VjaFxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKElucHV0LmNoY2tJc0hvbGQoKSkge1xyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCdob2xkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgndG91Y2gnKTtcclxuICAgIH1cclxuICAgIElucHV0LnB1c2gyVHlwZUhpc3RvcnkoSW5wdXQuZ2V0VHlwZSgpKTtcclxuICAgIElucHV0LnJlc2V0SG9sZCgpO1xyXG4gICAgcmV0dXJuIElucHV0LmdldExhc3Rlc3RJbnB1dFR5cGUoKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgSW5wdXQ7XHJcbmV4cG9ydCB7IENyZWF0ZUlucHV0LCBVcGRhdGVJbnB1dCwgSW5wdXRQdHJEb3duLCBJbnB1dFB0clVwLCBJbnB1dERyYWcsIElucHV0UHRyT3V0LCBTZXRJbnB1dFR5cGUgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kTnVtIH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IElucHV0UHRyRG93biwgSW5wdXRQdHJVcCwgSW5wdXRQdHJPdXQgfSBmcm9tICcuLi8uLi9pbnB1dCc7XHJcbmltcG9ydCB7IEFkZE9ic3RhY2xlQmxvY2ssIENsZWFyQmxvY2sgfSBmcm9tICcuLi9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBDb21tb25TaXplIH0gZnJvbSAnLic7XHJcbmNvbnN0IFNldEJsb2NrMlBvd2VyID0gKGJsb2NrKSA9PiB7XHJcbiAgICBjb25zdCB7IHNjZW5lIH0gPSBibG9jaztcclxuICAgIGNvbnN0IHJuZERvd25EdXJhdGlvbk1heCA9IEdldFJuZE51bSgwLjUsIDEuNSk7XHJcbiAgICBjb25zdCBpbml0UHRyID0gKGJEYXRhLCBibG9jaykgPT4ge1xyXG4gICAgICAgIGJEYXRhLmlzUHRyRG93biA9IGZhbHNlO1xyXG4gICAgICAgIGJEYXRhLmRvd25EdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgYmxvY2suc2V0QWxwaGEoMSk7XHJcbiAgICB9O1xyXG4gICAgbGV0IGJEYXRhID0ge1xyXG4gICAgICAgIGlzUHRyRG93bjogZmFsc2UsXHJcbiAgICAgICAgaXNDb21wbGV0ZTogZmFsc2UsXHJcbiAgICAgICAgZG93bkR1cmF0aW9uOiAwLFxyXG4gICAgICAgIGRvd25EdXJhdGlvbk1heDogTWF0aC5mbG9vcihybmREb3duRHVyYXRpb25NYXggKiAxMDAwKSxcclxuICAgICAgICBwdHJEb3duOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikge1xyXG4gICAgICAgICAgICBJbnB1dFB0ckRvd24ocHRyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQdHJEb3duKSB7XHJcbiAgICAgICAgICAgICAgICBBZGRPYnN0YWNsZUJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzUHRyRG93biA9IHRydWU7XHJcbiAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdwb3dlckJsb2NrT24nKTtcclxuICAgICAgICAgICAgYmxvY2suc2V0QWxwaGEoMC41KTtcclxuICAgICAgICAgICAgY29uc3QgdHdMaXN0ID0gW107XHJcbiAgICAgICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGZyb206IDAsIHRvOiB0aGlzLmRvd25EdXJhdGlvbk1heCwgZHVyYXRpb246IHRoaXMuZG93bkR1cmF0aW9uTWF4LFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGtlZXAgcHJlc3MgcG93ZXIgYnRuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQdHJEb3duKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvd25EdXJhdGlvbiA9IHR3LmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVsZWFzZSBwb3dlciBidG4gYmVmb3JlIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFB0cih0aGlzLCBibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAodHcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkb25lIHBvd2VyIGJ0biBwbGF5IHNmeFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1B0ckRvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHdMaXN0LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRQdHIodGhpcywgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3Bvd2VyQmxvY2tPZmYnKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0d0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAxLCB0bzogMS4xLCBkdXJhdGlvbjogMjUwLCB5b3lvOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFNjYWxlKGRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRTY2FsZSgxKTtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndG91Y2hTZngnKTtcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckJsb2NrKGJsb2NrLCBibG9jay5nZXRTY29yZSgpICogdGhpcy5kb3duRHVyYXRpb25NYXggLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0clVwOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikge1xyXG4gICAgICAgICAgICBibG9jay5zZXRBbHBoYSgxKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDb21wbGV0ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHRyRG93biB8fCBJbnB1dFB0clVwKHB0cikgIT09ICd0b3VjaCcpIHtcclxuICAgICAgICAgICAgICAgIEFkZE9ic3RhY2xlQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNoY2sgaXMga2VlcCBwcmVzcyB1bnRpbCBkb25lXHJcbiAgICAgICAgICAgIGluaXRQdHIodGhpcywgYmxvY2spO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHRyT3V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIElucHV0UHRyT3V0KCk7XHJcbiAgICAgICAgICAgIGluaXRQdHIodGhpcywgYmxvY2spO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgYmxvY2suZ2V0VHlwZUltZygpLnNldERpc3BsYXlTaXplKENvbW1vblNpemUsIENvbW1vblNpemUpO1xyXG4gICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0QmxvY2syUG93ZXI7XHJcbiIsImltcG9ydCB7IEdldFJuZEludCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBJbnB1dFB0ckRvd24sIElucHV0UHRyT3V0LCBJbnB1dFB0clVwIH0gZnJvbSAnLi4vLi4vaW5wdXQnO1xyXG5pbXBvcnQgeyBBZGRPYnN0YWNsZUJsb2NrLCBDbGVhckJsb2NrIH0gZnJvbSAnLi4vc3lzdGVtJztcclxuaW1wb3J0IHsgQ29tbW9uU2l6ZSB9IGZyb20gJy4nO1xyXG5jb25zdCBTZXRCbG9jazJMb2FkaW5nID0gKGJsb2NrKSA9PiB7XHJcbiAgICBibG9jay5zZXRUeXBlVHh0KCclJyk7XHJcbiAgICBibG9jay5nZXRUeXBlVHh0KCkuc2V0Rm9udFNpemUoNTApO1xyXG4gICAgbGV0IGJEYXRhID0ge1xyXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgcHRyRG93bjogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHsgSW5wdXRQdHJEb3duKHB0cik7IH0sXHJcbiAgICAgICAgcHRyVXA6IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGluZyB8fCBJbnB1dFB0clVwKHB0cikgIT09ICd0b3VjaCcpIHtcclxuICAgICAgICAgICAgICAgIEFkZE9ic3RhY2xlQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3Qgcm5kRHVyYXRpb24gPSBHZXRSbmRJbnQoMSwgNCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NTZnggPSBibG9jay5zY2VuZS5zb3VuZC5hZGQoJ2xvYWRpbmdCbG9ja09uUHJvY2VzcycpO1xyXG4gICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeEluc3RhbmNlTG9vcChwcm9jZXNzU2Z4KTtcclxuICAgICAgICAgICAgYmxvY2suc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogMCwgdG86IDEwMCwgZHVyYXRpb246IHJuZER1cmF0aW9uICogMTAwMCxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gZGF0YS52YWx1ZS50b0ZpeGVkKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFR5cGVUeHQocGVyY2VudGFnZSArICclJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5zdG9wU2Z4SW5zdGFuY2VMb29wKHByb2Nlc3NTZngpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdsb2FkaW5nQmxvY2tEb25lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRUeXBlVHh0KCcxMDAlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd0b3VjaFNmeCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbGVhckJsb2NrKGJsb2NrLCBibG9jay5nZXRTY29yZSgpICogcm5kRHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0ck91dDogZnVuY3Rpb24gKCkgeyBJbnB1dFB0ck91dCgpOyB9LFxyXG4gICAgfTtcclxuICAgIGJsb2NrLmdldFR5cGVJbWcoKS5zZXREaXNwbGF5U2l6ZShDb21tb25TaXplLCBDb21tb25TaXplKTtcclxuICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldEJsb2NrMkxvYWRpbmc7XHJcbiIsImltcG9ydCB7IEdldFJuZEludCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IEFkZE9ic3RhY2xlQmxvY2ssIENsZWFyQmxvY2sgfSBmcm9tICcuLi9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBJbnB1dFB0ckRvd24sIElucHV0UHRyVXAsIElucHV0UHRyT3V0IH0gZnJvbSAnLi4vLi4vaW5wdXQnO1xyXG5pbXBvcnQgeyBDb21tb25TaXplIH0gZnJvbSAnLic7XHJcbmNvbnN0IFNldEJsb2NrMlRvdWNoID0gKGJsb2NrKSA9PiB7XHJcbiAgICBjb25zdCBybmRUb3VjaENudCA9IEdldFJuZEludCgyLCA1KTtcclxuICAgIGNvbnN0IGRpc2FibGVUb3VjaERlbGF5VGltZSA9IDI0MDtcclxuICAgIGxldCBiRGF0YSA9IHtcclxuICAgICAgICB0b3VjaENudDogMCxcclxuICAgICAgICBtYXhUb3VjaENudDogcm5kVG91Y2hDbnQsXHJcbiAgICAgICAgaXNBYmxlMlRvdWNoOiB0cnVlLFxyXG4gICAgICAgIHB0ckRvd246IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7IElucHV0UHRyRG93bihwdHIpOyB9LFxyXG4gICAgICAgIHB0clVwOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikge1xyXG4gICAgICAgICAgICBpZiAoSW5wdXRQdHJVcChwdHIpICE9PSAndG91Y2gnKSB7XHJcbiAgICAgICAgICAgICAgICBBZGRPYnN0YWNsZUJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBYmxlMlRvdWNoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoQ250Kys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoQ250ID49IHRoaXMubWF4VG91Y2hDbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hDbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgQ2xlYXJCbG9jayhibG9jaywgYmxvY2suZ2V0U2NvcmUoKSAqIHRoaXMubWF4VG91Y2hDbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBjbGljaywgdGhlbiBhYmxlIGFmdGVyIGRlbGF5XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWJsZTJUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYmxvY2suc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjEsIGR1cmF0aW9uOiBkaXNhYmxlVG91Y2hEZWxheVRpbWUsIHlveW86IHRydWUsIGVhc2U6ICdCb3VuY2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0U2NhbGUoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFNjYWxlKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWJsZTJUb3VjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0ck91dDogZnVuY3Rpb24gKCkgeyBJbnB1dFB0ck91dCgpOyB9XHJcbiAgICB9O1xyXG4gICAgYmxvY2suZ2V0VHlwZUltZygpLnNldERpc3BsYXlTaXplKENvbW1vblNpemUsIENvbW1vblNpemUpO1xyXG4gICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0QmxvY2syVG91Y2g7XHJcbiIsImltcG9ydCB7IElucHV0UHRyRG93biwgSW5wdXRQdHJVcCwgSW5wdXRQdHJPdXQgfSBmcm9tICcuLi8uLi9pbnB1dCc7XHJcbmltcG9ydCB7IEFkZE9ic3RhY2xlQmxvY2sgfSBmcm9tICcuLi9zeXN0ZW0nO1xyXG5jb25zdCBPYnN0YWNsZVRleHR1cmVMaXN0ID0gWydvYnN0YWNsZUJhbGwnLCAnb2JzdGFjbGVSZWN0JywgJ29ic3RhY2xlU3F1YXJlJ107XHJcbmNvbnN0IFNldE9ic3RhY2xlID0gKGJsb2NrKSA9PiB7XHJcbiAgICBsZXQgYkRhdGEgPSB7XHJcbiAgICAgICAgaXNBYmxlMlRvdWNoOiB0cnVlLFxyXG4gICAgICAgIHB0ckRvd246IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7IElucHV0UHRyRG93bihwdHIpOyB9LFxyXG4gICAgICAgIHB0clVwOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dFR5cGUgPSBJbnB1dFB0clVwKHB0cik7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFR5cGUgIT09ICd0b3VjaCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FibGUyVG91Y2gpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuaXNBYmxlMlRvdWNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFkZE9ic3RhY2xlQmxvY2soYmxvY2spO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5pc0FibGUyVG91Y2ggPSB0cnVlOyB9LCAxMDAwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0ck91dDogZnVuY3Rpb24gKCkgeyBJbnB1dFB0ck91dCgpOyB9XHJcbiAgICB9O1xyXG4gICAgYmxvY2suYWRkQmxvY2tEYXRhKGJEYXRhKTtcclxuICAgIC8vIHNldCBzaGFwZSBvYnN0YWNsZSB0ZXh0dXJlXHJcbiAgICBjb25zdCBuYW1lID0gYmxvY2suZ2V0U2hhcGVOYW1lKCk7XHJcbiAgICBjb25zdCBjYXBpdGFsU2hhcGUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xyXG4gICAgY29uc3Qgb2JzdGFjbGVTaGFwZSA9ICdvYnN0YWNsZScgKyBjYXBpdGFsU2hhcGU7XHJcbiAgICBibG9jay5hZGRTaGFwZSh7IHNjb3JlOiAwLCBpbWdUZXh0dXJlOiBvYnN0YWNsZVNoYXBlIH0pO1xyXG4gICAgYmxvY2suZ2V0U2hhcGVJbWcoKS5zZXRUZXh0dXJlKG9ic3RhY2xlU2hhcGUpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTZXRPYnN0YWNsZTtcclxuZXhwb3J0IHsgT2JzdGFjbGVUZXh0dXJlTGlzdCB9O1xyXG4iLCJpbXBvcnQgeyBTZXRCbG9ja1R5cGUySW5pdEJhc2ljIH0gZnJvbSBcIi4uL2Jhc2ljXCI7XHJcbmltcG9ydCBTZXRCbG9jazJBZCBmcm9tICcuL2FkJztcclxuaW1wb3J0IFNldEJsb2NrMlBvd2VyIGZyb20gJy4vcG93ZXInO1xyXG5pbXBvcnQgU2V0QmxvY2syTG9hZGluZyBmcm9tICcuL2xvYWRpbmcnO1xyXG5pbXBvcnQgU2V0QmxvY2syVG91Y2ggZnJvbSAnLi90b3VjaCc7XHJcbmltcG9ydCBTZXRPYnN0YWNsZSBmcm9tICcuL29ic3RhY2xlJztcclxuaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IENvbW1vblNpemUgPSBWaWV3LmNhbGNSYXRpbygxMDApO1xyXG5jb25zdCBCbG9ja1VuaXF1ZVByb3BlcnRpZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICcnLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAwLFxyXG4gICAgICAgIHNjb3JlOiAwLFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAnJyxcclxuICAgICAgICBpbWdXaWR0aDogMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IFNldEJsb2NrVHlwZTJJbml0QmFzaWMoYmxvY2spOyByZXR1cm4gYmxvY2s7IH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICdvYnN0YWNsZScsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDAsXHJcbiAgICAgICAgc2NvcmU6IDAsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICcnLFxyXG4gICAgICAgIGltZ1dpZHRoOiAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgU2V0T2JzdGFjbGUoYmxvY2spOyByZXR1cm4gYmxvY2s7IH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICdhZCcsXHJcbiAgICAgICAgLy8gc3Bhd25DaGFuY2U6IDEsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDAsXHJcbiAgICAgICAgc2NvcmU6IDkwLFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAnJyxcclxuICAgICAgICBpbWdXaWR0aDogMTAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMTAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogMTAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMyAqIDEwMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiA1ICogMTAwMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgcmV0dXJuIFNldEJsb2NrMkFkKGJsb2NrKTsgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJ3Bvd2VyJyxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMSxcclxuICAgICAgICBzY29yZTogNjAsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICdwb3dlcicsXHJcbiAgICAgICAgaW1nV2lkdGg6IDEwMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDEwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDUwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMSAqIDEwMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiAyICogMTAwMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgcmV0dXJuIFNldEJsb2NrMlBvd2VyKGJsb2NrKTsgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJ2xvYWRpbmcnLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAxLFxyXG4gICAgICAgIHNjb3JlOiA1LFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAnJyxcclxuICAgICAgICBpbWdXaWR0aDogMTAwLFxyXG4gICAgICAgIGltZ0hlaWdodDogMTAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogMzAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWluOiAwLjUgKiAxMDAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogMSAqIDEwMDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IHJldHVybiBTZXRCbG9jazJMb2FkaW5nKGJsb2NrKTsgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICB0eXBlTmFtZTogJ3RvdWNoJyxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMSxcclxuICAgICAgICBzY29yZTogMTAsXHJcbiAgICAgICAgaWNvblRleHR1cmU6ICd0b3VjaCcsXHJcbiAgICAgICAgaW1nV2lkdGg6IDEwMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDEwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDMwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMiAqIDEwMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiA0ICogMTAwMCxcclxuICAgICAgICBzZXRGdW5jOiAoYmxvY2spID0+IHsgcmV0dXJuIFNldEJsb2NrMlRvdWNoKGJsb2NrKTsgfVxyXG4gICAgfSxcclxuXTtcclxuY29uc3QgVEJsb2NrVHlwZUxpc3QgPSBCbG9ja1VuaXF1ZVByb3BlcnRpZXMubWFwKGVsZSA9PiB7IGlmIChlbGUudHlwZU5hbWUgIT09ICcnKVxyXG4gICAgcmV0dXJuIGVsZS50eXBlTmFtZTsgfSk7XHJcbmNvbnN0IFNwYXduTWF4Q2hhbmNlID0gQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLm1hcChlbGUgPT4gZWxlLnNwYXduQ2hhbmNlKS5yZWR1Y2UoKHByZXZWYWx1ZSwgY3VyclZhbHVlKSA9PiB7XHJcbiAgICByZXR1cm4gcHJldlZhbHVlICsgY3VyclZhbHVlO1xyXG59LCAwKTtcclxuY29uc3QgU2V0MlR5cGVCbG9jayA9IChibG9jaywgdHlwZU5hbWUpID0+IHtcclxuICAgIGxldCBmaWx0ZXJlZFR5cGUgPSBCbG9ja1VuaXF1ZVByb3BlcnRpZXMuZmluZChlbGUgPT4gZWxlLnR5cGVOYW1lID09PSB0eXBlTmFtZSk7XHJcbiAgICBpZiAoZmlsdGVyZWRUeXBlKSB7XHJcbiAgICAgICAgU2V0QmxvY2tUeXBlMkluaXRCYXNpYyhibG9jayk7XHJcbiAgICAgICAgYmxvY2suc2V0VHlwZU5hbWUodHlwZU5hbWUpO1xyXG4gICAgICAgIGJsb2NrLnNldFR5cGVJbWcoZmlsdGVyZWRUeXBlLmljb25UZXh0dXJlKTtcclxuICAgICAgICBibG9jay5zZXRUeXBlSW1nRGlzcGxheVNpemUoZmlsdGVyZWRUeXBlLmltZ1dpZHRoLCBmaWx0ZXJlZFR5cGUuaW1nSGVpZ2h0KTtcclxuICAgICAgICBibG9jay5hZGRTY29yZShmaWx0ZXJlZFR5cGUuc2NvcmUpO1xyXG4gICAgICAgIGJsb2NrLnNldFRpbWVJbmNyZWFzZSh7XHJcbiAgICAgICAgICAgIGNoYW5jZTogZmlsdGVyZWRUeXBlLnRpbWVJbmNyZWFzZUNoYW5jZSxcclxuICAgICAgICAgICAgdmFsdWU6IEdldFJuZEludChmaWx0ZXJlZFR5cGUudGltZUluY3JlYXNlTWluLCBmaWx0ZXJlZFR5cGUudGltZUluY3JlYXNlTWF4KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZpbHRlcmVkVHlwZS5zZXRGdW5jKGJsb2NrKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICBjb25zb2xlLmxvZygnU2V0MlR5cGVCbG9jazogdHlwZU5hbWUgaXMgbm90IGZvdW5kIGluIHRoZSBibG9jayB0eXBlIGxpc3QnKTtcclxufTtcclxuZXhwb3J0IHsgQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLCBDb21tb25TaXplLCBUQmxvY2tUeXBlTGlzdCwgU3Bhd25NYXhDaGFuY2UsIFNldDJUeXBlQmxvY2ssIH07XHJcbiIsImltcG9ydCB7IEdhbWVBdWRpb0RhdGEgfSBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmNvbnN0IEdhbWVEYXRhID0gT2JqZWN0LmFzc2lnbih7IGJlc3Q6IDAgfSwgR2FtZUF1ZGlvRGF0YSk7XHJcbi8vIGV4cG9ydCBkZWZhdWx0IFRHYW1lRGF0YTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZURhdGE7XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5jb25zdCBHYW1lRm9udCA9IHtcclxuICAgIGd1aWRlVHh0WTogVmlldy5oIC0gODAsXHJcbn07XHJcbmNvbnN0IEluaXRGb250ID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBDcmVhdGVGb250ID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBTZXRGb250U3R5bGUgPSAodHh0KSA9PiB7XHJcbiAgICB0eHQuc2V0Rm9udFN0eWxlKCdib2xkJyk7XHJcbiAgICB0eHQuc2V0Rm9udEZhbWlseSgnQXJpYWwgQmxhY2snKTtcclxuICAgIHR4dC5zZXRPcmlnaW4oMC41KTtcclxuICAgIHJldHVybiB0eHQ7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVGb250O1xyXG5leHBvcnQgeyBJbml0Rm9udCwgQ3JlYXRlRm9udCwgU2V0Rm9udFN0eWxlIH07XHJcbiIsImltcG9ydCB7IENvbW1vbkdhZ2UsIEdldEFzc2V0RmlsZXMgfSBmcm9tIFwiQHNyYy9zY2VuZXMvYXNzZXRVdGlsc1wiO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuaW1wb3J0IHsgU2V0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL2ZvbnRcIjtcclxuY29uc3QgR2FtZUdhZ2VDb2xvckxpc3QgPSBbJ2JsdWUnLCAncmVkJywgJ3llbGxvdyddO1xyXG5jb25zdCBHYW1lR2FnZSA9IHtcclxuICAgIGhlaWdodDogMjAsXHJcbiAgICB0eHRNYXJnaW46IDMwLFxyXG4gICAgZ2FnZXM6IFtdLFxyXG4gICAgY29sb3I6ICdibHVlJyxcclxufTtcclxuY29uc3QgR2V0R2FnZUFzc2V0cyA9IChjb2xvciwgZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgbGV0IGFzc2V0TGlzdCA9IFtdO1xyXG4gICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgR2FtZUdhZ2UuY29sb3IgPSBjb2xvcjtcclxuICAgICAgICBhc3NldExpc3QgPSBbXHJcbiAgICAgICAgICAgIHsga2V5OiBjb2xvciArICdCZycsIHVybDogQ29tbW9uR2FnZSArIGNvbG9yICsgJ0JnLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgeyBrZXk6IGNvbG9yICsgJ0J0bicsIHVybDogQ29tbW9uR2FnZSArIGNvbG9yICsgJ0J0bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiBjb2xvciArICdIYW5kbGVEb3duJywgdXJsOiBDb21tb25HYWdlICsgY29sb3IgKyAnSGFuZGxlRG93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgIHsga2V5OiBjb2xvciArICdIYW5kbGVVcCcsIHVybDogQ29tbW9uR2FnZSArIGNvbG9yICsgJ0hhbmRsZVVwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgR2FtZUdhZ2VDb2xvckxpc3QubWFwKChnYWdlQ29sb3IpID0+IHtcclxuICAgICAgICAgICAgYXNzZXRMaXN0LnB1c2goeyBrZXk6IGdhZ2VDb2xvciArICdCZycsIHVybDogQ29tbW9uR2FnZSArIGdhZ2VDb2xvciArICdCZy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sIHsga2V5OiBnYWdlQ29sb3IgKyAnQnRuJywgdXJsOiBDb21tb25HYWdlICsgZ2FnZUNvbG9yICsgJ0J0bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sIHsga2V5OiBnYWdlQ29sb3IgKyAnSGFuZGxlRG93bicsIHVybDogQ29tbW9uR2FnZSArIGdhZ2VDb2xvciArICdIYW5kbGVEb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSwgeyBrZXk6IGdhZ2VDb2xvciArICdIYW5kbGVVcCcsIHVybDogQ29tbW9uR2FnZSArIGdhZ2VDb2xvciArICdIYW5kbGVVcC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEdldEFzc2V0RmlsZXMoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKTtcclxufTtcclxuY29uc3QgSW5pdEdhZ2UgPSAobmFtZSkgPT4ge1xyXG4gICAgY29uc3QgZ2FnZUxheWVyID0gR2FtZUdhZ2UuZ2FnZXMuZmluZChnYWdlID0+IGdhZ2UubmFtZSA9PT0gbmFtZSk7XHJcbiAgICBpZiAoZ2FnZUxheWVyKSB7XHJcbiAgICAgICAgLy8gbmFtZWRHYWdlXHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhZ2VCYXIgPSAoc2NlbmUsIHgsIHksIGVuZE1vdmVDYWxsYmFjaywgZGF0YSkgPT4ge1xyXG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbCwgX20sIF9vLCBfcCwgX3EsIF9yO1xyXG4gICAgY29uc3QgbGF5ZXIgPSBzY2VuZS5hZGQubGF5ZXIoKTtcclxuICAgIC8vIHNldHRpbmcgcGFyYW1ldGVyIGluaXQgZGF0YVxyXG4gICAgbGF5ZXIueCA9IHg7XHJcbiAgICBsYXllci55ID0geTtcclxuICAgIGxheWVyLmdhZ2VOdW1NaW4gPSAoX2EgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEubnVtTWluKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgbGF5ZXIuZ2FnZU51bU1heCA9IChfYiA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5udW1NaW4pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDEwMDtcclxuICAgIGxheWVyLmdhZ2VOdW0gPSAobGF5ZXIuZ2FnZU51bU1pbiArIGxheWVyLmdhZ2VOdW1NYXgpIC8gMjtcclxuICAgIGxheWVyLmlzQWJsZSA9IChfYyA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5pc0FibGUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHRydWU7XHJcbiAgICBjb25zdCBjb2xvciA9IChfZCA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5jb2xvcikgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogR2FtZUdhZ2UuY29sb3I7XHJcbiAgICBjb25zdCB3ID0gKF9lID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLndpZHRoKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBWaWV3LmNlbnRlclg7XHJcbiAgICBjb25zdCBoID0gKF9mID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmhlaWdodCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogR2FtZUdhZ2UuaGVpZ2h0O1xyXG4gICAgY29uc3QgYmdUZXh0dXJlID0gKF9nID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmJnVHh0dXJlKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBjb2xvciArICdCZyc7XHJcbiAgICBjb25zdCBidG5UZXh0dXJlID0gKF9oID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmJ0blRleHR1cmUpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IGNvbG9yICsgJ0J0bic7XHJcbiAgICBjb25zdCBoYW5kbGVVcFRleHR1cmUgPSAoX2sgPSAoX2ogPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuaGFuZGxlKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2oudXBUZXh0dXJlKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiBjb2xvciArICdIYW5kbGVVcCc7XHJcbiAgICBjb25zdCBoYW5kbGVEb3duVGV4dHVyZSA9IChfbSA9IChfbCA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5oYW5kbGUpID09PSBudWxsIHx8IF9sID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbC51cFRleHR1cmUpICE9PSBudWxsICYmIF9tICE9PSB2b2lkIDAgPyBfbSA6IGNvbG9yICsgJ0hhbmRsZURvd24nO1xyXG4gICAgY29uc3QgdHh0WCA9IChfcCA9IChfbyA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS50eHQpID09PSBudWxsIHx8IF9vID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfby54KSAhPT0gbnVsbCAmJiBfcCAhPT0gdm9pZCAwID8gX3AgOiBWaWV3LmNlbnRlclggLyAyICsgR2FtZUdhZ2UudHh0TWFyZ2luO1xyXG4gICAgY29uc3QgdHh0WSA9IChfciA9IChfcSA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS50eHQpID09PSBudWxsIHx8IF9xID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcS55KSAhPT0gbnVsbCAmJiBfciAhPT0gdm9pZCAwID8gX3IgOiAwO1xyXG4gICAgY29uc3QgZ2FnZUJnID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsIGJnVGV4dHVyZSk7XHJcbiAgICBnYWdlQmcuc2V0RGlzcGxheVNpemUodywgaCk7XHJcbiAgICBjb25zdCBnYWdlQmFyID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsIGJ0blRleHR1cmUpO1xyXG4gICAgZ2FnZUJhci5zZXREaXNwbGF5U2l6ZShWaWV3LmNlbnRlclggLyAyLCBHYW1lR2FnZS5oZWlnaHQpO1xyXG4gICAgZ2FnZUJhci5zZXRPcmlnaW4oMCwgMC41KTtcclxuICAgIGdhZ2VCYXIuc2V0UG9zaXRpb24oLVZpZXcuY2VudGVyWCAvIDIsIDApO1xyXG4gICAgY29uc3QgZ2FnZUJhckhhbmRsZSA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCBoYW5kbGVVcFRleHR1cmUpO1xyXG4gICAgY29uc3QgZ2FnZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIC1HYW1lR2FnZS5oZWlnaHQsIGxheWVyLmdhZ2VOdW0udG9TdHJpbmcoKSk7XHJcbiAgICBnYWdlVHh0LnNldFBvc2l0aW9uKHR4dFgsIHR4dFkpO1xyXG4gICAgU2V0Rm9udFN0eWxlKGdhZ2VUeHQpO1xyXG4gICAgbGF5ZXIuZ2FnZVBvc1ggPSAwOyAvLyBkZWZhdWx0IG1pZGRsZSB2YWx1ZVxyXG4gICAgbGF5ZXIuZ2FnZVBvc1hNaW4gPSAtZ2FnZUJnLndpZHRoIC8gMiArIGdhZ2VCYXJIYW5kbGUud2lkdGggLyAyO1xyXG4gICAgbGF5ZXIuZ2FnZVBvc1hNYXggPSBnYWdlQmcud2lkdGggLyAyO1xyXG4gICAgbGF5ZXIuZ2FnZVBvc1hMZW5ndGggPSBnYWdlQmcud2lkdGggLSBnYWdlQmFySGFuZGxlLndpZHRoIC8gMjtcclxuICAgIGxheWVyLnNldEdhZ2VIYW5kbGVGcmFtZSA9IChpc0Rvd24pID0+IHtcclxuICAgICAgICBnYWdlQmFySGFuZGxlLnNldFRleHR1cmUoaXNEb3duID8gaGFuZGxlRG93blRleHR1cmUgOiBoYW5kbGVVcFRleHR1cmUpO1xyXG4gICAgfTtcclxuICAgIGxheWVyLnNldEdhZ2VCYXJTaXplID0gKGdhZ2VQb3MpID0+IHtcclxuICAgICAgICBsZXQgZ2FnZVBvc1ggPSBnYWdlUG9zIC0gbGF5ZXIueDtcclxuICAgICAgICBpZiAoZ2FnZVBvc1ggPD0gbGF5ZXIuZ2FnZVBvc1hNaW4pXHJcbiAgICAgICAgICAgIGdhZ2VQb3NYID0gbGF5ZXIuZ2FnZVBvc1hNaW47XHJcbiAgICAgICAgZWxzZSBpZiAoZ2FnZVBvc1ggPj0gbGF5ZXIuZ2FnZVBvc1hNYXgpXHJcbiAgICAgICAgICAgIGdhZ2VQb3NYID0gbGF5ZXIuZ2FnZVBvc1hNYXg7XHJcbiAgICAgICAgbGF5ZXIuZ2FnZVBvc1ggPSBnYWdlUG9zWDtcclxuICAgICAgICBsYXllci5nYWdlTnVtID0gTWF0aC5mbG9vcigobGF5ZXIuZ2FnZU51bU1heCAtIGxheWVyLmdhZ2VOdW1NaW4pICogTWF0aC5hYnMoZ2FnZVBvc1ggLSBsYXllci5nYWdlUG9zWE1pbikgLyBsYXllci5nYWdlUG9zWExlbmd0aCk7XHJcbiAgICAgICAgbGF5ZXIudXBkYXRlR2FnZSgpO1xyXG4gICAgfTtcclxuICAgIGxheWVyLnNldEdhZ2VOdW0gPSAoZ2FnZU51bSkgPT4ge1xyXG4gICAgICAgIGxldCBnYWdlTnVtYmVyID0gZ2FnZU51bTtcclxuICAgICAgICBpZiAoZ2FnZU51bWJlciA8IGxheWVyLmdhZ2VOdW1NaW4pXHJcbiAgICAgICAgICAgIGdhZ2VOdW1iZXIgPSBsYXllci5nYWdlTnVtTWluO1xyXG4gICAgICAgIGVsc2UgaWYgKGdhZ2VOdW1iZXIgPiBsYXllci5nYWdlTnVtTWF4KVxyXG4gICAgICAgICAgICBnYWdlTnVtYmVyID0gbGF5ZXIuZ2FnZU51bU1heDtcclxuICAgICAgICBsYXllci5nYWdlTnVtID0gZ2FnZU51bWJlcjtcclxuICAgICAgICBsYXllci5nYWdlUG9zWCA9IGxheWVyLmdhZ2VQb3NYTWluICsgKGxheWVyLmdhZ2VOdW0gLyAobGF5ZXIuZ2FnZU51bU1heCAtIGxheWVyLmdhZ2VOdW1NaW4pICogbGF5ZXIuZ2FnZVBvc1hMZW5ndGgpO1xyXG4gICAgICAgIGxheWVyLnVwZGF0ZUdhZ2UoKTtcclxuICAgIH07XHJcbiAgICBsYXllci51cGRhdGVHYWdlID0gKCkgPT4ge1xyXG4gICAgICAgIGdhZ2VCYXIuc2V0RGlzcGxheVNpemUobGF5ZXIuZ2FnZVBvc1ggKyBnYWdlQmFyLndpZHRoIC8gMiwgR2FtZUdhZ2UuaGVpZ2h0KTtcclxuICAgICAgICBnYWdlQmFySGFuZGxlLnggPSBsYXllci5nYWdlUG9zWCArIGdhZ2VCYXIud2lkdGggLSBnYWdlQmFySGFuZGxlLndpZHRoIC8gMjtcclxuICAgICAgICBnYWdlVHh0LnNldFRleHQobGF5ZXIuZ2FnZU51bS50b0ZpeGVkKDApKTtcclxuICAgIH07XHJcbiAgICBsYXllci5zZXRBYmxlID0gKGlzQWJsZSkgPT4ge1xyXG4gICAgICAgIGxheWVyLmlzQWJsZSA9IGlzQWJsZTtcclxuICAgICAgICBsYXllci5pc0FibGUgPyBsYXllci5zZXRBbHBoYSgxKSA6IGxheWVyLnNldEFscGhhKDAuNSk7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyLmlzQWJsZTtcclxuICAgIH07XHJcbiAgICBjb25zdCBkcmFnU3RhcnQgPSAoKSA9PiB7XHJcbiAgICAgICAgbGF5ZXIuaXNBYmxlICYmIGxheWVyLnNldEdhZ2VIYW5kbGVGcmFtZSh0cnVlKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBkcmFnZ2luZyA9IChkcmFnWCkgPT4ge1xyXG4gICAgICAgIGxheWVyLmlzQWJsZSAmJiBsYXllci5zZXRHYWdlQmFyU2l6ZShkcmFnWCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZHJhZ0VuZCA9ICgpID0+IHtcclxuICAgICAgICBpZiAobGF5ZXIuaXNBYmxlKSB7XHJcbiAgICAgICAgICAgIGxheWVyLnNldEdhZ2VIYW5kbGVGcmFtZShmYWxzZSk7XHJcbiAgICAgICAgICAgIGVuZE1vdmVDYWxsYmFjayAmJiBlbmRNb3ZlQ2FsbGJhY2sobGF5ZXIuZ2FnZU51bU1pbiwgbGF5ZXIuZ2FnZU51bU1heCwgbGF5ZXIuZ2FnZU51bSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFtnYWdlQmcsIGdhZ2VCYXJdLm1hcCgoYmFyKSA9PiB7XHJcbiAgICAgICAgYmFyLnNldEludGVyYWN0aXZlKHsgZHJhZ2dhYmxlOiB0cnVlIH0pO1xyXG4gICAgICAgIGJhci5vbignZHJhZ3N0YXJ0JywgKHB0cikgPT4ge1xyXG4gICAgICAgICAgICBkcmFnU3RhcnQoKTtcclxuICAgICAgICAgICAgZHJhZ2dpbmcocHRyLngpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJhci5vbignZHJhZycsIChwdHIsIGRyYWdYKSA9PiB7IGRyYWdnaW5nKHB0ci54KTsgfSk7XHJcbiAgICAgICAgYmFyLm9uKCdkcmFnZW5kJywgKHB0cikgPT4geyBkcmFnRW5kKCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgICBnYWdlQmFySGFuZGxlLnNldEludGVyYWN0aXZlKHsgZHJhZ2dhYmxlOiB0cnVlIH0pO1xyXG4gICAgZ2FnZUJhckhhbmRsZS5vbignZHJhZ3N0YXJ0JywgKCkgPT4geyBkcmFnU3RhcnQoKTsgfSk7XHJcbiAgICBnYWdlQmFySGFuZGxlLm9uKCdkcmFnJywgKHB0ciwgZHJhZ1gpID0+IHsgZHJhZ2dpbmcoZHJhZ1gpOyB9KTtcclxuICAgIGdhZ2VCYXJIYW5kbGUub24oJ2RyYWdlbmQnLCAoKSA9PiB7IGRyYWdFbmQoKTsgfSk7XHJcbiAgICBsYXllci5zZXRBYmxlKGxheWVyLmlzQWJsZSk7XHJcbiAgICBbZ2FnZUJnLCBnYWdlQmFyLCBnYWdlQmFySGFuZGxlLCBnYWdlVHh0XS5tYXAoKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgY2hpbGQuc2V0UG9zaXRpb24oY2hpbGQueCArIHgsIGNoaWxkLnkgKyB5KTtcclxuICAgICAgICBsYXllci5hZGQoY2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgICBHYW1lR2FnZS5nYWdlcy5wdXNoKGxheWVyKTtcclxuICAgIEluaXRHYWdlKGxheWVyLm5hbWUpO1xyXG4gICAgcmV0dXJuIGxheWVyO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lR2FnZTtcclxuZXhwb3J0IHsgR2V0R2FnZUFzc2V0cywgSW5pdEdhZ2UsIENyZWF0ZUdhZ2VCYXIsIH07XHJcbiIsImNvbnN0IEdhbWVHZXN0dXJlID0ge1xyXG4gICAgdHlwZTogJycsXHJcbiAgICB0eXBlSGlzdG9yeTogW10sXHJcbiAgICBpbml0UG9zOiB7IHg6IDAsIHk6IDAgfSxcclxuICAgIGlzSG9sZGluZ0Rvd246IGZhbHNlLFxyXG4gICAgaG9sZER1cmF0aW9uOiAwLFxyXG4gICAgaG9sZE1heER1cmF0aW9uOiAxMDAwLFxyXG4gICAgY29tZnlHYXBUb3VjaFZhbHVlOiAxNSxcclxuICAgIHN0YXJ0SG9sZDogKCkgPT4geyBHYW1lR2VzdHVyZS5pc0hvbGRpbmdEb3duID0gdHJ1ZTsgcmV0dXJuIEdhbWVHZXN0dXJlOyB9LFxyXG4gICAgcmVzZXRIb2xkOiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUdlc3R1cmUuaXNIb2xkaW5nRG93biA9IGZhbHNlO1xyXG4gICAgICAgIEdhbWVHZXN0dXJlLmluaXRQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICBHYW1lR2VzdHVyZS5ob2xkRHVyYXRpb24gPSAwO1xyXG4gICAgICAgIEdhbWVHZXN0dXJlLnNldFR5cGUoJycpO1xyXG4gICAgICAgIHJldHVybiBHYW1lR2VzdHVyZTtcclxuICAgIH0sXHJcbiAgICBzZXRIb2xkRHVyYXRpb246IGZ1bmN0aW9uIChkdXJhdGlvbikgeyBHYW1lR2VzdHVyZS5ob2xkRHVyYXRpb24gPSBkdXJhdGlvbjsgcmV0dXJuIEdhbWVHZXN0dXJlOyB9LFxyXG4gICAgc2V0SW5pdFBvczogZnVuY3Rpb24gKHgsIHkpIHsgR2FtZUdlc3R1cmUuaW5pdFBvcyA9IHsgeDogeCwgeTogeSB9OyByZXR1cm4gR2FtZUdlc3R1cmU7IH0sXHJcbiAgICBjaGNrSXNIb2xkOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKEdhbWVHZXN0dXJlLmhvbGREdXJhdGlvbiA+PSBHYW1lR2VzdHVyZS5ob2xkTWF4RHVyYXRpb24pXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIGdldFR5cGU6ICgpID0+IHsgcmV0dXJuIEdhbWVHZXN0dXJlLnR5cGU7IH0sXHJcbiAgICBzZXRUeXBlOiBmdW5jdGlvbiAodHlwZSkgeyBHYW1lR2VzdHVyZS50eXBlID0gdHlwZTsgcmV0dXJuIEdhbWVHZXN0dXJlOyB9LFxyXG4gICAgaW5pdFR5cGVIaXN0b3J5OiAoKSA9PiB7IEdhbWVHZXN0dXJlLnR5cGVIaXN0b3J5ID0gW107IH0sXHJcbiAgICBnZXRUeXBlSGlzdG9yeTogKCkgPT4geyByZXR1cm4gR2FtZUdlc3R1cmUudHlwZUhpc3Rvcnk7IH0sXHJcbiAgICBnZXRMYXN0ZXN0SW5wdXRUeXBlOiAoKSA9PiB7IHJldHVybiBHYW1lR2VzdHVyZS50eXBlSGlzdG9yeVtHYW1lR2VzdHVyZS50eXBlSGlzdG9yeS5sZW5ndGggLSAxXTsgfSxcclxuICAgIHB1c2gyVHlwZUhpc3Rvcnk6IGZ1bmN0aW9uIChnZXN0dXJlRWxlKSB7XHJcbiAgICAgICAgR2FtZUdlc3R1cmUudHlwZUhpc3RvcnkucHVzaChnZXN0dXJlRWxlKTtcclxuICAgICAgICByZXR1cm4gR2FtZUdlc3R1cmUudHlwZUhpc3Rvcnk7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBJbml0R2FtZUdlc3R1cmUgPSAoKSA9PiB7XHJcbiAgICBHYW1lR2VzdHVyZS5yZXNldEhvbGQoKTtcclxuICAgIEdhbWVHZXN0dXJlLmluaXRUeXBlSGlzdG9yeSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lR2VzdHVyZSA9IChzY2VuZSkgPT4ge1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVyZG93bicsIFB0ckRvd25HYW1lR2VzdHVyZSk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCBQdHJEb3duR2FtZUdlc3R1cmUpO1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVybW92ZScsIFB0ck1vdmVHYW1lR2VzdHVyZSk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCBQdHJNb3ZlR2FtZUdlc3R1cmUpO1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVydXAnLCBQdHJVcEdhbWVHZXN0dXJlKTtcclxuICAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVydXAnLCBQdHJVcEdhbWVHZXN0dXJlKTtcclxuICAgIEluaXRHYW1lR2VzdHVyZSgpO1xyXG4gICAgcmV0dXJuIEdhbWVHZXN0dXJlO1xyXG59O1xyXG5jb25zdCBVcGRhdGVHYW1lR2VzdHVyZSA9IChkZWx0YSkgPT4ge1xyXG4gICAgaWYgKEdhbWVHZXN0dXJlLmlzSG9sZGluZ0Rvd24pXHJcbiAgICAgICAgR2FtZUdlc3R1cmUuc2V0SG9sZER1cmF0aW9uKEdhbWVHZXN0dXJlLmhvbGREdXJhdGlvbiArIGRlbHRhKTtcclxufTtcclxuY29uc3QgUHRyRG93bkdhbWVHZXN0dXJlID0gKHB0cikgPT4ge1xyXG4gICAgR2FtZUdlc3R1cmUuc2V0SW5pdFBvcyhwdHIueCwgcHRyLnkpO1xyXG4gICAgR2FtZUdlc3R1cmUuc3RhcnRIb2xkKCk7XHJcbn07XHJcbmNvbnN0IFB0ck1vdmVHYW1lR2VzdHVyZSA9IChwdHIpID0+IHtcclxuICAgIGlmICghcHRyLmlzRG93bilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAoIUNoY2tTd2lwZURpcmVjdGlvbihHYW1lR2VzdHVyZS5pbml0UG9zLCBwdHIpKSB7XHJcbiAgICAgICAgQ2hja0hvbGRPclRvdWNoKCk7XHJcbiAgICB9XHJcbiAgICAvLyBjb25zdCBnZXN0dXJlRWxlID0ge1xyXG4gICAgLy8gICAgIHR5cGU6IEdhbWVHZXN0dXJlLmdldFR5cGUoKSxcclxuICAgIC8vICAgICBpbml0UG9zOiBHYW1lR2VzdHVyZS5pbml0UG9zLFxyXG4gICAgLy8gICAgIGxhc3RQb3M6IHsgeDogcHRyLngsIHk6IHB0ci55IH1cclxuICAgIC8vIH07XHJcbn07XHJcbmNvbnN0IFB0clVwR2FtZUdlc3R1cmUgPSAocHRyKSA9PiB7XHJcbiAgICByZXR1cm4gU2V0R2FtZUdlc3R1cmVUeXBlKEdhbWVHZXN0dXJlLmluaXRQb3MsIHB0cik7XHJcbn07XHJcbmNvbnN0IFB0ck91dEdhbWVHZXN0dXJlID0gKCkgPT4ge1xyXG4gICAgR2FtZUdlc3R1cmUucmVzZXRIb2xkKCk7XHJcbn07XHJcbmNvbnN0IENoY2tTd2lwZURpcmVjdGlvbiA9IChpbml0UG9zLCBwdHIpID0+IHtcclxuICAgIGNvbnN0IGNoY2tQb3NYID0gTWF0aC5hYnMoaW5pdFBvcy54IC0gcHRyLngpID4gR2FtZUdlc3R1cmUuY29tZnlHYXBUb3VjaFZhbHVlO1xyXG4gICAgY29uc3QgY2hja1Bvc1kgPSBNYXRoLmFicyhpbml0UG9zLnkgLSBwdHIueSkgPiBHYW1lR2VzdHVyZS5jb21meUdhcFRvdWNoVmFsdWU7XHJcbiAgICBpZiAoY2hja1Bvc1ggfHwgY2hja1Bvc1kpIHtcclxuICAgICAgICBjb25zdCB4ID0gcHRyLnggLSBpbml0UG9zLng7XHJcbiAgICAgICAgY29uc3QgeSA9IHB0ci55IC0gaW5pdFBvcy55O1xyXG4gICAgICAgIGlmIChNYXRoLmFicyh4KSA+IE1hdGguYWJzKHkpKSB7XHJcbiAgICAgICAgICAgIGlmICh4ID4gMClcclxuICAgICAgICAgICAgICAgIEdhbWVHZXN0dXJlLnNldFR5cGUoJ3N3aXBlUmlnaHQnKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgR2FtZUdlc3R1cmUuc2V0VHlwZSgnc3dpcGVMZWZ0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoeSA8IDApXHJcbiAgICAgICAgICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCdzd2lwZVVwJyk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIEdhbWVHZXN0dXJlLnNldFR5cGUoJ3N3aXBlRG93bicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbn07XHJcbmNvbnN0IENoY2tIb2xkT3JUb3VjaCA9ICgpID0+IHtcclxuICAgIGlmIChHYW1lR2VzdHVyZS5jaGNrSXNIb2xkKCkpIHtcclxuICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCdob2xkJyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBHYW1lR2VzdHVyZS5zZXRUeXBlKCd0b3VjaCcpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuLy8gc2V0IGNvbWZ5IHRvdWNoIHRvIG5vdCBqdWRnZSBhcyBzd2lwZSB3aGVuIHVzZSB3aXRoIGFjdHVhbCBmaW5nZXJcclxuY29uc3QgU2V0R2FtZUdlc3R1cmVUeXBlID0gKGluaXRQb3MsIHB0cikgPT4ge1xyXG4gICAgLy8gc3dpcGUgbW90aW9uXHJcbiAgICBpZiAoIUNoY2tTd2lwZURpcmVjdGlvbihpbml0UG9zLCBwdHIpKSB7XHJcbiAgICAgICAgLy8gaG9sZCBvciB0b3VjaFxyXG4gICAgICAgIENoY2tIb2xkT3JUb3VjaCgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ2VzdHVyZUVsZSA9IHtcclxuICAgICAgICB0eXBlOiBHYW1lR2VzdHVyZS5nZXRUeXBlKCksXHJcbiAgICAgICAgaW5pdFBvczogaW5pdFBvcyxcclxuICAgICAgICBsYXN0UG9zOiB7IHg6IHB0ci54LCB5OiBwdHIueSB9XHJcbiAgICB9O1xyXG4gICAgR2FtZUdlc3R1cmUucHVzaDJUeXBlSGlzdG9yeShnZXN0dXJlRWxlKTtcclxuICAgIEdhbWVHZXN0dXJlLnJlc2V0SG9sZCgpO1xyXG4gICAgcmV0dXJuIEdhbWVHZXN0dXJlLmdldExhc3Rlc3RJbnB1dFR5cGUoKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZUdlc3R1cmU7XHJcbmV4cG9ydCB7IEluaXRHYW1lR2VzdHVyZSwgQ3JlYXRlR2FtZUdlc3R1cmUsIFVwZGF0ZUdhbWVHZXN0dXJlLCBQdHJEb3duR2FtZUdlc3R1cmUsIFB0clVwR2FtZUdlc3R1cmUsIFB0ck91dEdhbWVHZXN0dXJlLCBTZXRHYW1lR2VzdHVyZVR5cGUsIH07XHJcbiIsImNvbnN0IEdhbWVJbnB1dCA9IHtcclxuICAgIGRvd246IFtdLFxyXG4gICAgbW92ZTogW10sXHJcbiAgICB1cDogW10sXHJcbiAgICBhZGQ6IChjbWQsIGV2dCkgPT4ge1xyXG4gICAgICAgIEdhbWVJbnB1dFtjbWRdLnB1c2goZXZ0KTtcclxuICAgICAgICByZXR1cm4gR2FtZUlucHV0O1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdEdhbWVJbnB1dCA9ICgpID0+IHtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZUlucHV0ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dERvd25FdnQgPSAocHRyLCBjdXJyZW50bHlPdmVyKSA9PiB7XHJcbiAgICAgICAgR2FtZUlucHV0LmRvd24gJiYgR2FtZUlucHV0LmRvd24ubWFwKGRvd25FdnQgPT4gZG93bkV2dChwdHIsIGN1cnJlbnRseU92ZXIpKTtcclxuICAgIH07XHJcbiAgICBzY2VuZS5pbnB1dC5vZmYoJ3BvaW50ZXJkb3duJywgaW5wdXREb3duRXZ0KTtcclxuICAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVyZG93bicsIGlucHV0RG93bkV2dCk7XHJcbiAgICBjb25zdCBpbnB1dE1vdmVFdnQgPSAocHRyLCBjdXJyZW50bHlPdmVyKSA9PiB7XHJcbiAgICAgICAgR2FtZUlucHV0Lm1vdmUgJiYgR2FtZUlucHV0Lm1vdmUubWFwKG1vdmVFdnQgPT4gbW92ZUV2dChwdHIsIGN1cnJlbnRseU92ZXIpKTtcclxuICAgIH07XHJcbiAgICBzY2VuZS5pbnB1dC5vZmYoJ3BvaW50ZXJtb3ZlJywgaW5wdXRNb3ZlRXZ0KTtcclxuICAgIHNjZW5lLmlucHV0Lm9uKCdwb2ludGVybW92ZScsIGlucHV0TW92ZUV2dCk7XHJcbiAgICBjb25zdCBpbnB1dFVwRXZ0ID0gKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIEdhbWVJbnB1dC51cCAmJiBHYW1lSW5wdXQudXAubWFwKHVwRXZ0ID0+IHVwRXZ0KHB0ciwgY3VycmVudGx5T3ZlcikpO1xyXG4gICAgfTtcclxuICAgIHNjZW5lLmlucHV0Lm9mZigncG9pbnRlcnVwJywgaW5wdXRVcEV2dCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcnVwJywgaW5wdXRVcEV2dCk7XHJcbiAgICBJbml0R2FtZUlucHV0KCk7XHJcbiAgICByZXR1cm4gR2FtZUlucHV0O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lSW5wdXQ7XHJcbmV4cG9ydCB7IEluaXRHYW1lSW5wdXQsIENyZWF0ZUdhbWVJbnB1dCB9O1xyXG4iLCJjb25zdCBHYW1lRGVwdGggPSB7XHJcbiAgICBsaXN0OiB7XHJcbiAgICAgICAgZGVmYXVsdDogMCxcclxuICAgICAgICBoaWdoZXN0OiA5OTk5LFxyXG4gICAgfSxcclxuICAgIGFkZDogKGtleSwgZGVwdGgpID0+IHtcclxuICAgICAgICBpZiAoZGVwdGggPCBHYW1lRGVwdGgubGlzdC5kZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgYWRkaW5nIGRlcHRoICR7a2V5fSBrZXkgaGFzIGEgbG93ZXIgZGVwdGggdmFsdWUoJHtkZXB0aH0pIHRoYW4gZGVmYXVsdGApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZXB0aCA+IEdhbWVEZXB0aC5saXN0LmhpZ2hlc3QpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBhZGRpbmcgZGVwdGggJHtrZXl9IGtleSBoYXMgYSBsYXJnZXIgZGVwdGggdmFsdWUoJHtkZXB0aH0pIHRoYW4gZGVmYXVsdGApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdhbWVEZXB0aFtrZXldID0gZGVwdGg7XHJcbiAgICAgICAgcmV0dXJuIEdhbWVEZXB0aDtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IFNldERlcHRoID0gKHRhcmdldE9iaiwgdHlwZSwgYWRkRGVwdGhWYWx1ZSkgPT4ge1xyXG4gICAgaWYgKCFHYW1lRGVwdGgubGlzdFt0eXBlXSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignU2V0RGVwdGg6IHR5cGUgaXMgbm90IGZvdW5kIGluIHRoZSBkZXB0aCBsaXN0OicsIHRhcmdldE9iaiwgdHlwZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RhcmdldE9iaiwgdHlwZTogJywgdGFyZ2V0T2JqLCB0eXBlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBleHRyYURldHBoID0gYWRkRGVwdGhWYWx1ZSAhPT0gbnVsbCAmJiBhZGREZXB0aFZhbHVlICE9PSB2b2lkIDAgPyBhZGREZXB0aFZhbHVlIDogMDtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdleHRyYURldHBoOiAnLCBleHRyYURldHBoLCBHYW1lRGVwdGgubGlzdCwgR2FtZURlcHRoLmxpc3RbdHlwZV0sIEdhbWVEZXB0aC5saXN0W3R5cGVdIGFzIG51bWJlciArIGV4dHJhRGV0cGgpO1xyXG4gICAgaWYgKHRhcmdldE9iai5zZXREZXB0aClcclxuICAgICAgICB0YXJnZXRPYmouc2V0RGVwdGgoR2FtZURlcHRoLmxpc3RbdHlwZV0gKyBleHRyYURldHBoKTtcclxuICAgIGVsc2VcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1NldERlcHRoOiB0YXJnZXRPYmogaXMgbm90IFBoYXNlci5HYW1lT2JqZWN0cycpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lRGVwdGg7XHJcbmV4cG9ydCB7IFNldERlcHRoLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuaW1wb3J0IFVJUHJvcHMsIHsgQ3JlYXRlVUlCdG5BbmltLCBTZXRDb21tb25VSVByb3BzIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCBHYW1lRm9udCwgeyBTZXRGb250U3R5bGUgfSBmcm9tIFwiLi4vZm9udFwiO1xyXG5jb25zdCBDcmVhdGVCYXNpY1BvcFVwRXhpdFR5cGUgPSAoc2NlbmUsIHBvcExheWVyQmcsIHBvcFVwTGF5ZXIsIGJ0biwgcG9wLCBvcHRpb24pID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgIGNvbnN0IGV4aXRJc0V4aXN0ID0gKF9iID0gKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV4aXRCdG4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0V4aXN0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZTtcclxuICAgIGNvbnN0IGV4aXRUeXBlID0gKF9kID0gKF9jID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV4aXRCdG4pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50eXBlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnYW55d2hlcmUnO1xyXG4gICAgY29uc3QgcG9wTGF5ZXJMaXN0ID0gW107XHJcbiAgICAvLyBleGl0IGJ0biAmIGJnIG9wdGlvbiBzZXR0aW5nXHJcbiAgICBpZiAoZXhpdElzRXhpc3QpIHtcclxuICAgICAgICBzd2l0Y2ggKGV4aXRUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FueXdoZXJlJzpcclxuICAgICAgICAgICAgICAgIHBvcExheWVyTGlzdC5wdXNoKC4uLkNyZWF0ZUV4aXRBbnl3aGVyZShzY2VuZSwgcG9wTGF5ZXJCZywgcG9wVXBMYXllciwgcG9wKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYnRuJzpcclxuICAgICAgICAgICAgICAgIHBvcExheWVyTGlzdC5wdXNoKC4uLkNyZWF0ZUV4aXRCdG4oc2NlbmUsIHBvcFVwTGF5ZXIsIHBvcCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3llc09yTm8nOlxyXG4gICAgICAgICAgICAgICAgcG9wTGF5ZXJMaXN0LnB1c2goLi4uQ3JlYXRlRXhpdFllc09yTm8oc2NlbmUsIHBvcFVwTGF5ZXIsIHBvcCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIHBvcExheWVyTGlzdC5wdXNoKC4uLkNyZWF0ZUV4aXRBbnl3aGVyZShzY2VuZSwgcG9wTGF5ZXJCZywgcG9wVXBMYXllciwgcG9wKSk7XHJcbiAgICByZXR1cm4gcG9wTGF5ZXJMaXN0O1xyXG59O1xyXG5jb25zdCBDcmVhdGVFeGl0QnRuID0gKHNjZW5lLCBwb3BVcExheWVyLCBwb3ApID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgIGNvbnN0IGV4aXRCdG5YID0gKF9iID0gKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV4aXRCdG4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS54KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBWaWV3LmNlbnRlclg7XHJcbiAgICBjb25zdCBleGl0QnRuWSA9IChfZCA9IChfYyA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5leGl0QnRuKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MueSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogVUlQcm9wcy5leGl0UG9zWTtcclxuICAgIGNvbnN0IGV4aXRCZ0J0bkhlaWdodCA9IChWaWV3LmggLSBleGl0QnRuWSkgKiAyO1xyXG4gICAgY29uc3QgcG9wTGF5ZXJMaXN0ID0gW107XHJcbiAgICBjb25zdCBleGl0QnRuQmcgPSBzY2VuZS5hZGQuaW1hZ2UoZXhpdEJ0blgsIGV4aXRCdG5ZLCAnd2hpdGVTY3JlZW4nKTtcclxuICAgIGNvbnN0IGV4aXRCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoZXhpdEJ0blgsIGV4aXRCdG5ZLCAnZXhpdEJ0bicpO1xyXG4gICAgY29uc3QgZXhpdFB0ckRvd24gPSAoYnRuKSA9PiB7XHJcbiAgICAgICAgYnRuLmRvd25FdnQoKTtcclxuICAgICAgICBleGl0QnRuQmcuc2V0QWxwaGEoMC4zKTtcclxuICAgICAgICBleGl0QnRuLnNldEFscGhhKDEpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGV4aXRQdHJVcCA9IChidG4pID0+IHtcclxuICAgICAgICBidG4udXBFdnQoKTtcclxuICAgICAgICBleGl0QnRuQmcuc2V0QWxwaGEoMC4xKTtcclxuICAgICAgICBleGl0QnRuLnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgICAgIHBvcFVwTGF5ZXIuaGlkZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGV4aXRQdHJPdXQgPSAoYnRuKSA9PiB7XHJcbiAgICAgICAgYnRuLnVwRXZ0KCk7XHJcbiAgICAgICAgZXhpdEJ0bkJnLnNldEFscGhhKDAuMSk7XHJcbiAgICAgICAgZXhpdEJ0bi5zZXRBbHBoYShVSVByb3BzLmFscGhhKTtcclxuICAgIH07XHJcbiAgICBTZXRDb21tb25VSVByb3BzKGV4aXRCdG5CZyk7XHJcbiAgICBDcmVhdGVVSUJ0bkFuaW0oc2NlbmUsIGV4aXRCdG5CZyk7XHJcbiAgICBleGl0QnRuQmcuc2V0QWxwaGEoMC4xKTtcclxuICAgIGV4aXRCdG5CZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgZXhpdEJ0bkJnLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgZXhpdFB0ckRvd24oZXhpdEJ0bik7IH0pO1xyXG4gICAgZXhpdEJ0bkJnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IGV4aXRQdHJVcChleGl0QnRuKTsgfSk7XHJcbiAgICBleGl0QnRuQmcub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7IGV4aXRQdHJPdXQoZXhpdEJ0bik7IH0pO1xyXG4gICAgZXhpdEJ0bkJnLnNldERpc3BsYXlTaXplKFZpZXcudywgZXhpdEJnQnRuSGVpZ2h0KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKGV4aXRCdG5CZyk7XHJcbiAgICBTZXRDb21tb25VSVByb3BzKGV4aXRCdG4pO1xyXG4gICAgQ3JlYXRlVUlCdG5BbmltKHNjZW5lLCBleGl0QnRuKTtcclxuICAgIGV4aXRCdG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGV4aXRCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4geyBleGl0UHRyRG93bihleGl0QnRuQmcpOyB9KTtcclxuICAgIGV4aXRCdG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgZXhpdFB0clVwKGV4aXRCdG5CZyk7IH0pO1xyXG4gICAgZXhpdEJ0bi5vbigncG9pbnRlcm91dCcsICgpID0+IHsgZXhpdFB0ck91dChleGl0QnRuQmcpOyB9KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKGV4aXRCdG4pO1xyXG4gICAgcmV0dXJuIHBvcExheWVyTGlzdDtcclxufTtcclxuY29uc3QgQ3JlYXRlRXhpdEFueXdoZXJlID0gKHNjZW5lLCBwb3BMYXllckJnLCBwb3BVcExheWVyLCBwb3ApID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgIGNvbnN0IHBvcExheWVyTGlzdCA9IFtdO1xyXG4gICAgY29uc3QgZ3VpZGVUeHRYID0gKF9iID0gKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmd1aWRlVHh0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EueCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogVmlldy5jZW50ZXJYO1xyXG4gICAgY29uc3QgZ3VpZGVUeHRZID0gKF9kID0gKF9jID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmd1aWRlVHh0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MueSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogR2FtZUZvbnQuZ3VpZGVUeHRZO1xyXG4gICAgcG9wTGF5ZXJCZy5vbigncG9pbnRlcnVwJywgKHB0cikgPT4ge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcG9wVXBMYXllci5oaWRlKCk7XHJcbiAgICAgICAgKChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51cCkgJiYgKChfYiA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51cChwdHIpKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgcG9wR3VpZGVUeHQgPSBzY2VuZS5hZGQudGV4dChndWlkZVR4dFgsIGd1aWRlVHh0WSwgJ3ByZXNzIGFueXdoZXJlIHRvIGV4aXQnKTtcclxuICAgIHBvcEd1aWRlVHh0LnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgU2V0Rm9udFN0eWxlKHBvcEd1aWRlVHh0KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKHBvcEd1aWRlVHh0KTtcclxuICAgIHJldHVybiBwb3BMYXllckxpc3Q7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUV4aXRZZXNPck5vID0gKHNjZW5lLCBwb3BVcExheWVyLCBwb3ApID0+IHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBjb25zdCBleGl0QnRuWSA9IChfYiA9IChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5leGl0QnRuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EueSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogVUlQcm9wcy5leGl0UG9zWTtcclxuICAgIGNvbnN0IGJnQWxwaGFEb3duID0gMC41O1xyXG4gICAgY29uc3QgYmdBbHBoYVVwID0gMC4xO1xyXG4gICAgY29uc3QgdHh0QWxwaGFEb3duID0gMTtcclxuICAgIGNvbnN0IHR4dEFscGhhVXAgPSAwLjg7XHJcbiAgICBjb25zdCBleGl0QmdCdG5IZWlnaHQgPSAoVmlldy5oIC0gZXhpdEJ0blkpICogMjtcclxuICAgIGNvbnN0IHBvcExheWVyTGlzdCA9IFtdO1xyXG4gICAgY29uc3QgbGVmdE5vQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy53IC8gNCwgZXhpdEJ0blksICd3aGl0ZVNjcmVlbicpO1xyXG4gICAgY29uc3QgbGVmdE5vVHh0ID0gc2NlbmUuYWRkLnRleHQobGVmdE5vQmcueCwgbGVmdE5vQmcueSwgJ05vJyk7XHJcbiAgICBjb25zdCBsZWZ0UHRyRG93biA9IChpbWdPclR4dCkgPT4ge1xyXG4gICAgICAgIGltZ09yVHh0LmRvd25FdnQoKTtcclxuICAgICAgICBsZWZ0Tm9CZy5zZXRBbHBoYShiZ0FscGhhRG93bik7XHJcbiAgICAgICAgbGVmdE5vVHh0LnNldEFscGhhKHR4dEFscGhhRG93bik7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbGVmdFB0clVwID0gKGltZ09yVHh0KSA9PiB7XHJcbiAgICAgICAgaW1nT3JUeHQudXBFdnQoKTtcclxuICAgICAgICBsZWZ0UHRyT3V0KCk7XHJcbiAgICAgICAgcG9wVXBMYXllci5oaWRlKCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbGVmdFB0ck91dCA9ICgpID0+IHtcclxuICAgICAgICBsZWZ0Tm9CZy5zZXRBbHBoYShiZ0FscGhhVXApO1xyXG4gICAgICAgIGxlZnROb1R4dC5zZXRBbHBoYSh0eHRBbHBoYVVwKTtcclxuICAgIH07XHJcbiAgICBTZXRDb21tb25VSVByb3BzKGxlZnROb0JnKTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgbGVmdE5vQmcpO1xyXG4gICAgbGVmdE5vQmcuc2V0QWxwaGEoYmdBbHBoYVVwKTtcclxuICAgIGxlZnROb0JnLnNldERpc3BsYXlTaXplKFZpZXcuY2VudGVyWCwgZXhpdEJnQnRuSGVpZ2h0KTtcclxuICAgIGxlZnROb0JnLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgbGVmdFB0ckRvd24obGVmdE5vVHh0KTsgfSk7XHJcbiAgICBsZWZ0Tm9CZy5vbigncG9pbnRlcnVwJywgKCkgPT4geyBsZWZ0UHRyVXAobGVmdE5vVHh0KTsgfSk7XHJcbiAgICBsZWZ0Tm9CZy5vbigncG9pbnRlcm91dCcsICgpID0+IHsgbGVmdFB0ck91dCgpOyB9KTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgbGVmdE5vVHh0KTtcclxuICAgIFNldEZvbnRTdHlsZShsZWZ0Tm9UeHQpO1xyXG4gICAgbGVmdE5vVHh0LnNldEFscGhhKHR4dEFscGhhVXApO1xyXG4gICAgbGVmdE5vVHh0LnNldEZvbnRTaXplKFZpZXcudyAvIDE0KTtcclxuICAgIGxlZnROb1R4dC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7IGxlZnRQdHJEb3duKGxlZnROb0JnKTsgfSk7XHJcbiAgICBsZWZ0Tm9UeHQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgbGVmdFB0clVwKGxlZnROb0JnKTsgfSk7XHJcbiAgICBsZWZ0Tm9UeHQub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7IGxlZnRQdHJPdXQoKTsgfSk7XHJcbiAgICBwb3BMYXllckxpc3QucHVzaChsZWZ0Tm9CZywgbGVmdE5vVHh0KTtcclxuICAgIGNvbnN0IHJpZ2h0Tm9CZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LncgKiAzIC8gNCwgZXhpdEJ0blksICd3aGl0ZVNjcmVlbicpO1xyXG4gICAgY29uc3QgcmlnaHROb1R4dCA9IHNjZW5lLmFkZC50ZXh0KHJpZ2h0Tm9CZy54LCByaWdodE5vQmcueSwgJ1llcycpO1xyXG4gICAgY29uc3QgcmlnaHRQdHJEb3duID0gKGltZ09yVHh0KSA9PiB7XHJcbiAgICAgICAgaW1nT3JUeHQuZG93bkV2dCgpO1xyXG4gICAgICAgIHJpZ2h0Tm9CZy5zZXRBbHBoYShiZ0FscGhhRG93bik7XHJcbiAgICAgICAgcmlnaHROb1R4dC5zZXRBbHBoYSh0eHRBbHBoYURvd24pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJpZ2h0UHRyVXAgPSAoaW1nT3JUeHQsIHB0cikgPT4ge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpbWdPclR4dC51cEV2dCgpO1xyXG4gICAgICAgIHJpZ2h0UHRyT3V0KCk7XHJcbiAgICAgICAgKChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51cCkgJiYgcG9wLmV2dC51cChwdHIpO1xyXG4gICAgICAgIHBvcFVwTGF5ZXIuaGlkZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJpZ2h0UHRyT3V0ID0gKCkgPT4ge1xyXG4gICAgICAgIHJpZ2h0Tm9CZy5zZXRBbHBoYShiZ0FscGhhVXApO1xyXG4gICAgICAgIHJpZ2h0Tm9UeHQuc2V0QWxwaGEodHh0QWxwaGFVcCk7XHJcbiAgICB9O1xyXG4gICAgU2V0Q29tbW9uVUlQcm9wcyhyaWdodE5vQmcpO1xyXG4gICAgQ3JlYXRlVUlCdG5BbmltKHNjZW5lLCByaWdodE5vQmcpO1xyXG4gICAgcmlnaHROb0JnLnNldEFscGhhKGJnQWxwaGFVcCk7XHJcbiAgICByaWdodE5vQmcuc2V0RGlzcGxheVNpemUoVmlldy5jZW50ZXJYLCBleGl0QmdCdG5IZWlnaHQpO1xyXG4gICAgcmlnaHROb0JnLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmlnaHRQdHJEb3duKHJpZ2h0Tm9UeHQpOyB9KTtcclxuICAgIHJpZ2h0Tm9CZy5vbigncG9pbnRlcnVwJywgKHB0cikgPT4geyByaWdodFB0clVwKHJpZ2h0Tm9UeHQsIHB0cik7IH0pO1xyXG4gICAgcmlnaHROb0JnLm9uKCdwb2ludGVyb3V0JywgKCkgPT4geyByaWdodFB0ck91dCgpOyB9KTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgcmlnaHROb1R4dCk7XHJcbiAgICBTZXRGb250U3R5bGUocmlnaHROb1R4dCk7XHJcbiAgICByaWdodE5vVHh0LnNldEFscGhhKHR4dEFscGhhVXApO1xyXG4gICAgcmlnaHROb1R4dC5zZXRGb250U2l6ZShWaWV3LncgLyAxNCk7XHJcbiAgICByaWdodE5vVHh0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmlnaHRQdHJEb3duKHJpZ2h0Tm9CZyk7IH0pO1xyXG4gICAgcmlnaHROb1R4dC5vbigncG9pbnRlcnVwJywgKHB0cikgPT4geyByaWdodFB0clVwKHJpZ2h0Tm9CZywgcHRyKTsgfSk7XHJcbiAgICByaWdodE5vVHh0Lm9uKCdwb2ludGVyb3V0JywgKCkgPT4geyByaWdodFB0ck91dCgpOyB9KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKHJpZ2h0Tm9CZywgcmlnaHROb1R4dCk7XHJcbiAgICByZXR1cm4gcG9wTGF5ZXJMaXN0O1xyXG59O1xyXG5leHBvcnQgeyBDcmVhdGVCYXNpY1BvcFVwRXhpdFR5cGUsIH07XHJcbiIsImltcG9ydCB7IEdldEFzc2V0RmlsZXMgfSBmcm9tICdAc3JjL3NjZW5lcy9hc3NldFV0aWxzJztcclxuaW1wb3J0IHsgQ29tbW9uVUkgfSBmcm9tICdAc3JjL3NjZW5lcy9hc3NldFV0aWxzJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICdAc3JjL3NjZW5lcy9kZXB0aCc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgQ3JlYXRlQmFzaWNQb3BVcEV4aXRUeXBlIH0gZnJvbSAnLi9leGl0JztcclxuY29uc3QgR2FtZVBvcFVwID0ge1xyXG4gICAgY29tbW9uTGF5ZXI6IG51bGwsXHJcbiAgICBsaXN0OiBbXSxcclxuICAgIHBvcEFscGhhOiAwLjYsXHJcbiAgICBkZWZhdWx0T3B0OiB7XHJcbiAgICAgICAgY21kS2V5OiAnRXNjYXBlJyxcclxuICAgIH0sXHJcbiAgICBvcHRpb246IHt9LFxyXG59O1xyXG5jb25zdCBHZXRQb3BVcEFzc2V0cyA9IChleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBsZXQgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgIHsga2V5OiAnd2hpdGVTY3JlZW4nLCB1cmw6IENvbW1vblVJICsgJ3doaXRlU2NyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ2JsYWNrU2NyZWVuJywgdXJsOiBDb21tb25VSSArICdibGFja1NjcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdleGl0QnRuJywgdXJsOiBDb21tb25VSSArICdleGl0QnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ2Rvb3JFeGl0QnRuJywgdXJsOiBDb21tb25VSSArICdkb29yRXhpdEJ0bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIEdldEFzc2V0RmlsZXMoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKTtcclxufTtcclxuY29uc3QgSW5pdFBvcFVwID0gKHBvcFVwTGF5ZXIpID0+IHtcclxuICAgIHBvcFVwTGF5ZXIuaGlkZSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVCYXNpY1BvcFVwID0gKHNjZW5lLCBuYW1lLCBidG4sIHBvcCwgb3B0aW9uKSA9PiB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICAvLyBidG4gbGF5ZXIgc2V0dGluZ1xyXG4gICAgY29uc3QgaXNCZ0JsYWNrID0gKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmlzQmdCbGFjaykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdHJ1ZTtcclxuICAgIGNvbnN0IGJ0blggPSAoX2IgPSBidG4gPT09IG51bGwgfHwgYnRuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidG4ueCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogVmlldy5jZW50ZXJYO1xyXG4gICAgY29uc3QgYnRuWSA9IChfYyA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi55KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBWaWV3LmNlbnRlclk7XHJcbiAgICBjb25zdCBpc0J0bkV4aXN0ID0gKF9kID0gYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmlzRXhpc3QpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xyXG4gICAgR2FtZVBvcFVwLm9wdGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgR2FtZVBvcFVwLmRlZmF1bHRPcHQpLCBvcHRpb24pO1xyXG4gICAgLy8gY29uc3QgeyBjbWRLZXkgfSA9IEdhbWVQb3BVcC5vcHRpb247XHJcbiAgICBsZXQgYnRuTGF5ZXI7XHJcbiAgICBpZiAoaXNCdG5FeGlzdCkge1xyXG4gICAgICAgIGJ0bkxheWVyID0gc2NlbmUuYWRkLmxheWVyKCk7XHJcbiAgICAgICAgYnRuTGF5ZXIubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgKGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5kZXB0aCkgJiYgYnRuTGF5ZXIuc2V0RGVwdGgoYnRuLmRlcHRoKTtcclxuICAgICAgICBpZiAoYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmxpc3QpIHtcclxuICAgICAgICAgICAgYnRuLmxpc3QubWFwKChidG5DaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYnRuQ2hpbGQuc2V0UG9zaXRpb24oYnRuWCwgYnRuWSk7XHJcbiAgICAgICAgICAgICAgICBidG5MYXllci5hZGQoYnRuQ2hpbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRCdG4gPSBzY2VuZS5hZGQudGV4dChidG5YLCBidG5ZLCBuYW1lKTtcclxuICAgICAgICAgICAgZGVmYXVsdEJ0bi5zZXRPcmlnaW4oMC41KTtcclxuICAgICAgICAgICAgZGVmYXVsdEJ0bi5zZXRGb250U3R5bGUoJ2JvbGQnKTtcclxuICAgICAgICAgICAgZGVmYXVsdEJ0bi5zZXRGb250RmFtaWx5KCdBcmlhbCBCbGFjaycpO1xyXG4gICAgICAgICAgICBidG5MYXllci5hZGQoZGVmYXVsdEJ0bik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ0bkxheWVyLmdldENoaWxkcmVuKCkubWFwKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZC5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgICAgICBjaGlsZC5vbigncG9pbnRlcmRvd24nLCAocHRyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICAgICAgKChfYSA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb3duKSAmJiAoKF9iID0gYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRvd24ocHRyKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjaGlsZC5vbigncG9pbnRlcnVwJywgKHB0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgICAgIHBvcFVwTGF5ZXIuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgKChfYSA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51cCkgJiYgKChfYiA9IGJ0biA9PT0gbnVsbCB8fCBidG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ0bi5ldnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51cChwdHIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNoaWxkLm9uKCdwb2ludGVyb3V0JywgKHB0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgICAgICgoX2EgPSBidG4gPT09IG51bGwgfHwgYnRuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidG4uZXZ0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3V0KSAmJiAoKF9iID0gYnRuID09PSBudWxsIHx8IGJ0biA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnRuLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm91dChwdHIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBwb3AgbGF5ZXIgc2V0dGluZ1xyXG4gICAgY29uc3QgcG9wTGF5ZXIgPSBzY2VuZS5hZGQubGF5ZXIoKTtcclxuICAgIGNvbnN0IHBvcExheWVyTGlzdCA9IFtdO1xyXG4gICAgcG9wTGF5ZXIubmFtZSA9IG5hbWU7XHJcbiAgICAocG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmRlcHRoKSAmJiBwb3BMYXllci5zZXREZXB0aChwb3AuZGVwdGgpO1xyXG4gICAgY29uc3QgcG9wTGF5ZXJCZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgaXNCZ0JsYWNrID8gJ2JsYWNrU2NyZWVuJyA6ICd3aGl0ZVNjcmVlbicpO1xyXG4gICAgcG9wTGF5ZXJCZy5zZXRBbHBoYShHYW1lUG9wVXAucG9wQWxwaGEpO1xyXG4gICAgcG9wTGF5ZXJCZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBwb3BMYXllckJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBwb3BMYXllckJnLm9uKCdwb2ludGVyZG93bicsIChwdHIpID0+IHsgdmFyIF9hLCBfYjsgKChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb3duKSAmJiAoKF9iID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmRvd24ocHRyKSk7IH0pO1xyXG4gICAgcG9wTGF5ZXJCZy5vbigncG9pbnRlcm1vdmUnLCAocHRyKSA9PiB7IHZhciBfYSwgX2I7ICgoX2EgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZXZ0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubW92ZSkgJiYgKChfYiA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tb3ZlKHB0cikpOyB9KTtcclxuICAgIHBvcExheWVyTGlzdC5wdXNoKHBvcExheWVyQmcpO1xyXG4gICAgY29uc3QgcG9wVXBMYXllciA9IHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGlzT3BlbjogZmFsc2UsXHJcbiAgICAgICAgYnRuOiBidG5MYXllcixcclxuICAgICAgICBwb3A6IHBvcExheWVyLFxyXG4gICAgICAgIGFkZDogKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcExheWVyLmFkZChjaGlsZCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaG93OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIHBvcFVwTGF5ZXIuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcG9wVXBMYXllci5wb3Auc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgKChfYSA9IHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5ldnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zaG93KSAmJiAoKF9iID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnNob3coKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoaWRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIHBvcFVwTGF5ZXIuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQWxsUG9wTGF5ZXJDbG9zZWQgPSBHYW1lUG9wVXAubGlzdC5maWx0ZXIocG9wVXBMYXllciA9PiBwb3BVcExheWVyLmlzT3BlbiA9PT0gdHJ1ZSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICBpc0FsbFBvcExheWVyQ2xvc2VkICYmIHBvcFVwTGF5ZXIucG9wLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAoKF9hID0gcG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmV2dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhpZGUpICYmICgoX2IgPSBwb3AgPT09IG51bGwgfHwgcG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3AuZXZ0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGlkZSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKHBvcCA9PT0gbnVsbCB8fCBwb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcC5leGl0QnRuKSB7XHJcbiAgICAgICAgcG9wTGF5ZXJMaXN0LnB1c2goLi4uQ3JlYXRlQmFzaWNQb3BVcEV4aXRUeXBlKHNjZW5lLCBwb3BMYXllckJnLCBwb3BVcExheWVyLCBidG4sIHBvcCwgb3B0aW9uKSk7XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgY2hpbGQgdG8gcG9wdXAgbGF5ZXJcclxuICAgIHBvcExheWVyTGlzdC5tYXAocG9wQ2hpbGQgPT4gcG9wTGF5ZXIuYWRkKHBvcENoaWxkKSk7XHJcbiAgICAocG9wID09PSBudWxsIHx8IHBvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wLmxpc3QpICYmIHBvcC5saXN0Lm1hcChwb3BDaGlsZCA9PiBwb3BMYXllci5hZGQocG9wQ2hpbGQpKTtcclxuICAgIFNldERlcHRoKHBvcExheWVyLCAnaGlnaGVzdCcpO1xyXG4gICAgLy8gY2hjayBuZXN0ZWQgcG9wIHVwIGxheWVyXHJcbiAgICBsZXQgbmVzdGVkUG9wVXBMYXllciA9IEdhbWVQb3BVcC5saXN0LmZpbmQocG9wVXAgPT4gcG9wVXAubmFtZSA9PT0gbmFtZSk7XHJcbiAgICBpZiAobmVzdGVkUG9wVXBMYXllcikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUud2FybihgcG9wIHVwIG5hbWUgbmVzdGVkOiAke25hbWV9IC8vIHNvIGxheSBvdmVyIGl0YCk7XHJcbiAgICAgICAgbmVzdGVkUG9wVXBMYXllciA9IHBvcFVwTGF5ZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgR2FtZVBvcFVwLmxpc3QucHVzaChwb3BVcExheWVyKTtcclxuICAgIEluaXRQb3BVcChwb3BVcExheWVyKTtcclxuICAgIHJldHVybiBwb3BVcExheWVyO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lUG9wVXA7XHJcbmV4cG9ydCB7IEdldFBvcFVwQXNzZXRzLCBJbml0UG9wVXAsIENyZWF0ZUJhc2ljUG9wVXAsIH07XHJcbiIsImltcG9ydCB7IENvbW1vbkF1ZGlvLCBHZXRBc3NldEZpbGVzIH0gZnJvbSAnQHNyYy9zY2VuZXMvYXNzZXRVdGlscyc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnQHNyYy9zY2VuZXMvZGVwdGgnO1xyXG5pbXBvcnQgVUlQcm9wcywgeyBDcmVhdGVVSUJ0bkFuaW0sIFNldENvbW1vblVJUHJvcHMsIFNldEVsZW1lbnRJbk1pZGRsZSB9IGZyb20gJy4uJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IENyZWF0ZUJhc2ljUG9wVXAgfSBmcm9tICcuLi9wb3BVcCc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgQ3JlYXRlR2FnZUJhciB9IGZyb20gJy4uL2dhZ2UnO1xyXG5pbXBvcnQgeyBTZXRGb250U3R5bGUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IFdpbmRvd0xvYmJ5IGZyb20gJ0BzcmMvd2luZG93JztcclxuY29uc3QgR2FtZUF1ZGlvVUkgPSB7XHJcbiAgICBidG46IG51bGwsXHJcbiAgICBjb250ZXh0OiBbXSxcclxuICAgIHBvcDogbnVsbCxcclxuICAgIGhvbGREdXJhdGlvbjogMTAwMCxcclxuICAgIGVsZUdhcFZhbHVlOiAxMDAsXHJcbiAgICB0b2dnbGVNdXRlOiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldEFsbE11dGUoIUdhbWVBdWRpby5pc0FsbE11dGUpO1xyXG4gICAgICAgIEdhbWVBdWRpb1VJLmJ0bi5zZXRUZXh0dXJlKEdhbWVBdWRpby5pc0FsbE11dGUgPyAnc2Z4T2ZmJyA6ICdzZnhPbicpO1xyXG4gICAgfSxcclxuICAgIHNob3c6ICgpID0+IHtcclxuICAgICAgICBHYW1lQXVkaW9VSS5jb250ZXh0ICYmIEdhbWVBdWRpb1VJLmNvbnRleHQubWFwKChjb250ZXh0Q2hpbGQpID0+IHtcclxuICAgICAgICAgICAgY29udGV4dENoaWxkLnNldFZpc2libGUgJiYgY29udGV4dENoaWxkLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpb1VJLmNvbnRleHQgJiYgR2FtZUF1ZGlvVUkuY29udGV4dC5tYXAoKGNvbnRleHRDaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBjb250ZXh0Q2hpbGQuc2V0VmlzaWJsZSAmJiBjb250ZXh0Q2hpbGQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdE9wdDoge1xyXG4gICAgICAgIGNtZEtleTogJ20nXHJcbiAgICB9LFxyXG4gICAgb3B0aW9uOiB7fSxcclxufTtcclxuY29uc3QgR2V0R2FtZUF1ZGlvVUlBc3NldHMgPSAoZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgY29uc3QgYXVkaW9VSUFzc2V0cyA9IFtcclxuICAgICAgICB7IGtleTogJ3NmeE9mZicsIHVybDogQ29tbW9uQXVkaW8gKyAnc2Z4T2ZmLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ3NmeE9uJywgdXJsOiBDb21tb25BdWRpbyArICdzZnhPbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdiZ21PZmYnLCB1cmw6IENvbW1vbkF1ZGlvICsgJ2JnbU9mZi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdiZ21PbicsIHVybDogQ29tbW9uQXVkaW8gKyAnYmdtT24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgXTtcclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGF1ZGlvVUlBc3NldHMsIGV4Y2VwdGlvbktleXMpO1xyXG59O1xyXG5jb25zdCBJbml0R2FtZUF1ZGlvVUkgPSAoKSA9PiB7XHJcbiAgICBHYW1lQXVkaW9VSS5idG4uc2V0VGV4dHVyZShHYW1lQXVkaW8uaXNBbGxNdXRlID8gJ3NmeE9mZicgOiAnc2Z4T24nKTtcclxuICAgIEdhbWVBdWRpb1VJLmhpZGUoKTtcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZUF1ZGlvVUkgPSAoc2NlbmUsIG9wdGlvbikgPT4ge1xyXG4gICAgR2FtZUF1ZGlvVUkub3B0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEdhbWVBdWRpb1VJLmRlZmF1bHRPcHQpLCB7IHg6IFVJUHJvcHMubWFyZ2luICogNC41ICogVUlQcm9wcy5zY2FsZSwgeTogVUlQcm9wcy5tYXJnaW4gfSksIG9wdGlvbik7XHJcbiAgICBjb25zdCB7IHgsIHksIGNtZEtleSB9ID0gR2FtZUF1ZGlvVUkub3B0aW9uO1xyXG4gICAgLy8gYnRuIChzaW1wbGUgdG91Y2ggbWVhbnMgdG9nZ2xpbmcgbXV0ZSBvciAwLjUgdm9sdW1lKVxyXG4gICAgR2FtZUF1ZGlvVUkuYnRuID0gc2NlbmUuYWRkLmltYWdlKHgsIHksIEdhbWVBdWRpby5pc0FsbE11dGUgPyAnc2Z4T2ZmJyA6ICdzZnhPbicpO1xyXG4gICAgU2V0Q29tbW9uVUlQcm9wcyhHYW1lQXVkaW9VSS5idG4pO1xyXG4gICAgQ3JlYXRlVUlCdG5BbmltKHNjZW5lLCBHYW1lQXVkaW9VSS5idG4pO1xyXG4gICAgR2FtZUF1ZGlvVUkuYnRuLm9uKCdwb2ludGVyZG93bicsIChwdHIpID0+IHtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBHYW1lQXVkaW9VSS5ob2xkRHVyYXRpb24sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghcHRyLmlzRG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4geyBHYW1lQXVkaW9VSS5wb3Auc2hvdygpOyB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBHYW1lQXVkaW9VSS5idG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBpZiAoR2FtZUF1ZGlvVUkucG9wLmlzT3BlbilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVBdWRpb1VJLnRvZ2dsZU11dGUoKTtcclxuICAgIH0pO1xyXG4gICAgLy8gY29udGV4dCBnYWdlIChhbGwsIHNmeCwgYmdtIGljb24gJiBnYWdlKVxyXG4gICAgY29uc3QgYWxsSWNvbiA9IHNjZW5lLmFkZC50ZXh0KFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCBHYW1lQXVkaW8uaXNBbGxNdXRlID8gJ011dGUgQWxsJyA6ICdBbGwnKTtcclxuICAgIGNvbnN0IHNmeEljb24gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBhbGxJY29uLnkgKyBHYW1lQXVkaW9VSS5lbGVHYXBWYWx1ZSwgR2FtZUF1ZGlvLmlzU2Z4TXV0ZSA/ICdzZnhPZmYnIDogJ3NmeE9uJyk7XHJcbiAgICBTZXRDb21tb25VSVByb3BzKHNmeEljb24pO1xyXG4gICAgQ3JlYXRlVUlCdG5BbmltKHNjZW5lLCBzZnhJY29uKTtcclxuICAgIGNvbnN0IHNmeEdhZ2UgPSBDcmVhdGVHYWdlQmFyKHNjZW5lLCBzZnhJY29uLngsIHNmeEljb24ueSArIHNmeEljb24uaGVpZ2h0IC8gMS41LCAobWluLCBtYXgsIGN1cnIpID0+IHtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4Vm9sdW1lKGN1cnIgLyAxMDApO1xyXG4gICAgfSwgeyBjb2xvcjogJ2JsdWUnIH0pO1xyXG4gICAgc2Z4R2FnZS5zZXRHYWdlTnVtKEdhbWVBdWRpby5iZ21Wb2x1bWUgKiAxMDApO1xyXG4gICAgc2Z4R2FnZS5zZXRBYmxlKCFHYW1lQXVkaW8uaXNTZnhNdXRlKTtcclxuICAgIHNmeEljb24ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCBpc09uID0gc2Z4SWNvbi50ZXh0dXJlLmtleSA9PT0gJ3NmeE9uJztcclxuICAgICAgICBzZnhHYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIHNmeEljb24uc2V0VGV4dHVyZShpc09uID8gJ3NmeE9mZicgOiAnc2Z4T24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4TXV0ZShpc09uKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgYmdtSWNvbiA9IHNjZW5lLmFkZC5pbWFnZShzZnhJY29uLngsIHNmeEljb24ueSArIEdhbWVBdWRpb1VJLmVsZUdhcFZhbHVlLCBHYW1lQXVkaW8uaXNCZ21NdXRlID8gJ2JnbU9mZicgOiAnYmdtT24nKTtcclxuICAgIFNldENvbW1vblVJUHJvcHMoYmdtSWNvbik7XHJcbiAgICBDcmVhdGVVSUJ0bkFuaW0oc2NlbmUsIGJnbUljb24pO1xyXG4gICAgY29uc3QgYmdtR2FnZSA9IENyZWF0ZUdhZ2VCYXIoc2NlbmUsIGJnbUljb24ueCwgYmdtSWNvbi55ICsgYmdtSWNvbi5oZWlnaHQgLyAxLjUsIChtaW4sIG1heCwgY3VycikgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRCZ21Wb2x1bWUoY3VyciAvIDEwMCk7XHJcbiAgICB9LCB7IGNvbG9yOiAnYmx1ZScgfSk7XHJcbiAgICBiZ21HYWdlLnNldEdhZ2VOdW0oR2FtZUF1ZGlvLmJnbVZvbHVtZSAqIDEwMCk7XHJcbiAgICBiZ21HYWdlLnNldEFibGUoIUdhbWVBdWRpby5pc0JnbU11dGUpO1xyXG4gICAgYmdtSWNvbi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzT24gPSBiZ21JY29uLnRleHR1cmUua2V5ID09PSAnYmdtT24nO1xyXG4gICAgICAgIGJnbUdhZ2Uuc2V0QWJsZSghaXNPbik7XHJcbiAgICAgICAgYmdtSWNvbi5zZXRUZXh0dXJlKGlzT24gPyAnYmdtT2ZmJyA6ICdiZ21PbicpO1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRCZ21NdXRlKGlzT24pO1xyXG4gICAgfSk7XHJcbiAgICBTZXRGb250U3R5bGUoYWxsSWNvbik7XHJcbiAgICBhbGxJY29uLnNldEZvbnRTaXplKDY0KTtcclxuICAgIFNldENvbW1vblVJUHJvcHMoYWxsSWNvbik7XHJcbiAgICBDcmVhdGVVSUJ0bkFuaW0oc2NlbmUsIGFsbEljb24pO1xyXG4gICAgY29uc3QgYWxsR2FnZSA9IENyZWF0ZUdhZ2VCYXIoc2NlbmUsIGFsbEljb24ueCwgYWxsSWNvbi55ICsgNDgsIChtaW4sIG1heCwgY3VycikgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRBbGxWb2x1bWUoY3VyciAvIDEwMCk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldFNmeFZvbHVtZShjdXJyIC8gMTAwKTtcclxuICAgICAgICBzZnhHYWdlLnNldEdhZ2VOdW0oY3Vycik7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldEJnbVZvbHVtZShjdXJyIC8gMTAwKTtcclxuICAgICAgICBiZ21HYWdlLnNldEdhZ2VOdW0oY3Vycik7XHJcbiAgICB9LCB7IGNvbG9yOiAnYmx1ZScgfSk7XHJcbiAgICBhbGxHYWdlLnNldEdhZ2VOdW0oR2FtZUF1ZGlvLmJnbVZvbHVtZSAqIDEwMCk7XHJcbiAgICBhbGxHYWdlLnNldEFibGUoIUdhbWVBdWRpby5pc1NmeE11dGUpO1xyXG4gICAgLy8gb3ZlcnJpZGUgbXV0ZVxyXG4gICAgY29uc3QgdG1wVG9nZ2xlTXV0ZSA9IEdhbWVBdWRpb1VJLnRvZ2dsZU11dGU7XHJcbiAgICBHYW1lQXVkaW9VSS50b2dnbGVNdXRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRtcFRvZ2dsZU11dGUoKTtcclxuICAgICAgICBjb25zdCBpc09uID0gYWxsSWNvbi50ZXh0ID09PSAnQWxsJztcclxuICAgICAgICBhbGxHYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIGFsbEljb24uc2V0VGV4dChpc09uID8gJ011dGUgQWxsJyA6ICdBbGwnKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0QWxsTXV0ZShpc09uKTtcclxuICAgICAgICBzZnhHYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIHNmeEljb24uc2V0VGV4dHVyZShpc09uID8gJ3NmeE9mZicgOiAnc2Z4T24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4TXV0ZShpc09uKTtcclxuICAgICAgICBiZ21HYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIGJnbUljb24uc2V0VGV4dHVyZShpc09uID8gJ2JnbU9mZicgOiAnYmdtT24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0QmdtTXV0ZShpc09uKTtcclxuICAgIH07XHJcbiAgICBhbGxJY29uLm9uKCdwb2ludGVydXAnLCBHYW1lQXVkaW9VSS50b2dnbGVNdXRlKTtcclxuICAgIC8vIGFkZCBjb250ZXh0IGdhbWUgb2JqZWN0IHRvIHBvcCBsYXllclxyXG4gICAgLy8gWyBhbGxJY29uLCBzZnhJY29uLCBiZ21JY29uIF0ubWFwKCBjaGlsZCA9PiBHYW1lQXVkaW9VSS5wb3AuYWRkKGNoaWxkKSApO1xyXG4gICAgR2FtZUF1ZGlvVUkuY29udGV4dC5wdXNoKGFsbEljb24sIHNmeEljb24sIGJnbUljb24sIGFsbEdhZ2UsIHNmeEdhZ2UsIGJnbUdhZ2UpO1xyXG4gICAgY29uc3QgYXJyYW5nZUxpc3QgPSBbXHJcbiAgICAgICAgYWxsSWNvbiwgLi4uYWxsR2FnZS5nZXRDaGlsZHJlbigpLFxyXG4gICAgICAgIHNmeEljb24sIC4uLnNmeEdhZ2UuZ2V0Q2hpbGRyZW4oKSxcclxuICAgICAgICBiZ21JY29uLCAuLi5iZ21HYWdlLmdldENoaWxkcmVuKCksXHJcbiAgICBdO1xyXG4gICAgU2V0RWxlbWVudEluTWlkZGxlKGFycmFuZ2VMaXN0KTtcclxuICAgIC8vIGlmIGhvbGRpbmcgYXVkaW8gYnRuIDIgc2Vjb25kcywgdGhlbiBpdCBhcHBlYXJzIGxheWVyIGZvciBkZXRhaWwgYXVkaW8gb3B0aW9uXHJcbiAgICBHYW1lQXVkaW9VSS5wb3AgPSBDcmVhdGVCYXNpY1BvcFVwKHNjZW5lLCAnYXVkaW9VSScsIHt9LCB7XHJcbiAgICAgICAgbGlzdDogYXJyYW5nZUxpc3QsXHJcbiAgICAgICAgZXhpdEJ0bjoge1xyXG4gICAgICAgICAgICBpc0V4aXN0OiB0cnVlLFxyXG4gICAgICAgICAgICB0eXBlOiAnYnRuJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV2dDoge1xyXG4gICAgICAgICAgICBzaG93OiAoKSA9PiB7IEdhbWVBdWRpb1VJLnNob3coKTsgfSxcclxuICAgICAgICAgICAgaGlkZTogKCkgPT4geyBHYW1lQXVkaW9VSS5oaWRlKCk7IH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBTZXREZXB0aChHYW1lQXVkaW9VSS5idG4sICdoaWdoZXN0Jyk7XHJcbiAgICAvLyBTZXREZXB0aChHYW1lQXVkaW9VSS5wb3AsICdoaWdoZXN0JywgMTAwKTtcclxuICAgIC8vIGtleSBiaW5kaW5nXHJcbiAgICBXaW5kb3dMb2JieS5hZGQyQWxsKCd1cCcsICdhdWRpbycsIChldnQsIGtleSkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgIT09IGNtZEtleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVBdWRpb1VJLnRvZ2dsZU11dGUoKTtcclxuICAgIH0pO1xyXG4gICAgSW5pdEdhbWVBdWRpb1VJKCk7XHJcbiAgICByZXR1cm4gR2FtZUF1ZGlvVUk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVBdWRpb1VJO1xyXG5leHBvcnQgeyBHZXRHYW1lQXVkaW9VSUFzc2V0cywgSW5pdEdhbWVBdWRpb1VJLCBDcmVhdGVHYW1lQXVkaW9VSSwgfTtcclxuIiwiaW1wb3J0IHsgQ29tbW9uU2Nyb2xsLCBHZXRBc3NldEZpbGVzIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2Fzc2V0VXRpbHNcIjtcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tIFwiQHNyYy9zY2VuZXMvZGVwdGhcIjtcclxuaW1wb3J0IEdhbWVHZXN0dXJlIGZyb20gXCJAc3JjL3NjZW5lcy9nZXN0dXJlXCI7XHJcbmltcG9ydCBHYW1lSW5wdXQgZnJvbSBcIkBzcmMvc2NlbmVzL2lucHV0XCI7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5pbXBvcnQgeyBHZXRSYXRpbywgR2V0VmFsdWVWaWFSYXRpbyB9IGZyb20gXCJAc3JjL3V0aWxzL21hdGhcIjtcclxuaW1wb3J0IFdpbmRvd0xvYmJ5IGZyb20gXCJAc3JjL3dpbmRvd1wiO1xyXG5pbXBvcnQgVUlQcm9wcywgeyBDcmVhdGVVSUJ0bkFuaW0sIFNldENvbW1vblVJUHJvcHMgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgU2V0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL2ZvbnRcIjtcclxuY29uc3QgR2FtZVNjcm9sbCA9IHtcclxuICAgIGJ0bjogbnVsbCxcclxuICAgIGlzU2Nyb2xsYWJsZTogdHJ1ZSxcclxuICAgIGFjdFNjcm9sbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBXaW5kb3dMb2JieS5yZXFQYXJlbnQoJ3Njcm9sbCcpO1xyXG4gICAgfSxcclxuICAgIHdoZWVsU2Nyb2xsOiBmdW5jdGlvbiAocHRyKSB7XHJcbiAgICAgICAgaWYgKEdhbWVTY3JvbGwuaXNTY3JvbGxhYmxlKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHB0ci5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSxcclxuICAgIGRlZmF1bHRPcHQ6IHtcclxuICAgICAgICBjbWRLZXk6ICd2JyxcclxuICAgICAgICBpc1N3aXBlR2VzdHVyZUV4aXN0OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIG9wdGlvbjoge30sXHJcbn07XHJcbmNvbnN0IEdldFNjcm9sbEFzc2V0cyA9IChleGNlcHRpb25LZXlzKSA9PiB7XHJcbiAgICBjb25zdCBhc3NldExpc3QgPSBbXHJcbiAgICAgICAgeyBrZXk6ICdzY3JvbGxCZWxvdycsIHVybDogQ29tbW9uU2Nyb2xsICsgJ3Njcm9sbEJlbG93LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ3Njcm9sbEFycm93JywgdXJsOiBDb21tb25TY3JvbGwgKyAnc2Nyb2xsQXJyb3cucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgXTtcclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cyk7XHJcbn07XHJcbmNvbnN0IEluaXRHYW1lU2Nyb2xsID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lU2Nyb2xsID0gKHNjZW5lLCBvcHRpb24pID0+IHtcclxuICAgIEdhbWVTY3JvbGwub3B0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEdhbWVTY3JvbGwuZGVmYXVsdE9wdCksIG9wdGlvbiksIHsgeDogVUlQcm9wcy5tYXJnaW4gKiA0LjUgKiBVSVByb3BzLnNjYWxlICogMS42LCB5OiBVSVByb3BzLm1hcmdpbiB9KTtcclxuICAgIGNvbnN0IHsgeCwgeSwgY21kS2V5LCBpc1N3aXBlR2VzdHVyZUV4aXN0IH0gPSBHYW1lU2Nyb2xsLm9wdGlvbjtcclxuICAgIC8vIG9mZiB0aGUgcHJldmVudERlZmF1bHQgbWV0aG9kIHRvIGFsbCBldnRzXHJcbiAgICBzY2VuZS5nYW1lLmlucHV0Lm1vdXNlLnByZXZlbnREZWZhdWx0V2hlZWwgPSBmYWxzZTtcclxuICAgIEdhbWVTY3JvbGwuYnRuID0gc2NlbmUuYWRkLmltYWdlKHgsIHksICdzY3JvbGxCZWxvdycpO1xyXG4gICAgU2V0RGVwdGgoR2FtZVNjcm9sbC5idG4sICdoaWdoZXN0Jyk7XHJcbiAgICBTZXRDb21tb25VSVByb3BzKEdhbWVTY3JvbGwuYnRuKTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgR2FtZVNjcm9sbC5idG4pO1xyXG4gICAgY29uc3QgcHJldldoZWVsU2Nyb2xsID0gR2FtZVNjcm9sbC53aGVlbFNjcm9sbDtcclxuICAgIEdhbWVTY3JvbGwud2hlZWxTY3JvbGwgPSAocHRyKSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAoKF9hID0gb3B0aW9uID09PSBudWxsIHx8IG9wdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9uLmV2dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVwKSAmJiAoKF9iID0gb3B0aW9uID09PSBudWxsIHx8IG9wdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9uLmV2dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVwKHB0cikpO1xyXG4gICAgICAgIHByZXZXaGVlbFNjcm9sbChwdHIpO1xyXG4gICAgfTtcclxuICAgIEdhbWVTY3JvbGwuYnRuLm9uKCdwb2ludGVydXAnLCBHYW1lU2Nyb2xsLmFjdFNjcm9sbCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vZmYoJ3doZWVsJywgR2FtZVNjcm9sbC53aGVlbFNjcm9sbCk7XHJcbiAgICBzY2VuZS5pbnB1dC5vbignd2hlZWwnLCBHYW1lU2Nyb2xsLndoZWVsU2Nyb2xsKTtcclxuICAgIC8vIGtleSBiaW5kaW5nXHJcbiAgICBXaW5kb3dMb2JieS5hZGQyQWxsKCdkb3duJywgJ3Njcm9sbCcsIChldnQsIGtleSkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgIT09IGNtZEtleSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVTY3JvbGwuYWN0U2Nyb2xsKCk7XHJcbiAgICB9KTtcclxuICAgIGlmIChpc1N3aXBlR2VzdHVyZUV4aXN0KVxyXG4gICAgICAgIENyZWF0ZVN3aXBlU2Nyb2xsKHNjZW5lKTtcclxuICAgIEluaXRHYW1lU2Nyb2xsKCk7XHJcbiAgICByZXR1cm4gR2FtZVNjcm9sbDtcclxufTtcclxuY29uc3QgU2V0R2FtZVNjcm9sbGFibGUgPSAoaXNTY3JvbGxhYmxlKSA9PiB7XHJcbiAgICBpZiAoIUdhbWVTY3JvbGwuYnRuKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIEdhbWVTY3JvbGwuaXNTY3JvbGxhYmxlID0gaXNTY3JvbGxhYmxlO1xyXG4gICAgR2FtZVNjcm9sbC5idG4uc2V0QWxwaGEoR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUgPyBVSVByb3BzLmFscGhhIDogMCk7XHJcbiAgICByZXR1cm4gR2FtZVNjcm9sbDtcclxufTtcclxuY29uc3QgQ3JlYXRlU3dpcGVTY3JvbGwgPSAoc2NlbmUpID0+IHtcclxuICAgIGNvbnN0IGRpc2FibGVBbHBoYSA9IDA7XHJcbiAgICBjb25zdCBhYmxlQWxwaGEgPSAwLjY7XHJcbiAgICBjb25zdCBzY3JvbGxCZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJ2JsYWNrU2NyZWVuJyk7XHJcbiAgICBzY3JvbGxCZy5zZXRBbHBoYSgwLjYpO1xyXG4gICAgc2Nyb2xsQmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgc2Nyb2xsQmcuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIHNjcm9sbEJnLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgbGV0IGlzU2Nyb2xsQmdUZXh0dXJlRXhpc3QgPSB0cnVlO1xyXG4gICAgaWYgKCFzY2VuZS50ZXh0dXJlcy5nZXQoJ2JsYWNrU2NyZWVuJykpXHJcbiAgICAgICAgaXNTY3JvbGxCZ1RleHR1cmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGlzU2Nyb2xsQmdUZXh0dXJlRXhpc3QgPSB0cnVlO1xyXG4gICAgY29uc3Qgc2Nyb2xsQXJyb3cgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICdzY3JvbGxBcnJvdycpO1xyXG4gICAgc2Nyb2xsQXJyb3cuc2V0T3JpZ2luKDAuNSwgMC41KTtcclxuICAgIHNjcm9sbEFycm93LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgc2Nyb2xsQXJyb3cuc2V0QWxwaGEoZGlzYWJsZUFscGhhKTtcclxuICAgIGNvbnN0IHNjcm9sbFR4dCA9IHNjZW5lLmFkZC50ZXh0KFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnU2Nyb2xsIFRvdWNoIERvd24nKTtcclxuICAgIFNldEZvbnRTdHlsZShzY3JvbGxUeHQpO1xyXG4gICAgc2Nyb2xsVHh0LnNldEFscGhhKDAuOCk7XHJcbiAgICBzY3JvbGxUeHQuc2V0Rm9udFNpemUoVmlldy53IC8gMTYpO1xyXG4gICAgc2Nyb2xsVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgY29uc3Qgc3dpcGVZQW1vdW50ID0gVmlldy5oICogMiAvIDU7XHJcbiAgICBjb25zdCBzd2lwZVlMaW1pdCA9IFZpZXcuaCAvIDIgKyBWaWV3LmggLyA4O1xyXG4gICAgY29uc3QgU2Nyb2xsU2hvdyA9IChzaXplWSwgYWxwaGEpID0+IHtcclxuICAgICAgICBzY3JvbGxBcnJvdy5zZXREaXNwbGF5U2l6ZShWaWV3LmNlbnRlclgsIHNpemVZKTtcclxuICAgICAgICBzY3JvbGxBcnJvdy5zZXRBbHBoYShhbHBoYSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgU2Nyb2xsSGlkZSA9ICgpID0+IHtcclxuICAgICAgICBpc1Njcm9sbEJnVGV4dHVyZUV4aXN0ICYmIHNjcm9sbEJnLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHNjcm9sbEFycm93LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHNjcm9sbEFycm93LnNldEFscGhhKGRpc2FibGVBbHBoYSk7XHJcbiAgICAgICAgc2Nyb2xsVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIC8vIG1vdmUgZXZ0XHJcbiAgICBHYW1lSW5wdXQuYWRkKCdtb3ZlJywgKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIGlmICghcHRyLmlzRG93bilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICghR2FtZVNjcm9sbC5pc1Njcm9sbGFibGUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvLyBzaG93IG9yIGhpZGUgc2Nyb2xsIGRvd24gaW1nICYgdHh0XHJcbiAgICAgICAgY29uc3QgZGlmZlkgPSBHYW1lR2VzdHVyZS5pbml0UG9zLnkgLSBwdHIueTtcclxuICAgICAgICBpZiAoZGlmZlkgPj0gc3dpcGVZQW1vdW50KSB7XHJcbiAgICAgICAgICAgIHNjcm9sbEFycm93LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChkaWZmWSA+PSBzd2lwZVlMaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gbGltaXQgc3dpcGVcclxuICAgICAgICAgICAgICAgIGlzU2Nyb2xsQmdUZXh0dXJlRXhpc3QgJiYgc2Nyb2xsQmcuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgU2Nyb2xsU2hvdyhzd2lwZVlMaW1pdCwgYWJsZUFscGhhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBhbHBoYSByYXRpb1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VSYXRpbyA9IEdldFJhdGlvKHN3aXBlWUFtb3VudCwgc3dpcGVZTGltaXQsIGRpZmZZKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFscGhhUmF0aW8gPSBHZXRWYWx1ZVZpYVJhdGlvKGRpc2FibGVBbHBoYSwgYWJsZUFscGhhLCBkaXN0YW5jZVJhdGlvKTtcclxuICAgICAgICAgICAgICAgIFNjcm9sbFNob3coZGlmZlksIGFscGhhUmF0aW8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgU2Nyb2xsSGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBhY3Qgc2Nyb2xsIHdoZW4gcHRyIHVwXHJcbiAgICBHYW1lSW5wdXQuYWRkKCd1cCcsIChwdHIsIGN1cnJlbnRseU92ZXIpID0+IHtcclxuICAgICAgICBpZiAoIUdhbWVTY3JvbGwuaXNTY3JvbGxhYmxlKVxyXG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsSGlkZSgpO1xyXG4gICAgICAgIGlmICghc2Nyb2xsQXJyb3cudmlzaWJsZSlcclxuICAgICAgICAgICAgcmV0dXJuIFNjcm9sbEhpZGUoKTtcclxuICAgICAgICBpZiAoIXNjcm9sbFR4dC52aXNpYmxlKVxyXG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsSGlkZSgpO1xyXG4gICAgICAgIFNjcm9sbEhpZGUoKTtcclxuICAgICAgICBHYW1lU2Nyb2xsLmFjdFNjcm9sbCgpO1xyXG4gICAgfSk7XHJcbiAgICBbc2Nyb2xsQmcsIHNjcm9sbEFycm93LCBzY3JvbGxUeHRdLm1hcChzY3JvbGxFbGUgPT4gU2V0RGVwdGgoc2Nyb2xsRWxlLCAnaGlnaGVzdCcpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZVNjcm9sbDtcclxuZXhwb3J0IHsgR2V0U2Nyb2xsQXNzZXRzLCBJbml0R2FtZVNjcm9sbCwgQ3JlYXRlR2FtZVNjcm9sbCwgU2V0R2FtZVNjcm9sbGFibGUsIH07XHJcbiIsImltcG9ydCB7IENvbW1vblNmeCwgQ29tbW9uRnVsbFNjcmVlbiwgR2V0QXNzZXRGaWxlcyB9IGZyb20gXCJAc3JjL3NjZW5lcy9hc3NldFV0aWxzXCI7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2RlcHRoXCI7XHJcbmltcG9ydCBXaW5kb3dMb2JieSBmcm9tIFwiQHNyYy93aW5kb3dcIjtcclxuaW1wb3J0IFVJUHJvcHMsIHsgQ3JlYXRlVUlCdG5BbmltLCBTZXRDb21tb25VSVByb3BzIH0gZnJvbSBcIi4uXCI7XHJcbmltcG9ydCB7IFNldEdhbWVTY3JvbGxhYmxlIH0gZnJvbSBcIi4uL3Njcm9sbFwiO1xyXG5jb25zdCBHYW1lRnVsbFNjcmVlbiA9IHtcclxuICAgIGlzRGVsYXlpbmc6IGZhbHNlLFxyXG4gICAgZGVsYXk6IDMwMCxcclxuICAgIGNoY2tUaW1lOiAxMDAwLFxyXG4gICAgaXNGdWxsU2NyZWVuOiBmYWxzZSxcclxuICAgIGJ0bjogbnVsbCxcclxuICAgIGRlZmF1bHRPcHQ6IHtcclxuICAgICAgICBjbWRLZXk6ICdmJyxcclxuICAgIH0sXHJcbiAgICBvcHRpb246IHt9LFxyXG59O1xyXG5jb25zdCBHZXRGdWxsU2NyZWVuQXNzZXRzID0gKGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIGNvbnN0IGFzc2V0TGlzdCA9IFtcclxuICAgICAgICB7IGtleTogJ2Z1bGxTY3JlZW5MYXJnZXInLCB1cmw6IENvbW1vbkZ1bGxTY3JlZW4gKyAnZnVsbFNjcmVlbkxhcmdlci5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdmdWxsU2NyZWVuU21hbGxlcicsIHVybDogQ29tbW9uRnVsbFNjcmVlbiArICdmdWxsU2NyZWVuU21hbGxlci5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICd0b3VjaFNmeCcsIHVybDogQ29tbW9uU2Z4ICsgJ3RvdWNoU2Z4Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gR2V0QXNzZXRGaWxlcyhhc3NldExpc3QsIGV4Y2VwdGlvbktleXMpO1xyXG59O1xyXG5jb25zdCBJbml0RnVsbFNjcmVlbiA9ICgpID0+IHtcclxufTtcclxuY29uc3QgQ3JlYXRlRnVsbFNjcmVlbiA9IChzY2VuZSwgb3B0aW9uKSA9PiB7XHJcbiAgICBHYW1lRnVsbFNjcmVlbi5vcHRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgR2FtZUZ1bGxTY3JlZW4uZGVmYXVsdE9wdCksIHsgeDogVUlQcm9wcy5tYXJnaW4sIHk6IFVJUHJvcHMubWFyZ2luIH0pLCBvcHRpb24pO1xyXG4gICAgY29uc3QgeyB4LCB5LCBjbWRLZXkgfSA9IEdhbWVGdWxsU2NyZWVuLm9wdGlvbjtcclxuICAgIGNvbnN0IGJ0blRleHR1cmUgPSBHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4gPyAnZnVsbFNjcmVlblNtYWxsZXInIDogJ2Z1bGxTY3JlZW5MYXJnZXInO1xyXG4gICAgLy8gYWRkIHNjcmVlbiBzaXplIGNvbnRyb2xsZXJcclxuICAgIEdhbWVGdWxsU2NyZWVuLmJ0biA9IHNjZW5lLmFkZC5pbWFnZSh4LCB5LCBidG5UZXh0dXJlKTtcclxuICAgIFNldERlcHRoKEdhbWVGdWxsU2NyZWVuLmJ0biwgJ2hpZ2hlc3QnKTtcclxuICAgIFNldENvbW1vblVJUHJvcHMoR2FtZUZ1bGxTY3JlZW4uYnRuKTtcclxuICAgIENyZWF0ZVVJQnRuQW5pbShzY2VuZSwgR2FtZUZ1bGxTY3JlZW4uYnRuKTtcclxuICAgIGNvbnN0IGRlbGF5RXZ0ID0gKCkgPT4ge1xyXG4gICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5pc0RlbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0QWxwaGEoMC4yKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgR2FtZUZ1bGxTY3JlZW4uYnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgICAgIEdhbWVGdWxsU2NyZWVuLmlzRGVsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgR2FtZUZ1bGxTY3JlZW4uYnRuLnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjZW5lLnNjYWxlLmlzRnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGl0RXZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5pc0RlbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUZ1bGxTY3JlZW4uYnRuLnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBHYW1lRnVsbFNjcmVlbi5kZWxheSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGV4aXRFdnQgPSAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuID0gZmFsc2U7XHJcbiAgICAgICAgc2NlbmUuc2NhbGUuc3RvcEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0VGV4dHVyZSgnZnVsbFNjcmVlbkxhcmdlcicpO1xyXG4gICAgICAgIFNldEdhbWVTY3JvbGxhYmxlKHRydWUpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHRvZ2dsZUV2dCA9ICgpID0+IHtcclxuICAgICAgICBpZiAoR2FtZUZ1bGxTY3JlZW4uaXNEZWxheWluZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGRlbGF5RXZ0KCk7XHJcbiAgICAgICAgR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuID0gIUdhbWVGdWxsU2NyZWVuLmlzRnVsbFNjcmVlbjtcclxuICAgICAgICBpZiAoR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgIHNjZW5lLnNjYWxlLnN0YXJ0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0VGV4dHVyZSgnZnVsbFNjcmVlblNtYWxsZXInKTtcclxuICAgICAgICAgICAgU2V0R2FtZVNjcm9sbGFibGUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGV4aXRFdnQoKTtcclxuICAgIH07XHJcbiAgICBHYW1lRnVsbFNjcmVlbi5idG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgdG9nZ2xlRXZ0KCk7IH0pO1xyXG4gICAgLy8gcmVzaXplIGV2ZW50IGZvciBzdG9wIGZ1bGwgc2NyZWVuXHJcbiAgICBzY2VuZS5zY2FsZS5vZmYoJ3Jlc2l6ZScpO1xyXG4gICAgc2NlbmUuc2NhbGUub24oJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICBpZiAoR2FtZUZ1bGxTY3JlZW4uYnRuLmlzQ2hhbmdpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoR2FtZUZ1bGxTY3JlZW4uaXNEZWxheWluZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICghR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgZGVsYXlFdnQoKTtcclxuICAgICAgICBleGl0RXZ0KCk7XHJcbiAgICB9KTtcclxuICAgIC8vIGtleSBiaW5kaW5nXHJcbiAgICBXaW5kb3dMb2JieS5hZGQyQWxsKCd1cCcsICdmdWxsU2NyZWVuJywgKGV2dCwga2V5KSA9PiB7XHJcbiAgICAgICAgaWYgKGtleSAhPT0gY21kS2V5KVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9nZ2xlRXZ0KCk7XHJcbiAgICB9KTtcclxuICAgIEluaXRGdWxsU2NyZWVuKCk7XHJcbiAgICByZXR1cm4gR2FtZUZ1bGxTY3JlZW47XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVGdWxsU2NyZWVuO1xyXG5leHBvcnQgeyBHZXRGdWxsU2NyZWVuQXNzZXRzLCBJbml0RnVsbFNjcmVlbiwgQ3JlYXRlRnVsbFNjcmVlbiwgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCB7IENyZWF0ZUdhbWVHZXN0dXJlLCBVcGRhdGVHYW1lR2VzdHVyZSB9IGZyb20gXCIuLi9nZXN0dXJlXCI7XHJcbmltcG9ydCB7IENyZWF0ZUdhbWVJbnB1dCB9IGZyb20gXCIuLi9pbnB1dFwiO1xyXG5pbXBvcnQgeyBDcmVhdGVHYW1lQXVkaW9VSSwgR2V0R2FtZUF1ZGlvVUlBc3NldHMgfSBmcm9tIFwiLi9hdWRpb1wiO1xyXG5pbXBvcnQgeyBDcmVhdGVGdWxsU2NyZWVuLCBHZXRGdWxsU2NyZWVuQXNzZXRzIH0gZnJvbSBcIi4vZnVsbFNjcmVlblwiO1xyXG5pbXBvcnQgeyBHZXRHYWdlQXNzZXRzIH0gZnJvbSBcIi4vZ2FnZVwiO1xyXG5pbXBvcnQgeyBHZXRQb3BVcEFzc2V0cyB9IGZyb20gXCIuL3BvcFVwXCI7XHJcbmltcG9ydCB7IENyZWF0ZUdhbWVTY3JvbGwsIEdldFNjcm9sbEFzc2V0cyB9IGZyb20gXCIuL3Njcm9sbFwiO1xyXG5jb25zdCBVSVByb3BzID0ge1xyXG4gICAgZXhpdFBvc1k6IFZpZXcuaCAtIDM2LFxyXG4gICAgbWFyZ2luOiAzMCxcclxuICAgIGFscGhhOiAwLjgsXHJcbiAgICBzY2FsZTogMC42LFxyXG4gICAgZG93bkdhcDogNCwgLy8gZG93biBnYXAgZm9yIGFuaW1cclxufTtcclxuY29uc3QgU2V0VUlQcm9wcyA9IChwcm9wcywgdmFsdWUpID0+IHtcclxuICAgIGlmICghVUlQcm9wc1twcm9wc10pXHJcbiAgICAgICAgY29uc29sZS53YXJuKGB1aSBwcm9wczogJHtwcm9wc30gaXMgbm90IGV4aXN0YCk7XHJcbiAgICBVSVByb3BzW3Byb3BzXSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIFVJUHJvcHM7XHJcbn07XHJcbmNvbnN0IFNldENvbW1vblVJUHJvcHMgPSAoYnRuKSA9PiB7XHJcbiAgICBidG4uc2V0QWxwaGEoVUlQcm9wcy5hbHBoYSk7XHJcbiAgICBidG4uc2V0U2NhbGUoVUlQcm9wcy5zY2FsZSk7XHJcbiAgICByZXR1cm4gYnRuO1xyXG59O1xyXG5jb25zdCBDcmVhdGVVSUJ0bkFuaW0gPSAoc2NlbmUsIGJ0biwgb3B0aW9uKSA9PiB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB0b2dnbGVCdG4gPSBidG47XHJcbiAgICBpZiAoIXRvZ2dsZUJ0bilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCBkdXIgPSAoX2EgPSBvcHRpb24gPT09IG51bGwgfHwgb3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb24uZHVyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiA3MDtcclxuICAgIGNvbnN0IENoY2tJc01vdmVkID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghdG9nZ2xlQnRuLmlzTW92ZWRPbmNlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9nZ2xlQnRuLmlzTW92ZWRPbmNlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRvZ2dsZUJ0bi5kb3duUG9zWSAhPT0gdG9nZ2xlQnRuLnkgKyBVSVByb3BzLmRvd25HYXApIHtcclxuICAgICAgICAgICAgdG9nZ2xlQnRuLnVwUG9zWSA9IHRvZ2dsZUJ0bi55O1xyXG4gICAgICAgICAgICB0b2dnbGVCdG4uZG93blBvc1kgPSB0b2dnbGVCdG4ueSArIFVJUHJvcHMuZG93bkdhcDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdG9nZ2xlQnRuLmRvd25FdnQgPSAoKSA9PiB7XHJcbiAgICAgICAgQ2hja0lzTW92ZWQoKTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IHRvZ2dsZUJ0bi55LCB0bzogdG9nZ2xlQnRuLmRvd25Qb3NZLCBkdXJhdGlvbjogZHVyLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2dnbGVCdG4uaXNDaGFuZ2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi51cEV2dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi55ID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRvZ2dsZUJ0bi51cEV2dCA9ICgpID0+IHtcclxuICAgICAgICBDaGNrSXNNb3ZlZCgpO1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogdG9nZ2xlQnRuLnksIHRvOiB0b2dnbGVCdG4udXBQb3NZLCBkdXJhdGlvbjogZHVyLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2dnbGVCdG4uaXNDaGFuZ2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi55ID0gdG9nZ2xlQnRuLnVwUG9zWTtcclxuICAgICAgICAgICAgICAgICAgICB0dy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4ueSA9IHR3RGF0YS52YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlQnRuLmlzQ2hhbmdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0b2dnbGVCdG4udXBQb3NZID0gYnRuLnk7XHJcbiAgICB0b2dnbGVCdG4uZG93blBvc1kgPSBidG4ueSArIFVJUHJvcHMuZG93bkdhcDtcclxuICAgIHRvZ2dsZUJ0bi5pc01vdmVkT25jZSA9IHRydWU7XHJcbiAgICB0b2dnbGVCdG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIHRvZ2dsZUJ0bi5vbigncG9pbnRlcmRvd24nLCB0b2dnbGVCdG4uZG93bkV2dCk7XHJcbiAgICB0b2dnbGVCdG4ub24oJ3BvaW50ZXJ1cCcsIHRvZ2dsZUJ0bi51cEV2dCk7XHJcbiAgICB0b2dnbGVCdG4ub24oJ3BvaW50ZXJvdXQnLCB0b2dnbGVCdG4udXBFdnQpO1xyXG4gICAgcmV0dXJuIFVJUHJvcHM7XHJcbn07XHJcbmNvbnN0IFNldEVsZW1lbnRJbk1pZGRsZSA9IChsaXN0LCBpbml0WSkgPT4ge1xyXG4gICAgY29uc3QgY29udGVudEluaXRZID0gaW5pdFkgIT09IG51bGwgJiYgaW5pdFkgIT09IHZvaWQgMCA/IGluaXRZIDogMDtcclxuICAgIGNvbnN0IHlMaXN0ID0gbGlzdC5tYXAoY2hpbGQgPT4gY2hpbGQueSk7XHJcbiAgICBjb25zdCB0b3BZID0gTWF0aC5taW4oLi4ueUxpc3QpO1xyXG4gICAgY29uc3QgYm90dG9tWSA9IE1hdGgubWF4KC4uLnlMaXN0KTtcclxuICAgIGNvbnN0IGdhcExlbmd0aCA9IGJvdHRvbVkgLSB0b3BZIC0gY29udGVudEluaXRZO1xyXG4gICAgaWYgKGdhcExlbmd0aCA+IFZpZXcuaCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignY29udGVudCBnYXAgaXMgbW9yZSB0aGFuIHZpZXcgaGVpZ2h0LCB0aGlzIHNob3VsZCBiZSBhIHNjcm9sbGFibGUgbGF5ZXInKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGdhcFkgPSAoVmlldy5oIC0gZ2FwTGVuZ3RoKSAvIDI7XHJcbiAgICAgICAgY29uc3QgY29udGVudFkgPSB0b3BZIC0gZ2FwWTtcclxuICAgICAgICBjb25zdCBsYXN0ID0gbGlzdC5tYXAoY2hpbGQgPT4gY2hpbGQueSAtPSBjb250ZW50WSk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEdldEdhbWVDb21tb25VSUFzc2V0cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNvbW1vblVJQXNzZXRzTGlzdCA9IFtcclxuICAgICAgICAuLi5HZXRTY3JvbGxBc3NldHMoKSxcclxuICAgICAgICAuLi5HZXRGdWxsU2NyZWVuQXNzZXRzKCksXHJcbiAgICAgICAgLi4uR2V0UG9wVXBBc3NldHMoKSxcclxuICAgICAgICAuLi5HZXRHYWdlQXNzZXRzKCdibHVlJyksXHJcbiAgICAgICAgLi4uR2V0R2FtZUF1ZGlvVUlBc3NldHMoKSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gY29tbW9uVUlBc3NldHNMaXN0O1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lQ29tbW9uVUkgPSAoc2NlbmUsIGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIENyZWF0ZUdhbWVJbnB1dChzY2VuZSk7XHJcbiAgICBDcmVhdGVGdWxsU2NyZWVuKHNjZW5lKTtcclxuICAgIENyZWF0ZUdhbWVTY3JvbGwoc2NlbmUpO1xyXG4gICAgQ3JlYXRlR2FtZUdlc3R1cmUoc2NlbmUpO1xyXG4gICAgQ3JlYXRlR2FtZUF1ZGlvVUkoc2NlbmUpO1xyXG59O1xyXG5jb25zdCBVcGRhdGVHYW1lQ29tbW9uVUkgPSAoZGVsdGEpID0+IHtcclxuICAgIFVwZGF0ZUdhbWVHZXN0dXJlKGRlbHRhKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgVUlQcm9wcztcclxuZXhwb3J0IHsgU2V0Q29tbW9uVUlQcm9wcywgU2V0VUlQcm9wcywgQ3JlYXRlVUlCdG5BbmltLCBTZXRFbGVtZW50SW5NaWRkbGUsIEdldEdhbWVDb21tb25VSUFzc2V0cywgQ3JlYXRlR2FtZUNvbW1vblVJLCBVcGRhdGVHYW1lQ29tbW9uVUksIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgU2V0dGluZ0NvbnRleHRNYXJnaW4sIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbkxhcmdlciB9IGZyb20gJy4nO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuLi9kZXB0aCc7XHJcbmltcG9ydCB7IENvbnRleHRNYXJnaW5ILCBDb250ZXh0TWFyZ2luVywgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUsIFR4dFRpdGxlSGVhZFNpemUsIFR4dFRpdGxlSGVpZ2h0R2FwIH0gZnJvbSAnLi4vZm9udCc7XHJcbmltcG9ydCBHYW1lVGltZSBmcm9tICcuL3RpbWUnO1xyXG5pbXBvcnQgeyBTdGFydFRpdGxlIH0gZnJvbSAnLi4vdGl0bGUnO1xyXG5pbXBvcnQgeyBTdG9wR2FtZSB9IGZyb20gJy4uL2dhbWUnO1xyXG5pbXBvcnQgeyBDcmVhdGVHYWdlQmFyIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvZ2FnZSc7XHJcbmltcG9ydCBVSVByb3BzIGZyb20gJ0BzcmMvc2NlbmVzL3VpJztcclxuY29uc3QgU2V0dGluZyA9IHtcclxuICAgIGJ0bjogbnVsbCxcclxuICAgIGxheWVyOiBbXSxcclxuICAgIGxheWVyRGF0YToge1xyXG4gICAgICAgIHR4dEdhcDogNTAsXHJcbiAgICAgICAgY29udHJvbFR4dExpc3Q6IFsnRnVsbFNjcmVlbicsICdOb3JtYWwnXSxcclxuICAgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIGV4aXRCdG46IG51bGwsXHJcbiAgICBpc09wZW46IGZhbHNlLFxyXG4gICAgaXNUd2luZzogZmFsc2UsXHJcbn07XHJcbmNvbnN0IEluaXRTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBTZXR0aW5nLmlzVHdpbmcgPSBmYWxzZTtcclxuICAgIEhpZGVTZXR0aW5nKHNjZW5lKTtcclxufTtcclxuY29uc3QgQ3JlYXRlU2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgeyBtYXJnaW4sIGFscGhhLCBzY2FsZSB9ID0gVUlQcm9wcztcclxuICAgIFNldHRpbmcuYnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcudyAtIG1hcmdpbiwgbWFyZ2luLCAnc2V0dGluZ0J0bicpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0U2NhbGUoc2NhbGUpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0QWxwaGEoYWxwaGEpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIFNldHRpbmcuYnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IFNldHRpbmcuaXNUd2luZyB8fCBBbmltU2hvd1NldHRpbmcoc2NlbmUpOyB9KTtcclxuICAgIC8vIFNldHRpbmcubGF5ZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKCk7XHJcbiAgICAvLyBTZXR0aW5nLmxheWVyID0gc2NlbmUuYWRkLmxheWVyKCk7XHJcbiAgICBjb25zdCBiZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJ2JsYWNrU2NyZWVuJyk7XHJcbiAgICBiZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgYmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgYmcuc2V0QWxwaGEoMC40KTtcclxuICAgIGNvbnN0IHBhbmVsID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnc2V0dGluZ1BhbmVsJyk7XHJcbiAgICBwYW5lbC5zZXREaXNwbGF5U2l6ZShWaWV3LncgLSBDb250ZXh0TWFyZ2luVywgVmlldy5oIC0gQ29udGV4dE1hcmdpbkgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSAtIChUeHRUaXRsZUhlaWdodEdhcCAqIDMpLCAnU2V0dGluZycpO1xyXG4gICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUodGl0bGUpO1xyXG4gICAgdGl0bGUuc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICBjb25zdCBiZ21CdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSBWaWV3LmggLyA2LCAnbXVzaWNPbicpO1xyXG4gICAgY29uc3QgYmdtR2FnZSA9IENyZWF0ZUdhZ2VCYXIoc2NlbmUsIFZpZXcuY2VudGVyWCwgYmdtQnRuLnkgKyBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbiwgKG1pbiwgbWF4LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldEJnbVZvbHVtZShjdXJyIC8gMTAwKTtcclxuICAgIH0pO1xyXG4gICAgYmdtR2FnZS5zZXRHYWdlTnVtKEdhbWVBdWRpby5iZ21Wb2x1bWUgKiAxMDApO1xyXG4gICAgY29uc3Qgc2Z4QnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgYmdtR2FnZS55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sICdhdWRpb09uJyk7XHJcbiAgICBjb25zdCBzZnhHYWdlID0gQ3JlYXRlR2FnZUJhcihzY2VuZSwgVmlldy5jZW50ZXJYLCBzZnhCdG4ueSArIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCAobWluLCBtYXgsIGN1cnIpID0+IHtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4Vm9sdW1lKGN1cnIgLyAxMDApO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgfSk7XHJcbiAgICBzZnhHYWdlLnNldEdhZ2VOdW0oR2FtZUF1ZGlvLnNmeFZvbHVtZSAqIDEwMCk7XHJcbiAgICBbYmdtQnRuLCBzZnhCdG5dLm1hcCgoYnRuKSA9PiB7XHJcbiAgICAgICAgYnRuLnNldFNjYWxlKDAuNik7XHJcbiAgICAgICAgYnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICB9KTtcclxuICAgIGJnbUJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzT24gPSBiZ21CdG4udGV4dHVyZS5rZXkgPT09ICdtdXNpY09uJztcclxuICAgICAgICBiZ21HYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIGJnbUJ0bi5zZXRUZXh0dXJlKGlzT24gPyAnbXVzaWNPZmYnIDogJ211c2ljT24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0QmdtTXV0ZShpc09uKTtcclxuICAgIH0pO1xyXG4gICAgc2Z4QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNPbiA9IHNmeEJ0bi50ZXh0dXJlLmtleSA9PT0gJ2F1ZGlvT24nO1xyXG4gICAgICAgIHNmeEdhZ2Uuc2V0QWJsZSghaXNPbik7XHJcbiAgICAgICAgc2Z4QnRuLnNldFRleHR1cmUoaXNPbiA/ICdhdWRpb09mZicgOiAnYXVkaW9PbicpO1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRTZnhNdXRlKGlzT24pO1xyXG4gICAgfSk7XHJcbiAgICBiZ21CdG4uc2V0VGV4dHVyZShHYW1lQXVkaW8uaXNCZ21NdXRlID8gJ211c2ljT2ZmJyA6ICdtdXNpY09uJyk7XHJcbiAgICBzZnhCdG4uc2V0VGV4dHVyZShHYW1lQXVkaW8uaXNTZnhNdXRlID8gJ2F1ZGlvT2ZmJyA6ICdhdWRpb09uJyk7XHJcbiAgICBiZ21HYWdlLnNldEFibGUoIUdhbWVBdWRpby5pc0JnbU11dGUpO1xyXG4gICAgc2Z4R2FnZS5zZXRBYmxlKCFHYW1lQXVkaW8uaXNTZnhNdXRlKTtcclxuICAgIGNvbnN0IHsgdHh0R2FwIH0gPSBTZXR0aW5nLmxheWVyRGF0YTtcclxuICAgIC8vIGFkZCBiYWNrIHRvIHRpdGxlIGJ0blxyXG4gICAgY29uc3QgYmFjazJUaXRsZUJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgc2Z4R2FnZS55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW5MYXJnZXIsICdzZXR0aW5nT3ZlckJ0blVwJykuc2V0U2NhbGUoMS4yKTtcclxuICAgIGNvbnN0IGJhY2syVGl0bGUgPSBzY2VuZS5hZGQuaW1hZ2UoYmFjazJUaXRsZUJnLngsIGJhY2syVGl0bGVCZy55IC0gNCwgJ292ZXJCYWNrJyk7XHJcbiAgICBiYWNrMlRpdGxlLnNldFNjYWxlKDAuNikuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJhY2syVGl0bGUuZG93blBvc1kgPSBiYWNrMlRpdGxlLnkgKyA0O1xyXG4gICAgYmFjazJUaXRsZS51cFBvc1kgPSBiYWNrMlRpdGxlLnk7XHJcbiAgICBiYWNrMlRpdGxlLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICBiYWNrMlRpdGxlQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5Eb3duJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZS5zZXRQb3NpdGlvbihiYWNrMlRpdGxlLngsIGJhY2syVGl0bGUuZG93blBvc1kpO1xyXG4gICAgfSk7XHJcbiAgICBiYWNrMlRpdGxlLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZUJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgICAgICBiYWNrMlRpdGxlLnNldFBvc2l0aW9uKGJhY2syVGl0bGUueCwgYmFjazJUaXRsZS51cFBvc1kpO1xyXG4gICAgICAgIGlmIChiYWNrMlRpdGxlLmlzQ2hhbmdpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoIXNjZW5lLnNjZW5lLmlzQWN0aXZlKCd0aXRsZScpKSB7XHJcbiAgICAgICAgICAgIFN0b3BHYW1lKHNjZW5lKTtcclxuICAgICAgICAgICAgU3RhcnRUaXRsZShzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgQW5pbUhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgYmFjazJUaXRsZS5pc0NoYW5naW5nID0gZmFsc2U7IH0sIDUwMCk7XHJcbiAgICB9KTtcclxuICAgIGJhY2syVGl0bGUub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgYmFjazJUaXRsZUJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgICAgICBiYWNrMlRpdGxlLnNldFBvc2l0aW9uKGJhY2syVGl0bGUueCwgYmFjazJUaXRsZS51cFBvc1kpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYWNrMlRpdGxlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmFjazJUaXRsZUJnLngsIGJhY2syVGl0bGVCZy55ICsgdHh0R2FwLCAnR28gdG8gVGl0bGUnKTtcclxuICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGJhY2syVGl0bGVUeHQpO1xyXG4gICAgYmFjazJUaXRsZVR4dC5zZXRGb250U2l6ZSgxNik7XHJcbiAgICBjb25zdCBiYWNrMlRpdGxlTGlzdCA9IFtiYWNrMlRpdGxlQmcsIGJhY2syVGl0bGUsIGJhY2syVGl0bGVUeHRdO1xyXG4gICAgLy8gLy8gYWRkIHNjcmVlbiBzaXplIGNvbnRyb2xsZXJcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYICsgY29udHJvbEdhcCwgYmFjazJUaXRsZUJnLnksICdzZXR0aW5nT3ZlckJ0blVwJykuc2V0U2NhbGUoMS4yKTtcclxuICAgIC8vIGxldCBzaXplQ29udHJvbGxlciA9IHNjZW5lLmFkZC5pbWFnZShzaXplQ29udHJvbGxlckJnLngsIHNpemVDb250cm9sbGVyQmcueSAtIDQsICdzY3JlZW5MYXJnZXInKSBhcyBUVG9nZ2xlQnRuSW1nO1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIuc2V0U2NhbGUoMC42KS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIuZG93blBvc1kgPSBzaXplQ29udHJvbGxlci55ICsgNDtcclxuICAgIC8vIHNpemVDb250cm9sbGVyLnVwUG9zWSA9IHNpemVDb250cm9sbGVyLnk7XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgc2l6ZUNvbnRyb2xsZXJCZy5zZXRUZXh0dXJlKCdzZXR0aW5nT3ZlckJ0bkRvd24nKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5zZXRQb3NpdGlvbihzaXplQ29udHJvbGxlci54LCBzaXplQ29udHJvbGxlci5kb3duUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyRXhpdEV2dCA9ICgpID0+IHtcclxuICAgIC8vICAgICBTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgIC8vICAgICBzY2VuZS5zY2FsZS5zdG9wRnVsbHNjcmVlbigpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFRleHR1cmUoJ3NjcmVlbkxhcmdlcicpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sVHh0LnNldFRleHQoY29udHJvbFR4dExpc3RbMF0pO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyVG9nZ2xlRXZ0ID0gKCkgPT4ge1xyXG4gICAgLy8gICAgIFNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbiA9ICFTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW47XHJcbiAgICAvLyAgICAgaWYgKFNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbikge1xyXG4gICAgLy8gICAgICAgICBzY2VuZS5zY2FsZS5zdGFydEZ1bGxzY3JlZW4oKTtcclxuICAgIC8vICAgICAgICAgc2l6ZUNvbnRyb2xsZXIuc2V0VGV4dHVyZSgnc2NyZWVuU21hbGxlcicpO1xyXG4gICAgLy8gICAgICAgICBzaXplQ29udHJvbFR4dC5zZXRUZXh0KGNvbnRyb2xUeHRMaXN0WzFdKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgZWxzZSBzaXplQ29udHJvbGxlckV4aXRFdnQoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5VcCcpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFBvc2l0aW9uKHNpemVDb250cm9sbGVyLngsIHNpemVDb250cm9sbGVyLnVwUG9zWSk7XHJcbiAgICAvLyAgICAgaWYgKHNpemVDb250cm9sbGVyLmlzQ2hhbmdpbmcpIHJldHVybjtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5pc0NoYW5naW5nID0gdHJ1ZTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlclRvZ2dsZUV2dCgpO1xyXG4gICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4geyBzaXplQ29udHJvbGxlci5pc0NoYW5naW5nID0gZmFsc2U7IH0sIDMwMCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHNpemVDb250cm9sbGVyLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5VcCcpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFBvc2l0aW9uKHNpemVDb250cm9sbGVyLngsIHNpemVDb250cm9sbGVyLnVwUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sVHh0ID0gc2NlbmUuYWRkLnRleHQoc2l6ZUNvbnRyb2xsZXJCZy54LCBzaXplQ29udHJvbGxlckJnLnkgKyB0eHRHYXAsIGNvbnRyb2xUeHRMaXN0WzBdKTtcclxuICAgIC8vIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKHNpemVDb250cm9sVHh0KTtcclxuICAgIC8vIHNpemVDb250cm9sVHh0LnNldEZvbnRTaXplKDE2KTtcclxuICAgIC8vIC8vIHJlc2l6ZSBldmVudCBmb3Igc3RvcCBmdWxsIHNjcmVlblxyXG4gICAgLy8gc2NlbmUuc2NhbGUub2ZmKCdyZXNpemUnKTtcclxuICAgIC8vIHNjZW5lLnNjYWxlLm9uKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgaWYgKHNpemVDb250cm9sbGVyLmlzQ2hhbmdpbmcpIHJldHVybjtcclxuICAgIC8vICAgICBpZiAoIVNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbikgcmV0dXJuO1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyRXhpdEV2dCgpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbGxlckxpc3QgPSBbIHNpemVDb250cm9sbGVyQmcsIHNpemVDb250cm9sbGVyLCBzaXplQ29udHJvbFR4dCBdO1xyXG4gICAgLy8gY29uc3QgaG93Q29udGV4dCA9IENyZWF0ZUhvdyhzY2VuZSk7XHJcbiAgICAvLyBjb25zdCBob3dCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBzaXplQ29udHJvbFR4dC55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sICdidG5TZXR0aW5nVXAnKSBhcyBUVG9nZ2xlQnRuSW1nO1xyXG4gICAgLy8gaG93QnRuLnNldEludGVyYWN0aXZlKCkuc2V0U2NhbGUoMSk7XHJcbiAgICAvLyBob3dCdG4uZG93blBvc1kgPSBob3dCdG4ueSArIDQ7XHJcbiAgICAvLyBob3dCdG4udXBQb3NZID0gaG93QnRuLnk7XHJcbiAgICAvLyBob3dCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIGhvd0J0bi5zZXRUZXh0dXJlKCdidG5TZXR0aW5nRG93bicpO1xyXG4gICAgLy8gICAgIGhvd1R4dC5zZXRQb3NpdGlvbihob3dUeHQueCwgaG93QnRuLmRvd25Qb3NZKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gaG93QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAvLyAgICAgaG93QnRuLnNldFRleHR1cmUoJ2J0blNldHRpbmdVcCcpO1xyXG4gICAgLy8gICAgIGhvd1R4dC5zZXRQb3NpdGlvbihob3dUeHQueCwgaG93QnRuLnVwUG9zWSk7XHJcbiAgICAvLyAgICAgaG93Q29udGV4dC5zaG93KCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGhvd0J0bi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgIC8vICAgICBob3dCdG4uc2V0VGV4dHVyZSgnYnRuU2V0dGluZ1VwJyk7XHJcbiAgICAvLyAgICAgaG93VHh0LnNldFBvc2l0aW9uKGhvd1R4dC54LCBob3dCdG4udXBQb3NZKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gY29uc3QgaG93VHh0ID0gc2NlbmUuYWRkLnRleHQoaG93QnRuLngsIGhvd0J0bi55LCAnaG93Jyk7XHJcbiAgICAvLyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShob3dUeHQpO1xyXG4gICAgLy8gaG93VHh0LnNldEZvbnRTaXplKFR4dFRpdGxlU2l6ZSk7XHJcbiAgICAvLyBjb25zdCBob3dMaXN0ID0gWyBob3dCdG4sIGhvd1R4dCwgaG93Q29udGV4dCBdO1xyXG4gICAgLy8gU2V0dGluZy5sYXllci5hZGQoW1xyXG4gICAgLy8gICAgIGJnLCBwYW5lbCwgdGl0bGUsXHJcbiAgICAvLyAgICAgYmdtQnRuLCBzZnhCdG4sXHJcbiAgICAvLyAgICAgYmdtR2FnZSwgc2Z4R2FnZSxcclxuICAgIC8vICAgICAuLi5iYWNrMlRpdGxlTGlzdCxcclxuICAgIC8vICAgICAvLyAuLi5zaXplQ29udHJvbGxlckxpc3QsXHJcbiAgICAvLyBdKTtcclxuICAgIC8vIFNldHRpbmcubGF5ZXIuYWRkKFxyXG4gICAgLy8gICAgIGJnLCBwYW5lbCwgdGl0bGUsXHJcbiAgICAvLyAgICAgYmdtQnRuLCBzZnhCdG4sXHJcbiAgICAvLyAgICAgYmdtR2FnZSwgc2Z4R2FnZSxcclxuICAgIC8vICAgICAvLyAuLi5iYWNrMlRpdGxlTGlzdCxcclxuICAgIC8vICAgICAvLyAuLi5zaXplQ29udHJvbGxlckxpc3QsXHJcbiAgICAvLyApO1xyXG4gICAgU2V0dGluZy5sYXllci5wdXNoKGJnKTtcclxuICAgIFNldHRpbmcubGF5ZXIucHVzaChwYW5lbCk7XHJcbiAgICBTZXR0aW5nLmxheWVyLnB1c2godGl0bGUpO1xyXG4gICAgU2V0dGluZy5sYXllci5wdXNoKGJnbUJ0bik7XHJcbiAgICBTZXR0aW5nLmxheWVyLnB1c2goc2Z4QnRuKTtcclxuICAgIFNldHRpbmcubGF5ZXIucHVzaChiZ21HYWdlKTtcclxuICAgIFNldHRpbmcubGF5ZXIucHVzaChzZnhHYWdlKTtcclxuICAgIGJhY2syVGl0bGVMaXN0Lm1hcCgoY2hpbGQpID0+IHtcclxuICAgICAgICBTZXR0aW5nLmxheWVyLnB1c2goY2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBleGl0IGJ0biAmIGxhc3QgY29udGFpbmVyIHNldHVwXHJcbiAgICBTZXR0aW5nLmV4aXRCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy53IC0gU2V0dGluZ0NvbnRleHRNYXJnaW4sIFNldHRpbmdDb250ZXh0TWFyZ2luLCAnZXhpdEJ0bicpLnNldFNjYWxlKDAuNik7XHJcbiAgICBTZXR0aW5nLmV4aXRCdG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIEFuaW1IaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICB9KTtcclxuICAgIFtTZXR0aW5nLmJ0biwgLi4uU2V0dGluZy5sYXllciwgU2V0dGluZy5leGl0QnRuXS5tYXAoZWxlID0+IFNldERlcHRoKGVsZSwgJ3NldHRpbmcnKSk7XHJcbiAgICBJbml0U2V0dGluZyhzY2VuZSk7XHJcbiAgICByZXR1cm4gU2V0dGluZztcclxufTtcclxuLy8gdHlwZSBUR2FnZUNvbnRhaW5lciA9IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIgJiB7XHJcbi8vICAgICBnYWdlTnVtOiBudW1iZXI7XHJcbi8vICAgICBnYWdlTnVtTWluOiBudW1iZXI7XHJcbi8vICAgICBnYWdlTnVtTWF4OiBudW1iZXI7XHJcbi8vICAgICBnYWdlUG9zWDogbnVtYmVyO1xyXG4vLyAgICAgZ2FnZVBvc1hNaW46IG51bWJlcjtcclxuLy8gICAgIGdhZ2VQb3NYTWF4OiBudW1iZXI7XHJcbi8vICAgICBnYWdlUG9zWExlbmd0aDogbnVtYmVyO1xyXG4vLyAgICAgaXNBYmxlOiBib29sZWFuO1xyXG4vLyAgICAgc2V0R2FnZUhhbmRsZUZyYW1lOiAoaXNEb3duOiBib29sZWFuKSA9PiB2b2lkO1xyXG4vLyAgICAgc2V0R2FnZUJhclNpemU6IChnYWdlUG9zOiBudW1iZXIpID0+IHZvaWQ7XHJcbi8vICAgICBzZXRHYWdlTnVtOiAoZ2FnZU51bTogbnVtYmVyKSA9PiB2b2lkO1xyXG4vLyAgICAgc2V0R2FnZTogKCkgPT4gdm9pZDtcclxuLy8gICAgIHNldEFibGU6IChpc0FibGU6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbi8vIH07XHJcbi8vIGNvbnN0IEdhZ2VIZWlnaHQgPSAyMDtcclxuLy8gY29uc3QgQ3JlYXRlR2FnZUJhciA9IChcclxuLy8gICAgIHNjZW5lOiBQaGFzZXIuU2NlbmUsIHg6IG51bWJlciwgeTogbnVtYmVyLFxyXG4vLyAgICAgZW5kTW92ZUNhbGxiYWNrPzogKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgY3VycjogbnVtYmVyKSA9PiB2b2lkLFxyXG4vLyAgICAgZ2FnZU51bU1pbjogbnVtYmVyID0gMCwgZ2FnZU51bU1heDogbnVtYmVyID0gMTAwLFxyXG4vLyApID0+IHtcclxuLy8gICAgIGNvbnN0IGNvbjogVEdhZ2VDb250YWluZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKHgsIHkpIGFzIFRHYWdlQ29udGFpbmVyO1xyXG4vLyAgICAgY29uLmdhZ2VOdW1NaW4gPSBnYWdlTnVtTWluO1xyXG4vLyAgICAgY29uLmdhZ2VOdW1NYXggPSBnYWdlTnVtTWF4O1xyXG4vLyAgICAgY29uLmdhZ2VOdW0gPSAoY29uLmdhZ2VOdW1NaW4gKyBjb24uZ2FnZU51bU1heCkgLyAyO1xyXG4vLyAgICAgY29uc3QgZ2FnZUJnID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdjb2xvckJhY2tncm91bmQnKTtcclxuLy8gICAgIGNvbnN0IGdhZ2VCYXIgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ2J0bkJsdWUnKTtcclxuLy8gICAgIGNvbnN0IGdhZ2VCYXJIYW5kbGUgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ2NvbG9ySGFuZGxlJyk7XHJcbi8vICAgICBjb25zdCBnYWdlVHh0ID0gc2NlbmUuYWRkLnRleHQoMCwgMCwgY29uLmdhZ2VOdW0udG9TdHJpbmcoKSk7XHJcbi8vICAgICBnYWdlQmcuc2V0RGlzcGxheVNpemUoVmlldy5jZW50ZXJYLCBHYWdlSGVpZ2h0KTtcclxuLy8gICAgIGdhZ2VCYXIuc2V0RGlzcGxheVNpemUoVmlldy5jZW50ZXJYLzIsIEdhZ2VIZWlnaHQpO1xyXG4vLyAgICAgZ2FnZUJhci5zZXRPcmlnaW4oMCwgMC41KTtcclxuLy8gICAgIGdhZ2VCYXIuc2V0UG9zaXRpb24oLVZpZXcuY2VudGVyWC8yLCAwKTtcclxuLy8gICAgIGdhZ2VUeHQuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbi8vICAgICBnYWdlVHh0LnNldFBvc2l0aW9uKFZpZXcuY2VudGVyWC8yICsgVHh0TWFyZ2luIC0gNSwgMCk7XHJcbi8vICAgICBjb24uYWRkKFsgZ2FnZUJnLCBnYWdlQmFyLCBnYWdlQmFySGFuZGxlLCBnYWdlVHh0IF0pO1xyXG4vLyAgICAgY29uLmdhZ2VQb3NYID0gMDtcclxuLy8gICAgIGNvbi5nYWdlUG9zWE1pbiA9IC1nYWdlQmcud2lkdGgvMiAtIGdhZ2VCYXJIYW5kbGUud2lkdGgvMjtcclxuLy8gICAgIGNvbi5nYWdlUG9zWE1heCA9IGdhZ2VCZy53aWR0aC8yICsgZ2FnZUJhckhhbmRsZS53aWR0aC8yO1xyXG4vLyAgICAgY29uLmdhZ2VQb3NYTGVuZ3RoID0gZ2FnZUJnLndpZHRoICsgZ2FnZUJhckhhbmRsZS53aWR0aDtcclxuLy8gICAgIGNvbi5zZXRHYWdlSGFuZGxlRnJhbWUgPSAoaXNEb3duOiBib29sZWFuKSA9PiB7XHJcbi8vICAgICAgICAgZ2FnZUJhckhhbmRsZS5zZXRUZXh0dXJlKGlzRG93biA/ICdjb2xvckhhbmRsZURvd24nIDogJ2NvbG9ySGFuZGxlJyk7XHJcbi8vICAgICB9O1xyXG4vLyAgICAgY29uLnNldEdhZ2VCYXJTaXplID0gKGdhZ2VQb3M6IG51bWJlcikgPT4ge1xyXG4vLyAgICAgICAgIGxldCBnYWdlUG9zWCA9IGdhZ2VQb3M7XHJcbi8vICAgICAgICAgaWYgKGdhZ2VQb3NYIDw9IGNvbi5nYWdlUG9zWE1pbikgZ2FnZVBvc1ggPSBjb24uZ2FnZVBvc1hNaW47XHJcbi8vICAgICAgICAgZWxzZSBpZiAoZ2FnZVBvc1ggPj0gY29uLmdhZ2VQb3NYTWF4KSBnYWdlUG9zWCA9IGNvbi5nYWdlUG9zWE1heDtcclxuLy8gICAgICAgICBjb24uZ2FnZVBvc1ggPSBnYWdlUG9zWDtcclxuLy8gICAgICAgICBjb24uZ2FnZU51bSA9IE1hdGguZmxvb3IoKGNvbi5nYWdlTnVtTWF4IC0gY29uLmdhZ2VOdW1NaW4pICogTWF0aC5hYnMoZ2FnZVBvc1ggLSBjb24uZ2FnZVBvc1hNaW4pIC8gY29uLmdhZ2VQb3NYTGVuZ3RoKTtcclxuLy8gICAgICAgICBjb24uc2V0R2FnZSgpO1xyXG4vLyAgICAgfTtcclxuLy8gICAgIGNvbi5zZXRHYWdlTnVtID0gKGdhZ2VOdW06IG51bWJlcikgPT4ge1xyXG4vLyAgICAgICAgIGxldCBnYWdlTnVtYmVyID0gZ2FnZU51bTtcclxuLy8gICAgICAgICBpZiAoZ2FnZU51bWJlciA8IGNvbi5nYWdlTnVtTWluKSBnYWdlTnVtYmVyID0gY29uLmdhZ2VOdW1NaW47XHJcbi8vICAgICAgICAgZWxzZSBpZiAoZ2FnZU51bWJlciA+IGNvbi5nYWdlTnVtTWF4KSBnYWdlTnVtYmVyID0gY29uLmdhZ2VOdW1NYXg7XHJcbi8vICAgICAgICAgY29uLmdhZ2VOdW0gPSBnYWdlTnVtYmVyO1xyXG4vLyAgICAgICAgIGNvbi5nYWdlUG9zWCA9IChjb24uZ2FnZU51bSAqIGNvbi5nYWdlUG9zWExlbmd0aCAvIGNvbi5nYWdlTnVtTWF4KSAtIGNvbi5nYWdlUG9zWE1heDtcclxuLy8gICAgICAgICBjb24uc2V0R2FnZSgpO1xyXG4vLyAgICAgfTtcclxuLy8gICAgIGNvbi5zZXRHYWdlID0gKCkgPT4ge1xyXG4vLyAgICAgICAgIGdhZ2VCYXIuc2V0RGlzcGxheVNpemUoY29uLmdhZ2VQb3NYICsgZ2FnZUJhci53aWR0aC8yICsgZ2FnZUJhckhhbmRsZS53aWR0aC8yLCBHYWdlSGVpZ2h0KTtcclxuLy8gICAgICAgICBnYWdlQmFySGFuZGxlLnNldFBvc2l0aW9uKGNvbi5nYWdlUG9zWCwgMCk7XHJcbi8vICAgICAgICAgZ2FnZVR4dC5zZXRUZXh0KGNvbi5nYWdlTnVtLnRvRml4ZWQoMCkpO1xyXG4vLyAgICAgfTtcclxuLy8gICAgIGNvbi5zZXRBYmxlID0gKGlzQWJsZTogYm9vbGVhbikgPT4ge1xyXG4vLyAgICAgICAgIGNvbi5pc0FibGUgPSBpc0FibGU7XHJcbi8vICAgICAgICAgY29uLmlzQWJsZSA/IGNvbi5zZXRBbHBoYSgxKSA6IGNvbi5zZXRBbHBoYSgwLjUpO1xyXG4vLyAgICAgfTtcclxuLy8gICAgIGNvbi5zZXRBYmxlKHRydWUpO1xyXG4vLyAgICAgZ2FnZUJhckhhbmRsZS5zZXRJbnRlcmFjdGl2ZSh7IGRyYWdnYWJsZTogdHJ1ZSB9KTtcclxuLy8gICAgIGdhZ2VCYXJIYW5kbGUub24oJ2RyYWdzdGFydCcsICgpID0+IHtcclxuLy8gICAgICAgICBjb24uaXNBYmxlICYmIGNvbi5zZXRHYWdlSGFuZGxlRnJhbWUodHJ1ZSk7XHJcbi8vICAgICB9KTtcclxuLy8gICAgIGdhZ2VCYXJIYW5kbGUub24oJ2RyYWcnLCAocHRyLCBkcmFnWCkgPT4ge1xyXG4vLyAgICAgICAgIGNvbi5pc0FibGUgJiYgY29uLnNldEdhZ2VCYXJTaXplKGRyYWdYKTtcclxuLy8gICAgIH0pO1xyXG4vLyAgICAgZ2FnZUJhckhhbmRsZS5vbignZHJhZ2VuZCcsICgpID0+IHtcclxuLy8gICAgICAgICBpZiAoY29uLmlzQWJsZSkge1xyXG4vLyAgICAgICAgICAgICBjb24uc2V0R2FnZUhhbmRsZUZyYW1lKGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgZW5kTW92ZUNhbGxiYWNrICYmIGVuZE1vdmVDYWxsYmFjayhjb24uZ2FnZU51bU1pbiwgY29uLmdhZ2VOdW1NYXgsIGNvbi5nYWdlTnVtKTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gICAgIHJldHVybiBjb247XHJcbi8vIH07XHJcbmNvbnN0IEFuaW1TaG93U2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgU2V0dGluZy5pc1R3aW5nID0gdHJ1ZTtcclxuICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgIGZyb206IDAsIHRvOiA2MCwgZHVyYXRpb246IDEyMCxcclxuICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7IFNldHRpbmcuYnRuLnNldEFuZ2xlKGRhdGEudmFsdWUpOyB9LFxyXG4gICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZy5pc1R3aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFNob3dTZXR0aW5nKHNjZW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuY29uc3QgQW5pbUhpZGVTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBTZXR0aW5nLmlzVHdpbmcgPSB0cnVlO1xyXG4gICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICBIaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgZnJvbTogMTgwLCB0bzogMCwgZHVyYXRpb246IDEyMCxcclxuICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7IFNldHRpbmcuYnRuLnNldEFuZ2xlKGRhdGEudmFsdWUpOyB9LFxyXG4gICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHsgU2V0dGluZy5pc1R3aW5nID0gZmFsc2U7IH1cclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCBTaG93U2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgR2FtZVRpbWUuc2V0VGltZVNjYWxlKHNjZW5lLCBHYW1lVGltZS5zaG93U2V0dGluZ1RpbWVTY2FsZSk7XHJcbiAgICBTZXR0aW5nLmlzT3BlbiA9IHRydWU7XHJcbiAgICBTZXR0aW5nLmxheWVyLm1hcChsYXllckNoaWxkID0+IGxheWVyQ2hpbGQuc2V0VmlzaWJsZSAmJiBsYXllckNoaWxkLnNldFZpc2libGUodHJ1ZSkpO1xyXG4gICAgU2V0dGluZy5leGl0QnRuLnNldFZpc2libGUodHJ1ZSk7XHJcbn07XHJcbmNvbnN0IEhpZGVTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBHYW1lVGltZS5zZXRUaW1lU2NhbGUoc2NlbmUsIEdhbWVUaW1lLmhpZGVTZXR0aW5nVGltZVNjYWxlKTtcclxuICAgIFNldHRpbmcuaXNPcGVuID0gZmFsc2U7XHJcbiAgICBTZXR0aW5nLmxheWVyLm1hcChsYXllckNoaWxkID0+IGxheWVyQ2hpbGQuc2V0VmlzaWJsZSAmJiBsYXllckNoaWxkLnNldFZpc2libGUoZmFsc2UpKTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5zZXRWaXNpYmxlKGZhbHNlKTtcclxufTtcclxuY29uc3QgU2hvd1NldHRpbmdCdG4gPSAoc2NlbmUpID0+IHtcclxuICAgIEhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgIFNldHRpbmcuYnRuLnNldFZpc2libGUodHJ1ZSk7XHJcbn07XHJcbmNvbnN0IEhpZGVTZXR0aW5nQnRuID0gKHNjZW5lKSA9PiB7XHJcbiAgICBIaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICBTZXR0aW5nLmJ0bi5zZXRWaXNpYmxlKGZhbHNlKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZztcclxuZXhwb3J0IHsgSW5pdFNldHRpbmcsIENyZWF0ZVNldHRpbmcsIEFuaW1TaG93U2V0dGluZywgQW5pbUhpZGVTZXR0aW5nLCBTaG93U2V0dGluZywgSGlkZVNldHRpbmcsIFNob3dTZXR0aW5nQnRuLCBIaWRlU2V0dGluZ0J0biwgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IEJsb2NrU3lzdGVtIGZyb20gJy4uL2Jsb2NrL3N5c3RlbSc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgeyBUeHRBbHBoYSwgVHh0QmFja2dyb3VuZENvbG9yLCBUeHRGYW1pbHksIFR4dE1hcmdpbiwgVHh0UGFkZGluZywgVHh0U2l6ZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgR2FtZU92ZXIgZnJvbSAnLi9nYW1lb3Zlcic7XHJcbmltcG9ydCB7IEhpZGVTZXR0aW5nQnRuIH0gZnJvbSAnLi9zZXR0aW5nJztcclxuY29uc3QgR2FtZVRpbWUgPSB7XHJcbiAgICB0eHQ6IG51bGwsXHJcbiAgICBsYXN0MTBUeHQ6IG51bGwsXHJcbiAgICBsYXN0MTBQcmV2VGltZTogMTEsXHJcbiAgICBpc0xhc3QxMEhhc09uY2VDbnQ6IHRydWUsXHJcbiAgICBpc0dhbWVUaW1lRW5kT25jZUNudDogdHJ1ZSxcclxuICAgIGlzRmlyc3RMYXN0MTBIYXNPbmNlQ250OiB0cnVlLFxyXG4gICAgc3RhbmRieVRpbWU6IDMgKiAxMDAwLFxyXG4gICAgaW5pdDogNjAgKiAxMDAwLFxyXG4gICAgY3VycjogNjAgKiAxMDAwLFxyXG4gICAgbGFzdDEwOiAxMCAqIDEwMDAsXHJcbiAgICBpbmNyZWFzZWRUaW1lOiAwLFxyXG4gICAgLy8gYW5pbSBvcHRpb25cclxuICAgIGFuaW1JbmNyZWFzZVRpbWVEdXJhdGlvbjogNDAwLFxyXG4gICAgYW5pbVR3OiBudWxsLFxyXG4gICAgYW5pbVR3U2NhbGVNaW46IDEsXHJcbiAgICBhbmltVHdTY2FsZU1heDogMS40LFxyXG4gICAgaXNUd2luZzogZmFsc2UsXHJcbiAgICAvLyB0aW1lIHNjYWxlIG9wdGlvblxyXG4gICAgdGltZVNjYWxlOiAxLFxyXG4gICAgc2hvd1NldHRpbmdUaW1lU2NhbGU6IDAuMSxcclxuICAgIGhpZGVTZXR0aW5nVGltZVNjYWxlOiAxLFxyXG4gICAgc25kTGFzdDEwVm9pY2U6IGZ1bmN0aW9uIChzY2VuZSwgdGltZSkge1xyXG4gICAgICAgIC8vIHNjZW5lLnNvdW5kLnBsYXkoJ3ZvaWNlJyArIHRpbWUpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZScgKyB0aW1lKTtcclxuICAgICAgICB0aGlzLmxhc3QxMFR4dC5zZXRUZXh0KHRpbWUpO1xyXG4gICAgfSxcclxuICAgIGluY3JlYXNlVGltZTogZnVuY3Rpb24gKHRpbWUpIHtcclxuICAgICAgICAvLyBsYXN0IDEwIHNlY29uZHMgbGVmdCBzbyBpbmNyZWFzaW5nIHRpbWUgaXMgdXNlbGVzc1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ZpcnN0TGFzdDEwSGFzT25jZUNudClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY3VyciArPSB0aW1lO1xyXG4gICAgICAgIHRoaXMuaW5jcmVhc2VkVGltZSArPSB0aW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldDJGb3JtYXQ6IGZ1bmN0aW9uIChtaWxsaVRpbWUpIHtcclxuICAgICAgICAvLyBzZXBhcmF0ZSBtaW51dGUsIHNlY29uZCBlYWNoXHJcbiAgICAgICAgY29uc3QgdGltZVNlYyA9IG1pbGxpVGltZSAvIDEwMDA7XHJcbiAgICAgICAgY29uc3Qgc2Vjb25kU3BsaXQgPSB0aW1lU2VjLnRvRml4ZWQoMikuc3BsaXQoJy4nKTtcclxuICAgICAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IodGltZVNlYyAvIDYwKTtcclxuICAgICAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IoTnVtYmVyKHNlY29uZFNwbGl0WzBdKSk7XHJcbiAgICAgICAgbGV0IHVuZGVyUG9pbnREaWdpdE51bSA9IE51bWJlcihzZWNvbmRTcGxpdFsxXSk7XHJcbiAgICAgICAgaWYgKG1pbnV0ZXMgPCAxMClcclxuICAgICAgICAgICAgbWludXRlcyA9ICcwJyArIG1pbnV0ZXM7XHJcbiAgICAgICAgaWYgKHNlY29uZHMgPCAxMClcclxuICAgICAgICAgICAgc2Vjb25kcyA9ICcwJyArIHNlY29uZHM7XHJcbiAgICAgICAgaWYgKHVuZGVyUG9pbnREaWdpdE51bSA8IDEwKVxyXG4gICAgICAgICAgICB1bmRlclBvaW50RGlnaXROdW0gPSAnMCcgKyB1bmRlclBvaW50RGlnaXROdW07XHJcbiAgICAgICAgY29uc3QgdGltZSA9IG1pbnV0ZXMgKyAnOicgKyBzZWNvbmRzICsgJy4nICsgdW5kZXJQb2ludERpZ2l0TnVtO1xyXG4gICAgICAgIHRoaXMudHh0LnNldFRleHQodGltZSk7XHJcbiAgICB9LFxyXG4gICAgc2V0VGltZVNjYWxlOiBmdW5jdGlvbiAoc2NlbmUsIHRpbWVTY2FsZSkge1xyXG4gICAgICAgIHNjZW5lLm1hdHRlci53b3JsZC5lbmdpbmUudGltaW5nLnRpbWVTY2FsZSA9IHRpbWVTY2FsZTtcclxuICAgICAgICB0aGlzLnRpbWVTY2FsZSA9IHRpbWVTY2FsZTtcclxuICAgIH0sXHJcbiAgICBnZXRDdXJyOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmN1cnI7IH0sXHJcbiAgICB1cGRhdGVMYXN0MTBDbnRBbmltOiBmdW5jdGlvbiAoc2NlbmUpIHtcclxuICAgICAgICAvLyBzdG9wIGJnbSAmIGhpZGUgc2V0dGluZyBidG4gJiB0aW1lIGluY3JlYXNpbmcgaXMgbm90IHBvc3NpYmxlXHJcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdExhc3QxMEhhc09uY2VDbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TGFzdDEwSGFzT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHYW1lQXVkaW8ucGF1c2VCZ20oJ2dhbWVCZ20nKTtcclxuICAgICAgICAgICAgSGlkZVNldHRpbmdCdG4oc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3QxMFR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBNYXRoLmNlaWwodGhpcy5jdXJyIC8gMTAwMCk7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdDEwUHJldlRpbWUgIT09IHRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0xhc3QxMEhhc09uY2VDbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3QxMFByZXZUaW1lID0gdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmlzTGFzdDEwSGFzT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGFzdDEwSGFzT25jZUNudClcclxuICAgICAgICAgICAgdGhpcy5zbmRMYXN0MTBWb2ljZShzY2VuZSwgdGltZSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoc2NlbmUsIGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnIgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyciAtPSBkZWx0YSAqIHRoaXMudGltZVNjYWxlO1xyXG4gICAgICAgICAgICB0aGlzLnNldDJGb3JtYXQodGhpcy5jdXJyKTtcclxuICAgICAgICAgICAgY29uc3QgaXNVbmRlcjEwU2VjID0gdGhpcy5jdXJyID4gMCAmJiB0aGlzLmN1cnIgPD0gMTAgKiAxMDAwO1xyXG4gICAgICAgICAgICBpc1VuZGVyMTBTZWMgJiYgdGhpcy51cGRhdGVMYXN0MTBDbnRBbmltKHNjZW5lLCBkZWx0YSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNHYW1lVGltZUVuZE9uY2VDbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0dhbWVUaW1lRW5kT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnIgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNldDJGb3JtYXQoMCk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdDEwVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICBHYW1lT3Zlci5hbmltVGltZU92ZXIoc2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXRUaW1lSW5jcmVhc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmluY3JlYXNlZFRpbWUgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluY3JlYXNlZFRpbWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0VGltZUluY3JlYXNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmluY3JlYXNlZFRpbWU7IH0sXHJcbiAgICBhZGRUaW1lSW5jcmVhc2U6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZWRUaW1lICs9IHRpbWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jcmVhc2VkVGltZTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRHYW1lVGltZSA9ICgpID0+IHtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFByZXZUaW1lID0gMTE7XHJcbiAgICBHYW1lVGltZS5pc0xhc3QxMEhhc09uY2VDbnQgPSB0cnVlO1xyXG4gICAgR2FtZVRpbWUuaXNHYW1lVGltZUVuZE9uY2VDbnQgPSB0cnVlO1xyXG4gICAgR2FtZVRpbWUuY3VyciA9IEdhbWVUaW1lLmluaXQ7XHJcbiAgICBHYW1lVGltZS5pbmNyZWFzZWRUaW1lID0gMDtcclxuICAgIEdhbWVUaW1lLnRpbWVTY2FsZSA9IDE7XHJcbiAgICBHYW1lVGltZS5pbml0VGltZUluY3JlYXNlKCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhbWVUaW1lVHh0ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBjb25zdCBpbml0WCA9IFR4dE1hcmdpbiAtIDEwO1xyXG4gICAgY29uc3QgaW5pdFkgPSAxMjA7XHJcbiAgICBHYW1lVGltZS50eHQgPSBzY2VuZS5hZGQudGV4dChpbml0WCwgaW5pdFksICcnKTtcclxuICAgIEdhbWVUaW1lLnR4dC5zZXRBbHBoYShUeHRBbHBoYSk7XHJcbiAgICBHYW1lVGltZS50eHQuc2V0T3JpZ2luKDAsIDApO1xyXG4gICAgR2FtZVRpbWUudHh0LnNldEZvbnRTaXplKFR4dFNpemUpO1xyXG4gICAgR2FtZVRpbWUudHh0LnNldEJhY2tncm91bmRDb2xvcihUeHRCYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgR2FtZVRpbWUubGFzdDEwVHh0ID0gc2NlbmUuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICcnKTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRBbHBoYSgwLjUpO1xyXG4gICAgR2FtZVRpbWUubGFzdDEwVHh0LnNldE9yaWdpbigwLjUsIDAuNSk7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0Rm9udFNpemUoVmlldy53IC8gMik7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBbR2FtZVRpbWUudHh0LCBHYW1lVGltZS5sYXN0MTBUeHRdLm1hcCgodHh0KSA9PiB7XHJcbiAgICAgICAgdHh0LnNldFBhZGRpbmcoeyBsZWZ0OiBUeHRQYWRkaW5nLCByaWdodDogVHh0UGFkZGluZywgdG9wOiBUeHRQYWRkaW5nIC8gMiwgYm90dG9tOiBUeHRQYWRkaW5nIC8gMiB9KTtcclxuICAgICAgICB0eHQuc2V0Rm9udEZhbWlseShUeHRGYW1pbHkpO1xyXG4gICAgICAgIFNldERlcHRoKHR4dCwgJ3R4dCcpO1xyXG4gICAgfSk7XHJcbiAgICBJbml0R2FtZVRpbWUoKTtcclxufTtcclxuY29uc3QgU2V0bWlsbGllU2VjMlNlY1RpbWVGb3JtYXQgPSAobWlsbGllU2VjKSA9PiB7XHJcbiAgICBjb25zdCBzZWMgPSAobWlsbGllU2VjIC8gMTAwMCkudG9GaXhlZCgyKSArICcgc2VjJztcclxuICAgIHJldHVybiBzZWM7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVUaW1lO1xyXG5leHBvcnQgeyBJbml0R2FtZVRpbWUsIENyZWF0ZUdhbWVUaW1lVHh0LCBTZXRtaWxsaWVTZWMyU2VjVGltZUZvcm1hdCB9O1xyXG4iLCIvLyBpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCB7IFR4dEZhbWlseSwgVHh0TWFyZ2luLCBUeHRQYWRkaW5nLCBUeHRTaXplIH0gZnJvbSAnLi4vZm9udCc7XHJcbmltcG9ydCB7IEdldExvY2FsU3RvcmFnZUl0ZW0sIFNldExvY2FsU3RvcmFnZUl0ZW0gfSBmcm9tICdAc3JjL3V0aWxzL3N0b3JhZ2UnO1xyXG5pbXBvcnQgR2FtZURhdGEgZnJvbSAnLi4vLi4vc3RvcmFnZS9pbmRleCc7XHJcbmltcG9ydCB7IFNldE51bTJDdXJyZW5jeUZvcm1hdCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSAnLi8uLi9ibG9jay9zeXN0ZW0nO1xyXG5pbXBvcnQgR2FtZVRpbWUgZnJvbSAnLi90aW1lJztcclxuY29uc3QgU2NvcmUgPSB7XHJcbiAgICB0eHQ6IG51bGwsXHJcbiAgICB0eHRCYWNrZ3JvdW5kOiBudWxsLFxyXG4gICAgYlR4dDogbnVsbCxcclxuICAgIGJUeHRCYWNrZ3JvdW5kOiBudWxsLFxyXG4gICAgdHh0TnVtOiAwLFxyXG4gICAgYlR4dE51bTogMCxcclxuICAgIHNldEZvcm1hdDogZnVuY3Rpb24gKHNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy50eHROdW0gPSBzY29yZTtcclxuICAgICAgICBjb25zdCBmaW5hbFNjb3JlID0gJycgKyBTZXROdW0yQ3VycmVuY3lGb3JtYXQoc2NvcmUpO1xyXG4gICAgICAgIHRoaXMudHh0LnNldFRleHQoZmluYWxTY29yZSk7XHJcbiAgICAgICAgaWYgKHRoaXMudHh0TnVtID4gdGhpcy5iVHh0TnVtKVxyXG4gICAgICAgICAgICB0aGlzLnNldEJGb3JtYXQoc2NvcmUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldEJGb3JtYXQ6IGZ1bmN0aW9uIChzY29yZSkge1xyXG4gICAgICAgIHRoaXMuYlR4dE51bSA9IHNjb3JlO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsU2NvcmUgPSAnJyArIFNldE51bTJDdXJyZW5jeUZvcm1hdChzY29yZSk7XHJcbiAgICAgICAgdGhpcy5iVHh0LnNldFRleHQoZmluYWxTY29yZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgYWRkOiBmdW5jdGlvbiAoc2NvcmUpIHtcclxuICAgICAgICBpZiAoQmxvY2tTeXN0ZW0uZ2V0SXNHYW1lT3ZlcigpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgbGV0IGZpbmFsU2NvcmUgPSBOdW1iZXIodGhpcy50eHQudGV4dCkgKyBzY29yZTtcclxuICAgICAgICB0aGlzLnNldEZvcm1hdChmaW5hbFNjb3JlKTtcclxuICAgICAgICByZXR1cm4gZmluYWxTY29yZTtcclxuICAgIH0sXHJcbiAgICBnZXRTY29yZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50eHROdW07IH0sXHJcbiAgICBnZXRCU2NvcmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuYlR4dE51bTsgfSxcclxuICAgIGNvbXBhcmVOb3JtYWxBbmRCZXN0OiBmdW5jdGlvbiAoc2NvcmUpIHtcclxuICAgICAgICBjb25zdCBwcmV2QmVzdCA9IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jyk7XHJcbiAgICAgICAgaWYgKHByZXZCZXN0IDwgc2NvcmUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRCRm9ybWF0KHNjb3JlKTtcclxuICAgICAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lRGF0YSwgJ2Jlc3QnLCBzY29yZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgZ2V0Qm9udXNUaW1lU2NvcmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihHYW1lVGltZS5nZXRUaW1lSW5jcmVhc2UoKSAvIDEwMCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0RmluYWxTY29yZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKFNjb3JlLmdldFNjb3JlKCkgKyB0aGlzLmdldEJvbnVzVGltZVNjb3JlKCkpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdFNjb3JlID0gKCkgPT4ge1xyXG4gICAgU2NvcmUudHh0TnVtID0gMDtcclxuICAgIFNjb3JlLmJUeHROdW0gPSBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVEYXRhLCAnYmVzdCcpO1xyXG4gICAgU2NvcmUuc2V0Rm9ybWF0KDApO1xyXG4gICAgU2NvcmUuc2V0QkZvcm1hdChTY29yZS5iVHh0TnVtKTtcclxufTtcclxuY29uc3QgVHh0R2FwID0gMTEwO1xyXG5jb25zdCBDcmVhdGVTY29yZVR4dCA9IChzY2VuZSkgPT4ge1xyXG4gICAgU2NvcmUuYlR4dCA9IHNjZW5lLmFkZC50ZXh0KFR4dE1hcmdpbiAvIDIsIFR4dE1hcmdpbiAqIDIsICcnKTtcclxuICAgIFNjb3JlLmJUeHRCYWNrZ3JvdW5kID0gc2NlbmUuYWRkLnRleHQoU2NvcmUuYlR4dC54ICsgVHh0R2FwLCBTY29yZS5iVHh0LnksICdCZXN0Jyk7XHJcbiAgICBTY29yZS50eHQgPSBzY2VuZS5hZGQudGV4dChUeHRNYXJnaW4gLyAyLCBUeHRNYXJnaW4gKiAzLCAnJyk7XHJcbiAgICBTY29yZS50eHRCYWNrZ3JvdW5kID0gc2NlbmUuYWRkLnRleHQoU2NvcmUudHh0LnggKyBUeHRHYXAsIFNjb3JlLnR4dC55LCAnU2NvcmUnKTtcclxuICAgIFtTY29yZS5iVHh0QmFja2dyb3VuZCwgU2NvcmUudHh0QmFja2dyb3VuZF0ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICB0eHQuc2V0UGFkZGluZyh7IGxlZnQ6IFR4dFBhZGRpbmcsIHJpZ2h0OiBUeHRQYWRkaW5nLCB0b3A6IFR4dFBhZGRpbmcgLyAyLCBib3R0b206IFR4dFBhZGRpbmcgLyAyIH0pO1xyXG4gICAgICAgIHR4dC5zZXRPcmlnaW4oMSwgLTAuMSk7XHJcbiAgICAgICAgdHh0LnNldEZvbnRTaXplKFR4dFNpemUpO1xyXG4gICAgICAgIHR4dC5zZXRGb250RmFtaWx5KFR4dEZhbWlseSk7XHJcbiAgICAgICAgdHh0LnNldEZvbnRTdHlsZSgnYm9sZCBpdGFsaWMnKTtcclxuICAgICAgICB0eHQuc2V0QWxwaGEoMC4zKTtcclxuICAgIH0pO1xyXG4gICAgW1Njb3JlLmJUeHQsIFNjb3JlLnR4dF0ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICB0eHQuc2V0UGFkZGluZyh7IGxlZnQ6IFR4dFBhZGRpbmcsIHJpZ2h0OiBUeHRQYWRkaW5nLCB0b3A6IFR4dFBhZGRpbmcgLyAyLCBib3R0b206IFR4dFBhZGRpbmcgLyAyIH0pO1xyXG4gICAgICAgIHR4dC5zZXRPcmlnaW4oMCwgMCk7XHJcbiAgICAgICAgdHh0LnNldEZvbnRTaXplKFR4dFNpemUpO1xyXG4gICAgICAgIHR4dC5zZXRGb250RmFtaWx5KFR4dEZhbWlseSk7XHJcbiAgICB9KTtcclxuICAgIGxldCBiZXN0U2NvcmUgPSBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVEYXRhLCAnYmVzdCcpO1xyXG4gICAgU2NvcmUuc2V0Rm9ybWF0KDApO1xyXG4gICAgU2NvcmUuc2V0QkZvcm1hdChiZXN0U2NvcmUpO1xyXG4gICAgW1Njb3JlLmJUeHRCYWNrZ3JvdW5kLCBTY29yZS50eHRCYWNrZ3JvdW5kLCBTY29yZS5iVHh0LCBTY29yZS50eHRdLm1hcCgodHh0KSA9PiB7XHJcbiAgICAgICAgU2V0RGVwdGgodHh0LCAndHh0Jyk7XHJcbiAgICB9KTtcclxuICAgIEluaXRTY29yZSgpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTY29yZTtcclxuZXhwb3J0IHsgSW5pdFNjb3JlLCBDcmVhdGVTY29yZVR4dCB9O1xyXG4iLCJpbXBvcnQgeyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSwgVHh0VGl0bGVTaXplIH0gZnJvbSAnLi4vZm9udCc7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IEdldFJuZEludCwgR2V0Um5kTnVtIH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuLi9kZXB0aCc7XHJcbmltcG9ydCBHYW1lT3ZlciBmcm9tICcuLi91aS9nYW1lb3Zlcic7XHJcbmltcG9ydCBHYW1lVGltZSwgeyBTZXRtaWxsaWVTZWMyU2VjVGltZUZvcm1hdCB9IGZyb20gJy4uL3VpL3RpbWUnO1xyXG5pbXBvcnQgR2FtZUlucHV0IGZyb20gJ0BzcmMvc2NlbmVzL2lucHV0JztcclxuY29uc3QgRWZ4ID0ge1xyXG4gICAgYmdQYXJ0aWNsZUxpc3Q6IFtdLFxyXG4gICAgLy8gdGltZUluY3JlYXNlOiA8UGhhc2VyLkdhbWVPYmplY3RzLlRleHRbXT4gW10sICAgLy8gd2hlbiBibG9jayBjbGVhcmVkLCBpbmNyZWFzZSB0aW1lIGJ5IGJsb2NrJ3Mgb3duIGNoYW5jZVxyXG4gICAgLy8gc2NvcmU6IDxQaGFzZXIuR2FtZU9iamVjdHMuVGV4dFtdPiBbXSwgICAgICAgICAgLy8gd2hlbiBibG9jayBjbGVhcmVkLCBpbmNyZWFzZSBzY29yZVxyXG4gICAgbGlzdDogW10sXHJcbiAgICBzZXRDb25maWc6IGZ1bmN0aW9uIChwYXJ0aWNsZSwgY29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgZmluYWxDb25maWcgPSBPYmplY3QuYXNzaWduKHsgeDogMCwgeTogMCwgYWN0aXZlOiBmYWxzZSB9LCBjb25maWcpO1xyXG4gICAgICAgIGxldCBlbWl0dGVyO1xyXG4gICAgICAgIGNvbnN0IG5lc3RlZEVtaXR0ZXJJZHggPSB0aGlzLmxpc3QuZmluZEluZGV4KGVtaXR0ZXIgPT4gZW1pdHRlci5uYW1lID09PSBjb25maWcubmFtZSk7XHJcbiAgICAgICAgaWYgKG5lc3RlZEVtaXR0ZXJJZHggPj0gMClcclxuICAgICAgICAgICAgdGhpcy5saXN0W25lc3RlZEVtaXR0ZXJJZHhdID0gcGFydGljbGUuY3JlYXRlRW1pdHRlcihmaW5hbENvbmZpZyk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVtaXR0ZXIgPSBwYXJ0aWNsZS5jcmVhdGVFbWl0dGVyKGZpbmFsQ29uZmlnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2goZW1pdHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbWl0dGVyO1xyXG4gICAgfSxcclxuICAgIGdldEVtaXR0ZXI6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RW1pdHRlciA9IHRoaXMubGlzdC5maW5kKGVtaXR0ZXIgPT4gZW1pdHRlci5uYW1lID09PSBuYW1lKTtcclxuICAgICAgICBpZiAoIXRhcmdldEVtaXR0ZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBlbWl0dGVyICR7bmFtZX0gaXMgbm90IGluIHRoZSBwYXJ0aWNsZSBsaXN0YCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldEVtaXR0ZXI7XHJcbiAgICB9LFxyXG4gICAgYWN0aXZlRW1pdHRlcih4LCB5LCBuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RW1pdHRlciA9IHRoaXMuZ2V0RW1pdHRlcihuYW1lKTtcclxuICAgICAgICBpZiAoIXRhcmdldEVtaXR0ZXIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB0YXJnZXRFbWl0dGVyLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGFyZ2V0RW1pdHRlci5zZXRQb3NpdGlvbih4LCB5KTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0RW1pdHRlcjtcclxuICAgIH0sXHJcbiAgICBhbmltRW1pdHRlcjogZnVuY3Rpb24gKHgsIHksIG5hbWUpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFbWl0dGVyID0gdGhpcy5hY3RpdmVFbWl0dGVyKHgsIHksIG5hbWUpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0RW1pdHRlcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlRXhwbG9kZSA9IHRhcmdldEVtaXR0ZXIuZXhwbG9kZSgpO1xyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZUV4cGxvZGU7XHJcbiAgICB9LFxyXG4gICAgc3RhcnRFbWl0dGVyOiBmdW5jdGlvbiAoeCwgeSwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVtaXR0ZXIgPSB0aGlzLmFjdGl2ZUVtaXR0ZXIoeCwgeSwgbmFtZSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRFbWl0dGVyKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2VFeHBsb2RlID0gdGFyZ2V0RW1pdHRlci5zdGFydCgpO1xyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZUV4cGxvZGU7XHJcbiAgICB9LFxyXG4gICAgYW5pbVNjYWxlOiBmdW5jdGlvbiAoc2NlbmUsIHRhcmdldCkge1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDEuMiwgZHVyYXRpb246IDMwMCwgeW95bzogdHJ1ZSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIHRhcmdldC5zZXRTY2FsZShkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhbmltUG9zOiBmdW5jdGlvbiAoc2NlbmUsIHRhcmdldCwgYW1vdW50KSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SW5pdFkgPSB0YXJnZXQueTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IHRhcmdldEluaXRZLCB0bzogdGFyZ2V0SW5pdFkgKyBhbW91bnQsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgJiYgdGFyZ2V0LnNldFBvc2l0aW9uKHRhcmdldC54LCBkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhbmltVGltZUluY3JlYXNlOiBmdW5jdGlvbiAoYmxvY2ssIGNoYW5jZSwgdmFsdWUpIHtcclxuICAgICAgICBjb25zdCB7IHNjZW5lIH0gPSBibG9jaztcclxuICAgICAgICBjb25zdCBjaGFuY2VQb3NZID0gYmxvY2sueSAtIDEwMDtcclxuICAgICAgICBjb25zdCB0aW1lU2VjID0gU2V0bWlsbGllU2VjMlNlY1RpbWVGb3JtYXQodmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYID0gR2FtZVRpbWUudHh0LnggKyAoR2FtZVRpbWUudHh0LndpZHRoICogMS41KSAtIDUgKyBHZXRSbmROdW0oLTMsIDMpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NZID0gR2FtZVRpbWUudHh0LnkgKyBHYW1lVGltZS50eHQuaGVpZ2h0IC8gMiArIEdldFJuZE51bSgtMTAsIDEwKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPblVpID0gc2NlbmUuYWRkLnRleHQodGltZUluY3JlYXNlT25VaVJuZFBvc1gsIHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NZLCAnKycgKyB0aW1lU2VjKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VUeHQgPSBzY2VuZS5hZGQudGV4dChibG9jay54LCBjaGFuY2VQb3NZLCAnVGltZSBDcml0aWNhbCEnKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VDaGFuY2UgPSBzY2VuZS5hZGQudGV4dCh0aW1lSW5jcmVhc2VUeHQueCwgdGltZUluY3JlYXNlVHh0LnkgKyAyNSwgY2hhbmNlLnRvU3RyaW5nKCkgKyAnJScpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVJbmNyZWFzZU9uQmxvY2sgPSBzY2VuZS5hZGQudGV4dCh0aW1lSW5jcmVhc2VDaGFuY2UueCwgdGltZUluY3JlYXNlQ2hhbmNlLnkgKyAyNSwgdGltZVNlYykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgW3RpbWVJbmNyZWFzZU9uVWksIHRpbWVJbmNyZWFzZVR4dCwgdGltZUluY3JlYXNlQ2hhbmNlLCB0aW1lSW5jcmVhc2VPbkJsb2NrXS5tYXAoKHR4dCkgPT4ge1xyXG4gICAgICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSh0eHQpO1xyXG4gICAgICAgICAgICBTZXREZXB0aCh0eHQsICd0eHQnKTtcclxuICAgICAgICAgICAgdHh0LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbVNjYWxlKHNjZW5lLCB0aW1lSW5jcmVhc2VPblVpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB0d0xpc3QgPSBbXTtcclxuICAgICAgICB0d0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgIGZyb206IHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYLCB0bzogdGltZUluY3JlYXNlT25VaVJuZFBvc1ggKyAxMCwgZHVyYXRpb246IDI0MDAsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHsgdGltZUluY3JlYXNlT25VaS54ID0gdHdEYXRhLnZhbHVlOyB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7IHRpbWVJbmNyZWFzZU9uVWkuZGVzdHJveSgpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICBmcm9tOiAxLCB0bzogMCwgZHVyYXRpb246IDI0MDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlVHh0LnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2Uuc2V0QWxwaGEodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZU9uQmxvY2suc2V0QWxwaGEodHdEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlVHh0LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VPbkJsb2NrLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTtcclxuICAgICAgICB0aGlzLmFuaW1Qb3Moc2NlbmUsIHRpbWVJbmNyZWFzZVR4dCwgLTMwKTtcclxuICAgICAgICB0aGlzLmFuaW1Qb3Moc2NlbmUsIHRpbWVJbmNyZWFzZUNoYW5jZSwgLTMwKTtcclxuICAgICAgICB0aGlzLmFuaW1Qb3Moc2NlbmUsIHRpbWVJbmNyZWFzZU9uQmxvY2ssIC0zMCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgYW5pbVNjb3JlOiBmdW5jdGlvbiAoYmxvY2ssIHNjb3JlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY2VuZSB9ID0gYmxvY2s7XHJcbiAgICAgICAgY29uc3Qgc2NvcmVUeHQgPSBzY2VuZS5hZGQudGV4dChibG9jay54LCBibG9jay55LCBNYXRoLmZsb29yKHNjb3JlKS50b1N0cmluZygpKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShzY29yZVR4dCk7XHJcbiAgICAgICAgU2V0RGVwdGgoc2NvcmVUeHQsICd0eHQnKTtcclxuICAgICAgICBzY29yZVR4dC5zZXRGb250U2l6ZShUeHRUaXRsZVNpemUpO1xyXG4gICAgICAgIC8vIHNjb3JlIHBhcnRpY2xlIGVtaXRcclxuICAgICAgICBjb25zdCBzY29yZVNmeExpc3QgPSBbJ3Njb3JlQmx1ZScsICdzY29yZUdyZWVuJywgJ3Njb3JlQnJvd24nXTtcclxuICAgICAgICBjb25zdCBybmRJZHggPSBHZXRSbmRJbnQoMCwgc2NvcmVTZnhMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgRWZ4LmFuaW1FbWl0dGVyKGJsb2NrLngsIGJsb2NrLnksIHNjb3JlU2Z4TGlzdFtybmRJZHhdKTtcclxuICAgICAgICAvLyBhbHBoYSB0d1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDAsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzY29yZVR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3Njb3JlU2Z4Jyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHsgc2NvcmVUeHQuc2V0QWxwaGEoZGF0YS52YWx1ZSk7IH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHsgc2NvcmVUeHQuZGVzdHJveSgpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hbmltU2NhbGUoc2NlbmUsIHNjb3JlVHh0KTtcclxuICAgICAgICB0aGlzLmFuaW1Qb3Moc2NlbmUsIHNjb3JlVHh0LCAtMzApO1xyXG4gICAgfSxcclxuICAgIGFuaW1OZXdCZXN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3ZvaWNlSGlnaFNjb3JlJyk7XHJcbiAgICAgICAgdGhpcy5iZ1BhcnRpY2xlTGlzdC5tYXAoa2V5ID0+IHRoaXMuc3RhcnRFbWl0dGVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZIC0gVmlldy5oIC8gNCwga2V5KSk7XHJcbiAgICAgICAgdGhpcy5zdGFydEVtaXR0ZXIoMCwgMCwgJ25ld0Jlc3RTY29yZScpO1xyXG4gICAgfSxcclxuICAgIHN0b3BBbGw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxpc3QubWFwKGVtaXR0ZXIgPT4gZW1pdHRlci5zdG9wKCkpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgQ3JlYXRlRWZ4ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBjb25zdCBibG9ja1BhcnRpY2xlID0gc2NlbmUuYWRkLnBhcnRpY2xlcygncGFydGljbGVTcHJpdGUnKTtcclxuICAgIGNvbnN0IGNvbW1vblRvdWNoQ29uZmlnID0ge1xyXG4gICAgICAgIGxpZmVzcGFuOiB7IG1pbjogMTAsIG1heDogMzUwIH0sXHJcbiAgICAgICAgYW5nbGU6IHsgc3RhcnQ6IDAsIGVuZDogMzYwLCBzdGVwczogNjQgfSxcclxuICAgICAgICBzcGVlZDogMjAwLFxyXG4gICAgICAgIHF1YW50aXR5OiA2NCxcclxuICAgICAgICBzY2FsZTogeyBzdGFydDogMC4zLCBlbmQ6IDAuMDUgfSxcclxuICAgICAgICBibGVuZE1vZGU6ICdBREQnLFxyXG4gICAgfTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwgT2JqZWN0LmFzc2lnbih7IG5hbWU6ICd0b3VjaEJsdWUnLCBmcmFtZTogJ2JsdWUnIH0sIGNvbW1vblRvdWNoQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAndG91Y2hHcmVlbicsIGZyYW1lOiAnZ3JlZW4nIH0sIGNvbW1vblRvdWNoQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAndG91Y2hCcm93bicsIGZyYW1lOiAneWVsbG93JyB9LCBjb21tb25Ub3VjaENvbmZpZykpO1xyXG4gICAgY29uc3QgY29tbW9uU2NvcmVDb25maWcgPSB7XHJcbiAgICAgICAgbGlmZXNwYW46IHsgbWluOiAxMDAsIG1heDogNTAwIH0sXHJcbiAgICAgICAgYW5nbGU6IHsgc3RhcnQ6IDAsIGVuZDogMzYwLCBzdGVwczogNjQgfSxcclxuICAgICAgICBzcGVlZDogMzUwLFxyXG4gICAgICAgIHF1YW50aXR5OiA2NCxcclxuICAgICAgICBzY2FsZTogeyBzdGFydDogMC4yLCBlbmQ6IDAuMSB9LFxyXG4gICAgICAgIGJsZW5kTW9kZTogJ0FERCcsXHJcbiAgICB9O1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCBPYmplY3QuYXNzaWduKHsgbmFtZTogJ3Njb3JlQmx1ZScsIGZyYW1lOiAnYmx1ZScgfSwgY29tbW9uU2NvcmVDb25maWcpKTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwgT2JqZWN0LmFzc2lnbih7IG5hbWU6ICdzY29yZUdyZWVuJywgZnJhbWU6ICdncmVlbicgfSwgY29tbW9uU2NvcmVDb25maWcpKTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwgT2JqZWN0LmFzc2lnbih7IG5hbWU6ICdzY29yZUJyb3duJywgZnJhbWU6ICd5ZWxsb3cnIH0sIGNvbW1vblNjb3JlQ29uZmlnKSk7XHJcbiAgICAvLyB0b3VjaCBpbnB1dFxyXG4gICAgY29uc3QgdG91Y2hTZnhMaXN0ID0gWyd0b3VjaEJsdWUnLCAndG91Y2hHcmVlbicsICd0b3VjaEJyb3duJ107XHJcbiAgICBHYW1lSW5wdXQuYWRkKCdkb3duJywgKHB0ciwgY3VycmVudGx5T3ZlcikgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd0b3VjaFNmeCcpO1xyXG4gICAgICAgIGNvbnN0IHJuZElkeCA9IEdldFJuZEludCgwLCB0b3VjaFNmeExpc3QubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBlbWl0dGVyID0gRWZ4LmFuaW1FbWl0dGVyKHB0ci54LCBwdHIueSwgdG91Y2hTZnhMaXN0W3JuZElkeF0pO1xyXG4gICAgICAgIC8vIHNjZW5lLmNhbWVyYXMubWFpbi5zaGFrZSgyMDAsIDAuMDEsIHRydWUpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBzY2VuZS5pbnB1dC5vZmYoJ3BvaW50ZXJkb3duJyk7XHJcbiAgICAvLyBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCAocHRyKSA9PiB7XHJcbiAgICAvLyAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3RvdWNoU2Z4Jyk7XHJcbiAgICAvLyAgICAgY29uc3Qgcm5kSWR4ID0gR2V0Um5kSW50KDAsIHRvdWNoU2Z4TGlzdC5sZW5ndGgpO1xyXG4gICAgLy8gICAgIGNvbnN0IGVtaXR0ZXIgPSBFZnguYW5pbUVtaXR0ZXIocHRyLngsIHB0ci55LCB0b3VjaFNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAvLyAgICAgLy8gY29uc3Qgc2NvcmVTZnhMaXN0ID0gWyAnc2NvcmVCbHVlJywgJ3Njb3JlR3JlZW4nLCAnc2NvcmVCcm93bicgXTtcclxuICAgIC8vICAgICAvLyBjb25zdCBybmRJZHggPSBHZXRSbmRJbnQoMCwgc2NvcmVTZnhMaXN0Lmxlbmd0aCk7XHJcbiAgICAvLyAgICAgLy8gY29uc3Qgc2NvcmVJbnN0YW5jZSA9IEVmeC5hbmltRW1pdHRlcihwdHIueCwgcHRyLnksIHNjb3JlU2Z4TGlzdFtybmRJZHhdKTtcclxuICAgIC8vICAgICAvLyBFZnguYW5pbUVtaXR0ZXIocHRyLngsIHB0ci55LCAnc2NvcmUnKTtcclxuICAgIC8vICAgICAvLyBjb25zb2xlLmxvZygncm5kSWR4OiAnLCBybmRJZHgsIHRvdWNoU2Z4TGlzdFtybmRJZHhdKTtcclxuICAgIC8vICAgICAvLyBjb25zb2xlLmxvZygnZW1pdHRlcjogJywgZW1pdHRlcik7XHJcbiAgICAvLyAgICAgLy8gcHRyLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgY2hja1B0ckRlZmF1bHQocHRyKTtcclxuICAgIC8vIH0pO1xyXG4gICAgU2V0RGVwdGgoYmxvY2tQYXJ0aWNsZSwgJ3BhcnRpY2xlJyk7XHJcbiAgICByZXR1cm4gRWZ4O1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lT3ZlckVmeCA9IChzY2VuZSwgaW1nKSA9PiB7XHJcbiAgICBFZnguYmdQYXJ0aWNsZUxpc3QgPSBbXHJcbiAgICAgICAgJ2RpYW1vbmQyJywgJ2RpYW1vbmQzJywgJ2RpYW1vbmQ0JyxcclxuICAgICAgICAncnVieTEnLCAncnVieTInLCAncnVieTMnLCAncnVieTQnLFxyXG4gICAgICAgICdrZXkxJywgJ2tleTInLCAna2V5MycsICdrZXk0JyxcclxuICAgIF07XHJcbiAgICBFZnguYmdQYXJ0aWNsZUxpc3QubWFwKChwYXJ0aWNsZU5hbWUpID0+IHtcclxuICAgICAgICBjb25zdCBwYXJ0aWNsZSA9IHNjZW5lLmFkZC5wYXJ0aWNsZXMocGFydGljbGVOYW1lKTtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IDIwMDA7XHJcbiAgICAgICAgRWZ4LnNldENvbmZpZyhwYXJ0aWNsZSwge1xyXG4gICAgICAgICAgICBuYW1lOiBwYXJ0aWNsZU5hbWUsXHJcbiAgICAgICAgICAgIGFuZ2xlOiB7IG1pbjogMTAwLCBtYXg6IDQ0MCB9LFxyXG4gICAgICAgICAgICBzcGVlZDogMzUwLFxyXG4gICAgICAgICAgICBncmF2aXR5WTogLTIwMCxcclxuICAgICAgICAgICAgbGlmZXNwYW46IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcclxuICAgICAgICAgICAgZnJlcXVlbmN5OiA2MCxcclxuICAgICAgICAgICAgc2NhbGU6IHsgbWluOiAwLjEsIG1heDogMSB9LFxyXG4gICAgICAgICAgICByb3RhdGU6IHsgb25FbWl0OiAoKSA9PiBHZXRSbmROdW0oMCwgMzYwKSB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2V0RGVwdGgocGFydGljbGUsICdwYXJ0aWNsZScpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBibG9ja1BhcnRpY2xlID0gc2NlbmUuYWRkLnBhcnRpY2xlcygncGFydGljbGVTcHJpdGUnKTtcclxuICAgIGNvbnN0IHdpZHRoID0gaW1nLndpZHRoICogR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZVc7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBpbWcuaGVpZ2h0ICogR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZUg7XHJcbiAgICBjb25zdCBnYW1lT3ZlckVtaXRab25lID0gbmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZShpbWcueCAtIHdpZHRoIC8gMiwgaW1nLnkgLSBoZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwge1xyXG4gICAgICAgIG5hbWU6ICduZXdCZXN0U2NvcmUnLFxyXG4gICAgICAgIGZyYW1lOiAnYmx1ZScsXHJcbiAgICAgICAgbGlmZXNwYW46IDEwMDAsXHJcbiAgICAgICAgZ3Jhdml0eVk6IDEwLFxyXG4gICAgICAgIHNjYWxlOiB7IHN0YXJ0OiAwLCBlbmQ6IDAuMjUsIGVhc2U6ICdRdWFkLmVhc2VPdXQnIH0sXHJcbiAgICAgICAgYWxwaGE6IHsgc3RhcnQ6IDEsIGVuZDogMCwgZWFzZTogJ1F1YWQuZWFzZUluJyB9LFxyXG4gICAgICAgIGJsZW5kTW9kZTogJ0FERCcsXHJcbiAgICAgICAgZW1pdFpvbmU6IHsgdHlwZTogJ3JhbmRvbScsIHNvdXJjZTogZ2FtZU92ZXJFbWl0Wm9uZSB9LFxyXG4gICAgfSk7XHJcbiAgICBTZXREZXB0aChibG9ja1BhcnRpY2xlLCAnaGlnaGVzdCcpO1xyXG4gICAgcmV0dXJuIEVmeDtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRWZ4O1xyXG5leHBvcnQgeyBDcmVhdGVFZngsIENyZWF0ZUdhbWVPdmVyRWZ4IH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFJlc3RhcnRHYW1lLCBTdG9wR2FtZSB9IGZyb20gJy4uL2dhbWUnO1xyXG5pbXBvcnQgeyBTdGFydFRpdGxlIH0gZnJvbSAnLi4vdGl0bGUnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWFyZ2luSCwgQ29udGV4dE1hcmdpblcsIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRPdmVySGVhZFNpemUsIFR4dFRpdGxlSGVhZFNpemUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IFNjb3JlIGZyb20gJy4vc2NvcmUnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuaW1wb3J0IHsgR2V0TG9jYWxTdG9yYWdlSXRlbSB9IGZyb20gJ0BzcmMvdXRpbHMvc3RvcmFnZSc7XHJcbmltcG9ydCBHYW1lRGF0YSBmcm9tICcuLi8uLi9zdG9yYWdlJztcclxuaW1wb3J0IEVmeCBmcm9tICcuLi9lZngnO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSAnLi4vYmxvY2svc3lzdGVtJztcclxuY29uc3QgR2FtZU92ZXIgPSB7XHJcbiAgICBvdmVyVHh0OiBudWxsLFxyXG4gICAgbGF5ZXI6IG51bGwsXHJcbiAgICBuZXdCZXN0U2NvcmVCZ1NjYWxlVzogMi40LFxyXG4gICAgbmV3QmVzdFNjb3JlQmdTY2FsZUg6IDMuMixcclxuICAgIG5ld0Jlc3RTY29yZUJnOiBudWxsLFxyXG4gICAgbmV3QmVzdFNjb3JlVHh0OiBudWxsLFxyXG4gICAgbmV3QmVzdFNjb3JlTnVtOiBudWxsLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHRpdGxlOiAnVGltZSBPdmVyJyxcclxuICAgICAgICBib251c1RpbWU6IDAsXHJcbiAgICAgICAgc2NvcmU6IDAsXHJcbiAgICAgICAgZmluYWxTY29yZTogMFxyXG4gICAgfSxcclxuICAgIGFuaW1Db21tb25PdmVyOiBmdW5jdGlvbiAoc2NlbmUsIHNuZEtleSwgdHh0KSB7XHJcbiAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3Zlcih0cnVlKTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeChzbmRLZXkpO1xyXG4gICAgICAgIGNvbnN0IG92ZXJTbmQgPSBzY2VuZS5zb3VuZC5nZXQoc25kS2V5KTtcclxuICAgICAgICBjb25zdCBvdmVyU25kVGltaW5nID0gb3ZlclNuZC5kdXJhdGlvbiAvIDIgKiAxMDAwIC0gMTAwO1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IG92ZXJTbmRUaW1pbmcsIGR1cmF0aW9uOiBvdmVyU25kVGltaW5nLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3ZlclR4dC5zZXRUZXh0KHR4dCArICdcXG4nKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVyVHh0LnNldFRleHQodHh0ICsgJ1xcbk92ZXInKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbVNob3coc2NlbmUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHR4dCArICcgT3ZlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzVGltZTogU2NvcmUuZ2V0Qm9udXNUaW1lU2NvcmUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IFNjb3JlLmdldFNjb3JlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmU6IFNjb3JlLmdldEZpbmFsU2NvcmUoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhbmltVGltZU92ZXI6IGZ1bmN0aW9uIChzY2VuZSkgeyB0aGlzLmFuaW1Db21tb25PdmVyKHNjZW5lLCAndm9pY2VUaW1lT3ZlcicsICdUaW1lJyk7IH0sXHJcbiAgICBhbmltR2FtZU92ZXI6IGZ1bmN0aW9uIChzY2VuZSkgeyB0aGlzLmFuaW1Db21tb25PdmVyKHNjZW5lLCAndm9pY2VHYW1lT3ZlcicsICdHYW1lJyk7IH0sXHJcbiAgICBhbmltU2hvdzogZnVuY3Rpb24gKHNjZW5lLCBkYXRhKSB7XHJcbiAgICAgICAgLy8gc2V0IGRlZmF1bHQgZGF0YSBmb3IgcGVyZm9ybWFuY2VcclxuICAgICAgICB0aGlzLnNob3coe1xyXG4gICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcclxuICAgICAgICAgICAgYm9udXNUaW1lOiAwLFxyXG4gICAgICAgICAgICBzY29yZTogMCxcclxuICAgICAgICAgICAgZmluYWxTY29yZTogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGFuaW0gdG8gYm9udXMgdGltZSAmIHNjb3JlXHJcbiAgICAgICAgY29uc3QgcHJldkJlc3RTY29yZSA9IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jyk7XHJcbiAgICAgICAgY29uc3QgeyBzY29yZSwgYm9udXNUaW1lLCBmaW5hbFNjb3JlIH0gPSBkYXRhO1xyXG4gICAgICAgIFNjb3JlLmNvbXBhcmVOb3JtYWxBbmRCZXN0KGZpbmFsU2NvcmUpOyAvLyB0ZXN0XHJcbiAgICAgICAgY29uc3QgdHdMaXN0ID0gW107XHJcbiAgICAgICAgY29uc3Qgc2Z4Q29tbW9uVHdDb25maWcgPSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0aW5nIHNjb3JlIHNmeFxyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogc2NvcmUsIGR1cmF0aW9uOiAxMDAsIHJlcGVhdDogOSxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4geyBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7IH0sXHJcbiAgICAgICAgICAgIC8vIG9uUmVwZWF0OiAoKSA9PiB7IEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZVNjb3JlJyk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHNjYWxlQ29tbW9uVHdDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjMsIGR1cmF0aW9uOiA1MDAsIHlveW86IHRydWUsIGVhc2U6ICdCYWNrLmVhc2VJbk91dCcsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHdMaXN0LnB1c2goc2Z4Q29tbW9uVHdDb25maWcsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGVDb21tb25Ud0NvbmZpZyksIHsgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNjb3JlXHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiBzY29yZSwgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci5zY29yZVR4dC5zZXRUZXh0KHR3RGF0YS52YWx1ZS50b0ZpeGVkKDApKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTsgfSwgMjAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHNmeENvbW1vblR3Q29uZmlnLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNjYWxlQ29tbW9uVHdDb25maWcpLCB7IG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIGJvbnVzIHRpbWVcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IGJvbnVzVGltZSwgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFRleHQodHdEYXRhLnZhbHVlLnRvRml4ZWQoMCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LCAyMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goc2Z4Q29tbW9uVHdDb25maWcsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGVDb21tb25Ud0NvbmZpZyksIHsgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNjb3JlIHZpYSBib251cyB0aW1lIChmaW5hbCBzY29yZSlcclxuICAgICAgICAgICAgZnJvbTogc2NvcmUsIHRvOiBmaW5hbFNjb3JlLCBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFRleHQodHdEYXRhLnZhbHVlLnRvRml4ZWQoMCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93IG5ldyBiZXN0IHNjb3JlIHBlcmZvcm1hbmNlIGlmIHNjb3JlIGlzIGJldHRlciB0aGFuIHByZXYgYmVzdCBvbmVcclxuICAgICAgICAgICAgICAgIGlmIChmaW5hbFNjb3JlID4gcHJldkJlc3RTY29yZSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0Jlc3RTY29yZVR4dC5zaG93KGZpbmFsU2NvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpO1xyXG4gICAgfSxcclxuICAgIHNob3c6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgZGF0YSAmJiB0aGlzLnNldFR4dERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5sYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubmV3QmVzdFNjb3JlVHh0LmhpZGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRUeHREYXRhOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgY29uc3QgeyB0aXRsZSwgYm9udXNUaW1lLCBzY29yZSwgZmluYWxTY29yZSB9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIHRoaXMubGF5ZXIudGl0bGVUeHQuc2V0VGV4dCh0aXRsZSk7XHJcbiAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFRleHQoYm9udXNUaW1lKTtcclxuICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFRleHQoc2NvcmUpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdEdhbWVPdmVyID0gKCkgPT4ge1xyXG4gICAgR2FtZU92ZXIuc2V0VHh0RGF0YSh7XHJcbiAgICAgICAgdGl0bGU6ICdUaW1lIE92ZXInLFxyXG4gICAgICAgIGJvbnVzVGltZTogMCxcclxuICAgICAgICBzY29yZTogMCxcclxuICAgICAgICBmaW5hbFNjb3JlOiAwXHJcbiAgICB9KTtcclxuICAgIEdhbWVPdmVyLmhpZGUoKTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbn07XHJcbmNvbnN0IENvbnRleHRUeHRHYXBIID0gVmlldy5oIC8gMTg7XHJcbmNvbnN0IEJ0bkdhcFcgPSBWaWV3LncgLyA2O1xyXG5jb25zdCBDcmVhdGVHYW1lT3ZlciA9IChzY2VuZSwgdGhlbWVJZHgpID0+IHtcclxuICAgIGNvbnN0IHRoZW1lQ29sb3JMaXN0ID0gWydHcmVlbicsICdCcm93bicsICdCbHVlJ107XHJcbiAgICBjb25zdCBjb2xvciA9IHRoZW1lQ29sb3JMaXN0W3RoZW1lSWR4XTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJycpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgR2FtZU92ZXIubGF5ZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZKTtcclxuICAgIGNvbnN0IGJnID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdibGFja1NjcmVlbicpO1xyXG4gICAgYmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgYmcuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJnLnNldEFscGhhKDAuNCk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdwYW5lbCcgKyBjb2xvcik7XHJcbiAgICBjb250ZXh0LnNldERpc3BsYXlTaXplKFZpZXcudyAtIENvbnRleHRNYXJnaW5XLCBWaWV3LmggLSBDb250ZXh0TWFyZ2luSCk7XHJcbiAgICBjb25zdCB0aXRsZUJnID0gc2NlbmUuYWRkLmltYWdlKDAsIC1WaWV3LmggLyA0LCAnYnRuJyArIGNvbG9yKS5zZXRTY2FsZSgxLjgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBzY2VuZS5hZGQudGV4dCh0aXRsZUJnLngsIHRpdGxlQmcueSwgJ0dhbWUgT3ZlcicpO1xyXG4gICAgR2FtZU92ZXIubGF5ZXIudGl0bGVUeHQgPSB0aXRsZTtcclxuICAgIGNvbnN0IGJvbnVzVGltZSA9IHNjZW5lLmFkZC50ZXh0KDAsIC1Db250ZXh0VHh0R2FwSCwgJ0JvbnVzIFRpbWUnKTtcclxuICAgIGNvbnN0IGJvbnVzVGltZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIGJvbnVzVGltZS55ICsgQ29udGV4dFR4dEdhcEgsICcwJyk7XHJcbiAgICBHYW1lT3Zlci5sYXllci50aW1lVHh0ID0gYm9udXNUaW1lVHh0O1xyXG4gICAgY29uc3Qgc2NvcmUgPSBzY2VuZS5hZGQudGV4dCgwLCBDb250ZXh0VHh0R2FwSCwgJ1Njb3JlJyk7XHJcbiAgICBjb25zdCBzY29yZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIHNjb3JlLnkgKyBDb250ZXh0VHh0R2FwSCwgJ1Njb3JlJyk7XHJcbiAgICBHYW1lT3Zlci5sYXllci5zY29yZVR4dCA9IHNjb3JlVHh0O1xyXG4gICAgW0dhbWVPdmVyLm92ZXJUeHQsIHRpdGxlLCBib251c1RpbWUsIGJvbnVzVGltZVR4dCwgc2NvcmUsIHNjb3JlVHh0XS5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGVsZSk7XHJcbiAgICB9KTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQuc2V0Rm9udFNpemUoVHh0T3ZlckhlYWRTaXplKTtcclxuICAgIHRpdGxlLnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgY29uc3QgdGl0bGVCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoLUJ0bkdhcFcsIFZpZXcuaCAvIDQsICdvdmVyQnRuVXAnICsgY29sb3IpLnNldEludGVyYWN0aXZlKCkuc2V0U2NhbGUoMik7XHJcbiAgICBjb25zdCB0aXRsZUJ0bkltZyA9IHNjZW5lLmFkZC5pbWFnZSh0aXRsZUJ0bi54LCB0aXRsZUJ0bi55IC0gNCwgJ292ZXJCYWNrJykuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGNvbnN0IHRpdGxlRnVuY0Rvd24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGl0bGVCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0bkRvd24nICsgY29sb3IpO1xyXG4gICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgKyA0KTtcclxuICAgIH07XHJcbiAgICBjb25zdCB0aXRsZUZ1bmNVcCA9ICgpID0+IHtcclxuICAgICAgICB0aXRsZUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuVXAnICsgY29sb3IpO1xyXG4gICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgLSA0KTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgICAgICBTdG9wR2FtZShzY2VuZSk7XHJcbiAgICAgICAgU3RhcnRUaXRsZShzY2VuZSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdGl0bGVGdW5jT3V0ID0gKHB0cikgPT4ge1xyXG4gICAgICAgIHRpdGxlQnRuLnNldFRleHR1cmUoJ292ZXJCdG5VcCcgKyBjb2xvcik7XHJcbiAgICAgICAgaWYgKHB0ci5pc0Rvd24pXHJcbiAgICAgICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgLSA0KTtcclxuICAgIH07XHJcbiAgICB0aXRsZUJ0bi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7IHRpdGxlRnVuY0Rvd24oKTsgfSk7XHJcbiAgICB0aXRsZUJ0bkltZy5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7IHRpdGxlRnVuY0Rvd24oKTsgfSk7XHJcbiAgICB0aXRsZUJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4geyB0aXRsZUZ1bmNVcCgpOyB9KTtcclxuICAgIHRpdGxlQnRuSW1nLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHRpdGxlRnVuY1VwKCk7IH0pO1xyXG4gICAgdGl0bGVCdG4ub24oJ3BvaW50ZXJvdXQnLCAocHRyKSA9PiB7IHRpdGxlRnVuY091dChwdHIpOyB9KTtcclxuICAgIHRpdGxlQnRuSW1nLm9uKCdwb2ludGVyb3V0JywgKHB0cikgPT4geyB0aXRsZUZ1bmNPdXQocHRyKTsgfSk7XHJcbiAgICBjb25zdCByZXRyeUJ0biA9IHNjZW5lLmFkZC5pbWFnZShCdG5HYXBXLCB0aXRsZUJ0bi55LCAnb3ZlckJ0blVwJyArIGNvbG9yKS5zZXRJbnRlcmFjdGl2ZSgpLnNldFNjYWxlKDIpO1xyXG4gICAgY29uc3QgcmV0cnlCdG5JbWcgPSBzY2VuZS5hZGQuaW1hZ2UocmV0cnlCdG4ueCwgcmV0cnlCdG4ueSAtIDQsICdvdmVyUmV0cnknKS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgY29uc3QgcmV0cnlGdW5jRG93biA9ICgpID0+IHtcclxuICAgICAgICByZXRyeUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuRG93bicgKyBjb2xvcik7XHJcbiAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSArIDQpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJldHJ5RnVuY1VwID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHJ5QnRuLnNldFRleHR1cmUoJ292ZXJCdG5VcCcgKyBjb2xvcik7XHJcbiAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSAtIDQpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgIFJlc3RhcnRHYW1lKHNjZW5lKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZXRyeUZ1bmNPdXQgPSAocHRyKSA9PiB7XHJcbiAgICAgICAgcmV0cnlCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0blVwJyArIGNvbG9yKTtcclxuICAgICAgICBpZiAocHRyLmlzRG93bilcclxuICAgICAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSAtIDQpO1xyXG4gICAgfTtcclxuICAgIHJldHJ5QnRuLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmV0cnlGdW5jRG93bigpOyB9KTtcclxuICAgIHJldHJ5QnRuSW1nLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmV0cnlGdW5jRG93bigpOyB9KTtcclxuICAgIHJldHJ5QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHJldHJ5RnVuY1VwKCk7IH0pO1xyXG4gICAgcmV0cnlCdG5JbWcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgcmV0cnlGdW5jVXAoKTsgfSk7XHJcbiAgICByZXRyeUJ0bi5vbigncG9pbnRlcm91dCcsIChwdHIpID0+IHsgcmV0cnlGdW5jT3V0KHB0cik7IH0pO1xyXG4gICAgcmV0cnlCdG5JbWcub24oJ3BvaW50ZXJvdXQnLCAocHRyKSA9PiB7IHJldHJ5RnVuY091dChwdHIpOyB9KTtcclxuICAgIEdhbWVPdmVyLmxheWVyLmFkZChbXHJcbiAgICAgICAgYmcsXHJcbiAgICAgICAgY29udGV4dCxcclxuICAgICAgICB0aXRsZUJnLCB0aXRsZSxcclxuICAgICAgICBib251c1RpbWUsIGJvbnVzVGltZVR4dCxcclxuICAgICAgICBzY29yZSwgc2NvcmVUeHQsXHJcbiAgICAgICAgdGl0bGVCdG4sIHRpdGxlQnRuSW1nLFxyXG4gICAgICAgIHJldHJ5QnRuLCByZXRyeUJ0bkltZyxcclxuICAgIF0pO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSBWaWV3LmggLyA0LCAnYnRuJyArIGNvbG9yKTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFNjYWxlKEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQgPSBzY2VuZS5hZGQudGV4dChHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy54LCBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy55IC0gNiwgJyAgICAgIE5ld1xcbkJlc3QgU2NvcmUhJyk7XHJcbiAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQpO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldEZvbnRGYW1pbHkoJ0FyaWFsIEJsYWNrJyk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2hvdyA9ICgpID0+IHtcclxuICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy5zZXRTY2FsZSgwLjEgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlVywgMC4xICogR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZUgpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zZXRTY2FsZSgwLjEpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgLy8gR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLjEsIHRvOiAxLCBkdXJhdGlvbjogODAwLCBlYXNlOiAnQmFjay5lYXNlSW5PdXQnLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0U2NhbGUodmFsdWUgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlVywgdmFsdWUgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0U2NhbGUodmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBFZnguYW5pbU5ld0Jlc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5oaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFNjYWxlKDAuMSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCAwLjEgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zZXRTY2FsZSgxKTtcclxuICAgIH07XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuaGlkZSgpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIub3ZlclR4dCwgJ3R4dCcpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIubGF5ZXIsICdnYW1lT3ZlcicpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcsICduZXdCZXN0Jyk7XHJcbiAgICBTZXREZXB0aChHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQsICduZXdCZXN0Jyk7XHJcbiAgICBJbml0R2FtZU92ZXIoKTtcclxuICAgIHJldHVybiBHYW1lT3ZlcjtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZU92ZXI7XHJcbmV4cG9ydCB7IEluaXRHYW1lT3ZlciwgQ3JlYXRlR2FtZU92ZXIgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IFJuZENpcmNsZUltZ1RleHR1cmUgPSBbJ2JsdWVCYWxsJywgJ2dyZWVuQmFsbCcsICdicm93bkJhbGwnXTtcclxuY29uc3QgR2V0Q2lyY2xlU2hhcGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBSYWRpdXNWYWx1ZSA9IDYwO1xyXG4gICAgY29uc3QgUmFkaXVzID0gVmlldy5jYWxjUmF0aW8oUmFkaXVzVmFsdWUpO1xyXG4gICAgbGV0IGJEYXRhID0ge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhpdEFyZWE6IG5ldyBQaGFzZXIuR2VvbS5DaXJjbGUoUmFkaXVzIC8gMiwgUmFkaXVzIC8gMiwgUmFkaXVzKSxcclxuICAgICAgICBiRGF0YTogYkRhdGEsXHJcbiAgICAgICAgY2FsbGJhY2s6IFBoYXNlci5HZW9tLkNpcmNsZS5Db250YWlucyxcclxuICAgICAgICBzY29yZTogKFJhZGl1c1ZhbHVlICoqIDIpICogMyAvIDEwMCxcclxuICAgICAgICBib2R5Q29uZmlnOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjaXJjbGUnLFxyXG4gICAgICAgICAgICByYWRpdXM6IFJhZGl1cyxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHg6IFJhZGl1cyAvIDIsIHk6IFJhZGl1cyAvIDIgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1nVGV4dHVyZTogUm5kQ2lyY2xlSW1nVGV4dHVyZVtHZXRSbmRJbnQoMCwgUm5kQ2lyY2xlSW1nVGV4dHVyZS5sZW5ndGgpXSxcclxuICAgICAgICBzZXRJbWdEaXNwbGF5U2l6ZTogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFNoYXBlSW1nKCkuc2V0RGlzcGxheVNpemUoUmFkaXVzICogMiwgUmFkaXVzICogMik7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRDaXJjbGUoUmFkaXVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdldENpcmNsZVNoYXBlO1xyXG5leHBvcnQgeyBSbmRDaXJjbGVJbWdUZXh0dXJlIH07XHJcbiIsImltcG9ydCB7IEdldFJuZEludCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5jb25zdCBSbmRSZWN0SW1nVGV4dHVyZSA9IFsnYmx1ZVJlY3QnLCAnZ3JlZW5SZWN0JywgJ2Jyb3duUmVjdCddO1xyXG5jb25zdCBHZXRSZWN0YW5nbGVTaGFwZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IFNob3J0U2lkZVZhbHVlID0gMTAwO1xyXG4gICAgY29uc3QgTG9uZ1NpZGVWYWx1ZSA9IFNob3J0U2lkZVZhbHVlICsgU2hvcnRTaWRlVmFsdWUgLyAyO1xyXG4gICAgY29uc3QgU2hvcnRTaWRlID0gVmlldy5jYWxjUmF0aW8oU2hvcnRTaWRlVmFsdWUpO1xyXG4gICAgY29uc3QgTG9uZ1NpZGUgPSBWaWV3LmNhbGNSYXRpbyhMb25nU2lkZVZhbHVlKTtcclxuICAgIGxldCBiRGF0YSA9IHt9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoaXRBcmVhOiBuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKFNob3J0U2lkZSAvIDIsIExvbmdTaWRlIC8gMiwgU2hvcnRTaWRlLCBMb25nU2lkZSksXHJcbiAgICAgICAgYkRhdGE6IGJEYXRhLFxyXG4gICAgICAgIGNhbGxiYWNrOiBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMsXHJcbiAgICAgICAgc2NvcmU6IFNob3J0U2lkZVZhbHVlICogTG9uZ1NpZGVWYWx1ZSAvIDEwMCxcclxuICAgICAgICBib2R5Q29uZmlnOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdyZWN0YW5nbGUnLFxyXG4gICAgICAgICAgICB3aWR0aDogU2hvcnRTaWRlLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IExvbmdTaWRlLFxyXG4gICAgICAgICAgICBvZmZzZXQ6IHsgeDogU2hvcnRTaWRlIC8gMiwgeTogTG9uZ1NpZGUgLyAyIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ1RleHR1cmU6IFJuZFJlY3RJbWdUZXh0dXJlW0dldFJuZEludCgwLCBSbmRSZWN0SW1nVGV4dHVyZS5sZW5ndGgpXSxcclxuICAgICAgICBzZXRJbWdEaXNwbGF5U2l6ZTogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFNoYXBlSW1nKCkuc2V0RGlzcGxheVNpemUoU2hvcnRTaWRlLCBMb25nU2lkZSk7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTaXplKFNob3J0U2lkZSwgTG9uZ1NpZGUpO1xyXG4gICAgICAgICAgICAvLyBibG9jay5pbnB1dCAmJiBibG9jay5pbnB1dC5oaXRBcmVhLnNldFRvKFNob3J0U2lkZSwgTG9uZ1NpZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gYmxvY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2V0UmVjdGFuZ2xlU2hhcGU7XHJcbmV4cG9ydCB7IFJuZFJlY3RJbWdUZXh0dXJlIH07XHJcbiIsImltcG9ydCB7IEdldFJuZEludCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5jb25zdCBSbmRTcXVhcmVJbWdUZXh0dXJlID0gWydibHVlU3F1YXJlJywgJ2dyZWVuU3F1YXJlJywgJ2Jyb3duU3F1YXJlJ107XHJcbmNvbnN0IEdldFNxdWFyZVNoYXBlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgU2lkZVZhbHVlID0gMTAwO1xyXG4gICAgY29uc3QgU2lkZSA9IFZpZXcuY2FsY1JhdGlvKFNpZGVWYWx1ZSk7XHJcbiAgICBsZXQgYkRhdGEgPSB7fTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGl0QXJlYTogbmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZShTaWRlIC8gMiwgU2lkZSAvIDIsIFNpZGUsIFNpZGUpLFxyXG4gICAgICAgIGJEYXRhOiBiRGF0YSxcclxuICAgICAgICBjYWxsYmFjazogUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zLFxyXG4gICAgICAgIHNjb3JlOiBTaWRlVmFsdWUgKiBTaWRlVmFsdWUgLyAxMDAsXHJcbiAgICAgICAgYm9keUNvbmZpZzoge1xyXG4gICAgICAgICAgICB0eXBlOiAncmVjdGFuZ2xlJyxcclxuICAgICAgICAgICAgd2lkdGg6IFNpZGUsXHJcbiAgICAgICAgICAgIGhlaWdodDogU2lkZSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHg6IFNpZGUgLyAyLCB5OiBTaWRlIC8gMiB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWdUZXh0dXJlOiBSbmRTcXVhcmVJbWdUZXh0dXJlW0dldFJuZEludCgwLCBSbmRTcXVhcmVJbWdUZXh0dXJlLmxlbmd0aCldLFxyXG4gICAgICAgIHNldEltZ0Rpc3BsYXlTaXplOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICAgICAgYmxvY2suZ2V0U2hhcGVJbWcoKS5zZXREaXNwbGF5U2l6ZShTaWRlLCBTaWRlKTtcclxuICAgICAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldFNpemUoU2lkZSwgU2lkZSk7XHJcbiAgICAgICAgICAgIC8vIGJsb2NrLmlucHV0ICYmIGJsb2NrLmlucHV0LmhpdEFyZWEuc2V0VG8oU2lkZSwgU2lkZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBibG9jaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHZXRTcXVhcmVTaGFwZTtcclxuZXhwb3J0IHsgUm5kU3F1YXJlSW1nVGV4dHVyZSB9O1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRFbGVGcm9tQXJyYXkgfSBmcm9tICdAc3JjL3V0aWxzL2V0Yyc7XHJcbmltcG9ydCBHZXRDaXJjbGVTaGFwZSBmcm9tICcuL2NpcmNsZSc7XHJcbmltcG9ydCBHZXRSZWN0YW5nbGVTaGFwZSBmcm9tICcuL3JlY3RhbmdsZSc7XHJcbmltcG9ydCBHZXRTcXVhcmVTaGFwZSBmcm9tICcuL3NxdWFyZSc7XHJcbmNvbnN0IFNoYXBlVHlwZU5hbWVMaXN0ID0gWydiYWxsJywgJ3JlY3QnLCAnc3F1YXJlJyxdO1xyXG5jb25zdCBTaGFwZVR5cGVQcm9wZXJ0aWVzTGlzdCA9IFtcclxuICAgIEdldENpcmNsZVNoYXBlKCksIEdldFJlY3RhbmdsZVNoYXBlKCksIEdldFNxdWFyZVNoYXBlKCksXHJcbl07XHJcbmNvbnN0IENvbW1vblB0ckV2dCA9IHtcclxuICAgIHB0ckRvd246IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjb21tb24gcHRyIGRvd24nKTtcclxuICAgIH0sXHJcbiAgICBwdHJVcDogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvbW1vbiBwdHIgdXAnKTtcclxuICAgIH0sXHJcbiAgICBwdHJPdXQ6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjb21tb24gcHRyIG91dCcpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgUHRyRXZ0TGlzdCA9IFsncHRyRG93bicsICdwdHJVcCcsICdkcmFnJywgJ2RyYWdFbmQnXTtcclxuY29uc3QgU2hhcGVUeXBlTGlzdCA9IFNoYXBlVHlwZU5hbWVMaXN0Lm1hcCgoZWxlLCBpZHgpID0+IHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIHNldHRpbmcgYmxvY2sgZGF0YSB3aXRoIGNvbW1vbiBldnRcclxuICAgIGxldCBiRGF0YSA9IChfYSA9IFNoYXBlVHlwZVByb3BlcnRpZXNMaXN0W2lkeF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iRGF0YTtcclxuICAgIGlmICghYkRhdGEpXHJcbiAgICAgICAgYkRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBDb21tb25QdHJFdnQpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgUHRyRXZ0TGlzdC5tYXAoKHB0ckV2dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdG1wUHJldkZ1bmMgPSBiRGF0YVtwdHJFdnRdO1xyXG4gICAgICAgICAgICBpZiAodG1wUHJldkZ1bmMpIHtcclxuICAgICAgICAgICAgICAgIFNoYXBlVHlwZVByb3BlcnRpZXNMaXN0W2lkeF0uYkRhdGFbcHRyRXZ0XSA9IChibG9jaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbW1vblB0ckV2dFtwdHJFdnRdKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBQcmV2RnVuYyhibG9jayk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IHR5cGVOYW1lOiBlbGUgfSwgU2hhcGVUeXBlUHJvcGVydGllc0xpc3RbaWR4XSk7XHJcbn0pO1xyXG5jb25zdCBTaGFwZVN5c3RlbSA9IHtcclxuICAgIGdldENlcnRhaW5TaGFwZTogZnVuY3Rpb24gKHNoYXBlVHlwZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gU2hhcGVUeXBlTGlzdC5maW5kKChlbGUpID0+IGVsZS50eXBlTmFtZSA9PT0gc2hhcGVUeXBlTmFtZSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0Um5kU2hhcGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEdldFJuZEVsZUZyb21BcnJheShTaGFwZVR5cGVMaXN0KTsgfSxcclxufTtcclxuY29uc3QgU2V0QmxvY2tTaGFwZSA9IChibG9jaywgdHlwZU5hbWUpID0+IHtcclxuICAgIGlmICghdHlwZU5hbWUpXHJcbiAgICAgICAgYmxvY2suc2V0U2hhcGUoU2hhcGVTeXN0ZW0uZ2V0Um5kU2hhcGUoKSk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgYmxvY2suc2V0U2hhcGUoU2hhcGVTeXN0ZW0uZ2V0Q2VydGFpblNoYXBlKHR5cGVOYW1lKSk7XHJcbiAgICBibG9jay5zZXRTaGFwZU5hbWUoYmxvY2suZ2V0U2hhcGUoKS50eXBlTmFtZSk7XHJcbiAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0Qm9keShibG9jay5nZXRTaGFwZSgpLmJvZHlDb25maWcpO1xyXG4gICAgYmxvY2suZ2V0U2hhcGVJbWcoKS5zZXRUZXh0dXJlKGJsb2NrLmdldFNoYXBlKCkuaW1nVGV4dHVyZSk7XHJcbiAgICBibG9jay5nZXRTaGFwZSgpLnNldEltZ0Rpc3BsYXlTaXplKGJsb2NrKTtcclxuICAgIGlmIChibG9jay5nZXRTaGFwZSgpLmJEYXRhKVxyXG4gICAgICAgIGJsb2NrLmFkZEJsb2NrRGF0YShibG9jay5nZXRTaGFwZSgpLmJEYXRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2hhcGVTeXN0ZW07XHJcbmV4cG9ydCB7IENvbW1vblB0ckV2dCwgU2V0QmxvY2tTaGFwZSB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IEdldFJuZEludCwgR2V0Um5kTnVtIH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IEJhc2ljQmxvY2ssIHsgRGVhdGhCbG9jaywgU3Bhd25CbG9jaywgVXBkYXRlQmxvY2sgfSBmcm9tICcuL2Jhc2ljJztcclxuaW1wb3J0IHsgQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLCBTZXQyVHlwZUJsb2NrIH0gZnJvbSAnLi90eXBlJztcclxuaW1wb3J0IEdhbWVPdmVyIGZyb20gJy4uL3VpL2dhbWVvdmVyJztcclxuaW1wb3J0IFNjb3JlIGZyb20gJy4uL3VpL3Njb3JlJztcclxuaW1wb3J0IEdhbWVUaW1lIGZyb20gJy4uL3VpL3RpbWUnO1xyXG5pbXBvcnQgRWZ4IGZyb20gJy4uL2VmeCc7XHJcbmltcG9ydCB7IFNldEJsb2NrU2hhcGUgfSBmcm9tICcuL3NoYXBlJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmNvbnN0IEJsb2NrU3lzdGVtID0ge1xyXG4gICAgLy8gbWFuYWdlIGJsb2NrIGxpc3RcclxuICAgIG9uU2NyZWVuTGlzdDogW10sXHJcbiAgICBzdGFuZGJ5TGlzdDogW10sXHJcbiAgICAvLyBzdGF0aWMgcG9zdGlvbiBvZiBibG9ja1xyXG4gICAgc3RhbmRieVBvc1g6IC01MDAsXHJcbiAgICBzdGFuZGJ5UG9zWTogLTUwMCxcclxuICAgIGxlZnRYOiAwLFxyXG4gICAgcmlnaHRYOiBWaWV3LncsXHJcbiAgICBib3R0b21ZOiAwLFxyXG4gICAgc3Bhd25ZOiAtMjAwLFxyXG4gICAgZ2V0Um5kU3Bhd25YOiBmdW5jdGlvbiAoKSB7IHJldHVybiBHZXRSbmRJbnQodGhpcy5sZWZ0WCwgdGhpcy5yaWdodFgpOyB9LFxyXG4gICAgZ2V0Um5kQW5nbGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEdldFJuZEludCgwLCAzNjApOyB9LFxyXG4gICAgLy8gZ2FtZSBvdmVyIHJlbGF0ZWQgcHJvcGVydGllc1xyXG4gICAgb3ZlckxpbmVZOiAwLFxyXG4gICAgb3ZlckNudDogMCxcclxuICAgIG92ZXJDbnRNYXg6IDggKiAxMDAwLFxyXG4gICAgb3Zlck1heEJsb2NrOiA4LFxyXG4gICAgaXNHYW1lT3ZlcjogZmFsc2UsXHJcbiAgICBnZXRJc0dhbWVPdmVyOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmlzR2FtZU92ZXI7IH0sXHJcbiAgICBzZXRJc0dhbWVPdmVyOiBmdW5jdGlvbiAoaXNPdmVyKSB7IHJldHVybiB0aGlzLmlzR2FtZU92ZXIgPSBpc092ZXI7IH0sXHJcbiAgICAvLyByZXNwb25zaXZlIHNwYXduaW5nIGJsb2NrIHRpbWVcclxuICAgIG5leHRTcGF3blRpbWU6IDAsXHJcbiAgICBzcGF3bkRlbGF5QnlTZWNMaXN0OiBbODAwLCA5NTAsIDExMDAsIDEyNTAsIDE0MDAsIDE1NTBdLFxyXG4gICAgc3Bhd25EZWxheUJ5U2VjOiAxODAwLFxyXG59O1xyXG5jb25zdCBJbml0QmxvY2tTeXN0ZW0gPSAoKSA9PiB7XHJcbiAgICBSZW1vdmVBbGxCbG9ja09uRGlzcGxheSgpO1xyXG4gICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3ZlcihmYWxzZSk7XHJcbiAgICBCbG9ja1N5c3RlbS5uZXh0U3Bhd25UaW1lID0gR2FtZVRpbWUuaW5pdDtcclxuICAgIEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlYyA9IEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlY0xpc3RbNV07XHJcbn07XHJcbmNvbnN0IEFkZENlcnRhaW5CbG9jayA9IChzY2VuZSwgdHlwZU5hbWUpID0+IHtcclxuICAgIGxldCBibG9jaztcclxuICAgIC8vIGdldCBibG9jayBmcm9tIHN0YW5keSBsaXN0IG9yIGNyZWF0ZSBuZXcgb25lXHJcbiAgICBpZiAoQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGJsb2NrID0gQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3Quc2hpZnQoKTtcclxuICAgICAgICBpZiAoIWJsb2NrLnNjZW5lKSB7IC8vIGlzIGJsb2NrIHNjZW5lIHJlbW92ZWQ/XHJcbiAgICAgICAgICAgIGJsb2NrLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgYmxvY2sgPSBuZXcgQmFzaWNCbG9jayhzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIGJsb2NrID0gbmV3IEJhc2ljQmxvY2soc2NlbmUpO1xyXG4gICAgLy8gc2V0IGJsb2NrIHNoYXBlICYgdHlwZSwgcHVzaCB0byBvbiBzY3JlZW4gbGlzdCAmIHNwYXduXHJcbiAgICBTZXRCbG9ja1NoYXBlKGJsb2NrKTtcclxuICAgIFNldDJUeXBlQmxvY2soYmxvY2ssIHR5cGVOYW1lKTtcclxuICAgIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5wdXNoKGJsb2NrKTtcclxuICAgIFNwYXduQmxvY2soYmxvY2spO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBBZGRPYnN0YWNsZUJsb2NrID0gKGJsb2NrKSA9PiB7XHJcbiAgICBibG9jay5zY2VuZS5jYW1lcmFzLm1haW4uc2hha2UoMjAwLCAwLjAyLCB0cnVlKTtcclxuICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdzcGF3bk9ic3RhY2xlU2Z4Jyk7XHJcbiAgICBBZGRDZXJ0YWluQmxvY2soYmxvY2suc2NlbmUsICdvYnN0YWNsZScpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBHZXRSbmRCbG9ja1R5cGUgPSAoKSA9PiB7XHJcbiAgICAvLyBnZXQgcmFuZG9tIGJsb2NrIHR5cGUgdmlhIHNwYXduIGNoYW5jZVxyXG4gICAgbGV0IGRpc3RyaWJ1dGlvbkFyciA9IFtdO1xyXG4gICAgQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgLy8gZWxlLnNwYXduQ2hhbmNlID0gZWxlLnNwYXduQ2hhbmNlIC8gU3Bhd25NYXhDaGFuY2U7XHJcbiAgICAgICAgaWYgKGVsZS5zcGF3bkNoYW5jZSA9PT0gMClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlLnNwYXduQ2hhbmNlOyBpKyspIHtcclxuICAgICAgICAgICAgZGlzdHJpYnV0aW9uQXJyLnB1c2goZWxlLnR5cGVOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkaXN0cmlidXRpb25BcnJbR2V0Um5kSW50KDAsIGRpc3RyaWJ1dGlvbkFyci5sZW5ndGgpXTtcclxufTtcclxuY29uc3QgQWRkUm5kQmxvY2sgPSAoc2NlbmUpID0+IHtcclxuICAgIGNvbnN0IHJuZFR5cGUgPSBHZXRSbmRCbG9ja1R5cGUoKTtcclxuICAgIEFkZENlcnRhaW5CbG9jayhzY2VuZSwgcm5kVHlwZSk7XHJcbn07XHJcbmNvbnN0IENsZWFyQmxvY2sgPSAoYmxvY2ssIHNjb3JlKSA9PiB7XHJcbiAgICBpZiAoIWJsb2NrKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGxldCBibG9ja1Njb3JlID0gc2NvcmUgPyBzY29yZSA6IGJsb2NrLmdldFNjb3JlKCk7XHJcbiAgICBTY29yZS5hZGQoYmxvY2tTY29yZSk7XHJcbiAgICBFZnguYW5pbVNjb3JlKGJsb2NrLCBibG9ja1Njb3JlKTtcclxuICAgIGNvbnN0IHsgdmFsdWUsIGNoYW5jZSB9ID0gYmxvY2suZ2V0VGltZUluY3JlYXNlKCk7XHJcbiAgICBpZiAoR2FtZVRpbWUuY3VyciA+IEdhbWVUaW1lLmxhc3QxMCAmJiBjaGFuY2UgPiBHZXRSbmROdW0oMCwgMTAwKSkge1xyXG4gICAgICAgIEdhbWVUaW1lLmluY3JlYXNlVGltZSh2YWx1ZSk7XHJcbiAgICAgICAgRWZ4LmFuaW1UaW1lSW5jcmVhc2UoYmxvY2ssIGNoYW5jZSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgUmVtb3ZlQmxvY2soYmxvY2spO1xyXG59O1xyXG5jb25zdCBSZW1vdmVCbG9jayA9IChibG9jaykgPT4ge1xyXG4gICAgLy8gcmVtb3ZlIGZyb20gb25TY3JlZW5MaXN0XHJcbiAgICBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QgPSBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QuZmlsdGVyKHNjcmVlbkJsb2NrID0+IHNjcmVlbkJsb2NrLmlkICE9PSBibG9jay5pZCk7XHJcbiAgICBpZiAoIWJsb2NrLnNjZW5lKSB7XHJcbiAgICAgICAgYmxvY2suZGVzdHJveSgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGNoY2sgaXMgYWxyZWFkeSBpbiBzdGFuZGJ5IGxpc3RcclxuICAgIGlmIChCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdC5zb21lKHN0YW5kYnlCbG9jayA9PiBzdGFuZGJ5QmxvY2suaWQgPT09IGJsb2NrLmlkKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBEZWF0aEJsb2NrKGJsb2NrKTtcclxuICAgIGJsb2NrLnNldFBvc2l0aW9uKEJsb2NrU3lzdGVtLnN0YW5kYnlQb3NYLCBCbG9ja1N5c3RlbS5zdGFuZGJ5UG9zWSk7XHJcbiAgICBCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdC5wdXNoKGJsb2NrKTtcclxufTtcclxuY29uc3QgUmVtb3ZlQWxsQmxvY2tPbkRpc3BsYXkgPSAoKSA9PiB7XHJcbiAgICBpZiAoIUJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QubWFwKChibG9jaykgPT4geyBSZW1vdmVCbG9jayhibG9jayk7IH0pO1xyXG4gICAgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0ID0gW107XHJcbiAgICBpZiAoIUJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0KVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0ID0gQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3QuZmlsdGVyKChzdGFuZGJ5QmxvY2spID0+IHtcclxuICAgICAgICBpZiAoIXN0YW5kYnlCbG9jay5zY2VuZSkge1xyXG4gICAgICAgICAgICBzdGFuZGJ5QmxvY2suZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBzdGFuZGJ5QmxvY2s7XHJcbiAgICB9KTtcclxufTtcclxuY29uc3QgVXBkYXRlQmxvY2tDaGNrSXNHYW1lT3ZlciA9IChzY2VuZSwgdGltZSwgZGVsdGEpID0+IHtcclxuICAgIC8vIGNoY2sgZXZlcnkgYmxvY2sgd2hpY2ggaXMgZ2FtZSBvdmVyIGJvcmRlciBsaW5lXHJcbiAgICBjb25zdCBpc092ZXJCb3JkZXJMaW5lID0gQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0LnNvbWUoKHNjcmVlbkJsb2NrKSA9PiB7XHJcbiAgICAgICAgaWYgKCFzY3JlZW5CbG9jaylcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzY3JlZW5CbG9jay55IDwgQmxvY2tTeXN0ZW0ub3ZlckxpbmVZO1xyXG4gICAgfSk7XHJcbiAgICAvLyBibG9jayBjb3VudCBpcyBvdmVyIG1heCAmIGF0IGxlYXN0IG9uZSBibG9jayBjcm9zcyBnYW1lIG92ZXIgYm9yZGVyIGxpbmVcclxuICAgIGlmIChpc092ZXJCb3JkZXJMaW5lICYmIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5sZW5ndGggPiBCbG9ja1N5c3RlbS5vdmVyTWF4QmxvY2spIHtcclxuICAgICAgICBCbG9ja1N5c3RlbS5vdmVyQ250ICs9IGRlbHRhICogR2FtZVRpbWUudGltZVNjYWxlO1xyXG4gICAgICAgIC8vIGdhbWUgb3ZlciBjb25kaXRpb25cclxuICAgICAgICBpZiAoQmxvY2tTeXN0ZW0ub3ZlckNudCA+IEJsb2NrU3lzdGVtLm92ZXJDbnRNYXgpIHtcclxuICAgICAgICAgICAgQmxvY2tTeXN0ZW0ub3ZlckNudCA9IDA7XHJcbiAgICAgICAgICAgIEJsb2NrU3lzdGVtLnNldElzR2FtZU92ZXIodHJ1ZSk7XHJcbiAgICAgICAgICAgIEdhbWVPdmVyLmFuaW1HYW1lT3ZlcihzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3ZlcihmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBpbml0IGdhbWUgb3ZlciB3YXJuaW5nIHByb3BlcnRpZXNcclxuICAgICAgICBCbG9ja1N5c3RlbS5vdmVyQ250ID0gMDtcclxuICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKGZhbHNlKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgVXBkYXRlU3Bhd25CbG9ja3MgPSAoc2NlbmUsIGRlbHRhKSA9PiB7XHJcbiAgICAvLyBnZXQgZ2FtZSB0aW1lICYgdGltZWxpbmUgaWR4IGNhbGN1bGF0ZVxyXG4gICAgY29uc3QgZ2FtZVRpbWVDdXJyID0gR2FtZVRpbWUuZ2V0Q3VycigpO1xyXG4gICAgbGV0IHRpbWVsaW5lSWR4ID0gcGFyc2VJbnQoKGdhbWVUaW1lQ3VyciAvIDEwMDAgLyAxMCkudG9TdHJpbmcoKSk7XHJcbiAgICBpZiAodGltZWxpbmVJZHggPCAwKVxyXG4gICAgICAgIHRpbWVsaW5lSWR4ID0gMDtcclxuICAgIGlmICh0aW1lbGluZUlkeCA+PSBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWNMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRpbWVsaW5lSWR4ID0gQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjTGlzdC5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG4gICAgLy8gYWRqdXN0IHJlc3BvbnNpdmUgc3Bhd24gYmxvY2sgdGltZVxyXG4gICAgQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjID0gQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjTGlzdFt0aW1lbGluZUlkeF07XHJcbiAgICAvLyBzcGF3biBibG9ja1xyXG4gICAgQmxvY2tTeXN0ZW0ubmV4dFNwYXduVGltZSArPSBkZWx0YSAqIEdhbWVUaW1lLnRpbWVTY2FsZTtcclxuICAgIGlmIChCbG9ja1N5c3RlbS5uZXh0U3Bhd25UaW1lID4gQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjKSB7XHJcbiAgICAgICAgQmxvY2tTeXN0ZW0ubmV4dFNwYXduVGltZSA9IDA7XHJcbiAgICAgICAgQWRkUm5kQmxvY2soc2NlbmUpO1xyXG4gICAgfVxyXG4gICAgO1xyXG59O1xyXG5jb25zdCBVcGRhdGVBbGxCbG9ja3MgPSAoc2NlbmUsIHRpbWUsIGRlbHRhKSA9PiB7XHJcbiAgICBpZiAoQmxvY2tTeXN0ZW0uZ2V0SXNHYW1lT3ZlcigpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIFVwZGF0ZUJsb2NrQ2hja0lzR2FtZU92ZXIoc2NlbmUsIHRpbWUsIGRlbHRhKTtcclxuICAgIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5tYXAoYmxvY2sgPT4gVXBkYXRlQmxvY2soYmxvY2ssIHRpbWUsIGRlbHRhKSk7XHJcbiAgICBVcGRhdGVTcGF3bkJsb2NrcyhzY2VuZSwgZGVsdGEpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBCbG9ja1N5c3RlbTtcclxuZXhwb3J0IHsgQmFzaWNCbG9jaywgQWRkQ2VydGFpbkJsb2NrLCBBZGRPYnN0YWNsZUJsb2NrLCBHZXRSbmRCbG9ja1R5cGUsIEFkZFJuZEJsb2NrLCBJbml0QmxvY2tTeXN0ZW0sIENsZWFyQmxvY2ssIFJlbW92ZUJsb2NrLCBSZW1vdmVBbGxCbG9ja09uRGlzcGxheSwgVXBkYXRlQmxvY2tDaGNrSXNHYW1lT3ZlciwgVXBkYXRlQWxsQmxvY2tzLCBVcGRhdGVTcGF3bkJsb2NrcyB9O1xyXG4iLCJjb25zdCBDb250ZXh0TGF5ZXJNYXJnaW4gPSAxMjA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luID0gNTA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyID0gNzA7XHJcbmNvbnN0IFNldHRpbmdDb250ZXh0TWFyZ2luID0gNDA7XHJcbmNvbnN0IFNldHRpbmdUb3BDb250ZXh0TWFyZ2luID0gODA7XHJcbmV4cG9ydCB7IENvbnRleHRMYXllck1hcmdpbiwgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyLCBTZXR0aW5nQ29udGV4dE1hcmdpbiwgU2V0dGluZ1RvcENvbnRleHRNYXJnaW4sIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5pbXBvcnQgeyBDb250ZXh0TGF5ZXJNYXJnaW4gfSBmcm9tIFwiLlwiO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gXCIuLi9kZXB0aFwiO1xyXG5jb25zdCBQb3BVcCA9IHtcclxuICAgIGlzT3BlbjogZmFsc2UsXHJcbiAgICBib3R0b21MYXllcjogbnVsbCxcclxuICAgIGNvbnRleHRMYXllcjogbnVsbCxcclxuICAgIGV4aXRCdG46IG51bGwsXHJcbiAgICBzbmRMaXN0OiBbXSxcclxuICAgIHNob3c6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBiRGF0YSA9IGJsb2NrLmdldEJsb2NrRGF0YSgpO1xyXG4gICAgICAgIGlmIChiRGF0YSkge1xyXG4gICAgICAgICAgICBiRGF0YS5pc1BvcHVwT3BlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChiRGF0YS5wb3BVcENvbnRleHQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRMYXllciA9IGJEYXRhLnBvcFVwQ29udGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ib3R0b21MYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dExheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5leGl0QnRuLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAoYmxvY2spIHtcclxuICAgICAgICAgICAgY29uc3QgYkRhdGEgPSBibG9jay5nZXRCbG9ja0RhdGEoKTtcclxuICAgICAgICAgICAgYkRhdGEuaXNQb3B1cE9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgYmxvY2suc2V0QmxvY2tEYXRhKGJEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ib3R0b21MYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLmNvbnRleHRMYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLmV4aXRCdG4uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEluaXRQb3BVcCA9ICgpID0+IHtcclxuICAgIFBvcFVwLmNvbnRleHRMYXllci5yZW1vdmVBbGwoKTtcclxuICAgIFBvcFVwLmhpZGUoKTtcclxufTtcclxuY29uc3QgQ3JlYXRlUG9wVXAgPSAoc2NlbmUpID0+IHtcclxuICAgIFBvcFVwLmJvdHRvbUxheWVyID0gc2NlbmUuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICBQb3BVcC5ib3R0b21MYXllci5maWxsU3R5bGUoMHgwMDAwMDAsIDAuNCk7XHJcbiAgICBQb3BVcC5ib3R0b21MYXllci5maWxsUmVjdCgwLCAwLCBWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBQb3BVcC5ib3R0b21MYXllci5zZXRJbnRlcmFjdGl2ZShuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKDAsIDAsIFZpZXcudywgVmlldy5oKSwgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKTtcclxuICAgIFBvcFVwLmJvdHRvbUxheWVyLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IGNvbnNvbGUubG9nKCd0b3VjaGluZyBwb3B1cCBib3R0b20gbGF5ZXInKTsgfSk7XHJcbiAgICBQb3BVcC5jb250ZXh0TGF5ZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZKTtcclxuICAgIFBvcFVwLmV4aXRCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy53IC0gQ29udGV4dExheWVyTWFyZ2luLCBDb250ZXh0TGF5ZXJNYXJnaW4sICdleGl0QnRuJyk7XHJcbiAgICBQb3BVcC5leGl0QnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBQb3BVcC5leGl0QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgUG9wVXAuaGlkZSgpO1xyXG4gICAgfSk7XHJcbiAgICBbUG9wVXAuYm90dG9tTGF5ZXIsIFBvcFVwLmNvbnRleHRMYXllciwgUG9wVXAuZXhpdEJ0bl0ubWFwKChlbGUpID0+IHtcclxuICAgICAgICBlbGUuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgU2V0RGVwdGgoZWxlLCAncG9wVXAnKTtcclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBQb3BVcDtcclxuZXhwb3J0IHsgSW5pdFBvcFVwLCBDcmVhdGVQb3BVcCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZUhlYWRTaXplIH0gZnJvbSBcIi4uL2ZvbnRcIjtcclxuY29uc3QgR2FtZVN0YXJ0Q250ID0ge1xyXG4gICAgaXNTdGFydDogZmFsc2UsXHJcbiAgICBjbnRUeHQ6IG51bGwsXHJcbiAgICBjbnROdW06IDMsXHJcbiAgICBnZXRJc1N0YXJ0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmlzU3RhcnQ7IH0sXHJcbiAgICBzZXRJc1N0YXJ0OiBmdW5jdGlvbiAoaXNTdGFydCkgeyB0aGlzLmlzU3RhcnQgPSBpc1N0YXJ0OyB9LFxyXG4gICAgc2V0VHh0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBHYW1lU3RhcnRDbnQuY250VHh0LnNldFRleHQodmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICB9LFxyXG4gICAgc2V0VmlzaWJsZTogZnVuY3Rpb24gKHZpc2libGUpIHsgR2FtZVN0YXJ0Q250LmNudFR4dC5zZXRWaXNpYmxlKHZpc2libGUpOyB9LFxyXG4gICAgc2V0QWxwaGE6IGZ1bmN0aW9uIChhbHBoYSkgeyBHYW1lU3RhcnRDbnQuY250VHh0LnNldEFscGhhKGFscGhhKTsgfSxcclxuICAgIGFuaW1GYWRlT3V0OiBmdW5jdGlvbiAoc2NlbmUpIHtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAwLCBkdXJhdGlvbjogNDAwLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKGRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNTdGFydCh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGFuaW1DbnQ6IGZ1bmN0aW9uIChzY2VuZSkge1xyXG4gICAgICAgIGxldCBjbnQgPSAzO1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEwMDAsIGR1cmF0aW9uOiAxMDAwLCByZXBlYXQ6IDMsIGRlbGF5OiAxMDAwLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFR4dCgzKTtcclxuICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZTMnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNudC0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZUdvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeHQoJ0dvIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHh0KGNudCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndm9pY2UnICsgY250KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltRmFkZU91dChzY2VuZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEluaXRHYW1lU3RhcnRDbnQgPSAoKSA9PiB7XHJcbiAgICBHYW1lU3RhcnRDbnQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBHYW1lU3RhcnRDbnQuc2V0QWxwaGEoMSk7XHJcbiAgICBHYW1lU3RhcnRDbnQuc2V0SXNTdGFydChmYWxzZSk7XHJcbiAgICBHYW1lU3RhcnRDbnQuY250TnVtID0gMztcclxuICAgIEdhbWVTdGFydENudC5zZXRUeHQoR2FtZVN0YXJ0Q250LmNudE51bSk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhbWVTdGFydENudCA9IChzY2VuZSkgPT4ge1xyXG4gICAgR2FtZVN0YXJ0Q250LmNudFR4dCA9IHNjZW5lLmFkZC50ZXh0KFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnMycpO1xyXG4gICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUoR2FtZVN0YXJ0Q250LmNudFR4dCk7XHJcbiAgICBHYW1lU3RhcnRDbnQuY250VHh0LnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgSW5pdEdhbWVTdGFydENudCgpO1xyXG4gICAgR2FtZVN0YXJ0Q250LmFuaW1DbnQoc2NlbmUpO1xyXG4gICAgLy8gc2NlbmUuZXZlbnRzLm9uKFwic3RhcnRcIiwgKCkgPT4ge1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCdzdGFydCBzY2VuZSBldnQnKTtcclxuICAgIC8vICAgICBHYW1lU3RhcnRDbnQuYW5pbUNudChzY2VuZSk7XHJcbiAgICAvLyB9KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZVN0YXJ0Q250O1xyXG5leHBvcnQgeyBJbml0R2FtZVN0YXJ0Q250LCBDcmVhdGVHYW1lU3RhcnRDbnQgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSBcIi4uL2Jsb2NrL3N5c3RlbVwiO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gXCIuLi9kZXB0aFwiO1xyXG5jb25zdCBHYW1lV2FybmluZyA9IHtcclxuICAgIGhhc09uY2VTaG93OiB0cnVlLFxyXG4gICAgaGFzT25jZUhpZGU6IHRydWUsXHJcbiAgICB0aW1lOiA2ICogMTAwMCxcclxuICAgIHNpZ246IG51bGwsXHJcbiAgICBwcm9ncmVzc0JhcjogbnVsbCxcclxuICAgIHByb2dyZXNzQmFyTGluZTogbnVsbCxcclxuICAgIHByb2dyZXNzQW1vdW50OiAwLFxyXG4gICAgc2hha2VWYWx1ZTogMSxcclxuICAgIHVwZGF0ZVNoYWtlVmFsdWU6IChyZW1haW5lZE92ZXJDbnQpID0+IHtcclxuICAgICAgICBHYW1lV2FybmluZy5zaGFrZVZhbHVlID0gKEdhbWVXYXJuaW5nLnRpbWUgLSByZW1haW5lZE92ZXJDbnQpIC8gMTAwMDtcclxuICAgIH0sXHJcbiAgICBzaG93OiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NBbW91bnQgPSAwO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmRyYXcoKTtcclxuICAgICAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXJMaW5lLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmNsZWFyKCk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnN0b3BTZngoJ3dhcm5pbmdTZngnKTtcclxuICAgIH0sXHJcbiAgICBhcmNEZWdyZWU6ICgpID0+IHtcclxuICAgICAgICBjb25zdCBzdGFydEFuZ2xlID0gMjcwICsgKEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50KSAqICgtMTgwKTsgLy8gMjcwIH4gOTBcclxuICAgICAgICBjb25zdCBlbmRBbmdsZSA9IC05MCArIChHYW1lV2FybmluZy5wcm9ncmVzc0Ftb3VudCkgKiAxODA7IC8vIC05MCB+IDkwXHJcbiAgICAgICAgcmV0dXJuIHsgc3RhcnRBbmdsZTogc3RhcnRBbmdsZSwgZW5kQW5nbGU6IGVuZEFuZ2xlIH07XHJcbiAgICB9LFxyXG4gICAgZHJhdzogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmNsZWFyKCk7XHJcbiAgICAgICAgY29uc3QgciA9IEdhbWVXYXJuaW5nLnNpZ24ud2lkdGggKiA0IC8gNTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUubGluZVN0eWxlKDYsIDB4ZmJmZjAwLCAxKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUuc3Ryb2tlQ2lyY2xlKDAsIDAsIHIpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmZpbGxTdHlsZSgweGZiZmYwMCwgMC40KTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5iZWdpblBhdGgoKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5hcmMoMCwgMCwgciwgUGhhc2VyLk1hdGguRGVnVG9SYWQoR2FtZVdhcm5pbmcuYXJjRGVncmVlKCkuc3RhcnRBbmdsZSksIFBoYXNlci5NYXRoLkRlZ1RvUmFkKEdhbWVXYXJuaW5nLmFyY0RlZ3JlZSgpLmVuZEFuZ2xlKSwgdHJ1ZSwgMC4wMSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuZmlsbFBhdGgoKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5jbG9zZVBhdGgoKTtcclxuICAgICAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbiAgICB9LFxyXG4gICAgY2xlYXI6ICgpID0+IHtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5jbGVhcigpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5jbGVhcigpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZTogKHNjZW5lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVtYWluZWRPdmVyQ250ID0gQmxvY2tTeXN0ZW0ub3ZlckNudE1heCAtIEJsb2NrU3lzdGVtLm92ZXJDbnQ7XHJcbiAgICAgICAgLy8gaGlkZSB3YXJuaW5nXHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChCbG9ja1N5c3RlbS5nZXRJc0dhbWVPdmVyKCkgfHwgcmVtYWluZWRPdmVyQ250ID4gR2FtZVdhcm5pbmcudGltZSkge1xyXG4gICAgICAgICAgICBpZiAoR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLmhhc09uY2VIaWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5oYXNPbmNlU2hvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzaG93IHdhcm5pbmdcclxuICAgICAgICBpZiAoR2FtZVdhcm5pbmcuaGFzT25jZVNob3cpIHtcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZVNob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBHYW1lV2FybmluZy5zaG93KCk7XHJcbiAgICAgICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgICAgIGZyb206IDEsIHRvOiAwLCBkdXJhdGlvbjogNTAwLCB5b3lvOiB0cnVlLCByZXBlYXQ6IC0xLFxyXG4gICAgICAgICAgICAgICAgb25TdGFydDogKCkgPT4geyBHYW1lQXVkaW8ucGxheVNmeCgnd2FybmluZ1NmeCcpOyB9LFxyXG4gICAgICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHsgR2FtZUF1ZGlvLnBsYXlTZngoJ3dhcm5pbmdTZngnKTsgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHYW1lV2FybmluZy5oYXNPbmNlU2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5zaWduLnNldEFscGhhKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5zaWduLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Ftb3VudCA9IChHYW1lV2FybmluZy50aW1lIC0gcmVtYWluZWRPdmVyQ250KSAvIEdhbWVXYXJuaW5nLnRpbWU7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuZHJhdygpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnVwZGF0ZVNoYWtlVmFsdWUocmVtYWluZWRPdmVyQ250KTtcclxuICAgICAgICBzY2VuZS5jYW1lcmFzLm1haW4uc2hha2UoMTYwLCAwLjAwMSAqIEdhbWVXYXJuaW5nLnNoYWtlVmFsdWUsIGZhbHNlKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRHYW1lV2FybmluZyA9ICgpID0+IHtcclxuICAgIEdhbWVXYXJuaW5nLmhpZGUoKTtcclxuICAgIEdhbWVXYXJuaW5nLmhhc09uY2VTaG93ID0gdHJ1ZTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50ID0gMDtcclxuICAgIHJldHVybiBHYW1lV2FybmluZztcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZVdhcm5pbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIEdhbWVXYXJuaW5nLnNpZ24gPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ3dhcm5pbmdTaWduJyk7XHJcbiAgICBHYW1lV2FybmluZy5zaWduLnNldFBvc2l0aW9uKFZpZXcuY2VudGVyWCwgR2FtZVdhcm5pbmcuc2lnbi5oZWlnaHQpO1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLnNldEFscGhhKDAuOSk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIGNvbnN0IGJhclggPSBHYW1lV2FybmluZy5zaWduLng7XHJcbiAgICBjb25zdCBiYXJZID0gR2FtZVdhcm5pbmcuc2lnbi55O1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuc2V0UG9zaXRpb24oYmFyWCwgYmFyWSk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUuc2V0UG9zaXRpb24oYmFyWCwgYmFyWSk7XHJcbiAgICBbR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIsIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZSwgR2FtZVdhcm5pbmcuc2lnbl0ubWFwKGVsZSA9PiBTZXREZXB0aChlbGUsICd3YXJuaW5nJykpO1xyXG4gICAgSW5pdEdhbWVXYXJuaW5nKCk7XHJcbiAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVXYXJuaW5nO1xyXG5leHBvcnQgeyBDcmVhdGVHYW1lV2FybmluZyB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IEluaXRCbG9ja1N5c3RlbSwgVXBkYXRlQWxsQmxvY2tzIH0gZnJvbSAnLi9ibG9jay9zeXN0ZW0nO1xyXG5pbXBvcnQgeyBDcmVhdGVQb3BVcCB9IGZyb20gJy4vdWkvcG9wdXAnO1xyXG5pbXBvcnQgeyBDcmVhdGVTY29yZVR4dCB9IGZyb20gJy4vdWkvc2NvcmUnO1xyXG5pbXBvcnQgR2FtZVRpbWUsIHsgQ3JlYXRlR2FtZVRpbWVUeHQgfSBmcm9tICcuL3VpL3RpbWUnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvLCB7IENyZWF0ZUdhbWVBdWRpbyB9IGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgU3RvcFBhc3NpdmVMb2FkaW5nIH0gZnJvbSAnQHNyYy9zY2VuZXMvcGFzc2l2ZUxvYWRpbmcnO1xyXG5pbXBvcnQgR2FtZVN0YXJ0Q250LCB7IENyZWF0ZUdhbWVTdGFydENudCB9IGZyb20gJy4vdWkvc3RhcnRDbnQnO1xyXG5pbXBvcnQgR2FtZU92ZXIsIHsgQ3JlYXRlR2FtZU92ZXIgfSBmcm9tICcuL3VpL2dhbWVvdmVyJztcclxuaW1wb3J0IHsgQ3JlYXRlSW5wdXQsIFVwZGF0ZUlucHV0IH0gZnJvbSAnLi9pbnB1dCc7XHJcbmltcG9ydCBFZngsIHsgQ3JlYXRlRWZ4LCBDcmVhdGVHYW1lT3ZlckVmeCB9IGZyb20gJy4vZWZ4JztcclxuaW1wb3J0IHsgR2V0Um5kQ29sb3IsIEdldFJuZEludCwgR2V0Um5kTnVtIH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuL2RlcHRoJztcclxuaW1wb3J0IEdhbWVXYXJuaW5nLCB7IENyZWF0ZUdhbWVXYXJuaW5nIH0gZnJvbSAnLi91aS93YXJuaW5nJztcclxuaW1wb3J0IEdhbWVEYXRhIGZyb20gJy4uL3N0b3JhZ2UnO1xyXG5pbXBvcnQgVUlQcm9wcywgeyBDcmVhdGVHYW1lQ29tbW9uVUksIENyZWF0ZVVJQnRuQW5pbSwgU2V0Q29tbW9uVUlQcm9wcywgVXBkYXRlR2FtZUNvbW1vblVJIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWknO1xyXG5pbXBvcnQgeyBDcmVhdGVCYXNpY1BvcFVwIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvcG9wVXAnO1xyXG5pbXBvcnQgeyBTZXRGb250U3R5bGUgfSBmcm9tICdAc3JjL3NjZW5lcy91aS9mb250JztcclxuaW1wb3J0IHsgU3RhcnRUaXRsZSB9IGZyb20gJy4vdGl0bGUnO1xyXG5jb25zdCBTdGFydEdhbWUgPSAoc2NlbmUpID0+IHtcclxuICAgIHNjZW5lLnNjZW5lLnJlbW92ZSgnZ2FtZScpO1xyXG4gICAgc2NlbmUuc2NlbmUuYWRkKCdnYW1lJywgR2FtZVNjZW5lKTtcclxuICAgIHNjZW5lLnNjZW5lLmxhdW5jaCgnZ2FtZScpO1xyXG59O1xyXG5jb25zdCBSZXN0YXJ0R2FtZSA9IChzY2VuZSkgPT4ge1xyXG4gICAgRWZ4LnN0b3BBbGwoKTtcclxuICAgIHNjZW5lLnNjZW5lLnJlc3RhcnQoKTtcclxufTtcclxuY29uc3QgU3RvcEdhbWUgPSAoc2NlbmUpID0+IHtcclxuICAgIGlmIChzY2VuZS5zY2VuZS5nZXQoJ2dhbWUnKSkge1xyXG4gICAgICAgIHNjZW5lLnNjZW5lLnNldEFjdGl2ZShmYWxzZSwgJ2dhbWUnKTtcclxuICAgICAgICBzY2VuZS5zY2VuZS5zZXRWaXNpYmxlKGZhbHNlLCAnZ2FtZScpO1xyXG4gICAgICAgIEVmeC5zdG9wQWxsKCk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnN0b3BCZ20oJ2dhbWVCZ20nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFzY2VuZS5zY2VuZS5nZXQoJ2dhbWUnKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgc2NlbmUuc2NlbmUucmVtb3ZlKCdnYW1lJyk7XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIEdhbWVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIGtleTogJ2dhbWUnLFxyXG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50aGVtZUlkeCA9IDA7XHJcbiAgICAgICAgdGhpcy53YWxsR2FwID0gVmlldy5jYWxjUmF0aW8oNDUpO1xyXG4gICAgICAgIHRoaXMud2FsbEJvdHRvbUdhcCA9IFZpZXcuY2FsY1JhdGlvKDMwKTtcclxuICAgICAgICB0aGlzLm1hdHRlclN0ZXBGb3JjZSA9IDAuMDg7IC8vIGFwcGx5IGRlbHRhIHRvIG1hdHRlciBmb3JjZSBtZXRob2RcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVdhbGwoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUJnU2NlbmUoKTtcclxuICAgICAgICAvLyBibG9jayBzeXN0ZW1cclxuICAgICAgICBJbml0QmxvY2tTeXN0ZW0oKTtcclxuICAgICAgICAvLyBpbnB1dFxyXG4gICAgICAgIENyZWF0ZUlucHV0KHRoaXMpO1xyXG4gICAgICAgIC8vIGF1ZGlvXHJcbiAgICAgICAgQ3JlYXRlR2FtZUF1ZGlvKHRoaXMsIEdhbWVEYXRhKTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheUJnbSgnZ2FtZUJnbScpO1xyXG4gICAgICAgIC8vIHVpXHJcbiAgICAgICAgQ3JlYXRlR2FtZVN0YXJ0Q250KHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZVNjb3JlVHh0KHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVUaW1lVHh0KHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZVBvcFVwKHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVXYXJuaW5nKHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVPdmVyKHRoaXMsIHRoaXMudGhlbWVJZHgpO1xyXG4gICAgICAgIENyZWF0ZUVmeCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVHYW1lT3ZlckVmeCh0aGlzLCBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZyk7XHJcbiAgICAgICAgLy8gQ3JlYXRlU2V0dGluZyh0aGlzKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUV4aXRCdG4oKTtcclxuICAgICAgICAvLyBjb21tb25cclxuICAgICAgICBDcmVhdGVHYW1lQ29tbW9uVUkodGhpcyk7XHJcbiAgICAgICAgLy8gc3RvcCBwYXNzaXZlIGxvYWRpbmdcclxuICAgICAgICBTdG9wUGFzc2l2ZUxvYWRpbmcoKTtcclxuICAgICAgICAvLyAvLyBkZWJ1Z2dpbmdcclxuICAgICAgICAvLyBjb25zdCBpbnNwZWN0b3JXaWR0aCA9IDI1NTtcclxuICAgICAgICAvLyBQR1VJbnNwZWN0b3IodGhpcywgeyByaWdodDogd2luZG93LmlubmVyV2lkdGggLSBpbnNwZWN0b3JXaWR0aCwgdG9wOiA0OCB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIGlmICghR2FtZVN0YXJ0Q250LmdldElzU3RhcnQoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIEdhbWVUaW1lLnVwZGF0ZSh0aGlzLCBkZWx0YSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcudXBkYXRlKHRoaXMpO1xyXG4gICAgICAgIFVwZGF0ZUlucHV0KGRlbHRhKTtcclxuICAgICAgICBVcGRhdGVBbGxCbG9ja3ModGhpcywgdGltZSwgZGVsdGEpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWF0dGVyU3RlcChkZWx0YSk7XHJcbiAgICAgICAgVXBkYXRlR2FtZUNvbW1vblVJKGRlbHRhKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZVdhbGwoKSB7XHJcbiAgICAgICAgLy8gc2V0IG1hdHRlciB3YWxsc1xyXG4gICAgICAgIGNvbnN0IHdhbGxUaGlja25lc3MgPSB0aGlzLndhbGxHYXAgKiA1O1xyXG4gICAgICAgIHRoaXMubWF0dGVyLndvcmxkLnNldEJvdW5kcyh0aGlzLndhbGxHYXAsIDAsIFZpZXcudyAtICh0aGlzLndhbGxHYXAgKiAyKSwgVmlldy5oIC0gdGhpcy53YWxsR2FwLCB3YWxsVGhpY2tuZXNzLCB0cnVlLCB0cnVlLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgLy8gY3JlYXRlIGJsb2NrIHNwYXduIHN1cHBvcnQgd2FsbFxyXG4gICAgICAgIGNvbnN0IHN1cHBvcnRMZWZ0ID0gdGhpcy5tYXR0ZXIuYWRkLnJlY3RhbmdsZSgwLCAtVmlldy5oIC8gMiwgdGhpcy53YWxsR2FwLCBWaWV3LmgsIHsgaXNTdGF0aWM6IHRydWUgfSk7XHJcbiAgICAgICAgY29uc3Qgc3VwcG9ydFJpZ2h0ID0gdGhpcy5tYXR0ZXIuYWRkLnJlY3RhbmdsZShWaWV3LncsIC1WaWV3LmggLyAyLCB0aGlzLndhbGxHYXAsIFZpZXcuaCwgeyBpc1N0YXRpYzogdHJ1ZSB9KTtcclxuICAgICAgICBjb25zdCBiZ1RleHR1cmVMaXN0ID0gWydiZ0dyZWVuJywgJ2JnQnJvd24nLCAnYmdCbHVlJ107XHJcbiAgICAgICAgY29uc3QgYnRuTGlzdCA9IFsnYnRuR3JlZW4nLCAnYnRuQnJvd24nLCAnYnRuQmx1ZSddO1xyXG4gICAgICAgIHRoaXMudGhlbWVJZHggPSBHZXRSbmRJbnQoMCwgYmdUZXh0dXJlTGlzdC5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGxlZnRXYWxsID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCAwLCB0aGlzLndhbGxHYXAsIFZpZXcuaCwgYmdUZXh0dXJlTGlzdFt0aGlzLnRoZW1lSWR4XSkuc2V0T3JpZ2luKDApO1xyXG4gICAgICAgIGNvbnN0IHJpZ2h0V2FsbCA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoVmlldy53IC0gdGhpcy53YWxsR2FwLCAwLCB0aGlzLndhbGxHYXAsIFZpZXcuaCwgYmdUZXh0dXJlTGlzdFt0aGlzLnRoZW1lSWR4XSkuc2V0T3JpZ2luKDApO1xyXG4gICAgICAgIGNvbnN0IGJvdHRvbVdhbGwgPSB0aGlzLmFkZC5pbWFnZSgwLCBWaWV3LmggLSB0aGlzLndhbGxHYXAsIGJ0bkxpc3RbdGhpcy50aGVtZUlkeF0pLnNldE9yaWdpbigwKS5zZXREaXNwbGF5U2l6ZShWaWV3LncsIHRoaXMud2FsbEdhcCk7XHJcbiAgICAgICAgW2xlZnRXYWxsLCByaWdodFdhbGwsIGJvdHRvbVdhbGxdLm1hcCh3YWxsID0+IFNldERlcHRoKHdhbGwsICd3YWxsJykpO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IDUwMDAsIHJlcGVhdDogLTEsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0V2FsbC50aWxlUG9zaXRpb25ZICs9IDE7XHJcbiAgICAgICAgICAgICAgICByaWdodFdhbGwudGlsZVBvc2l0aW9uWSAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVCZ1NjZW5lKCkge1xyXG4gICAgICAgIGNvbnN0IGJnQ29sb3IgPSBHZXRSbmRDb2xvcigpO1xyXG4gICAgICAgIC8vIHNlbGVjdCBiZyBjb2xvclxyXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNldEJhY2tncm91bmRDb2xvcihiZ0NvbG9yKTtcclxuICAgICAgICAvLyBzZWxlY3QgY2xvdWQgc2hhcGVcclxuICAgICAgICB0aGlzLmNsb3VkR3JvdXAgPSB0aGlzLmFkZC5ncm91cCh7XHJcbiAgICAgICAgICAgIGRlZmF1bHRLZXk6ICdjbG91ZCcsXHJcbiAgICAgICAgICAgIG1heFNpemU6IDE1XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zcGF3bkNsb3VkKCk7XHJcbiAgICAgICAgLy8gc2VsZWN0IHRyZWUgc2hhcGVcclxuICAgICAgICB0aGlzLnRyZWVHcm91cCA9IHRoaXMuYWRkLmdyb3VwKHtcclxuICAgICAgICAgICAgZGVmYXVsdEtleTogJ3RyZWUnLFxyXG4gICAgICAgICAgICBtYXhTaXplOiAxNVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Bhd25UcmVlKCk7XHJcbiAgICAgICAgLy8gc2VsZWN0IG1pc3RcclxuICAgICAgICBjb25zdCBiZ01pc3RJZHggPSBHZXRSbmRJbnQoMSwgNCk7XHJcbiAgICAgICAgY29uc3QgYmdNaXN0ID0gdGhpcy5hZGQudGlsZVNwcml0ZSh0aGlzLndhbGxHYXAsIFZpZXcuaCAtIHRoaXMud2FsbEdhcCwgVmlldy53IC0gKHRoaXMud2FsbEdhcCAqIDIpLCB0aGlzLndhbGxHYXAsICdtaXN0JyArIGJnTWlzdElkeCk7XHJcbiAgICAgICAgYmdNaXN0LnNldE9yaWdpbigwLCAxKTtcclxuICAgICAgICBiZ01pc3Quc2V0QWxwaGEoMC40KTtcclxuICAgICAgICBTZXREZXB0aChiZ01pc3QsICdtaXN0Jyk7XHJcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiAxLCBkdXJhdGlvbjogNTAwMCwgcmVwZWF0OiAtMSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJnTWlzdC50aWxlUG9zaXRpb25YICs9IDAuNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3Bhd25DbG91ZCgpIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IEdldFJuZEludCgxMjAwLCAzMDAwKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEsIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvdWRHcm91cC5jaGlsZHJlbi5pdGVyYXRlKChjbG91ZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoY2sgZGVhdGxpbmVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvdWQueCA+IFZpZXcudylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG91ZEdyb3VwLmtpbGxBbmRIaWRlKGNsb3VkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGNsb3Vkc1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3VkLnggKz0gY2xvdWQubW92ZUdhcFg7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb3VkID0gdGhpcy5jbG91ZEdyb3VwLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjbG91ZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRUZXh0dXJlKCdjbG91ZCcgKyBHZXRSbmRJbnQoMSwgMTApKTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldFBvc2l0aW9uKC1jbG91ZC53aWR0aCwgR2V0Um5kSW50KFZpZXcuY2VudGVyWSwgVmlldy5jZW50ZXJZIC0gVmlldy5jZW50ZXJZIC8gMikpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRBbHBoYSgwLjQpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQubW92ZUdhcFggPSBHZXRSbmROdW0oMC4yLCAzKTtcclxuICAgICAgICAgICAgICAgIFNldERlcHRoKGNsb3VkLCAnY2xvdWQnKTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwYXduQ2xvdWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3Bhd25UcmVlKCkge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gR2V0Um5kSW50KDEyMDAsIDMwMDApO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmVlR3JvdXAuY2hpbGRyZW4uaXRlcmF0ZSgodHJlZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoY2sgZGVhdGxpbmVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJlZS54IDwgLXRyZWUud2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZUdyb3VwLmtpbGxBbmRIaWRlKHRyZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgY2xvdWRzXHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZS54IC09IDAuNTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZUdyb3VwLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0cmVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0VGV4dHVyZSgndHJlZScgKyBHZXRSbmRJbnQoMSwgMzYpKTtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0UG9zaXRpb24oVmlldy53LCBWaWV3LmggLSB0aGlzLndhbGxHYXApO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRPcmlnaW4oMCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0QWxwaGEoMC4yKTtcclxuICAgICAgICAgICAgICAgIFNldERlcHRoKHRyZWUsICd0cmVlJyk7XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwYXduVHJlZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVFeGl0QnRuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgbWFyZ2luIH0gPSBVSVByb3BzO1xyXG4gICAgICAgIGNvbnN0IGRvb3JFeGl0QnRuID0gdGhpcy5hZGQuaW1hZ2UoVmlldy53IC0gbWFyZ2luLCBtYXJnaW4sICdkb29yRXhpdEJ0bicpO1xyXG4gICAgICAgIENyZWF0ZVVJQnRuQW5pbSh0aGlzLCBkb29yRXhpdEJ0bik7XHJcbiAgICAgICAgU2V0Q29tbW9uVUlQcm9wcyhkb29yRXhpdEJ0bik7XHJcbiAgICAgICAgU2V0RGVwdGgoZG9vckV4aXRCdG4sICdoaWdoZXN0Jyk7XHJcbiAgICAgICAgY29uc3QgcG9wQ29udGV4dCA9IHRoaXMuYWRkLnRleHQoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksICdHbyBiYWNrIHRvIHRpdGxlPycpO1xyXG4gICAgICAgIFNldEZvbnRTdHlsZShwb3BDb250ZXh0KTtcclxuICAgICAgICBwb3BDb250ZXh0LnNldEZvbnRTaXplKFZpZXcudyAvIDE0KTtcclxuICAgICAgICBjb25zdCBkb29yRXhpdFBvcCA9IENyZWF0ZUJhc2ljUG9wVXAodGhpcywgJ2Rvb3JFeGl0Jywge30sIHtcclxuICAgICAgICAgICAgZXhpdEJ0bjoge1xyXG4gICAgICAgICAgICAgICAgaXNFeGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd5ZXNPck5vJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXZ0OiB7XHJcbiAgICAgICAgICAgICAgICBzaG93OiAoKSA9PiB7IEdhbWVUaW1lLnNldFRpbWVTY2FsZSh0aGlzLCBHYW1lVGltZS5zaG93U2V0dGluZ1RpbWVTY2FsZSk7IH0sXHJcbiAgICAgICAgICAgICAgICBoaWRlOiAoKSA9PiB7IEdhbWVUaW1lLnNldFRpbWVTY2FsZSh0aGlzLCBHYW1lVGltZS5oaWRlU2V0dGluZ1RpbWVTY2FsZSk7IH0sXHJcbiAgICAgICAgICAgICAgICB1cDogKHB0cikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zY2VuZS5pc0FjdGl2ZSgndGl0bGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTdG9wR2FtZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnRUaXRsZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvb3JFeGl0UG9wLmFkZChwb3BDb250ZXh0KTtcclxuICAgICAgICBkb29yRXhpdEJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4geyBkb29yRXhpdFBvcC5zaG93KCk7IH0pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlTWF0dGVyU3RlcChkZWx0YSkgeyB0aGlzLm1hdHRlci53b3JsZC5zdGVwKGRlbHRhKTsgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVTY2VuZTtcclxuZXhwb3J0IHsgU3RhcnRHYW1lLCBSZXN0YXJ0R2FtZSwgU3RvcEdhbWUgfTtcclxuIiwiaW1wb3J0IHsgQ29tbW9uU25zLCBHZXRBc3NldEZpbGVzIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2Fzc2V0VXRpbHNcIjtcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCBVSVByb3BzIGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgR2FtZUZvbnQsIHsgU2V0Rm9udFN0eWxlIH0gZnJvbSBcIi4uL2ZvbnRcIjtcclxuY29uc3QgQ2hhbm5lbEFkdmVydGlzZSA9IHtcclxuICAgIHRleHR1cmVMaXN0OiBbJ2JsYWNrU2NyZWVuJywgJ2NoYW5uZWxCdG5Eb3duJywgJ2NoYW5uZWxCdG5VcCcsICdjaGFubmVsTG9nbycsXSxcclxuICAgIHlvdXR1YmVCdG5MYXllcjogbnVsbCxcclxuICAgIHlvdXR1YmVQb3BVcExheWVyOiBudWxsLFxyXG4gICAgeW91dHViZVNob3c6ICgpID0+IHtcclxuICAgICAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVQb3BVcExheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgeW91dHViZUhpZGU6ICgpID0+IHtcclxuICAgICAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVQb3BVcExheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIGJsb2dCdG5MYXllcjogbnVsbCxcclxuICAgIGJsb2dQb3BVcExheWVyOiBudWxsLFxyXG4gICAgYmxvZ1Nob3c6ICgpID0+IHtcclxuICAgICAgICBDaGFubmVsQWR2ZXJ0aXNlLmJsb2dQb3BVcExheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgYmxvZ0hpZGU6ICgpID0+IHtcclxuICAgICAgICBDaGFubmVsQWR2ZXJ0aXNlLmJsb2dQb3BVcExheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgR2V0U25zQXNzZXRzID0gKGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIGNvbnN0IGFzc2V0TGlzdCA9IFtcclxuICAgICAgICAvLyB5b3V0dWJlXHJcbiAgICAgICAgeyBrZXk6ICd5b3V0dWJlTG9nbycsIHVybDogQ29tbW9uU25zICsgJ3lvdXR1YmVMb2dvLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICB7IGtleTogJ2NoYW5uZWxMb2dvJywgdXJsOiBDb21tb25TbnMgKyAnY2hhbm5lbExvZ28uanBnJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgIC8vIGJsb2dcclxuICAgIF07XHJcbiAgICByZXR1cm4gR2V0QXNzZXRGaWxlcyhhc3NldExpc3QsIGV4Y2VwdGlvbktleXMpO1xyXG59O1xyXG5jb25zdCBJbml0Q2hhbm5lbCA9ICgpID0+IHtcclxuICAgIENoYW5uZWxBZHZlcnRpc2UueW91dHViZUhpZGUoKTtcclxufTtcclxuY29uc3QgQ3JlYXRlQ2hhbm5lbCA9IChzY2VuZSwgdmlkZW9VcmwsIGNvbW1vblRleHRTdHlsZSwgY2hhbm5lbERhdGEpID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgIGNvbnN0IGJ0blcgPSAoX2EgPSBjaGFubmVsRGF0YSA9PT0gbnVsbCB8fCBjaGFubmVsRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hhbm5lbERhdGEudykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogNjA7XHJcbiAgICBjb25zdCBidG5IID0gKF9iID0gY2hhbm5lbERhdGEgPT09IG51bGwgfHwgY2hhbm5lbERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNoYW5uZWxEYXRhLmgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDQ1O1xyXG4gICAgY29uc3QgYnRuU2NhbGVUaW1lID0gMS4xO1xyXG4gICAgY29uc3QgYnRuQmcgPSBzY2VuZS5hZGQuaW1hZ2UoKF9jID0gY2hhbm5lbERhdGEgPT09IG51bGwgfHwgY2hhbm5lbERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNoYW5uZWxEYXRhLngpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IFZpZXcuY2VudGVyWCwgKF9kID0gY2hhbm5lbERhdGEgPT09IG51bGwgfHwgY2hhbm5lbERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNoYW5uZWxEYXRhLnkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFVJUHJvcHMuZXhpdFBvc1ksICdjaGFubmVsQnRuVXAnKTtcclxuICAgIGNvbnN0IGJ0bkxvZ28gPSBzY2VuZS5hZGQuaW1hZ2UoYnRuQmcueCwgYnRuQmcueSwgJ3lvdXR1YmVMb2dvJyk7XHJcbiAgICBidG5Mb2dvLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBidG5Mb2dvLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICBidG5Mb2dvLnNldERpc3BsYXlTaXplKGJ0blcgKiBidG5TY2FsZVRpbWUsIGJ0bkggKiBidG5TY2FsZVRpbWUpO1xyXG4gICAgICAgIGJ0bkJnLnNldFRleHR1cmUoJ2NoYW5uZWxCdG5Eb3duJyk7XHJcbiAgICB9KTtcclxuICAgIGJ0bkxvZ28ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBidG5Mb2dvLnNldERpc3BsYXlTaXplKGJ0blcsIGJ0bkgpO1xyXG4gICAgICAgIGJ0bkJnLnNldFRleHR1cmUoJ2NoYW5uZWxCdG5VcHNzJyk7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlU2hvdygpO1xyXG4gICAgfSk7XHJcbiAgICBidG5Mb2dvLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVywgYnRuSCk7XHJcbiAgICAgICAgYnRuQmcuc2V0VGV4dHVyZSgnY2hhbm5lbEJ0blVwJyk7XHJcbiAgICB9KTtcclxuICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVywgYnRuSCk7XHJcbiAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVCdG5MYXllciA9IHNjZW5lLmFkZC5sYXllcihbXHJcbiAgICAgICAgYnRuQmcsIGJ0bkxvZ29cclxuICAgIF0pO1xyXG4gICAgY29uc3QgcG9wVXBNYXJnaW4gPSA3MDtcclxuICAgIGNvbnN0IGNoYW5uZWxVcmwgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ0JKbkZnSVE5WU9SVGl6MTBfTWd5X0EnO1xyXG4gICAgY29uc3QgdmlkZW9UaHVtYm5haWwgPSBgaHR0cHM6Ly9pMS55dGltZy5jb20vdmkvJHt2aWRlb1VybC5zcGxpdCgnPScpWzFdfS9kZWZhdWx0LmpwZ2A7XHJcbiAgICBjb25zdCBwb3BVcEJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnYmxhY2tTY3JlZW4nKTtcclxuICAgIGNvbnN0IHBvcFVwVGl0bGUgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIFZpZXcuaCAvIDgsICdNeSBZb3V0dWJlJyk7XHJcbiAgICBjb25zdCBwb3BVcFR4dExpc3QgPSBbXTtcclxuICAgIGNvbnN0IHBvcFVwTWFkZVZpZGVvID0gc2NlbmUuYWRkLmltYWdlKHBvcFVwQmcueCwgVmlldy5jZW50ZXJZIC0gcG9wVXBNYXJnaW4sICcnKTtcclxuICAgIGxldCBwb3BVcE1hZGVWaWRlb1dJUDtcclxuICAgIHBvcFVwTWFkZVZpZGVvLnNldERpc3BsYXlTaXplKHBvcFVwTWFyZ2luLCBwb3BVcE1hcmdpbik7XHJcbiAgICBpZiAoIXZpZGVvVXJsKSB7XHJcbiAgICAgICAgcG9wVXBNYWRlVmlkZW9XSVAgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIFZpZXcuY2VudGVyWSAtIHBvcFVwTWFyZ2luLCAnICAgICAgICAgU29ycnkhXFxuV29yayBJbiBQcm9ncmVzcycpO1xyXG4gICAgICAgIHBvcFVwVHh0TGlzdC5wdXNoKHBvcFVwTWFkZVZpZGVvV0lQKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcFVwTWFkZVZpZGVvVHh0ID0gc2NlbmUuYWRkLnRleHQocG9wVXBCZy54LCBwb3BVcE1hZGVWaWRlby55ICsgcG9wVXBNYXJnaW4sICdDcmVhdGVkIHZpZGVvJyk7XHJcbiAgICBjb25zdCBwb3BVcENoYW5uZWwgPSBzY2VuZS5hZGQuaW1hZ2UocG9wVXBCZy54LCBwb3BVcE1hZGVWaWRlb1R4dC55ICsgcG9wVXBNYXJnaW4sICdjaGFubmVsTG9nbycpO1xyXG4gICAgY29uc3QgcG9wVXBDaGFubmVsVHh0ID0gc2NlbmUuYWRkLnRleHQocG9wVXBCZy54LCBwb3BVcENoYW5uZWwueSArIHBvcFVwTWFyZ2luLCAnVGhpcyBpcyBteSBjaGFubmVsJyk7XHJcbiAgICBjb25zdCBwb3BVcEV4aXRHdWlkZSA9IHNjZW5lLmFkZC50ZXh0KHBvcFVwQmcueCwgR2FtZUZvbnQuZ3VpZGVUeHRZLCAncHJlc3MgYW55d2hlcmUgdG8gZXhpdCcpO1xyXG4gICAgcG9wVXBUeHRMaXN0LnB1c2gocG9wVXBUaXRsZSwgcG9wVXBNYWRlVmlkZW9UeHQsIHBvcFVwQ2hhbm5lbFR4dCwgcG9wVXBFeGl0R3VpZGUpO1xyXG4gICAgcG9wVXBUeHRMaXN0Lm1hcCh0eHQgPT4gU2V0Rm9udFN0eWxlKHR4dCkpO1xyXG4gICAgcG9wVXBUeHRMaXN0Lm1hcCh0eHQgPT4gY29tbW9uVGV4dFN0eWxlKHR4dCkpO1xyXG4gICAgcG9wVXBUaXRsZS5zZXRGb250U2l6ZShWaWV3LncgLyAxMik7XHJcbiAgICBwb3BVcEV4aXRHdWlkZS5zZXRBbHBoYShVSVByb3BzLmFscGhhKTtcclxuICAgIHBvcFVwQmcuc2V0QWxwaGEoMC40KTtcclxuICAgIHBvcFVwQmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgcG9wVXBCZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgcG9wVXBCZy5vbigncG9pbnRlcnVwJywgKCkgPT4geyBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVIaWRlKCk7IH0pO1xyXG4gICAgY29uc3Qgb3BlblVybFRhYiA9ICh1cmwpID0+IHsgd2luZG93Lm9wZW4odXJsKTsgfTtcclxuICAgIFtwb3BVcE1hZGVWaWRlbywgcG9wVXBNYWRlVmlkZW9UeHRdLm1hcCgodmlkZW8pID0+IHtcclxuICAgICAgICB2aWRlby5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgIHZpZGVvLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IG9wZW5VcmxUYWIodmlkZW9VcmwpOyB9KTtcclxuICAgIH0pO1xyXG4gICAgW3BvcFVwQ2hhbm5lbCwgcG9wVXBDaGFubmVsVHh0XS5tYXAoKGNoYW5uZWwpID0+IHtcclxuICAgICAgICBjaGFubmVsLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgY2hhbm5lbC5vbigncG9pbnRlcnVwJywgKCkgPT4geyBvcGVuVXJsVGFiKGNoYW5uZWxVcmwpOyB9KTtcclxuICAgIH0pO1xyXG4gICAgW3BvcFVwQ2hhbm5lbCwgcG9wVXBNYWRlVmlkZW9dLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgZWxlLnNldERpc3BsYXlTaXplKHBvcFVwTWFyZ2luLCBwb3BVcE1hcmdpbik7XHJcbiAgICB9KTtcclxuICAgIENoYW5uZWxBZHZlcnRpc2UueW91dHViZVBvcFVwTGF5ZXIgPSBzY2VuZS5hZGQubGF5ZXIoW1xyXG4gICAgICAgIHBvcFVwQmcsIHBvcFVwTWFkZVZpZGVvLCBwb3BVcENoYW5uZWwsIC4uLnBvcFVwVHh0TGlzdFxyXG4gICAgXSk7XHJcbiAgICBJbml0Q2hhbm5lbCgpO1xyXG4gICAgcmV0dXJuIENoYW5uZWxBZHZlcnRpc2U7XHJcbn07XHJcbmNvbnN0IEluaXRCbG9nID0gKCkgPT4ge1xyXG59O1xyXG5jb25zdCBDcmVhdGVCbG9nID0gKHNjZW5lLCBibG9nVXJsLCBjb21tb25UZXh0U3R5bGUsIGNoYW5uZWxEYXRhKSA9PiB7XHJcbiAgICBJbml0QmxvZygpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBDaGFubmVsQWR2ZXJ0aXNlO1xyXG5leHBvcnQgeyBHZXRTbnNBc3NldHMsIEluaXRDaGFubmVsLCBDcmVhdGVDaGFubmVsLCBJbml0QmxvZywgQ3JlYXRlQmxvZywgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFN0YXJ0UGFzc2l2ZUxvYWRpbmcgfSBmcm9tICdAc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZyc7XHJcbmltcG9ydCB7IFN0YXJ0R2FtZSB9IGZyb20gJy4vZ2FtZSc7XHJcbmltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZUhlYWRTaXplLCBUeHRUaXRsZUhlaWdodEdhcCwgVHh0VGl0bGVTaXplIH0gZnJvbSAnLi9mb250JztcclxuaW1wb3J0IHsgQ3JlYXRlRWZ4IH0gZnJvbSAnLi9lZngnO1xyXG5pbXBvcnQgR2FtZURhdGEgZnJvbSAnLi4vc3RvcmFnZSc7XHJcbmltcG9ydCB7IENyZWF0ZUNoYW5uZWwgfSBmcm9tICdAc3JjL3NjZW5lcy91aS9zbnMnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4vZGVwdGgnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvLCB7IENyZWF0ZUdhbWVBdWRpbyB9IGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgQ3JlYXRlR2FtZUNvbW1vblVJLCBVcGRhdGVHYW1lQ29tbW9uVUkgfSBmcm9tICdAc3JjL3NjZW5lcy91aSc7XHJcbmNvbnN0IFN0YXJ0VGl0bGUgPSAoc2NlbmUpID0+IHtcclxuICAgIHNjZW5lLnNjZW5lLnJlbW92ZSgndGl0bGUnKTtcclxuICAgIHNjZW5lLnNjZW5lLmFkZCgndGl0bGUnLCBUaXRsZVNjZW5lKTtcclxuICAgIHNjZW5lLnNjZW5lLmxhdW5jaCgndGl0bGUnKTtcclxufTtcclxuY29uc3QgU3RvcFRpdGxlID0gKHNjZW5lKSA9PiB7XHJcbiAgICBpZiAoc2NlbmUuc2NlbmUuZ2V0KCd0aXRsZScpKSB7XHJcbiAgICAgICAgc2NlbmUuc2NlbmUuc2V0QWN0aXZlKGZhbHNlLCAndGl0bGUnKTtcclxuICAgICAgICBzY2VuZS5zY2VuZS5zZXRWaXNpYmxlKGZhbHNlLCAndGl0bGUnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2NlbmUuc2NlbmUucmVtb3ZlKCd0aXRsZScpOyB9LCAxMDAwKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgVGl0bGVTY2VuZSBleHRlbmRzIFBoYXNlci5TY2VuZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIGtleTogJ3RpdGxlJyxcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGl0bGVGb250U2l6ZSA9IDUwO1xyXG4gICAgICAgIHRoaXMuZm9udFNpemUgPSAzMDtcclxuICAgICAgICB0aGlzLm1pZGRsZUdhcCA9IDU7XHJcbiAgICAgICAgdGhpcy5iZ1JuZFBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmcoKTtcclxuICAgICAgICB0aGlzLmxvZ29CZyA9IHRoaXMuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZIC0gVHh0VGl0bGVIZWlnaHRHYXAsICdidG5CbHVlJykuc2V0U2NhbGUoMS44KTtcclxuICAgICAgICB0aGlzLmxvZ28gPSB0aGlzLmFkZC50ZXh0KHRoaXMubG9nb0JnLngsIHRoaXMubG9nb0JnLnksICdCbG9ja1BhbmcnKS5zZXRGb250U2l6ZSh0aGlzLnRpdGxlRm9udFNpemUpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRCZyA9IHRoaXMuYWRkLmltYWdlKHRoaXMubG9nby54LCB0aGlzLmxvZ28ueSArIChUeHRUaXRsZUhlaWdodEdhcCAqIDIpLCAndGl0bGVDb250ZXh0QmcnKTtcclxuICAgICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5hZGQudGV4dCh0aGlzLnN0YXJ0QmcueCwgdGhpcy5zdGFydEJnLnksICdzdGFydCcpO1xyXG4gICAgICAgIFt0aGlzLmxvZ28sIHRoaXMuc3RhcnRdLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGVsZSk7XHJcbiAgICAgICAgICAgIGVsZS5zZXRGb250U2l6ZShUeHRUaXRsZVNpemUpO1xyXG4gICAgICAgICAgICBlbGUuc2V0Q29sb3IoJ2JsYWNrJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgW3RoaXMubG9nb0JnLCB0aGlzLnN0YXJ0QmddLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgICAgIGVsZS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubG9nby5zZXRGb250U2l6ZShUeHRUaXRsZUhlYWRTaXplKTtcclxuICAgICAgICB0aGlzLmxvZ28uc2V0Q29sb3IoJ3doaXRlJyk7XHJcbiAgICAgICAgdGhpcy5sb2dvQmcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2VhcnRocXVha2UnKTtcclxuICAgICAgICAgICAgdGhpcy5hbmltUm5kQW5nbGUoW3RoaXMubG9nb0JnLCB0aGlzLmxvZ29dKTtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uc2hha2UoMjUwLCAwLjAyLCB0cnVlKTtcclxuICAgICAgICAgICAgLy8gdG9kbzogZHJvcCBvbmUgcmFuZG9tIGJsb2NrXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGFydEJnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgICAgICBTdG9wVGl0bGUodGhpcyk7XHJcbiAgICAgICAgICAgIFN0YXJ0UGFzc2l2ZUxvYWRpbmcodGhpcyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgU3RhcnRHYW1lKHRoaXMpO1xyXG4gICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgQ3JlYXRlQ2hhbm5lbCh0aGlzLCAnJywgKHR4dCkgPT4ge1xyXG4gICAgICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSh0eHQpO1xyXG4gICAgICAgICAgICBTZXREZXB0aCh0eHQsICd0eHQnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBDcmVhdGVHYW1lQXVkaW8odGhpcywgR2FtZURhdGEpO1xyXG4gICAgICAgIENyZWF0ZUVmeCh0aGlzKTtcclxuICAgICAgICAvLyBDcmVhdGVTZXR0aW5nKHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVDb21tb25VSSh0aGlzKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIFVwZGF0ZUdhbWVDb21tb25VSShkZWx0YSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVCZygpIHtcclxuICAgICAgICBjb25zdCBiZ1RleHR1cmVMaXN0ID0gWydiZ0dyZWVuJywgJ2JnQnJvd24nLCAnYmdCbHVlJ107XHJcbiAgICAgICAgbGV0IGJnVGV4dHVyZVJuZElkeCA9IEdldFJuZEludCgwLCBiZ1RleHR1cmVMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5iZyA9IHRoaXMuYWRkLnRpbGVTcHJpdGUoMCwgMCwgVmlldy53LCBWaWV3LmgsIGJnVGV4dHVyZUxpc3RbYmdUZXh0dXJlUm5kSWR4XSkuc2V0T3JpZ2luKDApO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmdSbmREaXJlY3Rpb24oKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEsIGR1cmF0aW9uOiAzMDAwLCByZXBlYXQ6IC0xLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZy50aWxlUG9zaXRpb25YICs9IHRoaXMuYmdSbmRQb3MueDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmcudGlsZVBvc2l0aW9uWSArPSB0aGlzLmJnUm5kUG9zLnk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUmVwZWF0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBiZ1RleHR1cmVSbmRJZHgrKztcclxuICAgICAgICAgICAgICAgIGlmIChiZ1RleHR1cmVSbmRJZHggPj0gYmdUZXh0dXJlTGlzdC5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgYmdUZXh0dXJlUm5kSWR4ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmcuc2V0VGV4dHVyZShiZ1RleHR1cmVMaXN0W2JnVGV4dHVyZVJuZElkeF0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVCZ1JuZERpcmVjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVCZ1JuZERpcmVjdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJnUm5kUG9zLnggPSBHZXRSbmROdW0oLTMsIDQpO1xyXG4gICAgICAgIHRoaXMuYmdSbmRQb3MueSA9IEdldFJuZE51bSgtMywgNCk7XHJcbiAgICB9XHJcbiAgICBhbmltUm5kQW5nbGUobGlzdCkge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgIGNvbnN0IHJuZEFuZ2xlID0gR2V0Um5kTnVtKC0zMCwgMzEpO1xyXG4gICAgICAgIGxpc3QubWFwKGVsZSA9PiBlbGUuc2V0QW5nbGUocm5kQW5nbGUpKTtcclxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5zaGFrZSg1MCwgMC4wMSwgdHJ1ZSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgVGl0bGVTY2VuZTtcclxuZXhwb3J0IHsgU3RhcnRUaXRsZSwgU3RvcFRpdGxlIH07XHJcbiIsIi8vIGltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuaW1wb3J0IFRpdGxlU2NlbmUsIHsgU3RhcnRUaXRsZSB9IGZyb20gJy4vc2NlbmVzL3RpdGxlJztcclxuaW1wb3J0IEdhbWVTY2VuZSBmcm9tICcuL3NjZW5lcy9nYW1lJztcclxuaW1wb3J0IHsgR2V0R2FtZUF1ZGlvQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBHZXRTbnNBc3NldHMgfSBmcm9tICdAc3JjL3NjZW5lcy91aS9zbnMnO1xyXG5pbXBvcnQgeyBHZXRHYWdlQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvZ2FnZSc7XHJcbmltcG9ydCB7IEdldEdhbWVDb21tb25VSUFzc2V0cyB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAga2V5OiAnbWFpbicsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zY2VuZS5hZGQoJ3RpdGxlJywgVGl0bGVTY2VuZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5zY2VuZS5hZGQoJ2dhbWUnLCBHYW1lU2NlbmUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICBTdGFydFRpdGxlKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IEFzc2V0VXJsID0gJ2h0dHBzOi8vc2lsdmVydHJlZTc2MjIuZ2l0aHViLmlvL3dlYmdhbWVzL2Jsb2NrUGFuZy9hc3NldHMvJztcclxuZXhwb3J0IGxldCBBc3NldHMgPSB7XHJcbiAgICBkeW5hbWljOiBbXHJcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbGlzdCA9IFtcclxuICAgICAgICAgICAgICAgIC8vIHBhcnRpY2xlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFydGljbGVTcHJpdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncGFydGljbGVTcHJpdGUucG5nJyxcclxuICAgICAgICAgICAgICAgICAgICBqc29uOiBhd2FpdCByZXF1aXJlKCcuL2Fzc2V0cy9wYXJ0aWNsZXMvcGFydGljbGVTcHJpdGUuanNvbicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdGxhcydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2RpYW1vbmQ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdkaWFtb25kNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleTEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdrZXkyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdrZXkyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAna2V5MycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAna2V5My5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleTQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5MycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdydWJ5NCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncnVieTQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdoZWFydCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnaGVhcnQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8gdWlcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmdCbHVlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdiZ0JsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdiZ0Jyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdiZ0Jyb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmdHcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmdHcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2J0bkJsdWUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0bkJsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5Ccm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuQnJvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5HcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwYW5lbEdyZWVuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEdyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncGFuZWxCbHVlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEJsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwYW5lbEJyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYW5lbEJyb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJ0blVwQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0blVwQmx1ZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5VcEJyb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQnRuVXBCcm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5VcEdyZWVuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQnRuVXBHcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5Eb3duQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0bkRvd25CbHVlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJ0bkRvd25Ccm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0bkRvd25Ccm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5Eb3duR3JlZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCdG5Eb3duR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8geyBrZXk6ICdibGFja1NjcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxhY2tTY3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8geyBrZXk6ICdleGl0QnRuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdleGl0QnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndGl0bGVDb250ZXh0QmcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RpdGxlQ29udGV4dEJnLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYXVkaW9PbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYXVkaW9Pbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2F1ZGlvT2ZmJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdhdWRpb09mZi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ211c2ljT24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ211c2ljT24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdtdXNpY09mZicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbXVzaWNPZmYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjb2xvckJhY2tncm91bmQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2NvbG9yQmFja2dyb3VuZC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2NvbG9ySGFuZGxlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjb2xvckhhbmRsZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2NvbG9ySGFuZGxlRG93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY29sb3JIYW5kbGVEb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlckJhY2snLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCYWNrLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb3ZlclJldHJ5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyUmV0cnkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzZXR0aW5nQnRuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nQnRuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ1BhbmVsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nUGFuZWwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzZXR0aW5nT3ZlckJ0blVwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nT3ZlckJ0blVwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ092ZXJCdG5Eb3duJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzZXR0aW5nT3ZlckJ0bkRvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5TZXR0aW5nRG93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnRuU2V0dGluZ0Rvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5TZXR0aW5nVXAnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0blNldHRpbmdVcC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NjcmVlblNtYWxsZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NjcmVlblNtYWxsZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzY3JlZW5MYXJnZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NjcmVlbkxhcmdlci5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3dhcm5pbmdTaWduJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd3YXJuaW5nU2lnbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB1aSBzY2VuZVxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ1LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ2JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkNy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkOCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ4LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTAxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU2JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlNycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA3LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTgnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwOC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTAnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxMC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTExLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTEyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE1JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxNi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxNycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE3LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTgucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxOS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyMCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTIwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTIxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTIzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyNicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI2LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI3JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjcucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjgnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyOC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyOScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTMwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzAucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTMyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTMzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTM1LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3QzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbWlzdDQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ21pc3Q0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIHNoYXBlXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVCYWxsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibHVlQmFsbC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2dyZWVuQmFsbCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5CYWxsLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnJvd25CYWxsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdicm93bkJhbGwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZUJhbGwnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ29ic3RhY2xlQmFsbC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVSZWN0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibHVlUmVjdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2dyZWVuUmVjdCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5SZWN0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnJvd25SZWN0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdicm93blJlY3QucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZVJlY3QnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ29ic3RhY2xlUmVjdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JsdWVTcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2JsdWVTcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdncmVlblNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ3JlZW5TcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdicm93blNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnJvd25TcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvYnN0YWNsZVNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb2JzdGFjbGVTcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsb2NrZWRSZWN0YW5nbGUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Jsb2NrX2xvY2tlZF9sYXJnZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2xvY2tldFNxdWFyZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxvY2tfbG9ja2VkX3NxdWFyZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAna2V5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIHR5cGVcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYXJyb3dMZWZ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdhcnJvd0xlZnQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsb2NrZWQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2xvY2tlZC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3BhdHRlcm4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3BhdHRlcm4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlcicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncG93ZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdyYW5kb20nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3JhbmRvbS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NpZ25hbDEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NpZ25hbDEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzaWduYWwyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzaWduYWwyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2lnbmFsMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2lnbmFsMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3N0YXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3N0YXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzd2lwZUxlZnQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3N3aXBlTGVmdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RvdWNoJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0b3VjaC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyYXNoY2FuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmFzaGNhbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyYXNoY2FuT3BlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJhc2hjYW5PcGVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndW5sb2NrZWQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3VubG9ja2VkLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIGNvbW1vblxyXG4gICAgICAgICAgICAgICAgLi4uR2V0R2FtZUNvbW1vblVJQXNzZXRzKCksXHJcbiAgICAgICAgICAgICAgICAuLi5HZXRTbnNBc3NldHMoKSxcclxuICAgICAgICAgICAgICAgIC4uLkdldEdhZ2VBc3NldHMoJ3llbGxvdycpLFxyXG4gICAgICAgICAgICAgICAgLy8gYXVkaW9cclxuICAgICAgICAgICAgICAgIC4uLkdldEdhbWVBdWRpb0Fzc2V0cyhbXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdm9pY2Ugc2Z4XHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzEubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2UyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICcyLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnMy5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzQubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U1JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc1Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlNicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnNi5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzcubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc4Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlOScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnOS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTEwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICcxMC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZUdvJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdnby5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZUhpZ2hTY29yZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbmV3X2hpZ2hzY29yZS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZVRpbWVPdmVyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0aW1lX292ZXIubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VHYW1lT3ZlcicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ2FtZV9vdmVyLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciBzZnhcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ2dlYXJBbmltJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdnZWFyQW5pbS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdlYXJ0aHF1YWtlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdlYXJ0aHF1YWtlLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3RvdWNoU2Z4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0b3VjaFNmeC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdsb2FkaW5nQmxvY2tEb25lJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdsb2FkaW5nQmxvY2tEb25lLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ2xvYWRpbmdCbG9ja09uUHJvY2VzcycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbG9hZGluZ0Jsb2NrT25Qcm9jZXNzLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3Bvd2VyQmxvY2tPbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncG93ZXJCbG9ja09uLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3Bvd2VyQmxvY2tPZmYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Bvd2VyQmxvY2tPZmYubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnc3Bhd25PYnN0YWNsZVNmeCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc3Bhd25PYnN0YWNsZVNmeC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd0aW1lSW5jcmVhc2VTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RpbWVJbmNyZWFzZVNmeC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdzY29yZVNmeCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2NvcmVTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnd2FybmluZ1NmeCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnd2FybmluZ1NmeC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICBdLCBbXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdnYW1lQmdtJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibG9ja3BhbmdiZ20ubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM1FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///530\n")},442:g=>{"use strict";g.exports=JSON.parse('{"frames":{"blue":{"frame":{"x":2,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"green":{"frame":{"x":132,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"red":{"frame":{"x":262,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"white":{"frame":{"x":392,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"yellow":{"frame":{"x":522,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}}},"meta":{"app":"http://www.codeandweb.com/texturepacker","version":"1.0","image":"flares.png","format":"RGBA8888","size":{"w":652,"h":132},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:f2781d89823d5a67fc31381af364b421:da82646b19b2f0c08684086824b1e581:71625947cf221c10549b852c13ffedc7$"}}')}}]);