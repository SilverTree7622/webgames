(self.webpackChunkplayable_ad_test=self.webpackChunkplayable_ad_test||[]).push([[926],{926:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"Assets\": () => (/* binding */ Assets),\n  \"default\": () => (/* binding */ MainScene)\n});\n\n// EXTERNAL MODULE: ./src/userSetting.ts\nvar userSetting = __webpack_require__(453);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/index.ts\nconst ContextLayerMargin = 120;\r\nconst SettingGapContextMargin = 50;\r\nconst SettingGapContextMarginLarger = 70;\r\nconst SettingContextMargin = 40;\r\nconst SettingTopContextMargin = 80;\r\n\r\n\n;// CONCATENATED MODULE: ./src/utils/storage.ts\n// compare item is in the data then \r\nconst CompareCallback = (data, item) => {\r\n    const isItemExistInData = data[item];\r\n    if (isItemExistInData !== undefined || null)\r\n        return true;\r\n    else {\r\n        console.warn('item is not matched to actual data type:', item, data);\r\n        return false;\r\n    }\r\n};\r\nconst GameName = document.title; // get game title name\r\nconst GetLocalStorageData = (defaultData) => {\r\n    const data = window.localStorage.getItem(GameName);\r\n    if (data)\r\n        return JSON.parse(data);\r\n    else {\r\n        window.localStorage.setItem(GameName, JSON.stringify(defaultData));\r\n        return defaultData;\r\n    }\r\n};\r\nconst GetLocalStorageItem = (defaultData, item) => {\r\n    const gameData = GetLocalStorageData(defaultData);\r\n    let list = (typeof item === 'string' ? [item] : [...item]).map((ele) => {\r\n        let returnItem = gameData[ele];\r\n        if (CompareCallback(gameData, ele))\r\n            return returnItem;\r\n    });\r\n    // console.log('item, list: ', item, list);\r\n    if (list.length === 1)\r\n        return list[0];\r\n    else if (item.length === list.length)\r\n        return list;\r\n};\r\nconst SetLocalStorageItem = (defaultData, item, value) => {\r\n    let gameData = GetLocalStorageData(defaultData);\r\n    if (gameData)\r\n        gameData[item] = value;\r\n    window.localStorage.setItem(GameName, JSON.stringify(gameData));\r\n    // console.log('gameData, best: ', gameData, gameData.best);\r\n    return gameData;\r\n};\r\nconst RemoveLocalStorageItem = (defaultData, item) => {\r\n    SetLocalStorageItem(defaultData, item, null);\r\n};\r\nconst ClearGameLocalStorageData = () => {\r\n    window.localStorage.removeItem(GameName);\r\n};\r\nconst ClearAllLocalStorageItem = () => {\r\n    window.localStorage.clear();\r\n};\r\nconst DebugLocalStorage = (scene, defaultData, items) => {\r\n    scene.input.mouse.disableContextMenu();\r\n    scene.input.on('pointerdown', function (pointer) {\r\n        if (pointer.rightButtonDown()) {\r\n            console.log(GetLocalStorageData(defaultData));\r\n            return;\r\n        }\r\n        if (pointer.middleButtonDown()) {\r\n            if (items instanceof Array)\r\n                items.map(ele => SetLocalStorageItem(defaultData, ele.item, ele.value));\r\n            else\r\n                SetLocalStorageItem(defaultData, items.item, items.value);\r\n            SetLocalStorageItem(defaultData, 'best', 0);\r\n            return;\r\n        }\r\n    });\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/assetUtils.ts\nconst CommonRootUrl = 'https://silvertree7622.github.io/webgames/';\r\nconst CommonAssets = CommonRootUrl + 'assets/';\r\nconst CommonUI = CommonAssets + 'ui/';\r\nconst CommonSfx = CommonAssets + 'audio/sfx/';\r\nconst CommonSns = CommonRootUrl + 'sns/';\r\n/** get common asset file with exception key (when if u worry about nested things)\r\n * @param assetList common custom assest list compose of the key, url, etc\r\n * @param exceptionKeys exception key which u worry about the nested things\r\n * @returns filtered asset list\r\n */\r\nconst GetAssetFiles = (assetList, exceptionKeys) => {\r\n    if (!exceptionKeys)\r\n        return assetList;\r\n    let filteredList;\r\n    // one key to except from asset list\r\n    if (typeof exceptionKeys === 'string') {\r\n        filteredList = assetList.filter(asset => asset.key !== exceptionKeys);\r\n    }\r\n    // several key list to except from asset list\r\n    else {\r\n        filteredList = assetList.filter((asset) => {\r\n            return exceptionKeys.indexOf(asset.key) < 0;\r\n        });\r\n    }\r\n    return filteredList;\r\n};\r\n/* harmony default export */ const assetUtils = ((/* unused pure expression or super */ null && (CommonRootUrl)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/audio/index.ts\n\r\n\r\nconst GameAudio = {\r\n    wholeGameData: {},\r\n    bgmList: [],\r\n    sfxList: [],\r\n    bgmKeyList: [],\r\n    sfxKeyList: [],\r\n    isBgmMute: false,\r\n    isSfxMute: false,\r\n    bgmVolume: 0.5,\r\n    sfxVolume: 0.5,\r\n    setBgmMute: function (isMute) {\r\n        this.isBgmMute = isMute;\r\n        this.bgmList.forEach(bgm => bgm.setMute(isMute));\r\n        if (isMute)\r\n            this.bgmKeyList.map(key => this.pauseBgm(key));\r\n        else\r\n            this.bgmKeyList.map(key => this.resumeBgm(key));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'isBgmMute', isMute);\r\n        return this;\r\n    },\r\n    setSfxMute: function (isMute) {\r\n        this.isSfxMute = isMute;\r\n        this.sfxList.forEach(sfx => sfx.setMute(isMute));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'isSfxMute', isMute);\r\n        return this;\r\n    },\r\n    setBgmVolume: function (volume) {\r\n        this.bgmVolume = volume;\r\n        this.bgmList.forEach(bgm => bgm.setVolume(volume));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'bgmVolume', volume);\r\n        return this;\r\n    },\r\n    setSfxVolume: function (volume) {\r\n        this.sfxVolume = volume;\r\n        this.sfxList.forEach(sfx => sfx.setVolume(volume));\r\n        SetLocalStorageItem(GameAudio.wholeGameData, 'sfxVolume', volume);\r\n        return this;\r\n    },\r\n    playBgm: function (key) {\r\n        const playBgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (playBgm)\r\n            playBgm.play();\r\n        else\r\n            console.warn(`[Audio] playBgm: ${key} not found`);\r\n        return this;\r\n    },\r\n    pauseBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.pause();\r\n        return this;\r\n    },\r\n    resumeBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.resume();\r\n        return this;\r\n    },\r\n    stopBgm: function (key) {\r\n        const bgm = this.bgmList.find(bgm => bgm.key === key);\r\n        if (bgm)\r\n            bgm.stop();\r\n        return this;\r\n    },\r\n    playSfx: function (key) {\r\n        const playSfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (playSfx)\r\n            playSfx.play();\r\n        else\r\n            console.warn(`[Audio] playSfx: ${key} not found`);\r\n        return this;\r\n    },\r\n    stopSfx: function (key) {\r\n        const sfx = this.sfxList.find(sfx => sfx.key === key);\r\n        if (sfx)\r\n            sfx.stop();\r\n        return this;\r\n    },\r\n    // play & stop control for instance any sfx\r\n    playSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.play({\r\n            mute: GetLocalStorageItem(GameAudio.wholeGameData, 'isSfxMute'),\r\n            volume: GetLocalStorageItem(GameAudio.wholeGameData, 'sfxVolume'),\r\n            loop: true,\r\n        });\r\n        return this;\r\n    },\r\n    stopSfxInstanceLoop: function (instance) {\r\n        if (!this.sfxKeyList.find(key => key === instance.key))\r\n            return;\r\n        instance.stop();\r\n        instance.removeAllListeners();\r\n        instance.destroy();\r\n        return this;\r\n    },\r\n};\r\nconst GameDataAudio = {\r\n    bgmVolume: 0.5,\r\n    sfxVolume: 0.5,\r\n    isBgmMute: false,\r\n    isSfxMute: false,\r\n};\r\nconst GetAudioAssets = (sfxKeyList, bgmKeyList, exceptionKeys) => {\r\n    GameAudio.sfxKeyList = GetAssetFiles(sfxKeyList, exceptionKeys).map(asset => asset.key);\r\n    if (bgmKeyList)\r\n        GameAudio.bgmKeyList = GetAssetFiles(bgmKeyList, exceptionKeys).map(asset => asset.key);\r\n    else\r\n        GameAudio.bgmKeyList = [];\r\n    return [\r\n        ...sfxKeyList,\r\n        ...bgmKeyList,\r\n    ];\r\n};\r\nconst InitGameAudio = () => {\r\n    const [bgmVolume, sfxVolume, isBgmMute, isSfxMute] = GetLocalStorageItem(GameAudio.wholeGameData, ['bgmVolume', 'sfxVolume', 'isBgmMute', 'isSfxMute']);\r\n    GameAudio.setBgmVolume(bgmVolume);\r\n    GameAudio.setSfxVolume(sfxVolume);\r\n    GameAudio.setBgmMute(isBgmMute);\r\n    GameAudio.setSfxMute(isSfxMute);\r\n};\r\nconst CreateGameAudio = (scene, gameData) => {\r\n    GameAudio.wholeGameData = gameData;\r\n    GameAudio.bgmList = GameAudio.bgmKeyList && GameAudio.bgmKeyList.map(key => scene.sound.add(key, { loop: true }));\r\n    GameAudio.sfxList = GameAudio.sfxKeyList && GameAudio.sfxKeyList.map(key => scene.sound.add(key));\r\n    InitGameAudio();\r\n};\r\n/* harmony default export */ const audio = (GameAudio);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/depth/index.ts\nconst Depth = {\r\n    tree: 90,\r\n    block: 100,\r\n    cloud: 120,\r\n    mist: 120,\r\n    wall: 140,\r\n    txt: 150,\r\n    popUp: 400,\r\n    setting: 500,\r\n    warning: 600,\r\n    gameOver: 1000,\r\n    particle: 1100,\r\n    newBest: 1200,\r\n    highest: 1500,\r\n    fullScreen: 1600,\r\n};\r\nconst SetDepth = (targetObj, type) => {\r\n    if (!Depth[type]) {\r\n        console.warn('SetDepth: type is not found in the depth list:', targetObj, type);\r\n        console.log('targetObj, type: ', targetObj, type);\r\n        return;\r\n    }\r\n    if (targetObj.setDepth)\r\n        targetObj.setDepth(Depth[type]);\r\n    else\r\n        console.warn('SetDepth: targetObj is not Phaser.GameObjects');\r\n};\r\n/* harmony default export */ const depth = ((/* unused pure expression or super */ null && (Depth)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/font/index.ts\n\r\nconst TxtTitleHeadSize = 50;\r\nconst TxtTitleSize = 30;\r\nconst TxtTitleHeightGap = 60;\r\nconst TxtOverHeadSize = userSetting/* View.w */.G7.w / 4;\r\nconst TxtMargin = 26;\r\nconst TxtPadding = 8;\r\nconst TxtAlpha = 0.9;\r\nconst TxtSize = 20;\r\nconst TxtFamily = 'Arial Black';\r\nconst TxtBackgroundColor = '#242424';\r\nconst ContextMarginW = userSetting/* View.w */.G7.w / 12;\r\nconst ContextMarginH = userSetting/* View.h */.G7.h / 12;\r\nconst SetFont2CommonContextStyle = (text) => {\r\n    text.setOrigin(0.5, 0.5);\r\n    text.setFontSize(TxtSize);\r\n    text.setFontFamily(TxtFamily);\r\n    return text;\r\n};\r\n\r\n\n// EXTERNAL MODULE: ./src/utils/math.ts\nvar math = __webpack_require__(774);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/basic.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\nclass BasicBlock extends Phaser.GameObjects.Container {\r\n    // public testObj;\r\n    constructor(scene) {\r\n        super(scene, 0, 0);\r\n        this.isEvtCreated = false;\r\n        this.typeName = '';\r\n        this.spawnChance = 0;\r\n        this.score = 0;\r\n        this.bData = {};\r\n        this.isOnScreen = false;\r\n        this.initPrpoerties();\r\n        this.initChildren(scene);\r\n        this.initPhysics(scene);\r\n        SetDepth(this, 'block');\r\n        scene.add.existing(this);\r\n    }\r\n    initPrpoerties() {\r\n        this.id = `${new Date().getTime()}-${Phaser.Math.RND.uuid()}`;\r\n    }\r\n    initChildren(scene) {\r\n        this.shapeImg = scene.add.image(0, 0, 'ball');\r\n        this.typeTxt = scene.add.text(0, 0, '');\r\n        this.typeImg = scene.add.image(0, 0, '');\r\n        SetFont2CommonContextStyle(this.typeTxt);\r\n        this.initTypeTxt();\r\n        this.add([this.shapeImg, this.typeTxt, this.typeImg]);\r\n        // this.testObj = scene.matter.add.image(View.centerX, 0, 'ball');\r\n        // this.testObj.setCircle(40, 40);\r\n        // this.testObj.setBounce(1);\r\n        // console.log('this.testObj: ', this.testObj);\r\n    }\r\n    initPhysics(scene) {\r\n        // number is meaningless just default value\r\n        // for add container to matter game object\r\n        this.setSize(100, 100);\r\n        // add to matter game object\r\n        this.physicsCon = scene.matter.add.gameObject(this);\r\n        this.physicsCon.setFriction(0.005);\r\n        this.physicsCon.setBounce(1);\r\n        this.physicsCon.setSensor(true);\r\n    }\r\n    getBody() { return this.body; }\r\n    getShape() { return this.shape; }\r\n    addShape(shape) { this.shape = Object.assign(Object.assign({}, this.shape), shape); return this; }\r\n    setShape(shape) { this.shape = shape; return this; }\r\n    getShapeName() { return this.shapeName; }\r\n    setShapeName(name) { this.shapeName = name; return this; }\r\n    getShapeImg() { return this.shapeImg; }\r\n    getScore() { return this.score; }\r\n    setScore(score) { this.score = score; return this; }\r\n    addScore(score) { this.score += score; return this; }\r\n    getTimeIncrease() { return this.timeIncrease; }\r\n    setTimeIncrease(data) {\r\n        this.timeIncrease = {\r\n            chance: data.chance,\r\n            value: data.value\r\n        };\r\n        return this;\r\n    }\r\n    getSpawnRndChance() { return this.spawnChance; }\r\n    setSpawnRndChance(chanceNum) { return this.spawnChance = chanceNum; }\r\n    getTypeImg() { return this.typeImg; }\r\n    setTypeImg(typeTexture) {\r\n        if (!typeTexture)\r\n            this.typeImg.setVisible(false);\r\n        this.typeImg.setTexture(typeTexture);\r\n        return this;\r\n    }\r\n    setTypeImgDisplaySize(width, height) { this.typeImg.setDisplaySize(width, height); return this; }\r\n    initTypeTxt() {\r\n        this.setTypeTxtVisible(false);\r\n        this.setTypeTxt('');\r\n        this.typeTxt.setFontSize(50);\r\n        return this;\r\n    }\r\n    getTypeTxt() { return this.typeTxt; }\r\n    setTypeTxt(text) {\r\n        if (!this.typeTxt.visible)\r\n            this.typeTxt.setVisible(true);\r\n        if (!text)\r\n            this.typeTxt.setVisible(false);\r\n        this.typeTxt.setText(text);\r\n        return this;\r\n    }\r\n    setTypeTxtVisible(visible) { this.typeTxt.setVisible(visible); return this; }\r\n    getTypeName() { return this.typeName; }\r\n    setTypeName(typeName) { return this.typeName = typeName; }\r\n    getBlockData() { return this.bData; }\r\n    setBlockData(data) {\r\n        this.bData = {};\r\n        this.bData = data;\r\n        return this;\r\n    }\r\n    addBlockData(data) { this.bData = Object.assign(Object.assign({}, this.bData), data); }\r\n    getPhysicsCon() { return this.physicsCon; }\r\n    getWidth() { return this.typeImg.width; }\r\n    getHeight() { return this.typeImg.height; }\r\n}\r\nconst SpawnBlock = (block) => {\r\n    SetBlockInputSetting(block);\r\n    block.setPosition(system.getRndSpawnX(), system.spawnY);\r\n    block.setAngle(system.getRndAngle());\r\n    block.setVisible(true);\r\n    block.isOnScreen = true;\r\n    block.getPhysicsCon().setIgnoreGravity(false);\r\n    block.getPhysicsCon().setSensor(false);\r\n    block.getBlockData().spawn && block.getBlockData().spawn();\r\n    return block;\r\n};\r\nconst SetBlockInputSetting = (block) => {\r\n    block.removeAllListeners();\r\n    block.setInteractive();\r\n    block.scene.input.setDraggable(block, true);\r\n    block.on('pointerdown', (ptr) => {\r\n        if (block.getBlockData().ptrDown)\r\n            block.getBlockData().ptrDown(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setStatic(true);\r\n    });\r\n    block.on('drag', (ptr) => {\r\n        if (block.getBlockData().drag)\r\n            block.getBlockData().drag(block, ptr);\r\n    });\r\n    block.on('pointerup', (ptr) => {\r\n        if (block.getBlockData().ptrUp)\r\n            block.getBlockData().ptrUp(block, ptr);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    block.on('pointerout', () => {\r\n        if (block.getBlockData().ptrOut)\r\n            block.getBlockData().ptrOut(block);\r\n        block.getPhysicsCon().setIgnoreGravity(false);\r\n        block.getPhysicsCon().setStatic(false);\r\n    });\r\n    return block;\r\n};\r\nconst SetBlockType2InitBasic = (block) => {\r\n    block.setScore(0);\r\n    block.setTimeIncrease({ chance: 0, value: 0 });\r\n    block.getTypeImg().setVisible(true);\r\n    block.initTypeTxt();\r\n    block.setBlockData({});\r\n    block.setAlpha(1);\r\n    try {\r\n        block.disableInteractive();\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n    try {\r\n        block.scene.input.setDraggable(block, false);\r\n    }\r\n    catch (e) { }\r\n    return block;\r\n};\r\nconst DeathBlock = (block) => {\r\n    if (block.getBlockData().death)\r\n        block.getBlockData().death(() => { DisableBlock(block); });\r\n    else\r\n        DisableBlock(block);\r\n    return block;\r\n};\r\nconst DisableBlock = (block) => {\r\n    if (block.getBody()) {\r\n        block.getPhysicsCon().setIgnoreGravity(true);\r\n        block.getPhysicsCon().setSensor(true);\r\n    }\r\n    block.isOnScreen = false;\r\n    block.setVisible(false);\r\n    SetBlockType2InitBasic(block);\r\n    return block;\r\n};\r\nconst UpdateBlock = (block, time, delta) => {\r\n    if (!block || !block.getBlockData())\r\n        return;\r\n    if (block.getBlockData().update)\r\n        block.getBlockData().update(time, delta);\r\n    return block;\r\n};\r\n/* harmony default export */ const basic = (BasicBlock);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/ad.ts\nconst SetBlock2Ad = (block) => {\r\n    let bData = {\r\n        ptrDown: (block) => {\r\n        },\r\n        ptrUp: (block) => {\r\n        },\r\n        drag: (block) => {\r\n        },\r\n        dragEnd: (block) => {\r\n        },\r\n    };\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const ad = (SetBlock2Ad);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/input/index.ts\nconst Input = {\r\n    type: '',\r\n    typeHistory: [],\r\n    initPos: { x: 0, y: 0 },\r\n    isHoldingDown: false,\r\n    holdDuration: 0,\r\n    holdMaxDuration: 1000,\r\n    startHold: function () { this.isHoldingDown = true; return this; },\r\n    resetHold: function () {\r\n        this.isHoldingDown = false;\r\n        this.initPos = { x: 0, y: 0 };\r\n        this.holdDuration = 0;\r\n        this.setType('');\r\n        return this;\r\n    },\r\n    getIsHoldingDown: function () { return this.isHoldingDown; },\r\n    getHoldDuration: function () { return this.holdDuration; },\r\n    setHoldDuration: function (duration) { this.holdDuration = duration; return this; },\r\n    setInitPos: function (x, y) { this.initPos = { x: x, y: y }; return this; },\r\n    chckIsHold: function () {\r\n        if (this.holdDuration >= this.holdMaxDuration)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    getType: function () { return this.type; },\r\n    setType: function (type) { this.type = type; return this; },\r\n    initTypeHistory: function () { this.typeHistory = []; },\r\n    getTypeHistory: function () { return this.typeHistory; },\r\n    getLastestInputType: function () { return this.typeHistory[this.typeHistory.length - 1]; },\r\n    push2TypeHistory: function (type) {\r\n        this.typeHistory.push(type);\r\n        return this.typeHistory;\r\n    }\r\n};\r\nconst InitInput = () => {\r\n    Input.resetHold();\r\n    Input.initTypeHistory();\r\n};\r\nconst CreateInput = (scene) => {\r\n    scene.input.on('pointerdown', () => {\r\n        Input.startHold();\r\n    });\r\n    InitInput();\r\n};\r\nconst UpdateInput = (delta) => {\r\n    if (Input.getIsHoldingDown())\r\n        Input.setHoldDuration(Input.getHoldDuration() + delta);\r\n};\r\nconst InputPtrDown = (ptr) => {\r\n    Input.setInitPos(ptr.x, ptr.y);\r\n};\r\nconst InputPtrUp = (ptr) => {\r\n    return SetInputType(Input.initPos, ptr);\r\n};\r\nconst InputDrag = (ptr) => {\r\n};\r\nconst InputPtrOut = () => {\r\n    Input.resetHold();\r\n};\r\nconst ChckSwipeDirection = (initPos, ptr) => {\r\n    const x = ptr.x - initPos.x;\r\n    const y = ptr.y - initPos.y;\r\n    if (Math.abs(x) > Math.abs(y)) {\r\n        if (x > 0)\r\n            Input.setType('swipeRight');\r\n        else\r\n            Input.setType('swipeLeft');\r\n    }\r\n    else {\r\n        if (y < 0)\r\n            Input.setType('swipeUp');\r\n        else\r\n            Input.setType('swipeDown');\r\n    }\r\n};\r\n// set comfy touch to not judge as swipe when use with actual finger\r\nconst ComfyGapTouchValue = 15;\r\nconst SetInputType = (initPos, ptr) => {\r\n    // swipe motion\r\n    const chckPosX = Math.abs(initPos.x - ptr.x) > ComfyGapTouchValue;\r\n    const chckPosY = Math.abs(initPos.y - ptr.y) > ComfyGapTouchValue;\r\n    if (chckPosX || chckPosY)\r\n        ChckSwipeDirection(initPos, ptr);\r\n    // hold or touch\r\n    else {\r\n        if (Input.chckIsHold()) {\r\n            Input.setType('hold');\r\n        }\r\n        else\r\n            Input.setType('touch');\r\n    }\r\n    Input.push2TypeHistory(Input.getType());\r\n    Input.resetHold();\r\n    return Input.getLastestInputType();\r\n};\r\n/* harmony default export */ const input = ((/* unused pure expression or super */ null && (Input)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/power.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Power = (block) => {\r\n    const { scene } = block;\r\n    const rndDownDurationMax = (0,math/* GetRndNum */.hg)(0.5, 1.5);\r\n    const initPtr = (bData, block) => {\r\n        bData.isPtrDown = false;\r\n        bData.downDuration = 0;\r\n        block.setAlpha(1);\r\n    };\r\n    let bData = {\r\n        isPtrDown: false,\r\n        isComplete: false,\r\n        downDuration: 0,\r\n        downDurationMax: Math.floor(rndDownDurationMax * 1000),\r\n        ptrDown: function (block, ptr) {\r\n            InputPtrDown(ptr);\r\n            if (this.isPtrDown) {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isPtrDown = true;\r\n            audio.playSfx('powerBlockOn');\r\n            block.setAlpha(0.5);\r\n            const twList = [];\r\n            twList.push({\r\n                from: 0, to: this.downDurationMax, duration: this.downDurationMax,\r\n                onUpdate: (tw) => {\r\n                    // if keep press power btn\r\n                    if (this.isPtrDown)\r\n                        this.downDuration = tw.getValue();\r\n                    // if release power btn before done\r\n                    else {\r\n                        initPtr(this, block);\r\n                        tw.remove();\r\n                    }\r\n                },\r\n                onComplete: (tw) => {\r\n                    // done power btn play sfx\r\n                    if (!this.isPtrDown) {\r\n                        twList.shift();\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    initPtr(this, block);\r\n                    this.isComplete = true;\r\n                    audio.playSfx('powerBlockOff');\r\n                    scene.tweens.addCounter(twList.shift());\r\n                }\r\n            });\r\n            twList.push({\r\n                from: 1, to: 1.1, duration: 250, yoyo: true,\r\n                onUpdate: (tw, data) => {\r\n                    block.setScale(data.value);\r\n                },\r\n                onComplete: () => {\r\n                    block.setScale(1);\r\n                    audio.playSfx('touchSfx');\r\n                    ClearBlock(block, block.getScore() * this.downDurationMax / 1000);\r\n                }\r\n            });\r\n            scene.tweens.addCounter(twList.shift());\r\n        },\r\n        ptrUp: function (block, ptr) {\r\n            block.setAlpha(1);\r\n            if (this.isComplete)\r\n                return;\r\n            if (!this.isPtrDown || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            // chck is keep press until done\r\n            initPtr(this, block);\r\n        },\r\n        ptrOut: function () {\r\n            InputPtrOut();\r\n            initPtr(this, block);\r\n        },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const power = (SetBlock2Power);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/loading.ts\n\r\n\r\n\r\n\r\n\r\nconst SetBlock2Loading = (block) => {\r\n    block.setTypeTxt('%');\r\n    block.getTypeTxt().setFontSize(50);\r\n    let bData = {\r\n        isLoading: false,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (this.isLoading || InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            this.isLoading = true;\r\n            const rndDuration = (0,math/* GetRndInt */.dZ)(1, 4);\r\n            const processSfx = block.scene.sound.add('loadingBlockOnProcess');\r\n            audio.playSfxInstanceLoop(processSfx);\r\n            block.scene.tweens.addCounter({\r\n                from: 0, to: 100, duration: rndDuration * 1000,\r\n                onUpdate: (tw, data) => {\r\n                    const percentage = data.value.toFixed(0);\r\n                    block.setTypeTxt(percentage + '%');\r\n                },\r\n                onComplete: () => {\r\n                    audio.stopSfxInstanceLoop(processSfx);\r\n                    audio.playSfx('loadingBlockDone');\r\n                    this.isLoading = false;\r\n                    block.setTypeTxt('100%');\r\n                    setTimeout(() => {\r\n                        audio.playSfx('touchSfx');\r\n                        ClearBlock(block, block.getScore() * rndDuration);\r\n                    }, 1000);\r\n                }\r\n            });\r\n        },\r\n        ptrOut: function () { InputPtrOut(); },\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const loading = (SetBlock2Loading);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/touch.ts\n\r\n\r\n\r\n\r\nconst SetBlock2Touch = (block) => {\r\n    const rndTouchCnt = (0,math/* GetRndInt */.dZ)(2, 5);\r\n    const disableTouchDelayTime = 240;\r\n    let bData = {\r\n        touchCnt: 0,\r\n        maxTouchCnt: rndTouchCnt,\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            if (InputPtrUp(ptr) !== 'touch') {\r\n                AddObstacleBlock(block);\r\n                return;\r\n            }\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.touchCnt++;\r\n            if (this.touchCnt >= this.maxTouchCnt) {\r\n                this.touchCnt = 0;\r\n                ClearBlock(block, block.getScore() * this.maxTouchCnt);\r\n            }\r\n            else {\r\n                // disable click, then able after delay\r\n                this.isAble2Touch = false;\r\n                block.scene.tweens.addCounter({\r\n                    from: 1, to: 1.1, duration: disableTouchDelayTime, yoyo: true, ease: 'Bounce',\r\n                    onUpdate: (tw, data) => {\r\n                        block.setScale(data.value);\r\n                    },\r\n                    onComplete: () => {\r\n                        block.setScale(1);\r\n                        this.isAble2Touch = true;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.getTypeImg().setDisplaySize(CommonSize, CommonSize);\r\n    block.setBlockData(bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const touch = (SetBlock2Touch);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/obstacle.ts\n\r\n\r\nconst ObstacleTextureList = (/* unused pure expression or super */ null && (['obstacleBall', 'obstacleRect', 'obstacleSquare']));\r\nconst SetObstacle = (block) => {\r\n    let bData = {\r\n        isAble2Touch: true,\r\n        ptrDown: function (block, ptr) { InputPtrDown(ptr); },\r\n        ptrUp: function (block, ptr) {\r\n            const inputType = InputPtrUp(ptr);\r\n            if (inputType !== 'touch')\r\n                return;\r\n            if (!this.isAble2Touch)\r\n                return;\r\n            this.isAble2Touch = false;\r\n            AddObstacleBlock(block);\r\n            setTimeout(() => { this.isAble2Touch = true; }, 1000);\r\n        },\r\n        ptrOut: function () { InputPtrOut(); }\r\n    };\r\n    block.addBlockData(bData);\r\n    // set shape obstacle texture\r\n    const name = block.getShapeName();\r\n    const capitalShape = name[0].toUpperCase() + name.slice(1);\r\n    const obstacleShape = 'obstacle' + capitalShape;\r\n    block.addShape({ score: 0, imgTexture: obstacleShape });\r\n    block.getShapeImg().setTexture(obstacleShape);\r\n    return block;\r\n};\r\n/* harmony default export */ const obstacle = (SetObstacle);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/type/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CommonSize = userSetting/* View.calcRatio */.G7.calcRatio(200);\r\nconst BlockUniqueProperties = [\r\n    {\r\n        typeName: '',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { SetBlockType2InitBasic(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'obstacle',\r\n        spawnChance: 0,\r\n        score: 0,\r\n        iconTexture: '',\r\n        imgWidth: 0,\r\n        imgHeight: 0,\r\n        timeIncreaseChance: 0,\r\n        timeIncreaseMin: 0,\r\n        timeIncreaseMax: 0,\r\n        setFunc: (block) => { obstacle(block); return block; }\r\n    },\r\n    {\r\n        typeName: 'ad',\r\n        // spawnChance: 1,\r\n        spawnChance: 0,\r\n        score: 90,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 100,\r\n        timeIncreaseMin: 3 * 1000,\r\n        timeIncreaseMax: 5 * 1000,\r\n        setFunc: (block) => { return ad(block); }\r\n    },\r\n    {\r\n        typeName: 'power',\r\n        spawnChance: 1,\r\n        score: 60,\r\n        iconTexture: 'power',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 50,\r\n        timeIncreaseMin: 1 * 1000,\r\n        timeIncreaseMax: 2 * 1000,\r\n        setFunc: (block) => { return power(block); }\r\n    },\r\n    {\r\n        typeName: 'loading',\r\n        spawnChance: 1,\r\n        score: 5,\r\n        iconTexture: '',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 0.5 * 1000,\r\n        timeIncreaseMax: 1 * 1000,\r\n        setFunc: (block) => { return loading(block); }\r\n    },\r\n    {\r\n        typeName: 'touch',\r\n        spawnChance: 1,\r\n        score: 10,\r\n        iconTexture: 'touch',\r\n        imgWidth: 100,\r\n        imgHeight: 100,\r\n        timeIncreaseChance: 30,\r\n        timeIncreaseMin: 2 * 1000,\r\n        timeIncreaseMax: 4 * 1000,\r\n        setFunc: (block) => { return touch(block); }\r\n    },\r\n];\r\nconst TBlockTypeList = BlockUniqueProperties.map(ele => { if (ele.typeName !== '')\r\n    return ele.typeName; });\r\nconst SpawnMaxChance = BlockUniqueProperties.map(ele => ele.spawnChance).reduce((prevValue, currValue) => {\r\n    return prevValue + currValue;\r\n}, 0);\r\nconst Set2TypeBlock = (block, typeName) => {\r\n    let filteredType = BlockUniqueProperties.find(ele => ele.typeName === typeName);\r\n    if (filteredType) {\r\n        SetBlockType2InitBasic(block);\r\n        block.setTypeName(typeName);\r\n        block.setTypeImg(filteredType.iconTexture);\r\n        block.setTypeImgDisplaySize(filteredType.imgWidth, filteredType.imgHeight);\r\n        block.addScore(filteredType.score);\r\n        block.setTimeIncrease({\r\n            chance: filteredType.timeIncreaseChance,\r\n            value: (0,math/* GetRndInt */.dZ)(filteredType.timeIncreaseMin, filteredType.timeIncreaseMax)\r\n        });\r\n        filteredType.setFunc(block);\r\n    }\r\n    else\r\n        console.log('Set2TypeBlock: typeName is not found in the block type list');\r\n};\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/popup.ts\n\r\n\r\n\r\nconst PopUp = {\r\n    isOpen: false,\r\n    bottomLayer: null,\r\n    contextLayer: null,\r\n    exitBtn: null,\r\n    sndList: [],\r\n    show: function (block) {\r\n        this.isOpen = true;\r\n        const bData = block.getBlockData();\r\n        if (bData) {\r\n            bData.isPopupOpen = true;\r\n            block.setBlockData(bData);\r\n            if (bData.popUpContext)\r\n                this.contextLayer = bData.popUpContext;\r\n        }\r\n        this.bottomLayer.setVisible(true);\r\n        this.contextLayer.setVisible(true);\r\n        this.exitBtn.setVisible(true);\r\n    },\r\n    hide: function (block) {\r\n        this.isOpen = false;\r\n        if (block) {\r\n            const bData = block.getBlockData();\r\n            bData.isPopupOpen = false;\r\n            block.setBlockData(bData);\r\n        }\r\n        this.bottomLayer.setVisible(false);\r\n        this.contextLayer.setVisible(false);\r\n        this.exitBtn.setVisible(false);\r\n    }\r\n};\r\nconst InitPopUp = () => {\r\n    PopUp.contextLayer.removeAll();\r\n    PopUp.hide();\r\n};\r\nconst CreatePopUp = (scene) => {\r\n    PopUp.bottomLayer = scene.add.graphics();\r\n    PopUp.bottomLayer.fillStyle(0x000000, 0.4);\r\n    PopUp.bottomLayer.fillRect(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    PopUp.bottomLayer.setInteractive(new Phaser.Geom.Rectangle(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h), Phaser.Geom.Rectangle.Contains);\r\n    PopUp.bottomLayer.on('pointerup', () => { console.log('touching popup bottom layer'); });\r\n    PopUp.contextLayer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    PopUp.exitBtn = scene.add.image(userSetting/* View.w */.G7.w - ContextLayerMargin, ContextLayerMargin, 'exitBtn');\r\n    PopUp.exitBtn.setInteractive();\r\n    PopUp.exitBtn.on('pointerup', () => {\r\n        PopUp.hide();\r\n    });\r\n    [PopUp.bottomLayer, PopUp.contextLayer, PopUp.exitBtn].map((ele) => {\r\n        ele.setVisible(false);\r\n        SetDepth(ele, 'popUp');\r\n    });\r\n};\r\n/* harmony default export */ const popup = ((/* unused pure expression or super */ null && (PopUp)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/storage/index.ts\n\r\nconst GameData = Object.assign({ best: 0 }, GameDataAudio);\r\n// export default TGameData;\r\n/* harmony default export */ const storage = (GameData);\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/score.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Score = {\r\n    txt: null,\r\n    txtBackground: null,\r\n    bTxt: null,\r\n    bTxtBackground: null,\r\n    txtNum: 0,\r\n    bTxtNum: 0,\r\n    setFormat: function (score) {\r\n        this.txtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.txt.setText(finalScore);\r\n        if (this.txtNum > this.bTxtNum)\r\n            this.setBFormat(score);\r\n        return this;\r\n    },\r\n    setBFormat: function (score) {\r\n        this.bTxtNum = score;\r\n        const finalScore = '' + (0,math/* SetNum2CurrencyFormat */.me)(score);\r\n        this.bTxt.setText(finalScore);\r\n        return this;\r\n    },\r\n    add: function (score) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        let finalScore = Number(this.txt.text) + score;\r\n        this.setFormat(finalScore);\r\n        return finalScore;\r\n    },\r\n    getScore: function () { return this.txtNum; },\r\n    getBScore: function () { return this.bTxtNum; },\r\n    compareNormalAndBest: function (score) {\r\n        const prevBest = GetLocalStorageItem(storage, 'best');\r\n        if (prevBest < score) {\r\n            this.setBFormat(score);\r\n            SetLocalStorageItem(storage, 'best', score);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    getBonusTimeScore: function () {\r\n        return Math.floor(ui_time.getTimeIncrease() / 100);\r\n    },\r\n    getFinalScore: function () {\r\n        return Math.floor(Score.getScore() + this.getBonusTimeScore());\r\n    },\r\n};\r\nconst InitScore = () => {\r\n    Score.txtNum = 0;\r\n    Score.bTxtNum = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(Score.bTxtNum);\r\n};\r\nconst TxtGap = 110;\r\nconst CreateScoreTxt = (scene) => {\r\n    Score.bTxt = scene.add.text(TxtMargin / 2, TxtMargin * 2, '');\r\n    Score.bTxtBackground = scene.add.text(Score.bTxt.x + TxtGap, Score.bTxt.y, 'Best');\r\n    Score.txt = scene.add.text(TxtMargin / 2, TxtMargin * 3, '');\r\n    Score.txtBackground = scene.add.text(Score.txt.x + TxtGap, Score.txt.y, 'Score');\r\n    [Score.bTxtBackground, Score.txtBackground].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(1, -0.1);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n        txt.setFontStyle('bold italic');\r\n        txt.setAlpha(0.3);\r\n    });\r\n    [Score.bTxt, Score.txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setOrigin(0, 0);\r\n        txt.setFontSize(TxtSize);\r\n        txt.setFontFamily(TxtFamily);\r\n    });\r\n    let bestScore = GetLocalStorageItem(storage, 'best');\r\n    Score.setFormat(0);\r\n    Score.setBFormat(bestScore);\r\n    [Score.bTxtBackground, Score.txtBackground, Score.bTxt, Score.txt].map((txt) => {\r\n        SetDepth(txt, 'txt');\r\n    });\r\n    InitScore();\r\n};\r\n/* harmony default export */ const ui_score = (Score);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/passiveLoading.ts\n\r\nconst PassiveLoading = {\r\n    scene: null,\r\n    isLoading: false,\r\n    option: {},\r\n};\r\nconst StartPassiveLoading = (scene, option) => {\r\n    PassiveLoading.isLoading = true;\r\n    // option\r\n    if (option)\r\n        PassiveLoading.option = Object.assign({}, option);\r\n    // chck is exist if not then add to scene\r\n    const passiveLoadingInstance = scene.scene.get('passiveLoading');\r\n    if (!passiveLoadingInstance)\r\n        scene.game.scene.add('passiveLoading', PassiveLoadingScene, false);\r\n    // launch loading scene\r\n    scene.scene.launch('passiveLoading');\r\n    PassiveLoading.scene = scene.scene.get('passiveLoading');\r\n};\r\nconst StopPassiveLoading = async () => {\r\n    if (!PassiveLoading.scene || !PassiveLoading.isLoading) {\r\n        console.warn('passive loading is not exist:', PassiveLoading.scene);\r\n        PassiveLoading.scene = null;\r\n        return;\r\n    }\r\n    if (PassiveLoading.option) {\r\n        PassiveLoading.option.finishEvt && PassiveLoading.option.finishEvt(PassiveLoading.scene);\r\n    }\r\n    PassiveLoading.isLoading = false;\r\n    await new Promise(res => res(PassiveLoading.scene.scene.stop('passiveLoading')));\r\n    PassiveLoading.scene.loadingEndSec = await new Promise(res => res(performance.now()));\r\n    await new Promise((res) => {\r\n        res(console.log(`%c Passive Loading Time: ${((PassiveLoading.scene.loadingEndSec - PassiveLoading.scene.loadingStartSec) / 1000).toFixed(4)} sec `, 'color: black; background: white; fonWeight: bold;'));\r\n    });\r\n};\r\nclass PassiveLoadingScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'passiveLoading',\r\n            active: false\r\n        });\r\n        this.loadingStartSec = 0;\r\n        this.loadingEndSec = 0;\r\n        this.pointFirst = 0;\r\n        this.pointSecond = 0;\r\n        this.gapFirst = 0.2;\r\n        this.gapSecond = 0.4;\r\n    }\r\n    init() {\r\n        this.loadingStartSec = performance.now();\r\n    }\r\n    create() {\r\n        this.loadingGraphics = this.add.graphics();\r\n    }\r\n    update(time, delta) {\r\n        this.updateRotateLogo(delta);\r\n    }\r\n    updateRotateLogo(delta) {\r\n        this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        this.pointSecond = (this.pointSecond + (delta * this.gapSecond)) % 360;\r\n        // console.log('this.pointFirst, this.pointSecond: ', this.pointFirst, this.pointSecond);\r\n        // this.pointFirst = (this.pointFirst + (delta * this.gapFirst)) % 360;\r\n        // this.pointSecond = (this.pointSecond + (delta * this.gapSecond));\r\n        // let showClockwise = this.pointFirst > this.pointSecond ? true : false;\r\n        // let startAngle = this.pointFirst > this.pointSecond ? this.pointFirst : this.pointSecond;\r\n        // let endAngle = this.pointFirst > this.pointSecond ? this.pointSecond : this.pointFirst;\r\n        this.loadingGraphics.clear();\r\n        //  Without this the arc will appear closed when stroked\r\n        this.loadingGraphics.lineStyle(10, 0xff00ff, 2);\r\n        this.loadingGraphics.beginPath();\r\n        this.loadingGraphics.arc(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 60, Phaser.Math.DegToRad(this.pointFirst), Phaser.Math.DegToRad(this.pointSecond), true);\r\n        this.loadingGraphics.strokePath();\r\n    }\r\n}\r\n/* harmony default export */ const passiveLoading = ((/* unused pure expression or super */ null && (PassiveLoading)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/startCnt.ts\n\r\n\r\n\r\nconst GameStartCnt = {\r\n    isStart: false,\r\n    cntTxt: null,\r\n    cntNum: 3,\r\n    getIsStart: function () { return this.isStart; },\r\n    setIsStart: function (isStart) { this.isStart = isStart; },\r\n    setTxt: function (value) {\r\n        GameStartCnt.cntTxt.setText(value.toString());\r\n    },\r\n    setVisible: function (visible) { GameStartCnt.cntTxt.setVisible(visible); },\r\n    setAlpha: function (alpha) { GameStartCnt.cntTxt.setAlpha(alpha); },\r\n    animFadeOut: function (scene) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 400,\r\n            onUpdate: (tw, data) => {\r\n                this.setAlpha(data.value);\r\n            },\r\n            onComplete: () => {\r\n                this.setAlpha(0);\r\n                this.setVisible(false);\r\n                this.setIsStart(true);\r\n            }\r\n        });\r\n    },\r\n    animCnt: function (scene) {\r\n        let cnt = 3;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: 1000, duration: 1000, repeat: 3, delay: 1000,\r\n            onStart: () => {\r\n                this.setVisible(true);\r\n                this.setTxt(3);\r\n                audio.playSfx('voice3');\r\n            },\r\n            onRepeat: () => {\r\n                cnt--;\r\n                if (cnt === 0) {\r\n                    audio.playSfx('voiceGo');\r\n                    this.setTxt('Go!');\r\n                    return;\r\n                }\r\n                this.setTxt(cnt);\r\n                audio.playSfx('voice' + cnt);\r\n            },\r\n            onComplete: () => {\r\n                this.animFadeOut(scene);\r\n            },\r\n        });\r\n    }\r\n};\r\nconst InitGameStartCnt = () => {\r\n    GameStartCnt.setVisible(false);\r\n    GameStartCnt.setAlpha(1);\r\n    GameStartCnt.setIsStart(false);\r\n    GameStartCnt.cntNum = 3;\r\n    GameStartCnt.setTxt(GameStartCnt.cntNum);\r\n};\r\nconst CreateGameStartCnt = (scene) => {\r\n    GameStartCnt.cntTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '3');\r\n    SetFont2CommonContextStyle(GameStartCnt.cntTxt);\r\n    GameStartCnt.cntTxt.setFontSize(TxtTitleHeadSize);\r\n    InitGameStartCnt();\r\n    GameStartCnt.animCnt(scene);\r\n    // scene.events.on(\"start\", () => {\r\n    //     console.log('start scene evt');\r\n    //     GameStartCnt.animCnt(scene);\r\n    // });\r\n};\r\n/* harmony default export */ const startCnt = (GameStartCnt);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/efx/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Efx = {\r\n    bgParticleList: [],\r\n    // timeIncrease: <Phaser.GameObjects.Text[]> [],   // when block cleared, increase time by block's own chance\r\n    // score: <Phaser.GameObjects.Text[]> [],          // when block cleared, increase score\r\n    list: [],\r\n    setConfig: function (particle, config) {\r\n        const finalConfig = Object.assign({ x: 0, y: 0, active: false }, config);\r\n        let emitter;\r\n        const nestedEmitterIdx = this.list.findIndex(emitter => emitter.name === config.name);\r\n        if (nestedEmitterIdx >= 0)\r\n            this.list[nestedEmitterIdx] = particle.createEmitter(finalConfig);\r\n        else {\r\n            emitter = particle.createEmitter(finalConfig);\r\n            this.list.push(emitter);\r\n        }\r\n        return emitter;\r\n    },\r\n    getEmitter: function (name) {\r\n        const targetEmitter = this.list.find(emitter => emitter.name === name);\r\n        if (!targetEmitter) {\r\n            console.warn(`emitter ${name} is not in the particle list`);\r\n            return;\r\n        }\r\n        return targetEmitter;\r\n    },\r\n    activeEmitter(x, y, name) {\r\n        const targetEmitter = this.getEmitter(name);\r\n        if (!targetEmitter)\r\n            return false;\r\n        targetEmitter.active = true;\r\n        targetEmitter.setPosition(x, y);\r\n        return targetEmitter;\r\n    },\r\n    animEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.explode();\r\n        return instanceExplode;\r\n    },\r\n    startEmitter: function (x, y, name) {\r\n        const targetEmitter = this.activeEmitter(x, y, name);\r\n        if (!targetEmitter)\r\n            return;\r\n        const instanceExplode = targetEmitter.start();\r\n        return instanceExplode;\r\n    },\r\n    animScale: function (scene, target) {\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 1.2, duration: 300, yoyo: true,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setScale(data.value);\r\n            },\r\n        });\r\n    },\r\n    animPos: function (scene, target, amount) {\r\n        const targetInitY = target.y;\r\n        scene.tweens.addCounter({\r\n            from: targetInitY, to: targetInitY + amount, duration: 2400,\r\n            onUpdate: (tw, data) => {\r\n                target && target.setPosition(target.x, data.value);\r\n            },\r\n        });\r\n    },\r\n    animTimeIncrease: function (block, chance, value) {\r\n        const { scene } = block;\r\n        const chancePosY = block.y - 100;\r\n        const timeSec = SetmillieSec2SecTimeFormat(value);\r\n        const timeIncreaseOnUiRndPosX = ui_time.txt.x + (ui_time.txt.width * 1.5) - 5 + (0,math/* GetRndNum */.hg)(-3, 3);\r\n        const timeIncreaseOnUiRndPosY = ui_time.txt.y + ui_time.txt.height / 2 + (0,math/* GetRndNum */.hg)(-10, 10);\r\n        const timeIncreaseOnUi = scene.add.text(timeIncreaseOnUiRndPosX, timeIncreaseOnUiRndPosY, '+' + timeSec).setVisible(false);\r\n        const timeIncreaseTxt = scene.add.text(block.x, chancePosY, 'Time Critical!').setVisible(false);\r\n        const timeIncreaseChance = scene.add.text(timeIncreaseTxt.x, timeIncreaseTxt.y + 25, chance.toString() + '%').setVisible(false);\r\n        const timeIncreaseOnBlock = scene.add.text(timeIncreaseChance.x, timeIncreaseChance.y + 25, timeSec).setVisible(false);\r\n        [timeIncreaseOnUi, timeIncreaseTxt, timeIncreaseChance, timeIncreaseOnBlock].map((txt) => {\r\n            SetFont2CommonContextStyle(txt);\r\n            SetDepth(txt, 'txt');\r\n            txt.setVisible(true);\r\n            this.animScale(scene, timeIncreaseOnUi);\r\n        });\r\n        const twList = [];\r\n        twList.push({\r\n            from: timeIncreaseOnUiRndPosX, to: timeIncreaseOnUiRndPosX + 10, duration: 2400,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            onUpdate: (tw, twData) => { timeIncreaseOnUi.x = twData.value; },\r\n            onComplete: () => { timeIncreaseOnUi.destroy(); }\r\n        });\r\n        twList.push({\r\n            from: 1, to: 0, duration: 2400,\r\n            onUpdate: (tw, twData) => {\r\n                timeIncreaseTxt.setAlpha(twData.value);\r\n                timeIncreaseChance.setAlpha(twData.value);\r\n                timeIncreaseOnBlock.setAlpha(twData.value);\r\n            },\r\n            onComplete: () => {\r\n                timeIncreaseTxt.destroy();\r\n                timeIncreaseChance.destroy();\r\n                timeIncreaseOnBlock.destroy();\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n        this.animPos(scene, timeIncreaseTxt, -30);\r\n        this.animPos(scene, timeIncreaseChance, -30);\r\n        this.animPos(scene, timeIncreaseOnBlock, -30);\r\n        return this;\r\n    },\r\n    animScore: function (block, score) {\r\n        const { scene } = block;\r\n        const scoreTxt = scene.add.text(block.x, block.y, Math.floor(score).toString()).setVisible(false);\r\n        SetFont2CommonContextStyle(scoreTxt);\r\n        SetDepth(scoreTxt, 'txt');\r\n        scoreTxt.setFontSize(TxtTitleSize);\r\n        // score particle emit\r\n        const scoreSfxList = ['scoreBlue', 'scoreGreen', 'scoreBrown'];\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, scoreSfxList.length);\r\n        Efx.animEmitter(block.x, block.y, scoreSfxList[rndIdx]);\r\n        // alpha tw\r\n        scene.tweens.addCounter({\r\n            from: 1, to: 0, duration: 2400,\r\n            onStart: () => {\r\n                scoreTxt.setVisible(true);\r\n                audio.playSfx('scoreSfx');\r\n            },\r\n            onUpdate: (tw, data) => { scoreTxt.setAlpha(data.value); },\r\n            onComplete: () => { scoreTxt.destroy(); }\r\n        });\r\n        this.animScale(scene, scoreTxt);\r\n        this.animPos(scene, scoreTxt, -30);\r\n    },\r\n    animNewBest: function () {\r\n        audio.playSfx('voiceHighScore');\r\n        this.bgParticleList.map(key => this.startEmitter(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, key));\r\n        this.startEmitter(0, 0, 'newBestScore');\r\n    },\r\n    stopAll: function () {\r\n        this.list.map(emitter => emitter.stop());\r\n    },\r\n};\r\nconst CreateEfx = (scene) => {\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const commonTouchConfig = {\r\n        lifespan: { min: 10, max: 350 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 200,\r\n        quantity: 64,\r\n        scale: { start: 0.3, end: 0.05 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBlue', frame: 'blue' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchGreen', frame: 'green' }, commonTouchConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'touchBrown', frame: 'yellow' }, commonTouchConfig));\r\n    const commonScoreConfig = {\r\n        lifespan: { min: 100, max: 500 },\r\n        angle: { start: 0, end: 360, steps: 64 },\r\n        speed: 350,\r\n        quantity: 64,\r\n        scale: { start: 0.2, end: 0.1 },\r\n        blendMode: 'ADD',\r\n    };\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBlue', frame: 'blue' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreGreen', frame: 'green' }, commonScoreConfig));\r\n    Efx.setConfig(blockParticle, Object.assign({ name: 'scoreBrown', frame: 'yellow' }, commonScoreConfig));\r\n    // touch input\r\n    const touchSfxList = ['touchBlue', 'touchGreen', 'touchBrown'];\r\n    scene.input.off('pointerdown');\r\n    scene.input.on('pointerdown', (ptr) => {\r\n        audio.playSfx('touchSfx');\r\n        const rndIdx = (0,math/* GetRndInt */.dZ)(0, touchSfxList.length);\r\n        const emitter = Efx.animEmitter(ptr.x, ptr.y, touchSfxList[rndIdx]);\r\n        // const scoreSfxList = [ 'scoreBlue', 'scoreGreen', 'scoreBrown' ];\r\n        // const rndIdx = GetRndInt(0, scoreSfxList.length);\r\n        // const scoreInstance = Efx.animEmitter(ptr.x, ptr.y, scoreSfxList[rndIdx]);\r\n        // Efx.animEmitter(ptr.x, ptr.y, 'score');\r\n        // console.log('rndIdx: ', rndIdx, touchSfxList[rndIdx]);\r\n        // console.log('emitter: ', emitter);\r\n    });\r\n    SetDepth(blockParticle, 'particle');\r\n    return Efx;\r\n};\r\nconst CreateGameOverEfx = (scene, img) => {\r\n    Efx.bgParticleList = [\r\n        'diamond2', 'diamond3', 'diamond4',\r\n        'ruby1', 'ruby2', 'ruby3', 'ruby4',\r\n        'key1', 'key2', 'key3', 'key4',\r\n    ];\r\n    Efx.bgParticleList.map((particleName) => {\r\n        const particle = scene.add.particles(particleName);\r\n        const duration = 2000;\r\n        Efx.setConfig(particle, {\r\n            name: particleName,\r\n            angle: { min: 100, max: 440 },\r\n            speed: 350,\r\n            gravityY: -200,\r\n            lifespan: duration,\r\n            quantity: 1,\r\n            frequency: 60,\r\n            scale: { min: 0.1, max: 1 },\r\n            rotate: { onEmit: () => (0,math/* GetRndNum */.hg)(0, 360) }\r\n        });\r\n        SetDepth(particle, 'particle');\r\n    });\r\n    const blockParticle = scene.add.particles('particleSprite');\r\n    const width = img.width * gameover.newBestScoreBgScaleW;\r\n    const height = img.height * gameover.newBestScoreBgScaleH;\r\n    const gameOverEmitZone = new Phaser.Geom.Rectangle(img.x - width / 2, img.y - height / 2, width, height);\r\n    Efx.setConfig(blockParticle, {\r\n        name: 'newBestScore',\r\n        frame: 'blue',\r\n        lifespan: 1000,\r\n        gravityY: 10,\r\n        scale: { start: 0, end: 0.25, ease: 'Quad.easeOut' },\r\n        alpha: { start: 1, end: 0, ease: 'Quad.easeIn' },\r\n        blendMode: 'ADD',\r\n        emitZone: { type: 'random', source: gameOverEmitZone },\r\n    });\r\n    SetDepth(blockParticle, 'highest');\r\n    return Efx;\r\n};\r\n/* harmony default export */ const efx = (Efx);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/warning.ts\n\r\n\r\n\r\n\r\nconst GameWarning = {\r\n    hasOnceShow: true,\r\n    hasOnceHide: true,\r\n    time: 6 * 1000,\r\n    sign: null,\r\n    progressBar: null,\r\n    progressBarLine: null,\r\n    progressAmount: 0,\r\n    shakeValue: 1,\r\n    updateShakeValue: (remainedOverCnt) => {\r\n        GameWarning.shakeValue = (GameWarning.time - remainedOverCnt) / 1000;\r\n    },\r\n    show: () => {\r\n        GameWarning.progressAmount = 0;\r\n        GameWarning.sign.setVisible(true);\r\n        GameWarning.progressBar.setVisible(true);\r\n        GameWarning.progressBarLine.setVisible(true);\r\n        GameWarning.draw();\r\n        return GameWarning;\r\n    },\r\n    hide: () => {\r\n        GameWarning.sign.setVisible(false);\r\n        GameWarning.progressBar.setVisible(false);\r\n        GameWarning.progressBarLine.setVisible(false);\r\n        GameWarning.clear();\r\n        audio.stopSfx('warningSfx');\r\n    },\r\n    arcDegree: () => {\r\n        const startAngle = 270 + (GameWarning.progressAmount) * (-180); // 270 ~ 90\r\n        const endAngle = -90 + (GameWarning.progressAmount) * 180; // -90 ~ 90\r\n        return { startAngle: startAngle, endAngle: endAngle };\r\n    },\r\n    draw: () => {\r\n        GameWarning.clear();\r\n        const r = GameWarning.sign.width * 4 / 5;\r\n        GameWarning.progressBarLine.lineStyle(6, 0xfbff00, 1);\r\n        GameWarning.progressBarLine.strokeCircle(0, 0, r);\r\n        GameWarning.progressBar.fillStyle(0xfbff00, 0.4);\r\n        GameWarning.progressBar.beginPath();\r\n        GameWarning.progressBar.arc(0, 0, r, Phaser.Math.DegToRad(GameWarning.arcDegree().startAngle), Phaser.Math.DegToRad(GameWarning.arcDegree().endAngle), true, 0.01);\r\n        GameWarning.progressBar.fillPath();\r\n        GameWarning.progressBar.closePath();\r\n        return GameWarning;\r\n    },\r\n    clear: () => {\r\n        GameWarning.progressBar.clear();\r\n        GameWarning.progressBarLine.clear();\r\n    },\r\n    update: (scene) => {\r\n        const remainedOverCnt = system.overCntMax - system.overCnt;\r\n        // hide warning\r\n        if (system.getIsGameOver())\r\n            GameWarning.hasOnceHide = true;\r\n        if (system.getIsGameOver() || remainedOverCnt > GameWarning.time) {\r\n            if (GameWarning.hasOnceHide) {\r\n                GameWarning.hasOnceHide = false;\r\n                GameWarning.hasOnceShow = true;\r\n                GameWarning.hide();\r\n            }\r\n            return;\r\n        }\r\n        // show warning\r\n        if (GameWarning.hasOnceShow) {\r\n            GameWarning.hasOnceShow = false;\r\n            GameWarning.hasOnceHide = true;\r\n            GameWarning.show();\r\n            scene.tweens.addCounter({\r\n                from: 1, to: 0, duration: 500, yoyo: true, repeat: -1,\r\n                onStart: () => { audio.playSfx('warningSfx'); },\r\n                onRepeat: () => { audio.playSfx('warningSfx'); },\r\n                onUpdate: (tw, twData) => {\r\n                    if (GameWarning.hasOnceShow) {\r\n                        GameWarning.sign.setAlpha(1);\r\n                        tw.remove();\r\n                        return;\r\n                    }\r\n                    GameWarning.sign.setAlpha(twData.value);\r\n                }\r\n            });\r\n        }\r\n        GameWarning.progressAmount = (GameWarning.time - remainedOverCnt) / GameWarning.time;\r\n        GameWarning.draw();\r\n        GameWarning.updateShakeValue(remainedOverCnt);\r\n        scene.cameras.main.shake(160, 0.001 * GameWarning.shakeValue, false);\r\n    },\r\n};\r\nconst InitGameWarning = () => {\r\n    GameWarning.hide();\r\n    GameWarning.hasOnceShow = true;\r\n    GameWarning.progressAmount = 0;\r\n    return GameWarning;\r\n};\r\nconst CreateGameWarning = (scene) => {\r\n    GameWarning.sign = scene.add.image(0, 0, 'warningSign');\r\n    GameWarning.sign.setPosition(userSetting/* View.centerX */.G7.centerX, GameWarning.sign.height);\r\n    GameWarning.progressBar = scene.add.graphics();\r\n    GameWarning.progressBar.setAlpha(0.9);\r\n    GameWarning.progressBarLine = scene.add.graphics();\r\n    const barX = GameWarning.sign.x;\r\n    const barY = GameWarning.sign.y;\r\n    GameWarning.progressBar.setPosition(barX, barY);\r\n    GameWarning.progressBarLine.setPosition(barX, barY);\r\n    [GameWarning.progressBar, GameWarning.progressBarLine, GameWarning.sign].map(ele => SetDepth(ele, 'warning'));\r\n    InitGameWarning();\r\n    return GameWarning;\r\n};\r\n/* harmony default export */ const warning = (GameWarning);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/index.ts\nconst UIProps = {\r\n    margin: 30,\r\n    alpha: 0.8,\r\n    scale: 0.6,\r\n    downGap: 4, // down gap for anim\r\n};\r\nconst SetUIProps = (props, value) => {\r\n    if (!UIProps[props])\r\n        console.warn(`ui props: ${props} is not exist`);\r\n    UIProps[props] = value;\r\n    return UIProps;\r\n};\r\nconst CreateUIBtnAnim = (scene, btn) => {\r\n    const toggleBtn = btn;\r\n    if (!toggleBtn)\r\n        return;\r\n    const Down = () => {\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.downPosY, duration: 80,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    Up();\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    const Up = () => {\r\n        scene.tweens.addCounter({\r\n            from: toggleBtn.y, to: toggleBtn.upPosY, duration: 80,\r\n            onStart: () => {\r\n                toggleBtn.isChanging = true;\r\n            },\r\n            onUpdate: (tw, twData) => {\r\n                if (!toggleBtn.isChanging) {\r\n                    toggleBtn.y = toggleBtn.upPosY;\r\n                    tw.remove();\r\n                    return;\r\n                }\r\n                toggleBtn.y = twData.value;\r\n            },\r\n            onComplete: () => {\r\n                toggleBtn.isChanging = false;\r\n            },\r\n        });\r\n    };\r\n    toggleBtn.upPosY = btn.y;\r\n    toggleBtn.downPosY = btn.y + UIProps.downGap;\r\n    toggleBtn.setInteractive();\r\n    toggleBtn.on('pointerdown', () => { Down(); });\r\n    toggleBtn.on('pointerup', () => { Up(); });\r\n    toggleBtn.on('pointerout', () => { Up(); });\r\n    return UIProps;\r\n};\r\n/* harmony default export */ const ui = (UIProps);\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/fullScreen/index.ts\n\r\n\r\nconst GameFullScreen = {\r\n    isFullScreen: false,\r\n    btn: null,\r\n};\r\nconst GetFullScreenAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        { key: 'fullScreenLarger', url: CommonUI + 'fullScreenLarger.png', type: 'image' },\r\n        { key: 'fullScreenSmaller', url: CommonUI + 'fullScreenSmaller.png', type: 'image' },\r\n        { key: 'touchSfx', url: CommonSfx + 'touchSfx.mp3', type: 'audio' },\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitFullScreen = () => {\r\n};\r\nconst CreateFullScreen = (scene, data) => {\r\n    var _a, _b;\r\n    const { margin, alpha, scale } = ui;\r\n    const x = (_a = data === null || data === void 0 ? void 0 : data.x) !== null && _a !== void 0 ? _a : margin;\r\n    const y = (_b = data === null || data === void 0 ? void 0 : data.y) !== null && _b !== void 0 ? _b : margin;\r\n    // add screen size controller\r\n    GameFullScreen.btn = scene.add.image(x, y, GameFullScreen.isFullScreen ? 'fullScreenSmaller' : 'fullScreenLarger');\r\n    CreateUIBtnAnim(scene, GameFullScreen.btn);\r\n    GameFullScreen.btn.setScale(scale).setAlpha(alpha);\r\n    const sizeControllerExitEvt = () => {\r\n        GameFullScreen.isFullScreen = false;\r\n        scene.scale.stopFullscreen();\r\n        GameFullScreen.btn.setTexture('fullScreenLarger');\r\n    };\r\n    const sizeControllerToggleEvt = () => {\r\n        GameFullScreen.isFullScreen = !GameFullScreen.isFullScreen;\r\n        if (GameFullScreen.isFullScreen) {\r\n            scene.scale.startFullscreen();\r\n            GameFullScreen.btn.setTexture('fullScreenSmaller');\r\n        }\r\n        else\r\n            sizeControllerExitEvt();\r\n    };\r\n    GameFullScreen.btn.on('pointerup', () => {\r\n        sizeControllerToggleEvt();\r\n    });\r\n    // resize event for stop full screen\r\n    scene.scale.off('resize');\r\n    scene.scale.on('resize', () => {\r\n        if (GameFullScreen.btn.isChanging)\r\n            return;\r\n        if (!GameFullScreen.isFullScreen)\r\n            return;\r\n        sizeControllerExitEvt();\r\n    });\r\n    InitFullScreen();\r\n    return GameFullScreen;\r\n};\r\n/* harmony default export */ const fullScreen = (GameFullScreen);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/game.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst StartGame = (scene) => {\r\n    scene.scene.remove('game');\r\n    scene.scene.add('game', GameScene);\r\n    scene.scene.launch('game');\r\n};\r\nconst RestartGame = (scene) => {\r\n    efx.stopAll();\r\n    scene.scene.restart();\r\n};\r\nconst StopGame = (scene) => {\r\n    if (scene.scene.get('game')) {\r\n        scene.scene.setActive(false, 'game');\r\n        scene.scene.setVisible(false, 'game');\r\n        efx.stopAll();\r\n        audio.stopBgm('gameBgm');\r\n        setTimeout(() => {\r\n            if (!scene.scene.get('game'))\r\n                return;\r\n            scene.scene.remove('game');\r\n        }, 1000);\r\n    }\r\n};\r\nclass GameScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'game',\r\n            active: false\r\n        });\r\n        this.themeIdx = 0;\r\n        this.wallGap = userSetting/* View.calcRatio */.G7.calcRatio(90);\r\n        this.wallBottomGap = userSetting/* View.calcRatio */.G7.calcRatio(60);\r\n        this.matterStepForce = 0.08; // apply delta to matter force method\r\n    }\r\n    create() {\r\n        this.createWall();\r\n        this.createBgScene();\r\n        // block system\r\n        InitBlockSystem();\r\n        // input\r\n        CreateInput(this);\r\n        // audio\r\n        CreateGameAudio(this, storage);\r\n        audio.playBgm('gameBgm');\r\n        // ui\r\n        CreateGameStartCnt(this);\r\n        CreateScoreTxt(this);\r\n        CreateGameTimeTxt(this);\r\n        CreatePopUp(this);\r\n        CreateGameWarning(this);\r\n        CreateGameOver(this, this.themeIdx);\r\n        CreateEfx(this);\r\n        CreateGameOverEfx(this, gameover.newBestScoreBg);\r\n        CreateFullScreen(this);\r\n        SetDepth(fullScreen.btn, 'fullScreen');\r\n        CreateSetting(this);\r\n        // stop passive loading\r\n        StopPassiveLoading();\r\n        // // debugging\r\n        // const inspectorWidth = 255;\r\n        // PGUInspector(this, { right: window.innerWidth - inspectorWidth, top: 48 });\r\n    }\r\n    update(time, delta) {\r\n        if (!startCnt.getIsStart())\r\n            return;\r\n        ui_time.update(this, delta);\r\n        warning.update(this);\r\n        UpdateInput(delta);\r\n        UpdateAllBlocks(this, time, delta);\r\n        this.updateMatterStep(delta);\r\n    }\r\n    createWall() {\r\n        // set matter walls\r\n        const wallThickness = this.wallGap * 5;\r\n        this.matter.world.setBounds(this.wallGap, 0, userSetting/* View.w */.G7.w - (this.wallGap * 2), userSetting/* View.h */.G7.h - this.wallGap, wallThickness, true, true, false, true);\r\n        // create block spawn support wall\r\n        const supportLeft = this.matter.add.rectangle(0, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const supportRight = this.matter.add.rectangle(userSetting/* View.w */.G7.w, -userSetting/* View.h */.G7.h / 2, this.wallGap, userSetting/* View.h */.G7.h, { isStatic: true });\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        const btnList = ['btnGreen', 'btnBrown', 'btnBlue'];\r\n        this.themeIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        const leftWall = this.add.tileSprite(0, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const rightWall = this.add.tileSprite(userSetting/* View.w */.G7.w - this.wallGap, 0, this.wallGap, userSetting/* View.h */.G7.h, bgTextureList[this.themeIdx]).setOrigin(0);\r\n        const bottomWall = this.add.image(0, userSetting/* View.h */.G7.h - this.wallGap, btnList[this.themeIdx]).setOrigin(0).setDisplaySize(userSetting/* View.w */.G7.w, this.wallGap);\r\n        [leftWall, rightWall, bottomWall].map(wall => SetDepth(wall, 'wall'));\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                leftWall.tilePositionY += 1;\r\n                rightWall.tilePositionY -= 1;\r\n            }\r\n        });\r\n    }\r\n    createBgScene() {\r\n        const bgColor = (0,math/* GetRndColor */.k8)();\r\n        // select bg color\r\n        this.cameras.main.setBackgroundColor(bgColor);\r\n        // select cloud shape\r\n        this.cloudGroup = this.add.group({\r\n            defaultKey: 'cloud',\r\n            maxSize: 15\r\n        });\r\n        this.spawnCloud();\r\n        // select tree shape\r\n        this.treeGroup = this.add.group({\r\n            defaultKey: 'tree',\r\n            maxSize: 15\r\n        });\r\n        this.spawnTree();\r\n        // select mist\r\n        const bgMistIdx = (0,math/* GetRndInt */.dZ)(1, 4);\r\n        const bgMist = this.add.tileSprite(this.wallGap, userSetting/* View.h */.G7.h - this.wallGap, userSetting/* View.w */.G7.w - (this.wallGap * 2), this.wallGap, 'mist' + bgMistIdx);\r\n        bgMist.setOrigin(0, 1);\r\n        bgMist.setAlpha(0.4);\r\n        SetDepth(bgMist, 'mist');\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 5000, repeat: -1,\r\n            onUpdate: () => {\r\n                bgMist.tilePositionX += 0.5;\r\n            }\r\n        });\r\n    }\r\n    spawnCloud() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.cloudGroup.children.iterate((cloud) => {\r\n                    // chck deatline\r\n                    if (cloud.x > userSetting/* View.w */.G7.w)\r\n                        this.cloudGroup.killAndHide(cloud);\r\n                    // move clouds\r\n                    cloud.x += cloud.moveGapX;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const cloud = this.cloudGroup.get();\r\n                if (!cloud)\r\n                    return;\r\n                cloud.setTexture('cloud' + (0,math/* GetRndInt */.dZ)(1, 10));\r\n                cloud.setPosition(-cloud.width, (0,math/* GetRndInt */.dZ)(userSetting/* View.centerY */.G7.centerY, userSetting/* View.centerY */.G7.centerY - userSetting/* View.centerY */.G7.centerY / 2));\r\n                cloud.setOrigin(0, 0.5);\r\n                cloud.setActive(true);\r\n                cloud.setAlpha(0.4);\r\n                cloud.moveGapX = (0,math/* GetRndNum */.hg)(0.2, 3);\r\n                SetDepth(cloud, 'cloud');\r\n                cloud.setVisible(true);\r\n                this.spawnCloud();\r\n            }\r\n        });\r\n    }\r\n    spawnTree() {\r\n        const duration = (0,math/* GetRndInt */.dZ)(1200, 3000);\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: duration,\r\n            onUpdate: () => {\r\n                this.treeGroup.children.iterate((tree) => {\r\n                    // chck deatline\r\n                    if (tree.x < -tree.width)\r\n                        this.treeGroup.killAndHide(tree);\r\n                    // move clouds\r\n                    tree.x -= 0.5;\r\n                });\r\n            },\r\n            onComplete: () => {\r\n                if (!this)\r\n                    return;\r\n                const tree = this.treeGroup.get();\r\n                if (!tree)\r\n                    return;\r\n                tree.setTexture('tree' + (0,math/* GetRndInt */.dZ)(1, 36));\r\n                tree.setPosition(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h - this.wallGap);\r\n                tree.setOrigin(0, 1);\r\n                tree.setActive(true);\r\n                tree.setAlpha(0.2);\r\n                SetDepth(tree, 'tree');\r\n                tree.setVisible(true);\r\n                this.spawnTree();\r\n            }\r\n        });\r\n    }\r\n    updateMatterStep(delta) { this.matter.world.step(delta); }\r\n}\r\n/* harmony default export */ const game = (GameScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/gameover.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameOver = {\r\n    overTxt: null,\r\n    layer: null,\r\n    newBestScoreBgScaleW: 2.4,\r\n    newBestScoreBgScaleH: 3.2,\r\n    newBestScoreBg: null,\r\n    newBestScoreTxt: null,\r\n    newBestScoreNum: null,\r\n    data: {\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    },\r\n    animCommonOver: function (scene, sndKey, txt) {\r\n        system.setIsGameOver(true);\r\n        audio.playSfx(sndKey);\r\n        const overSnd = scene.sound.get(sndKey);\r\n        const overSndTiming = overSnd.duration / 2 * 1000 - 100;\r\n        scene.tweens.addCounter({\r\n            from: 0, to: overSndTiming, duration: overSndTiming,\r\n            onStart: () => {\r\n                this.overTxt.setVisible(true);\r\n                this.overTxt.setText(txt + '\\n');\r\n            },\r\n            onComplete: () => {\r\n                this.overTxt.setText(txt + '\\nOver');\r\n                setTimeout(() => {\r\n                    this.animShow(scene, {\r\n                        title: txt + ' Over',\r\n                        bonusTime: ui_score.getBonusTimeScore(),\r\n                        score: ui_score.getScore(),\r\n                        finalScore: ui_score.getFinalScore()\r\n                    });\r\n                }, 1000);\r\n            }\r\n        });\r\n    },\r\n    animTimeOver: function (scene) { this.animCommonOver(scene, 'voiceTimeOver', 'Time'); },\r\n    animGameOver: function (scene) { this.animCommonOver(scene, 'voiceGameOver', 'Game'); },\r\n    animShow: function (scene, data) {\r\n        // set default data for performance\r\n        this.show({\r\n            title: data.title,\r\n            bonusTime: 0,\r\n            score: 0,\r\n            finalScore: 0\r\n        });\r\n        // anim to bonus time & score\r\n        const prevBestScore = GetLocalStorageItem(storage, 'best');\r\n        const { score, bonusTime, finalScore } = data;\r\n        ui_score.compareNormalAndBest(finalScore); // test\r\n        const twList = [];\r\n        const sfxCommonTwConfig = {\r\n            // updating score sfx\r\n            from: 0, to: score, duration: 100, repeat: 9,\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n            onRepeat: () => { audio.playSfx('voiceScore'); }\r\n        };\r\n        const scaleCommonTwConfig = {\r\n            from: 1, to: 1.3, duration: 500, yoyo: true, ease: 'Back.easeInOut',\r\n            onStart: () => { scene.tweens.addCounter(twList.shift()); },\r\n        };\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score\r\n            from: 0, to: score, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update bonus time\r\n            from: 0, to: bonusTime, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.timeTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                setTimeout(() => { scene.tweens.addCounter(twList.shift()); }, 200);\r\n            }\r\n        });\r\n        twList.push(sfxCommonTwConfig, Object.assign(Object.assign({}, scaleCommonTwConfig), { onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setScale(twData.value);\r\n            } }));\r\n        twList.push({\r\n            // update score via bonus time (final score)\r\n            from: score, to: finalScore, duration: 1000,\r\n            onUpdate: (tw, twData) => {\r\n                this.layer.scoreTxt.setText(twData.value.toFixed(0));\r\n            },\r\n            onComplete: () => {\r\n                // show new best score performance if score is better than prev best one\r\n                if (finalScore > prevBestScore)\r\n                    this.newBestScoreTxt.show(finalScore);\r\n            }\r\n        });\r\n        scene.tweens.addCounter(twList.shift());\r\n    },\r\n    show: function (data) {\r\n        data && this.setTxtData(data);\r\n        this.layer.setVisible(true);\r\n        return this;\r\n    },\r\n    hide: function () {\r\n        this.layer.setVisible(false);\r\n        this.newBestScoreTxt.hide();\r\n        return this;\r\n    },\r\n    setTxtData: function (data) {\r\n        this.data = data;\r\n        const { title, bonusTime, score, finalScore } = this.data;\r\n        this.layer.titleTxt.setText(title);\r\n        this.layer.timeTxt.setText(bonusTime);\r\n        this.layer.scoreTxt.setText(score);\r\n    },\r\n};\r\nconst InitGameOver = () => {\r\n    GameOver.setTxtData({\r\n        title: 'Time Over',\r\n        bonusTime: 0,\r\n        score: 0,\r\n        finalScore: 0\r\n    });\r\n    GameOver.hide();\r\n    GameOver.overTxt.setVisible(false);\r\n};\r\nconst ContextTxtGapH = userSetting/* View.h */.G7.h / 18;\r\nconst BtnGapW = userSetting/* View.w */.G7.w / 8;\r\nconst CreateGameOver = (scene, themeIdx) => {\r\n    const themeColorList = ['Green', 'Brown', 'Blue'];\r\n    const color = themeColorList[themeIdx];\r\n    GameOver.overTxt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '').setVisible(false);\r\n    GameOver.layer = scene.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n    const bg = scene.add.image(0, 0, 'blackScreen');\r\n    bg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    bg.setInteractive();\r\n    bg.setAlpha(0.4);\r\n    const context = scene.add.image(0, 0, 'panel' + color);\r\n    context.setDisplaySize(userSetting/* View.w */.G7.w - ContextMarginW, userSetting/* View.h */.G7.h - ContextMarginH);\r\n    const titleBg = scene.add.image(0, -userSetting/* View.h */.G7.h / 4, 'btn' + color).setScale(1.8);\r\n    const title = scene.add.text(titleBg.x, titleBg.y, 'Game Over');\r\n    GameOver.layer.titleTxt = title;\r\n    const bonusTime = scene.add.text(0, -ContextTxtGapH, 'Bonus Time');\r\n    const bonusTimeTxt = scene.add.text(0, bonusTime.y + ContextTxtGapH, '0');\r\n    GameOver.layer.timeTxt = bonusTimeTxt;\r\n    const score = scene.add.text(0, ContextTxtGapH, 'Score');\r\n    const scoreTxt = scene.add.text(0, score.y + ContextTxtGapH, 'Score');\r\n    GameOver.layer.scoreTxt = scoreTxt;\r\n    [GameOver.overTxt, title, bonusTime, bonusTimeTxt, score, scoreTxt].map((ele) => {\r\n        SetFont2CommonContextStyle(ele);\r\n    });\r\n    GameOver.overTxt.setFontSize(TxtOverHeadSize);\r\n    title.setFontSize(TxtTitleHeadSize);\r\n    const titleBtn = scene.add.image(-BtnGapW, userSetting/* View.h */.G7.h / 4, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const titleBtnImg = scene.add.image(titleBtn.x, titleBtn.y - 4, 'overBack').setInteractive();\r\n    const titleFuncDown = () => {\r\n        titleBtn.setTexture('overBtnDown' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y + 4);\r\n    };\r\n    const titleFuncUp = () => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        StopGame(scene);\r\n        StartTitle(scene);\r\n    };\r\n    const titleFuncOut = (ptr) => {\r\n        titleBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            titleBtnImg.setPosition(titleBtnImg.x, titleBtnImg.y - 4);\r\n    };\r\n    titleBtn.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtnImg.on('pointerdown', () => { titleFuncDown(); });\r\n    titleBtn.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtnImg.on('pointerup', () => { titleFuncUp(); });\r\n    titleBtn.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    titleBtnImg.on('pointerout', (ptr) => { titleFuncOut(ptr); });\r\n    const retryBtn = scene.add.image(BtnGapW, titleBtn.y, 'overBtnUp' + color).setInteractive().setScale(2);\r\n    const retryBtnImg = scene.add.image(retryBtn.x, retryBtn.y - 4, 'overRetry').setInteractive();\r\n    const retryFuncDown = () => {\r\n        retryBtn.setTexture('overBtnDown' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y + 4);\r\n    };\r\n    const retryFuncUp = () => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n        audio.playSfx('gearAnim');\r\n        RestartGame(scene);\r\n    };\r\n    const retryFuncOut = (ptr) => {\r\n        retryBtn.setTexture('overBtnUp' + color);\r\n        if (ptr.isDown)\r\n            retryBtnImg.setPosition(retryBtnImg.x, retryBtnImg.y - 4);\r\n    };\r\n    retryBtn.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtnImg.on('pointerdown', () => { retryFuncDown(); });\r\n    retryBtn.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtnImg.on('pointerup', () => { retryFuncUp(); });\r\n    retryBtn.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    retryBtnImg.on('pointerout', (ptr) => { retryFuncOut(ptr); });\r\n    GameOver.layer.add([\r\n        bg,\r\n        context,\r\n        titleBg, title,\r\n        bonusTime, bonusTimeTxt,\r\n        score, scoreTxt,\r\n        titleBtn, titleBtnImg,\r\n        retryBtn, retryBtnImg,\r\n    ]);\r\n    GameOver.newBestScoreBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 4, 'btn' + color);\r\n    GameOver.newBestScoreBg.setScale(GameOver.newBestScoreBgScaleW, GameOver.newBestScoreBgScaleH);\r\n    GameOver.newBestScoreTxt = scene.add.text(GameOver.newBestScoreBg.x, GameOver.newBestScoreBg.y - 6, '      New\\nBest Score!');\r\n    SetFont2CommonContextStyle(GameOver.newBestScoreTxt);\r\n    GameOver.newBestScoreTxt.setFontSize(TxtTitleHeadSize);\r\n    GameOver.newBestScoreTxt.setFontFamily('Arial Black');\r\n    GameOver.newBestScoreTxt.show = () => {\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setScale(0.1);\r\n        GameOver.newBestScoreBg.setVisible(true);\r\n        GameOver.newBestScoreTxt.setVisible(true);\r\n        // GameAudio.playSfx('gearAnim');\r\n        scene.tweens.addCounter({\r\n            from: 0.1, to: 1, duration: 800, ease: 'Back.easeInOut',\r\n            onUpdate: (tw, twData) => {\r\n                const value = twData.value;\r\n                GameOver.newBestScoreBg.setScale(value * GameOver.newBestScoreBgScaleW, value * GameOver.newBestScoreBgScaleH);\r\n                GameOver.newBestScoreTxt.setScale(value);\r\n            },\r\n            onComplete: () => {\r\n                efx.animNewBest();\r\n            }\r\n        });\r\n    };\r\n    GameOver.newBestScoreTxt.hide = () => {\r\n        GameOver.newBestScoreBg.setVisible(false);\r\n        GameOver.newBestScoreBg.setScale(0.1 * GameOver.newBestScoreBgScaleW, 0.1 * GameOver.newBestScoreBgScaleH);\r\n        GameOver.newBestScoreTxt.setVisible(false);\r\n        GameOver.newBestScoreTxt.setScale(1);\r\n    };\r\n    GameOver.newBestScoreTxt.hide();\r\n    SetDepth(GameOver.overTxt, 'txt');\r\n    SetDepth(GameOver.layer, 'gameOver');\r\n    SetDepth(GameOver.newBestScoreBg, 'newBest');\r\n    SetDepth(GameOver.newBestScoreTxt, 'newBest');\r\n    InitGameOver();\r\n    return GameOver;\r\n};\r\n/* harmony default export */ const gameover = (GameOver);\r\n\r\n\n// EXTERNAL MODULE: ./src/utils/etc.ts\nvar etc = __webpack_require__(663);\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/circle.ts\n\r\n\r\nconst RndCircleImgTexture = ['blueBall', 'greenBall', 'brownBall'];\r\nconst GetCircleShape = () => {\r\n    const RadiusValue = 120;\r\n    const Radius = userSetting/* View.calcRatio */.G7.calcRatio(RadiusValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Circle(Radius / 2, Radius / 2, Radius),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Circle.Contains,\r\n        score: (RadiusValue ** 2) * 3 / 100,\r\n        bodyConfig: {\r\n            type: 'circle',\r\n            radius: Radius,\r\n            offset: { x: Radius / 2, y: Radius / 2 }\r\n        },\r\n        imgTexture: RndCircleImgTexture[(0,math/* GetRndInt */.dZ)(0, RndCircleImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Radius * 2, Radius * 2);\r\n            block.getPhysicsCon().setCircle(Radius);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const circle = (GetCircleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/rectangle.ts\n\r\n\r\nconst RndRectImgTexture = ['blueRect', 'greenRect', 'brownRect'];\r\nconst GetRectangleShape = () => {\r\n    const ShortSideValue = 200;\r\n    const LongSideValue = ShortSideValue + ShortSideValue / 2;\r\n    const ShortSide = userSetting/* View.calcRatio */.G7.calcRatio(ShortSideValue);\r\n    const LongSide = userSetting/* View.calcRatio */.G7.calcRatio(LongSideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(ShortSide / 2, LongSide / 2, ShortSide, LongSide),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: ShortSideValue * LongSideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: ShortSide,\r\n            height: LongSide,\r\n            offset: { x: ShortSide / 2, y: LongSide / 2 }\r\n        },\r\n        imgTexture: RndRectImgTexture[(0,math/* GetRndInt */.dZ)(0, RndRectImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(ShortSide, LongSide);\r\n            block.getPhysicsCon().setSize(ShortSide, LongSide);\r\n            // block.input && block.input.hitArea.setTo(ShortSide, LongSide);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const rectangle = (GetRectangleShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/square.ts\n\r\n\r\nconst RndSquareImgTexture = ['blueSquare', 'greenSquare', 'brownSquare'];\r\nconst GetSquareShape = () => {\r\n    const SideValue = 200;\r\n    const Side = userSetting/* View.calcRatio */.G7.calcRatio(SideValue);\r\n    let bData = {};\r\n    return {\r\n        hitArea: new Phaser.Geom.Rectangle(Side / 2, Side / 2, Side, Side),\r\n        bData: bData,\r\n        callback: Phaser.Geom.Rectangle.Contains,\r\n        score: SideValue * SideValue / 100,\r\n        bodyConfig: {\r\n            type: 'rectangle',\r\n            width: Side,\r\n            height: Side,\r\n            offset: { x: Side / 2, y: Side / 2 }\r\n        },\r\n        imgTexture: RndSquareImgTexture[(0,math/* GetRndInt */.dZ)(0, RndSquareImgTexture.length)],\r\n        setImgDisplaySize: function (block) {\r\n            block.getShapeImg().setDisplaySize(Side, Side);\r\n            block.getPhysicsCon().setSize(Side, Side);\r\n            // block.input && block.input.hitArea.setTo(Side, Side);\r\n            return block;\r\n        }\r\n    };\r\n};\r\n/* harmony default export */ const square = (GetSquareShape);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/shape/index.ts\n\r\n\r\n\r\n\r\nconst ShapeTypeNameList = ['ball', 'rect', 'square',];\r\nconst ShapeTypePropertiesList = [\r\n    circle(), rectangle(), square(),\r\n];\r\nconst CommonPtrEvt = {\r\n    ptrDown: function (block) {\r\n        console.log('common ptr down');\r\n    },\r\n    ptrUp: function (block) {\r\n        console.log('common ptr up');\r\n    },\r\n    ptrOut: function (block) {\r\n        console.log('common ptr out');\r\n    },\r\n};\r\nconst PtrEvtList = ['ptrDown', 'ptrUp', 'drag', 'dragEnd'];\r\nconst ShapeTypeList = ShapeTypeNameList.map((ele, idx) => {\r\n    var _a;\r\n    // setting block data with common evt\r\n    let bData = (_a = ShapeTypePropertiesList[idx]) === null || _a === void 0 ? void 0 : _a.bData;\r\n    if (!bData)\r\n        bData = Object.assign({}, CommonPtrEvt);\r\n    else {\r\n        PtrEvtList.map((ptrEvt) => {\r\n            let tmpPrevFunc = bData[ptrEvt];\r\n            if (tmpPrevFunc) {\r\n                ShapeTypePropertiesList[idx].bData[ptrEvt] = (block) => {\r\n                    CommonPtrEvt[ptrEvt](block);\r\n                    tmpPrevFunc(block);\r\n                };\r\n            }\r\n        });\r\n    }\r\n    return Object.assign({ typeName: ele }, ShapeTypePropertiesList[idx]);\r\n});\r\nconst ShapeSystem = {\r\n    getCertainShape: function (shapeTypeName) {\r\n        return ShapeTypeList.find((ele) => ele.typeName === shapeTypeName);\r\n    },\r\n    getRndShape: function () { return (0,etc/* GetRndEleFromArray */.fB)(ShapeTypeList); },\r\n};\r\nconst SetBlockShape = (block, typeName) => {\r\n    if (!typeName)\r\n        block.setShape(ShapeSystem.getRndShape());\r\n    else\r\n        block.setShape(ShapeSystem.getCertainShape(typeName));\r\n    block.setShapeName(block.getShape().typeName);\r\n    block.getPhysicsCon().setBody(block.getShape().bodyConfig);\r\n    block.getShapeImg().setTexture(block.getShape().imgTexture);\r\n    block.getShape().setImgDisplaySize(block);\r\n    if (block.getShape().bData)\r\n        block.addBlockData(block.getShape().bData);\r\n    return block;\r\n};\r\n/* harmony default export */ const shape = ((/* unused pure expression or super */ null && (ShapeSystem)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/block/system.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst BlockSystem = {\r\n    // manage block list\r\n    onScreenList: [],\r\n    standbyList: [],\r\n    // static postion of block\r\n    standbyPosX: -500,\r\n    standbyPosY: -500,\r\n    leftX: 0,\r\n    rightX: userSetting/* View.w */.G7.w,\r\n    bottomY: 0,\r\n    spawnY: -200,\r\n    getRndSpawnX: function () { return (0,math/* GetRndInt */.dZ)(this.leftX, this.rightX); },\r\n    getRndAngle: function () { return (0,math/* GetRndInt */.dZ)(0, 360); },\r\n    // game over related properties\r\n    overLineY: 0,\r\n    overCnt: 0,\r\n    overCntMax: 8 * 1000,\r\n    overMaxBlock: 8,\r\n    isGameOver: false,\r\n    getIsGameOver: function () { return this.isGameOver; },\r\n    setIsGameOver: function (isOver) { return this.isGameOver = isOver; },\r\n    // responsive spawning block time\r\n    nextSpawnTime: 0,\r\n    spawnDelayBySecList: [800, 950, 1100, 1250, 1400, 1550],\r\n    spawnDelayBySec: 1800,\r\n};\r\nconst InitBlockSystem = () => {\r\n    RemoveAllBlockOnDisplay();\r\n    BlockSystem.setIsGameOver(false);\r\n    BlockSystem.nextSpawnTime = ui_time.init;\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[5];\r\n};\r\nconst AddCertainBlock = (scene, typeName) => {\r\n    let block;\r\n    // get block from standy list or create new one\r\n    if (BlockSystem.standbyList.length > 0) {\r\n        block = BlockSystem.standbyList.shift();\r\n        if (!block.scene) { // is block scene removed?\r\n            block.destroy();\r\n            block = new basic(scene);\r\n        }\r\n    }\r\n    else\r\n        block = new basic(scene);\r\n    // set block shape & type, push to on screen list & spawn\r\n    SetBlockShape(block);\r\n    Set2TypeBlock(block, typeName);\r\n    BlockSystem.onScreenList.push(block);\r\n    SpawnBlock(block);\r\n    return block;\r\n};\r\nconst AddObstacleBlock = (block) => {\r\n    block.scene.cameras.main.shake(200, 0.02, true);\r\n    audio.playSfx('spawnObstacleSfx');\r\n    AddCertainBlock(block.scene, 'obstacle');\r\n    return block;\r\n};\r\nconst GetRndBlockType = () => {\r\n    // get random block type via spawn chance\r\n    let distributionArr = [];\r\n    BlockUniqueProperties.map((ele) => {\r\n        // ele.spawnChance = ele.spawnChance / SpawnMaxChance;\r\n        if (ele.spawnChance === 0)\r\n            return;\r\n        for (let i = 0; i < ele.spawnChance; i++) {\r\n            distributionArr.push(ele.typeName);\r\n        }\r\n    });\r\n    return distributionArr[(0,math/* GetRndInt */.dZ)(0, distributionArr.length)];\r\n};\r\nconst AddRndBlock = (scene) => {\r\n    const rndType = GetRndBlockType();\r\n    AddCertainBlock(scene, rndType);\r\n};\r\nconst ClearBlock = (block, score) => {\r\n    if (!block)\r\n        return;\r\n    let blockScore = score ? score : block.getScore();\r\n    ui_score.add(blockScore);\r\n    efx.animScore(block, blockScore);\r\n    const { value, chance } = block.getTimeIncrease();\r\n    if (ui_time.curr > ui_time.last10 && chance > (0,math/* GetRndNum */.hg)(0, 100)) {\r\n        ui_time.increaseTime(value);\r\n        efx.animTimeIncrease(block, chance, value);\r\n    }\r\n    RemoveBlock(block);\r\n};\r\nconst RemoveBlock = (block) => {\r\n    // remove from onScreenList\r\n    BlockSystem.onScreenList = BlockSystem.onScreenList.filter(screenBlock => screenBlock.id !== block.id);\r\n    if (!block.scene) {\r\n        block.destroy();\r\n        return;\r\n    }\r\n    // chck is already in standby list\r\n    if (BlockSystem.standbyList.some(standbyBlock => standbyBlock.id === block.id))\r\n        return;\r\n    DeathBlock(block);\r\n    block.setPosition(BlockSystem.standbyPosX, BlockSystem.standbyPosY);\r\n    BlockSystem.standbyList.push(block);\r\n};\r\nconst RemoveAllBlockOnDisplay = () => {\r\n    if (!BlockSystem.onScreenList)\r\n        return;\r\n    BlockSystem.onScreenList.map((block) => { RemoveBlock(block); });\r\n    BlockSystem.onScreenList = [];\r\n    if (!BlockSystem.standbyList)\r\n        return;\r\n    BlockSystem.standbyList = BlockSystem.standbyList.filter((standbyBlock) => {\r\n        if (!standbyBlock.scene) {\r\n            standbyBlock.destroy();\r\n        }\r\n        else\r\n            return standbyBlock;\r\n    });\r\n};\r\nconst UpdateBlockChckIsGameOver = (scene, time, delta) => {\r\n    // chck every block which is game over border line\r\n    const isOverBorderLine = BlockSystem.onScreenList.some((screenBlock) => {\r\n        if (!screenBlock)\r\n            return false;\r\n        return screenBlock.y < BlockSystem.overLineY;\r\n    });\r\n    // block count is over max & at least one block cross game over border line\r\n    if (isOverBorderLine && BlockSystem.onScreenList.length > BlockSystem.overMaxBlock) {\r\n        BlockSystem.overCnt += delta * ui_time.timeScale;\r\n        // game over condition\r\n        if (BlockSystem.overCnt > BlockSystem.overCntMax) {\r\n            BlockSystem.overCnt = 0;\r\n            BlockSystem.setIsGameOver(true);\r\n            gameover.animGameOver(scene);\r\n        }\r\n        else\r\n            BlockSystem.setIsGameOver(false);\r\n    }\r\n    else {\r\n        // init game over warning properties\r\n        BlockSystem.overCnt = 0;\r\n        BlockSystem.setIsGameOver(false);\r\n    }\r\n};\r\nconst UpdateSpawnBlocks = (scene, delta) => {\r\n    // get game time & timeline idx calculate\r\n    const gameTimeCurr = ui_time.getCurr();\r\n    let timelineIdx = parseInt((gameTimeCurr / 1000 / 10).toString());\r\n    if (timelineIdx < 0)\r\n        timelineIdx = 0;\r\n    if (timelineIdx >= BlockSystem.spawnDelayBySecList.length) {\r\n        timelineIdx = BlockSystem.spawnDelayBySecList.length - 1;\r\n    }\r\n    // adjust responsive spawn block time\r\n    BlockSystem.spawnDelayBySec = BlockSystem.spawnDelayBySecList[timelineIdx];\r\n    // spawn block\r\n    BlockSystem.nextSpawnTime += delta * ui_time.timeScale;\r\n    if (BlockSystem.nextSpawnTime > BlockSystem.spawnDelayBySec) {\r\n        BlockSystem.nextSpawnTime = 0;\r\n        AddRndBlock(scene);\r\n    }\r\n    ;\r\n};\r\nconst UpdateAllBlocks = (scene, time, delta) => {\r\n    if (BlockSystem.getIsGameOver())\r\n        return;\r\n    UpdateBlockChckIsGameOver(scene, time, delta);\r\n    BlockSystem.onScreenList.map(block => UpdateBlock(block, time, delta));\r\n    UpdateSpawnBlocks(scene, delta);\r\n};\r\n/* harmony default export */ const system = (BlockSystem);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/time.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst GameTime = {\r\n    txt: null,\r\n    last10Txt: null,\r\n    last10PrevTime: 11,\r\n    isLast10HasOnceCnt: true,\r\n    isGameTimeEndOnceCnt: true,\r\n    isFirstLast10HasOnceCnt: true,\r\n    standbyTime: 3 * 1000,\r\n    init: 60 * 1000,\r\n    curr: 60 * 1000,\r\n    last10: 10 * 1000,\r\n    increasedTime: 0,\r\n    // anim option\r\n    animIncreaseTimeDuration: 400,\r\n    animTw: null,\r\n    animTwScaleMin: 1,\r\n    animTwScaleMax: 1.4,\r\n    isTwing: false,\r\n    // time scale option\r\n    timeScale: 1,\r\n    showSettingTimeScale: 0.1,\r\n    hideSettingTimeScale: 1,\r\n    sndLast10Voice: function (scene, time) {\r\n        // scene.sound.play('voice' + time);\r\n        audio.playSfx('voice' + time);\r\n        this.last10Txt.setText(time);\r\n    },\r\n    increaseTime: function (time) {\r\n        // last 10 seconds left so increasing time is useless\r\n        if (!this.isFirstLast10HasOnceCnt)\r\n            return;\r\n        this.curr += time;\r\n        this.increasedTime += time;\r\n        return this;\r\n    },\r\n    set2Format: function (milliTime) {\r\n        // separate minute, second each\r\n        const timeSec = milliTime / 1000;\r\n        const secondSplit = timeSec.toFixed(2).split('.');\r\n        let minutes = Math.floor(timeSec / 60);\r\n        let seconds = Math.floor(Number(secondSplit[0]));\r\n        let underPointDigitNum = Number(secondSplit[1]);\r\n        if (minutes < 10)\r\n            minutes = '0' + minutes;\r\n        if (seconds < 10)\r\n            seconds = '0' + seconds;\r\n        if (underPointDigitNum < 10)\r\n            underPointDigitNum = '0' + underPointDigitNum;\r\n        const time = minutes + ':' + seconds + '.' + underPointDigitNum;\r\n        this.txt.setText(time);\r\n    },\r\n    setTimeScale: function (scene, timeScale) {\r\n        scene.matter.world.engine.timing.timeScale = timeScale;\r\n        this.timeScale = timeScale;\r\n    },\r\n    getCurr: function () { return this.curr; },\r\n    updateLast10CntAnim: function (scene) {\r\n        // stop bgm & hide setting btn & time increasing is not possible\r\n        if (this.isFirstLast10HasOnceCnt) {\r\n            this.isFirstLast10HasOnceCnt = false;\r\n            audio.pauseBgm('gameBgm');\r\n            HideSettingBtn(scene);\r\n        }\r\n        this.last10Txt.setVisible(true);\r\n        const time = Math.ceil(this.curr / 1000);\r\n        if (this.last10PrevTime !== time) {\r\n            this.isLast10HasOnceCnt = true;\r\n            this.last10PrevTime = time;\r\n        }\r\n        else\r\n            this.isLast10HasOnceCnt = false;\r\n        if (this.isLast10HasOnceCnt)\r\n            this.sndLast10Voice(scene, time);\r\n    },\r\n    update: function (scene, delta) {\r\n        if (system.getIsGameOver())\r\n            return;\r\n        if (this.curr > 0) {\r\n            this.curr -= delta * this.timeScale;\r\n            this.set2Format(this.curr);\r\n            const isUnder10Sec = this.curr > 0 && this.curr <= 10 * 1000;\r\n            isUnder10Sec && this.updateLast10CntAnim(scene, delta);\r\n            return;\r\n        }\r\n        if (this.isGameTimeEndOnceCnt) {\r\n            this.isGameTimeEndOnceCnt = false;\r\n            system.setIsGameOver(true);\r\n            this.curr = 0;\r\n            this.set2Format(0);\r\n            this.last10Txt.setVisible(false);\r\n            gameover.animTimeOver(scene);\r\n            return;\r\n        }\r\n    },\r\n    initTimeIncrease: function () {\r\n        this.increasedTime = 0;\r\n        return this.increasedTime;\r\n    },\r\n    getTimeIncrease: function () { return this.increasedTime; },\r\n    addTimeIncrease: function (time) {\r\n        this.increasedTime += time;\r\n        return this.increasedTime;\r\n    },\r\n};\r\nconst InitGameTime = () => {\r\n    GameTime.last10Txt.setVisible(false);\r\n    GameTime.last10PrevTime = 11;\r\n    GameTime.isLast10HasOnceCnt = true;\r\n    GameTime.isGameTimeEndOnceCnt = true;\r\n    GameTime.curr = GameTime.init;\r\n    GameTime.increasedTime = 0;\r\n    GameTime.timeScale = 1;\r\n    GameTime.initTimeIncrease();\r\n};\r\nconst CreateGameTimeTxt = (scene) => {\r\n    const initX = TxtMargin / 2 + 46;\r\n    GameTime.txt = scene.add.text(initX, TxtMargin - 10, '');\r\n    GameTime.txt.setAlpha(TxtAlpha);\r\n    GameTime.txt.setOrigin(0, 0);\r\n    GameTime.txt.setFontSize(TxtSize);\r\n    GameTime.txt.setBackgroundColor(TxtBackgroundColor);\r\n    GameTime.last10Txt = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, '');\r\n    GameTime.last10Txt.setAlpha(0.5);\r\n    GameTime.last10Txt.setOrigin(0.5, 0.5);\r\n    GameTime.last10Txt.setFontSize(userSetting/* View.w */.G7.w / 2);\r\n    GameTime.last10Txt.setVisible(false);\r\n    [GameTime.txt, GameTime.last10Txt].map((txt) => {\r\n        txt.setPadding({ left: TxtPadding, right: TxtPadding, top: TxtPadding / 2, bottom: TxtPadding / 2 });\r\n        txt.setFontFamily(TxtFamily);\r\n        SetDepth(txt, 'txt');\r\n    });\r\n    InitGameTime();\r\n};\r\nconst SetmillieSec2SecTimeFormat = (millieSec) => {\r\n    const sec = (millieSec / 1000).toFixed(2) + ' sec';\r\n    return sec;\r\n};\r\n/* harmony default export */ const ui_time = (GameTime);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/ui/setting.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import { CreateHow, CreateHowInSetting } from './how';\r\nconst Setting = {\r\n    btn: null,\r\n    layer: null,\r\n    layerData: {\r\n        txtGap: 50,\r\n        controlTxtList: ['FullScreen', 'Normal'],\r\n        isFullScreen: false,\r\n    },\r\n    exitBtn: null,\r\n    isOpen: false,\r\n    isTwing: false,\r\n};\r\nconst InitSetting = (scene) => {\r\n    Setting.isTwing = false;\r\n    HideSetting(scene);\r\n};\r\nconst CreateSetting = (scene) => {\r\n    const { margin, alpha, scale } = ui;\r\n    Setting.btn = scene.add.image(userSetting/* View.w */.G7.w - margin, margin, 'settingBtn');\r\n    Setting.btn.setScale(scale);\r\n    Setting.btn.setAlpha(alpha);\r\n    Setting.btn.setInteractive();\r\n    Setting.btn.on('pointerup', () => { Setting.isTwing || AnimShowSetting(scene); });\r\n    Setting.layer = scene.add.container();\r\n    const bg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    bg.setInteractive();\r\n    bg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    bg.setAlpha(0.4);\r\n    const panel = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'settingPanel');\r\n    panel.setDisplaySize(userSetting/* View.w */.G7.w - ContextMarginW, userSetting/* View.h */.G7.h - ContextMarginH);\r\n    const title = scene.add.text(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - (TxtTitleHeightGap * 3), 'Setting');\r\n    SetFont2CommonContextStyle(title);\r\n    title.setFontSize(TxtTitleHeadSize);\r\n    const bgmBtn = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - userSetting/* View.h */.G7.h / 6, 'musicOn');\r\n    const bgmGage = CreateGageBar(scene, userSetting/* View.centerX */.G7.centerX, bgmBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        audio.setBgmVolume(curr / 100);\r\n    });\r\n    bgmGage.setGageNum(audio.bgmVolume * 100);\r\n    const sfxBtn = scene.add.image(userSetting/* View.centerX */.G7.centerX, bgmGage.y + SettingGapContextMargin, 'audioOn');\r\n    const sfxGage = CreateGageBar(scene, userSetting/* View.centerX */.G7.centerX, sfxBtn.y + SettingGapContextMargin, (min, max, curr) => {\r\n        audio.setSfxVolume(curr / 100);\r\n        audio.playSfx('gearAnim');\r\n    });\r\n    sfxGage.setGageNum(audio.sfxVolume * 100);\r\n    [bgmBtn, sfxBtn].map((btn) => {\r\n        btn.setScale(0.6);\r\n        btn.setInteractive();\r\n    });\r\n    bgmBtn.on('pointerup', () => {\r\n        const isOn = bgmBtn.texture.key === 'musicOn';\r\n        bgmGage.setAble(!isOn);\r\n        bgmBtn.setTexture(isOn ? 'musicOff' : 'musicOn');\r\n        audio.setBgmMute(isOn);\r\n    });\r\n    sfxBtn.on('pointerup', () => {\r\n        const isOn = sfxBtn.texture.key === 'audioOn';\r\n        sfxGage.setAble(!isOn);\r\n        sfxBtn.setTexture(isOn ? 'audioOff' : 'audioOn');\r\n        audio.setSfxMute(isOn);\r\n    });\r\n    bgmBtn.setTexture(audio.isBgmMute ? 'musicOff' : 'musicOn');\r\n    sfxBtn.setTexture(audio.isSfxMute ? 'audioOff' : 'audioOn');\r\n    bgmGage.setAble(!audio.isBgmMute);\r\n    sfxGage.setAble(!audio.isSfxMute);\r\n    const { txtGap } = Setting.layerData;\r\n    // add back to title btn\r\n    const back2TitleBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, sfxGage.y + SettingGapContextMarginLarger, 'settingOverBtnUp').setScale(1.2);\r\n    const back2Title = scene.add.image(back2TitleBg.x, back2TitleBg.y - 4, 'overBack');\r\n    back2Title.setScale(0.6).setInteractive();\r\n    back2Title.downPosY = back2Title.y + 4;\r\n    back2Title.upPosY = back2Title.y;\r\n    back2Title.on('pointerdown', () => {\r\n        back2TitleBg.setTexture('settingOverBtnDown');\r\n        back2Title.setPosition(back2Title.x, back2Title.downPosY);\r\n    });\r\n    back2Title.on('pointerup', () => {\r\n        audio.playSfx('gearAnim');\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n        if (back2Title.isChanging)\r\n            return;\r\n        if (!scene.scene.isActive('title')) {\r\n            StopGame(scene);\r\n            StartTitle(scene);\r\n        }\r\n        else\r\n            AnimHideSetting(scene);\r\n        setTimeout(() => { back2Title.isChanging = false; }, 500);\r\n    });\r\n    back2Title.on('pointerout', () => {\r\n        back2TitleBg.setTexture('settingOverBtnUp');\r\n        back2Title.setPosition(back2Title.x, back2Title.upPosY);\r\n    });\r\n    const back2TitleTxt = scene.add.text(back2TitleBg.x, back2TitleBg.y + txtGap, 'Go to Title');\r\n    SetFont2CommonContextStyle(back2TitleTxt);\r\n    back2TitleTxt.setFontSize(16);\r\n    const back2TitleList = [back2TitleBg, back2Title, back2TitleTxt];\r\n    // // add screen size controller\r\n    // const sizeControllerBg = scene.add.image(View.centerX + controlGap, back2TitleBg.y, 'settingOverBtnUp').setScale(1.2);\r\n    // let sizeController = scene.add.image(sizeControllerBg.x, sizeControllerBg.y - 4, 'screenLarger') as TToggleBtnImg;\r\n    // sizeController.setScale(0.6).setInteractive();\r\n    // sizeController.downPosY = sizeController.y + 4;\r\n    // sizeController.upPosY = sizeController.y;\r\n    // sizeController.on('pointerdown', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnDown');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.downPosY);\r\n    // });\r\n    // const sizeControllerExitEvt = () => {\r\n    //     Setting.layerData.isFullScreen = false;\r\n    //     scene.scale.stopFullscreen();\r\n    //     sizeController.setTexture('screenLarger');\r\n    //     sizeControlTxt.setText(controlTxtList[0]);\r\n    // };\r\n    // const sizeControllerToggleEvt = () => {\r\n    //     Setting.layerData.isFullScreen = !Setting.layerData.isFullScreen;\r\n    //     if (Setting.layerData.isFullScreen) {\r\n    //         scene.scale.startFullscreen();\r\n    //         sizeController.setTexture('screenSmaller');\r\n    //         sizeControlTxt.setText(controlTxtList[1]);\r\n    //     }\r\n    //     else sizeControllerExitEvt();\r\n    // };\r\n    // sizeController.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    //     if (sizeController.isChanging) return;\r\n    //     sizeController.isChanging = true;\r\n    //     sizeControllerToggleEvt();\r\n    //     setTimeout(() => { sizeController.isChanging = false; }, 300);\r\n    // });\r\n    // sizeController.on('pointerout', () => {\r\n    //     sizeControllerBg.setTexture('settingOverBtnUp');\r\n    //     sizeController.setPosition(sizeController.x, sizeController.upPosY);\r\n    // });\r\n    // const sizeControlTxt = scene.add.text(sizeControllerBg.x, sizeControllerBg.y + txtGap, controlTxtList[0]);\r\n    // SetFont2CommonContextStyle(sizeControlTxt);\r\n    // sizeControlTxt.setFontSize(16);\r\n    // // resize event for stop full screen\r\n    // scene.scale.off('resize');\r\n    // scene.scale.on('resize', () => {\r\n    //     if (sizeController.isChanging) return;\r\n    //     if (!Setting.layerData.isFullScreen) return;\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     sizeControllerExitEvt();\r\n    // });\r\n    // const sizeControllerList = [ sizeControllerBg, sizeController, sizeControlTxt ];\r\n    // const howContext = CreateHow(scene);\r\n    // const howBtn = scene.add.image(View.centerX, sizeControlTxt.y + SettingGapContextMargin, 'btnSettingUp') as TToggleBtnImg;\r\n    // howBtn.setInteractive().setScale(1);\r\n    // howBtn.downPosY = howBtn.y + 4;\r\n    // howBtn.upPosY = howBtn.y;\r\n    // howBtn.on('pointerdown', () => {\r\n    //     howBtn.setTexture('btnSettingDown');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.downPosY);\r\n    // });\r\n    // howBtn.on('pointerup', () => {\r\n    //     GameAudio.playSfx('gearAnim');\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    //     howContext.show();\r\n    // });\r\n    // howBtn.on('pointerout', () => {\r\n    //     howBtn.setTexture('btnSettingUp');\r\n    //     howTxt.setPosition(howTxt.x, howBtn.upPosY);\r\n    // });\r\n    // const howTxt = scene.add.text(howBtn.x, howBtn.y, 'how');\r\n    // SetFont2CommonContextStyle(howTxt);\r\n    // howTxt.setFontSize(TxtTitleSize);\r\n    // const howList = [ howBtn, howTxt, howContext ];\r\n    Setting.layer.add([\r\n        bg, panel, title,\r\n        bgmBtn, sfxBtn,\r\n        bgmGage, sfxGage,\r\n        ...back2TitleList,\r\n        // ...sizeControllerList,\r\n    ]);\r\n    // exit btn & last container setup\r\n    Setting.exitBtn = scene.add.image(userSetting/* View.w */.G7.w - SettingContextMargin, SettingContextMargin, 'exitBtn').setScale(0.6);\r\n    Setting.exitBtn.setInteractive();\r\n    Setting.exitBtn.on('pointerup', () => {\r\n        AnimHideSetting(scene);\r\n    });\r\n    [Setting.btn, Setting.layer, Setting.exitBtn].map(ele => SetDepth(ele, 'setting'));\r\n    InitSetting(scene);\r\n    return Setting;\r\n};\r\nconst GageHeight = 20;\r\nconst CreateGageBar = (scene, x, y, endMoveCallback, gageNumMin = 0, gageNumMax = 100) => {\r\n    const con = scene.add.container(x, y);\r\n    con.gageNumMin = gageNumMin;\r\n    con.gageNumMax = gageNumMax;\r\n    con.gageNum = (con.gageNumMin + con.gageNumMax) / 2;\r\n    const gageBg = scene.add.image(0, 0, 'colorBackground');\r\n    const gageBar = scene.add.image(0, 0, 'btnBlue');\r\n    const gageBarHandle = scene.add.image(0, 0, 'colorHandle');\r\n    const gageTxt = scene.add.text(0, 0, con.gageNum.toString());\r\n    gageBg.setDisplaySize(userSetting/* View.centerX */.G7.centerX, GageHeight);\r\n    gageBar.setDisplaySize(userSetting/* View.centerX */.G7.centerX / 2, GageHeight);\r\n    gageBar.setOrigin(0, 0.5);\r\n    gageBar.setPosition(-userSetting/* View.centerX */.G7.centerX / 2, 0);\r\n    gageTxt.setOrigin(0, 0.5);\r\n    gageTxt.setPosition(userSetting/* View.centerX */.G7.centerX / 2 + TxtMargin - 5, 0);\r\n    con.add([gageBg, gageBar, gageBarHandle, gageTxt]);\r\n    con.gagePosX = 0;\r\n    con.gagePosXMin = -gageBg.width / 2 - gageBarHandle.width / 2;\r\n    con.gagePosXMax = gageBg.width / 2 + gageBarHandle.width / 2;\r\n    con.gagePosXLength = gageBg.width + gageBarHandle.width;\r\n    con.setGageHandleFrame = (isDown) => {\r\n        gageBarHandle.setTexture(isDown ? 'colorHandleDown' : 'colorHandle');\r\n    };\r\n    con.setGageBarSize = (gagePos) => {\r\n        let gagePosX = gagePos;\r\n        if (gagePosX <= con.gagePosXMin)\r\n            gagePosX = con.gagePosXMin;\r\n        else if (gagePosX >= con.gagePosXMax)\r\n            gagePosX = con.gagePosXMax;\r\n        con.gagePosX = gagePosX;\r\n        con.gageNum = Math.floor((con.gageNumMax - con.gageNumMin) * Math.abs(gagePosX - con.gagePosXMin) / con.gagePosXLength);\r\n        con.setGage();\r\n    };\r\n    con.setGageNum = (gageNum) => {\r\n        let gageNumber = gageNum;\r\n        if (gageNumber < con.gageNumMin)\r\n            gageNumber = con.gageNumMin;\r\n        else if (gageNumber > con.gageNumMax)\r\n            gageNumber = con.gageNumMax;\r\n        con.gageNum = gageNumber;\r\n        con.gagePosX = (con.gageNum * con.gagePosXLength / con.gageNumMax) - con.gagePosXMax;\r\n        con.setGage();\r\n    };\r\n    con.setGage = () => {\r\n        gageBar.setDisplaySize(con.gagePosX + gageBar.width / 2 + gageBarHandle.width / 2, GageHeight);\r\n        gageBarHandle.setPosition(con.gagePosX, 0);\r\n        gageTxt.setText(con.gageNum.toFixed(0));\r\n    };\r\n    con.setAble = (isAble) => {\r\n        con.isAble = isAble;\r\n        con.isAble ? con.setAlpha(1) : con.setAlpha(0.5);\r\n    };\r\n    con.setAble(true);\r\n    gageBarHandle.setInteractive({ draggable: true });\r\n    gageBarHandle.on('dragstart', () => {\r\n        con.isAble && con.setGageHandleFrame(true);\r\n    });\r\n    gageBarHandle.on('drag', (ptr, dragX) => {\r\n        con.isAble && con.setGageBarSize(dragX);\r\n    });\r\n    gageBarHandle.on('dragend', () => {\r\n        if (con.isAble) {\r\n            con.setGageHandleFrame(false);\r\n            endMoveCallback && endMoveCallback(con.gageNumMin, con.gageNumMax, con.gageNum);\r\n        }\r\n    });\r\n    return con;\r\n};\r\nconst AnimShowSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    audio.playSfx('gearAnim');\r\n    scene.tweens.addCounter({\r\n        from: 0, to: 60, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => {\r\n            Setting.isTwing = false;\r\n            ShowSetting(scene);\r\n        }\r\n    });\r\n};\r\nconst AnimHideSetting = (scene) => {\r\n    Setting.isTwing = true;\r\n    audio.playSfx('gearAnim');\r\n    HideSetting(scene);\r\n    scene.tweens.addCounter({\r\n        from: 180, to: 0, duration: 120,\r\n        onUpdate: (tw, data) => { Setting.btn.setAngle(data.value); },\r\n        onComplete: () => { Setting.isTwing = false; }\r\n    });\r\n};\r\nconst ShowSetting = (scene) => {\r\n    ui_time.setTimeScale(scene, ui_time.showSettingTimeScale);\r\n    Setting.isOpen = true;\r\n    Setting.layer.setVisible(true);\r\n    Setting.exitBtn.setVisible(true);\r\n};\r\nconst HideSetting = (scene) => {\r\n    ui_time.setTimeScale(scene, ui_time.hideSettingTimeScale);\r\n    Setting.isOpen = false;\r\n    Setting.layer.setVisible(false);\r\n    Setting.exitBtn.setVisible(false);\r\n};\r\nconst ShowSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(true);\r\n};\r\nconst HideSettingBtn = (scene) => {\r\n    HideSetting(scene);\r\n    Setting.btn.setVisible(false);\r\n};\r\n/* harmony default export */ const setting = ((/* unused pure expression or super */ null && (Setting)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/scenes/ui/sns/index.ts\n\r\n\r\n\r\nconst ChannelAdvertise = {\r\n    textureList: ['blackScreen', 'channelBtnDown', 'channelBtnUp', 'channelLogo',],\r\n    youtubeBtnLayer: null,\r\n    youtubePopUpLayer: null,\r\n    youtubeShow: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(true);\r\n    },\r\n    youtubeHide: () => {\r\n        ChannelAdvertise.youtubePopUpLayer.setVisible(false);\r\n    },\r\n    blogBtnLayer: null,\r\n    blogPopUpLayer: null,\r\n    blogShow: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(true);\r\n    },\r\n    blogHide: () => {\r\n        ChannelAdvertise.blogPopUpLayer.setVisible(false);\r\n    },\r\n};\r\nconst GetSnsAssets = (exceptionKeys) => {\r\n    const assetList = [\r\n        // youtube\r\n        { key: 'youtubeLogo', url: CommonSns + 'youtubeLogo.png', type: 'image' },\r\n        { key: 'channelLogo', url: CommonSns + 'channelLogo.jpg', type: 'image' },\r\n        // blog\r\n    ];\r\n    return GetAssetFiles(assetList, exceptionKeys);\r\n};\r\nconst InitChannel = () => {\r\n    ChannelAdvertise.youtubeHide();\r\n};\r\nconst CreateChannel = (scene, videoUrl, commonTextStyle, channelData) => {\r\n    var _a, _b, _c, _d;\r\n    const btnW = (_a = channelData === null || channelData === void 0 ? void 0 : channelData.w) !== null && _a !== void 0 ? _a : 60;\r\n    const btnH = (_b = channelData === null || channelData === void 0 ? void 0 : channelData.h) !== null && _b !== void 0 ? _b : 45;\r\n    const btnScaleTime = 1.1;\r\n    const btnBg = scene.add.image((_c = channelData === null || channelData === void 0 ? void 0 : channelData.x) !== null && _c !== void 0 ? _c : userSetting/* View.centerX */.G7.centerX, (_d = channelData === null || channelData === void 0 ? void 0 : channelData.y) !== null && _d !== void 0 ? _d : userSetting/* View.h */.G7.h - 36, 'channelBtnUp');\r\n    const btnLogo = scene.add.image(btnBg.x, btnBg.y, 'youtubeLogo');\r\n    btnLogo.setInteractive();\r\n    btnLogo.on('pointerdown', () => {\r\n        btnLogo.setDisplaySize(btnW * btnScaleTime, btnH * btnScaleTime);\r\n        btnBg.setTexture('channelBtnDown');\r\n    });\r\n    btnLogo.on('pointerup', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUpss');\r\n        ChannelAdvertise.youtubeShow();\r\n    });\r\n    btnLogo.on('pointerout', () => {\r\n        btnLogo.setDisplaySize(btnW, btnH);\r\n        btnBg.setTexture('channelBtnUp');\r\n    });\r\n    btnLogo.setDisplaySize(btnW, btnH);\r\n    ChannelAdvertise.youtubeBtnLayer = scene.add.layer([\r\n        btnBg, btnLogo\r\n    ]);\r\n    const popUpMargin = 70;\r\n    const channelUrl = 'https://www.youtube.com/channel/UCBJnFgIQ9YORTiz10_Mgy_A';\r\n    const videoThumbnail = `https://i1.ytimg.com/vi/${videoUrl.split('=')[1]}/default.jpg`;\r\n    const popUpBg = scene.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY, 'blackScreen');\r\n    const popUpTitle = scene.add.text(popUpBg.x, userSetting/* View.h */.G7.h / 8, 'My Youtube');\r\n    const popUpTxtList = [];\r\n    const popUpMadeVideo = scene.add.image(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '');\r\n    let popUpMadeVideoWIP;\r\n    popUpMadeVideo.setDisplaySize(popUpMargin, popUpMargin);\r\n    if (!videoUrl) {\r\n        popUpMadeVideoWIP = scene.add.text(popUpBg.x, userSetting/* View.centerY */.G7.centerY - popUpMargin, '         Sorry!\\nWork In Progress');\r\n        popUpTxtList.push(popUpMadeVideoWIP);\r\n    }\r\n    const popUpMadeVideoTxt = scene.add.text(popUpBg.x, popUpMadeVideo.y + popUpMargin, 'Created video');\r\n    const popUpChannel = scene.add.image(popUpBg.x, popUpMadeVideoTxt.y + popUpMargin, 'channelLogo');\r\n    const popUpChannelTxt = scene.add.text(popUpBg.x, popUpChannel.y + popUpMargin, 'This is my channel');\r\n    const popUpExitGuide = scene.add.text(popUpBg.x, userSetting/* View.h */.G7.h - popUpMargin * 1.2, 'press anywhere to exit');\r\n    popUpTxtList.push(popUpTitle, popUpMadeVideoTxt, popUpChannelTxt, popUpExitGuide);\r\n    popUpTxtList.map(txt => commonTextStyle(txt));\r\n    popUpTitle.setFontSize(userSetting/* View.w */.G7.w / 12);\r\n    popUpExitGuide.setAlpha(ui.alpha);\r\n    popUpBg.setAlpha(0.4);\r\n    popUpBg.setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n    popUpBg.setInteractive();\r\n    popUpBg.on('pointerup', () => { ChannelAdvertise.youtubeHide(); });\r\n    const openUrlTab = (url) => { window.open(url); };\r\n    [popUpMadeVideo, popUpMadeVideoTxt].map((video) => {\r\n        video.setInteractive();\r\n        video.on('pointerup', () => { openUrlTab(videoUrl); });\r\n    });\r\n    [popUpChannel, popUpChannelTxt].map((channel) => {\r\n        channel.setInteractive();\r\n        channel.on('pointerup', () => { openUrlTab(channelUrl); });\r\n    });\r\n    [popUpChannel, popUpMadeVideo].map((ele) => {\r\n        ele.setDisplaySize(popUpMargin, popUpMargin);\r\n    });\r\n    ChannelAdvertise.youtubePopUpLayer = scene.add.layer([\r\n        popUpBg, popUpMadeVideo, popUpChannel, ...popUpTxtList\r\n    ]);\r\n    InitChannel();\r\n    return ChannelAdvertise;\r\n};\r\nconst InitBlog = () => {\r\n};\r\nconst CreateBlog = (scene, blogUrl, commonTextStyle, channelData) => {\r\n    InitBlog();\r\n};\r\n/* harmony default export */ const sns = ((/* unused pure expression or super */ null && (ChannelAdvertise)));\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/scenes/title.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import { CreateHow } from './ui/how';\r\n// import { ClearGameLocalStorageData, DebugLocalStorage, GetLocalStorageData, SetLocalStorageItem } from '@src/utils/storage';\r\n\r\n\r\n\r\n// import GameWarning, { CreateGameWarning } from './ui/warning';\r\n\r\n\r\n// import PGUInspector from 'phaser3_gui_inspector';\r\nconst VersionNum = '1.0.0';\r\nconst StartTitle = (scene) => {\r\n    scene.scene.remove('title');\r\n    scene.scene.add('title', TitleScene);\r\n    scene.scene.launch('title');\r\n};\r\nconst StopTitle = (scene) => {\r\n    if (scene.scene.get('title')) {\r\n        scene.scene.setActive(false, 'title');\r\n        scene.scene.setVisible(false, 'title');\r\n        setTimeout(() => { scene.scene.remove('title'); }, 1000);\r\n    }\r\n};\r\nclass TitleScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'title',\r\n            active: false\r\n        });\r\n        this.titleFontSize = 50;\r\n        this.fontSize = 30;\r\n        this.middleGap = 5;\r\n        this.bgRndPos = { x: 0, y: 0 };\r\n    }\r\n    create() {\r\n        this.createBg();\r\n        this.logoBg = this.add.image(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY - TxtTitleHeightGap, 'btnBlue').setScale(1.8);\r\n        this.logo = this.add.text(this.logoBg.x, this.logoBg.y, 'BlockPang').setFontSize(this.titleFontSize);\r\n        this.startBg = this.add.image(this.logo.x, this.logo.y + (TxtTitleHeightGap * 2), 'titleContextBg');\r\n        this.start = this.add.text(this.startBg.x, this.startBg.y, 'start');\r\n        // this.creditBg = this.add.image(this.start.x, this.start.y + TxtTitleHeightGap, 'titleContextBg');\r\n        // this.credit = this.add.text(this.creditBg.x, this.creditBg.y, 'credits');\r\n        [this.logo, this.start].map((ele) => {\r\n            SetFont2CommonContextStyle(ele);\r\n            ele.setFontSize(TxtTitleSize);\r\n            ele.setColor('black');\r\n        });\r\n        [this.logoBg, this.startBg].map((ele) => {\r\n            ele.setInteractive();\r\n        });\r\n        this.logo.setFontSize(TxtTitleHeadSize);\r\n        this.logo.setColor('white');\r\n        this.logoBg.on('pointerup', () => {\r\n            audio.playSfx('earthquake');\r\n            this.animRndAngle([this.logoBg, this.logo]);\r\n            this.cameras.main.shake(250, 0.02, true);\r\n            // todo: drop one random block\r\n        });\r\n        this.startBg.on('pointerup', () => {\r\n            audio.playSfx('gearAnim');\r\n            StopTitle(this);\r\n            StartPassiveLoading(this);\r\n            setTimeout(() => {\r\n                StartGame(this);\r\n            }, 50);\r\n        });\r\n        // this.creditBg.on('pointerup', () => {\r\n        //     this.animRndAngle([ this.creditBg, this.credit ]);\r\n        //     this.creditContext.show();\r\n        // });\r\n        // this.createCreditContext();\r\n        CreateChannel(this, \r\n        // 'https://www.youtube.com/watch?v=Xn08jM1YnIs',\r\n        '', (txt) => {\r\n            SetFont2CommonContextStyle(txt);\r\n            SetDepth(txt, 'txt');\r\n        });\r\n        CreateGameAudio(this, storage);\r\n        CreateEfx(this);\r\n        CreateFullScreen(this);\r\n        CreateSetting(this);\r\n        // DebugLocalStorage(this, GameData, { item: 'best', value: 0 });\r\n        // // debugging\r\n        // const inspectorWidth = 255;\r\n        // PGUInspector(this, { right: window.innerWidth - inspectorWidth, top: 48 });\r\n    }\r\n    createBg() {\r\n        const bgTextureList = ['bgGreen', 'bgBrown', 'bgBlue'];\r\n        let bgTextureRndIdx = (0,math/* GetRndInt */.dZ)(0, bgTextureList.length);\r\n        this.bg = this.add.tileSprite(0, 0, userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h, bgTextureList[bgTextureRndIdx]).setOrigin(0);\r\n        this.createBgRndDirection();\r\n        this.tweens.addCounter({\r\n            from: 0, to: 1, duration: 3000, repeat: -1,\r\n            onUpdate: () => {\r\n                this.bg.tilePositionX += this.bgRndPos.x;\r\n                this.bg.tilePositionY += this.bgRndPos.y;\r\n            },\r\n            onRepeat: () => {\r\n                bgTextureRndIdx++;\r\n                if (bgTextureRndIdx >= bgTextureList.length)\r\n                    bgTextureRndIdx = 0;\r\n                this.bg.setTexture(bgTextureList[bgTextureRndIdx]);\r\n                this.createBgRndDirection();\r\n            }\r\n        });\r\n    }\r\n    createBgRndDirection() {\r\n        this.bgRndPos.x = (0,math/* GetRndNum */.hg)(-3, 4);\r\n        this.bgRndPos.y = (0,math/* GetRndNum */.hg)(-3, 4);\r\n    }\r\n    animRndAngle(list) {\r\n        audio.playSfx('gearAnim');\r\n        const rndAngle = (0,math/* GetRndNum */.hg)(-30, 31);\r\n        list.map(ele => ele.setAngle(rndAngle));\r\n        this.cameras.main.shake(50, 0.01, true);\r\n    }\r\n    createCreditContext() {\r\n        this.creditContext = this.add.container(userSetting/* View.centerX */.G7.centerX, userSetting/* View.centerY */.G7.centerY);\r\n        const youtubeChannel = 'https://www.youtube.com/channel/UCBJnFgIQ9YORTiz10_Mgy_A';\r\n        const bg = this.add.image(0, 0, 'blackScreen').setAlpha(0.9).setDisplaySize(userSetting/* View.w */.G7.w, userSetting/* View.h */.G7.h);\r\n        const title = this.add.text(0, -(TxtTitleHeightGap * 3), 'Credit').setFontSize(this.titleFontSize / 2).setOrigin(0.5, 0.5);\r\n        const preVersion = this.add.text(-this.middleGap, -(TxtTitleHeightGap * 2), 'Version').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const version = this.add.text(this.middleGap, preVersion.y, VersionNum).setOrigin(0, 0.5);\r\n        const preName = this.add.text(-this.middleGap, -(TxtTitleHeightGap), 'Maker').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const name = this.add.text(this.middleGap, preName.y, 'Flux Hunter').setOrigin(0, 0.5);\r\n        const preUrl = this.add.text(-this.middleGap, 0, 'Making Blueprint').setOrigin(1, 0.5).setAlpha(0.6);\r\n        const url = this.add.text(this.middleGap, preUrl.y, 'click here for channel').setOrigin(0, 0.5);\r\n        const guide = this.add.text(0, url.y + TxtTitleHeightGap, 'press anywhere to close').setOrigin(0.5, 0.5).setAlpha(0.5);\r\n        this.creditContext.add([\r\n            bg, title, preVersion, version, preName, name, preUrl, url, guide\r\n        ]);\r\n        bg.setInteractive();\r\n        bg.on('pointerup', () => { this.creditContext.hide(); });\r\n        [preUrl, url].map((urlEle) => {\r\n            urlEle.setInteractive();\r\n            urlEle.on('pointerup', () => { window.open(youtubeChannel, '_blank'); });\r\n        });\r\n        this.creditContext.show = () => { this.creditContext.setVisible(true); };\r\n        this.creditContext.hide = () => { this.creditContext.setVisible(false); };\r\n        this.creditContext.hide();\r\n        SetDepth(this.creditContext, 'popUp');\r\n    }\r\n}\r\n/* harmony default export */ const title = (TitleScene);\r\n\r\n\n;// CONCATENATED MODULE: ./src/outsourcing/BlockPang/blockPang.ts\n// import Phaser from 'phaser';\r\n\r\n\r\n\r\n\r\n\r\nclass MainScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'main',\r\n            active: false,\r\n        });\r\n    }\r\n    init() {\r\n        this.game.scene.add('title', title, false);\r\n        this.game.scene.add('game', game, false);\r\n    }\r\n    create() {\r\n        StartTitle(this);\r\n    }\r\n}\r\nconst AssetUrl = 'https://silvertree7622.github.io/webgames/blockPang/assets/';\r\nlet Assets = {\r\n    dynamic: [\r\n        async () => {\r\n            let list = [\r\n                // common\r\n                ...GetFullScreenAssets('touchSfx'),\r\n                ...GetSnsAssets(),\r\n                // particle\r\n                {\r\n                    key: 'particleSprite',\r\n                    url: await AssetUrl + 'particleSprite.png',\r\n                    json: await __webpack_require__(442),\r\n                    type: 'atlas'\r\n                },\r\n                { key: 'diamond1', url: await AssetUrl + 'diamond1.png', type: 'image' },\r\n                { key: 'diamond2', url: await AssetUrl + 'diamond2.png', type: 'image' },\r\n                { key: 'diamond3', url: await AssetUrl + 'diamond3.png', type: 'image' },\r\n                { key: 'diamond4', url: await AssetUrl + 'diamond4.png', type: 'image' },\r\n                { key: 'key1', url: await AssetUrl + 'key1.png', type: 'image' },\r\n                { key: 'key2', url: await AssetUrl + 'key2.png', type: 'image' },\r\n                { key: 'key3', url: await AssetUrl + 'key3.png', type: 'image' },\r\n                { key: 'key4', url: await AssetUrl + 'key4.png', type: 'image' },\r\n                { key: 'ruby1', url: await AssetUrl + 'ruby1.png', type: 'image' },\r\n                { key: 'ruby2', url: await AssetUrl + 'ruby2.png', type: 'image' },\r\n                { key: 'ruby3', url: await AssetUrl + 'ruby3.png', type: 'image' },\r\n                { key: 'ruby4', url: await AssetUrl + 'ruby4.png', type: 'image' },\r\n                { key: 'heart', url: await AssetUrl + 'heart.png', type: 'image' },\r\n                // ui\r\n                { key: 'bgBlue', url: await AssetUrl + 'bgBlue.png', type: 'image' },\r\n                { key: 'bgBrown', url: await AssetUrl + 'bgBrown.png', type: 'image' },\r\n                { key: 'bgGreen', url: await AssetUrl + 'bgGreen.png', type: 'image' },\r\n                { key: 'btnBlue', url: await AssetUrl + 'btnBlue.png', type: 'image' },\r\n                { key: 'btnBrown', url: await AssetUrl + 'btnBrown.png', type: 'image' },\r\n                { key: 'btnGreen', url: await AssetUrl + 'btnGreen.png', type: 'image' },\r\n                { key: 'panelGreen', url: await AssetUrl + 'panelGreen.png', type: 'image' },\r\n                { key: 'panelBlue', url: await AssetUrl + 'panelBlue.png', type: 'image' },\r\n                { key: 'panelBrown', url: await AssetUrl + 'panelBrown.png', type: 'image' },\r\n                { key: 'overBtnUpBlue', url: await AssetUrl + 'overBtnUpBlue.png', type: 'image' },\r\n                { key: 'overBtnUpBrown', url: await AssetUrl + 'overBtnUpBrown.png', type: 'image' },\r\n                { key: 'overBtnUpGreen', url: await AssetUrl + 'overBtnUpGreen.png', type: 'image' },\r\n                { key: 'overBtnDownBlue', url: await AssetUrl + 'overBtnDownBlue.png', type: 'image' },\r\n                { key: 'overBtnDownBrown', url: await AssetUrl + 'overBtnDownBrown.png', type: 'image' },\r\n                { key: 'overBtnDownGreen', url: await AssetUrl + 'overBtnDownGreen.png', type: 'image' },\r\n                { key: 'blackScreen', url: await AssetUrl + 'blackScreen.png', type: 'image' },\r\n                { key: 'exitBtn', url: await AssetUrl + 'exitBtn.png', type: 'image' },\r\n                { key: 'titleContextBg', url: await AssetUrl + 'titleContextBg.png', type: 'image' },\r\n                { key: 'audioOn', url: await AssetUrl + 'audioOn.png', type: 'image' },\r\n                { key: 'audioOff', url: await AssetUrl + 'audioOff.png', type: 'image' },\r\n                { key: 'musicOn', url: await AssetUrl + 'musicOn.png', type: 'image' },\r\n                { key: 'musicOff', url: await AssetUrl + 'musicOff.png', type: 'image' },\r\n                { key: 'colorBackground', url: await AssetUrl + 'colorBackground.png', type: 'image' },\r\n                { key: 'colorHandle', url: await AssetUrl + 'colorHandle.png', type: 'image' },\r\n                { key: 'colorHandleDown', url: await AssetUrl + 'colorHandleDown.png', type: 'image' },\r\n                { key: 'overBack', url: await AssetUrl + 'overBack.png', type: 'image' },\r\n                { key: 'overRetry', url: await AssetUrl + 'overRetry.png', type: 'image' },\r\n                { key: 'settingBtn', url: await AssetUrl + 'settingBtn.png', type: 'image' },\r\n                { key: 'settingPanel', url: await AssetUrl + 'settingPanel.png', type: 'image' },\r\n                { key: 'settingOverBtnUp', url: await AssetUrl + 'settingOverBtnUp.png', type: 'image' },\r\n                { key: 'settingOverBtnDown', url: await AssetUrl + 'settingOverBtnDown.png', type: 'image' },\r\n                { key: 'btnSettingDown', url: await AssetUrl + 'btnSettingDown.png', type: 'image' },\r\n                { key: 'btnSettingUp', url: await AssetUrl + 'btnSettingUp.png', type: 'image' },\r\n                { key: 'screenSmaller', url: await AssetUrl + 'screenSmaller.png', type: 'image' },\r\n                { key: 'screenLarger', url: await AssetUrl + 'screenLarger.png', type: 'image' },\r\n                { key: 'warningSign', url: await AssetUrl + 'warningSign.png', type: 'image' },\r\n                // ui scene\r\n                { key: 'cloud1', url: await AssetUrl + 'cloud1.png', type: 'image' },\r\n                { key: 'cloud2', url: await AssetUrl + 'cloud2.png', type: 'image' },\r\n                { key: 'cloud3', url: await AssetUrl + 'cloud3.png', type: 'image' },\r\n                { key: 'cloud4', url: await AssetUrl + 'cloud4.png', type: 'image' },\r\n                { key: 'cloud5', url: await AssetUrl + 'cloud5.png', type: 'image' },\r\n                { key: 'cloud6', url: await AssetUrl + 'cloud6.png', type: 'image' },\r\n                { key: 'cloud7', url: await AssetUrl + 'cloud7.png', type: 'image' },\r\n                { key: 'cloud8', url: await AssetUrl + 'cloud8.png', type: 'image' },\r\n                { key: 'cloud9', url: await AssetUrl + 'cloud9.png', type: 'image' },\r\n                { key: 'tree1', url: await AssetUrl + 'tree01.png', type: 'image' },\r\n                { key: 'tree2', url: await AssetUrl + 'tree02.png', type: 'image' },\r\n                { key: 'tree3', url: await AssetUrl + 'tree03.png', type: 'image' },\r\n                { key: 'tree4', url: await AssetUrl + 'tree04.png', type: 'image' },\r\n                { key: 'tree5', url: await AssetUrl + 'tree05.png', type: 'image' },\r\n                { key: 'tree6', url: await AssetUrl + 'tree06.png', type: 'image' },\r\n                { key: 'tree7', url: await AssetUrl + 'tree07.png', type: 'image' },\r\n                { key: 'tree8', url: await AssetUrl + 'tree08.png', type: 'image' },\r\n                { key: 'tree9', url: await AssetUrl + 'tree09.png', type: 'image' },\r\n                { key: 'tree10', url: await AssetUrl + 'tree10.png', type: 'image' },\r\n                { key: 'tree11', url: await AssetUrl + 'tree11.png', type: 'image' },\r\n                { key: 'tree12', url: await AssetUrl + 'tree12.png', type: 'image' },\r\n                { key: 'tree13', url: await AssetUrl + 'tree13.png', type: 'image' },\r\n                { key: 'tree14', url: await AssetUrl + 'tree14.png', type: 'image' },\r\n                { key: 'tree15', url: await AssetUrl + 'tree15.png', type: 'image' },\r\n                { key: 'tree16', url: await AssetUrl + 'tree16.png', type: 'image' },\r\n                { key: 'tree17', url: await AssetUrl + 'tree17.png', type: 'image' },\r\n                { key: 'tree18', url: await AssetUrl + 'tree18.png', type: 'image' },\r\n                { key: 'tree19', url: await AssetUrl + 'tree19.png', type: 'image' },\r\n                { key: 'tree20', url: await AssetUrl + 'tree20.png', type: 'image' },\r\n                { key: 'tree21', url: await AssetUrl + 'tree21.png', type: 'image' },\r\n                { key: 'tree22', url: await AssetUrl + 'tree22.png', type: 'image' },\r\n                { key: 'tree23', url: await AssetUrl + 'tree23.png', type: 'image' },\r\n                { key: 'tree24', url: await AssetUrl + 'tree24.png', type: 'image' },\r\n                { key: 'tree25', url: await AssetUrl + 'tree25.png', type: 'image' },\r\n                { key: 'tree26', url: await AssetUrl + 'tree26.png', type: 'image' },\r\n                { key: 'tree27', url: await AssetUrl + 'tree27.png', type: 'image' },\r\n                { key: 'tree28', url: await AssetUrl + 'tree28.png', type: 'image' },\r\n                { key: 'tree29', url: await AssetUrl + 'tree29.png', type: 'image' },\r\n                { key: 'tree30', url: await AssetUrl + 'tree30.png', type: 'image' },\r\n                { key: 'tree31', url: await AssetUrl + 'tree31.png', type: 'image' },\r\n                { key: 'tree32', url: await AssetUrl + 'tree32.png', type: 'image' },\r\n                { key: 'tree33', url: await AssetUrl + 'tree33.png', type: 'image' },\r\n                { key: 'tree34', url: await AssetUrl + 'tree34.png', type: 'image' },\r\n                { key: 'tree35', url: await AssetUrl + 'tree35.png', type: 'image' },\r\n                { key: 'mist1', url: await AssetUrl + 'mist1.png', type: 'image' },\r\n                { key: 'mist2', url: await AssetUrl + 'mist2.png', type: 'image' },\r\n                { key: 'mist3', url: await AssetUrl + 'mist3.png', type: 'image' },\r\n                { key: 'mist4', url: await AssetUrl + 'mist4.png', type: 'image' },\r\n                // shape\r\n                { key: 'blueBall', url: await AssetUrl + 'blueBall.png', type: 'image' },\r\n                { key: 'greenBall', url: await AssetUrl + 'greenBall.png', type: 'image' },\r\n                { key: 'brownBall', url: await AssetUrl + 'brownBall.png', type: 'image' },\r\n                { key: 'obstacleBall', url: await AssetUrl + 'obstacleBall.png', type: 'image' },\r\n                { key: 'blueRect', url: await AssetUrl + 'blueRect.png', type: 'image' },\r\n                { key: 'greenRect', url: await AssetUrl + 'greenRect.png', type: 'image' },\r\n                { key: 'brownRect', url: await AssetUrl + 'brownRect.png', type: 'image' },\r\n                { key: 'obstacleRect', url: await AssetUrl + 'obstacleRect.png', type: 'image' },\r\n                { key: 'blueSquare', url: await AssetUrl + 'blueSquare.png', type: 'image' },\r\n                { key: 'greenSquare', url: await AssetUrl + 'greenSquare.png', type: 'image' },\r\n                { key: 'brownSquare', url: await AssetUrl + 'brownSquare.png', type: 'image' },\r\n                { key: 'obstacleSquare', url: await AssetUrl + 'obstacleSquare.png', type: 'image' },\r\n                { key: 'lockedRectangle', url: await AssetUrl + 'block_locked_large.png', type: 'image' },\r\n                { key: 'locketSquare', url: await AssetUrl + 'block_locked_square.png', type: 'image' },\r\n                { key: 'key', url: await AssetUrl + 'key.png', type: 'image' },\r\n                // type\r\n                { key: 'arrowLeft', url: await AssetUrl + 'arrowLeft.png', type: 'image' },\r\n                { key: 'locked', url: await AssetUrl + 'locked.png', type: 'image' },\r\n                { key: 'pattern', url: await AssetUrl + 'pattern.png', type: 'image' },\r\n                { key: 'power', url: await AssetUrl + 'power.png', type: 'image' },\r\n                { key: 'random', url: await AssetUrl + 'random.png', type: 'image' },\r\n                { key: 'signal1', url: await AssetUrl + 'signal1.png', type: 'image' },\r\n                { key: 'signal2', url: await AssetUrl + 'signal2.png', type: 'image' },\r\n                { key: 'signal3', url: await AssetUrl + 'signal3.png', type: 'image' },\r\n                { key: 'star', url: await AssetUrl + 'star.png', type: 'image' },\r\n                { key: 'swipeLeft', url: await AssetUrl + 'swipeLeft.png', type: 'image' },\r\n                { key: 'touch', url: await AssetUrl + 'touch.png', type: 'image' },\r\n                { key: 'trashcan', url: await AssetUrl + 'trashcan.png', type: 'image' },\r\n                { key: 'trashcanOpen', url: await AssetUrl + 'trashcanOpen.png', type: 'image' },\r\n                { key: 'unlocked', url: await AssetUrl + 'unlocked.png', type: 'image' },\r\n                // audio\r\n                ...GetAudioAssets([\r\n                    // voice sfx\r\n                    { key: 'voice1', url: await AssetUrl + '1.mp3', type: 'audio' },\r\n                    { key: 'voice2', url: await AssetUrl + '2.mp3', type: 'audio' },\r\n                    { key: 'voice3', url: await AssetUrl + '3.mp3', type: 'audio' },\r\n                    { key: 'voice4', url: await AssetUrl + '4.mp3', type: 'audio' },\r\n                    { key: 'voice5', url: await AssetUrl + '5.mp3', type: 'audio' },\r\n                    { key: 'voice6', url: await AssetUrl + '6.mp3', type: 'audio' },\r\n                    { key: 'voice7', url: await AssetUrl + '7.mp3', type: 'audio' },\r\n                    { key: 'voice8', url: await AssetUrl + '8.mp3', type: 'audio' },\r\n                    { key: 'voice9', url: await AssetUrl + '9.mp3', type: 'audio' },\r\n                    { key: 'voice10', url: await AssetUrl + '10.mp3', type: 'audio' },\r\n                    { key: 'voiceGo', url: await AssetUrl + 'go.mp3', type: 'audio' },\r\n                    { key: 'voiceHighScore', url: await AssetUrl + 'new_highscore.mp3', type: 'audio' },\r\n                    { key: 'voiceTimeOver', url: await AssetUrl + 'time_over.mp3', type: 'audio' },\r\n                    { key: 'voiceGameOver', url: await AssetUrl + 'game_over.mp3', type: 'audio' },\r\n                    // other sfx\r\n                    { key: 'gearAnim', url: await AssetUrl + 'gearAnim.mp3', type: 'audio' },\r\n                    { key: 'earthquake', url: await AssetUrl + 'earthquake.mp3', type: 'audio' },\r\n                    { key: 'touchSfx', url: await AssetUrl + 'touchSfx.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockDone', url: await AssetUrl + 'loadingBlockDone.mp3', type: 'audio' },\r\n                    { key: 'loadingBlockOnProcess', url: await AssetUrl + 'loadingBlockOnProcess.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOn', url: await AssetUrl + 'powerBlockOn.mp3', type: 'audio' },\r\n                    { key: 'powerBlockOff', url: await AssetUrl + 'powerBlockOff.mp3', type: 'audio' },\r\n                    { key: 'spawnObstacleSfx', url: await AssetUrl + 'spawnObstacleSfx.mp3', type: 'audio' },\r\n                    { key: 'timeIncreaseSfx', url: await AssetUrl + 'timeIncreaseSfx.mp3', type: 'audio' },\r\n                    { key: 'scoreSfx', url: await AssetUrl + 'scoreSfx.mp3', type: 'audio' },\r\n                    { key: 'warningSfx', url: await AssetUrl + 'warningSfx.mp3', type: 'audio' },\r\n                ], [\r\n                    { key: 'gameBgm', url: await AssetUrl + 'blockpangbgm.mp3', type: 'audio' },\r\n                ]),\r\n            ];\r\n            return list;\r\n        }\r\n    ],\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL2luZGV4LnRzP2U0OWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy91dGlscy9zdG9yYWdlLnRzPzc5OWQiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvYXNzZXRVdGlscy50cz8yNDk5Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL2F1ZGlvL2luZGV4LnRzPzYzNTEiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2RlcHRoL2luZGV4LnRzPzMyMzgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2ZvbnQvaW5kZXgudHM/MzA3NiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svYmFzaWMudHM/Mzg5MCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9hZC50cz8xYmZmIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9pbnB1dC9pbmRleC50cz8xMWE4Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL3Bvd2VyLnRzPzVmMjUiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvbG9hZGluZy50cz9hNDk0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay90eXBlL3RvdWNoLnRzP2UzM2QiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3R5cGUvb2JzdGFjbGUudHM/YTk0NCIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svdHlwZS9pbmRleC50cz84MWE2Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9wb3B1cC50cz9kMmEyIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3N0b3JhZ2UvaW5kZXgudHM/MWVjYSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdWkvc2NvcmUudHM/ZmEzYiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZy50cz8wZjU5Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS9zdGFydENudC50cz9kNWE0Iiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9lZngvaW5kZXgudHM/OWVkYiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdWkvd2FybmluZy50cz85MzVlIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvc2NlbmVzL3VpL2luZGV4LnRzPzA0NDgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9zY2VuZXMvdWkvZnVsbFNjcmVlbi9pbmRleC50cz84ZmUyIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9nYW1lLnRzPzRmYmYiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL2dhbWVvdmVyLnRzPzkwYjgiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2NpcmNsZS50cz81MzkxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy9ibG9jay9zaGFwZS9yZWN0YW5nbGUudHM/MDBhZiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvYmxvY2svc2hhcGUvc3F1YXJlLnRzPzMyMWIiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3NoYXBlL2luZGV4LnRzPzQ0NDMiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL2Jsb2NrL3N5c3RlbS50cz9mMGMxIiwid2VicGFjazovL3BsYXlhYmxlX2FkX3Rlc3QvLi9zcmMvb3V0c291cmNpbmcvQmxvY2tQYW5nL3NjZW5lcy91aS90aW1lLnRzPzRlZGMiLCJ3ZWJwYWNrOi8vcGxheWFibGVfYWRfdGVzdC8uL3NyYy9vdXRzb3VyY2luZy9CbG9ja1Bhbmcvc2NlbmVzL3VpL3NldHRpbmcudHM/MTkxYiIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL3NjZW5lcy91aS9zbnMvaW5kZXgudHM/ZWFlMSIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9zY2VuZXMvdGl0bGUudHM/Y2YzYyIsIndlYnBhY2s6Ly9wbGF5YWJsZV9hZF90ZXN0Ly4vc3JjL291dHNvdXJjaW5nL0Jsb2NrUGFuZy9ibG9ja1BhbmcudHM/MjFlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDb250ZXh0TGF5ZXJNYXJnaW4gPSAxMjA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luID0gNTA7XHJcbmNvbnN0IFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyID0gNzA7XHJcbmNvbnN0IFNldHRpbmdDb250ZXh0TWFyZ2luID0gNDA7XHJcbmNvbnN0IFNldHRpbmdUb3BDb250ZXh0TWFyZ2luID0gODA7XHJcbmV4cG9ydCB7IENvbnRleHRMYXllck1hcmdpbiwgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luTGFyZ2VyLCBTZXR0aW5nQ29udGV4dE1hcmdpbiwgU2V0dGluZ1RvcENvbnRleHRNYXJnaW4sIH07XHJcbiIsIi8vIGNvbXBhcmUgaXRlbSBpcyBpbiB0aGUgZGF0YSB0aGVuIFxyXG5jb25zdCBDb21wYXJlQ2FsbGJhY2sgPSAoZGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgaXNJdGVtRXhpc3RJbkRhdGEgPSBkYXRhW2l0ZW1dO1xyXG4gICAgaWYgKGlzSXRlbUV4aXN0SW5EYXRhICE9PSB1bmRlZmluZWQgfHwgbnVsbClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignaXRlbSBpcyBub3QgbWF0Y2hlZCB0byBhY3R1YWwgZGF0YSB0eXBlOicsIGl0ZW0sIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuY29uc3QgR2FtZU5hbWUgPSBkb2N1bWVudC50aXRsZTsgLy8gZ2V0IGdhbWUgdGl0bGUgbmFtZVxyXG5jb25zdCBHZXRMb2NhbFN0b3JhZ2VEYXRhID0gKGRlZmF1bHREYXRhKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEdhbWVOYW1lKTtcclxuICAgIGlmIChkYXRhKVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEdhbWVOYW1lLCBKU09OLnN0cmluZ2lmeShkZWZhdWx0RGF0YSkpO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcclxuICAgIH1cclxufTtcclxuY29uc3QgR2V0TG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgZ2FtZURhdGEgPSBHZXRMb2NhbFN0b3JhZ2VEYXRhKGRlZmF1bHREYXRhKTtcclxuICAgIGxldCBsaXN0ID0gKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyA/IFtpdGVtXSA6IFsuLi5pdGVtXSkubWFwKChlbGUpID0+IHtcclxuICAgICAgICBsZXQgcmV0dXJuSXRlbSA9IGdhbWVEYXRhW2VsZV07XHJcbiAgICAgICAgaWYgKENvbXBhcmVDYWxsYmFjayhnYW1lRGF0YSwgZWxlKSlcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybkl0ZW07XHJcbiAgICB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdpdGVtLCBsaXN0OiAnLCBpdGVtLCBsaXN0KTtcclxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcclxuICAgICAgICByZXR1cm4gbGlzdFswXTtcclxuICAgIGVsc2UgaWYgKGl0ZW0ubGVuZ3RoID09PSBsaXN0Lmxlbmd0aClcclxuICAgICAgICByZXR1cm4gbGlzdDtcclxufTtcclxuY29uc3QgU2V0TG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSwgdmFsdWUpID0+IHtcclxuICAgIGxldCBnYW1lRGF0YSA9IEdldExvY2FsU3RvcmFnZURhdGEoZGVmYXVsdERhdGEpO1xyXG4gICAgaWYgKGdhbWVEYXRhKVxyXG4gICAgICAgIGdhbWVEYXRhW2l0ZW1dID0gdmFsdWU7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oR2FtZU5hbWUsIEpTT04uc3RyaW5naWZ5KGdhbWVEYXRhKSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZ2FtZURhdGEsIGJlc3Q6ICcsIGdhbWVEYXRhLCBnYW1lRGF0YS5iZXN0KTtcclxuICAgIHJldHVybiBnYW1lRGF0YTtcclxufTtcclxuY29uc3QgUmVtb3ZlTG9jYWxTdG9yYWdlSXRlbSA9IChkZWZhdWx0RGF0YSwgaXRlbSkgPT4ge1xyXG4gICAgU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgaXRlbSwgbnVsbCk7XHJcbn07XHJcbmNvbnN0IENsZWFyR2FtZUxvY2FsU3RvcmFnZURhdGEgPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oR2FtZU5hbWUpO1xyXG59O1xyXG5jb25zdCBDbGVhckFsbExvY2FsU3RvcmFnZUl0ZW0gPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbn07XHJcbmNvbnN0IERlYnVnTG9jYWxTdG9yYWdlID0gKHNjZW5lLCBkZWZhdWx0RGF0YSwgaXRlbXMpID0+IHtcclxuICAgIHNjZW5lLmlucHV0Lm1vdXNlLmRpc2FibGVDb250ZXh0TWVudSgpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgZnVuY3Rpb24gKHBvaW50ZXIpIHtcclxuICAgICAgICBpZiAocG9pbnRlci5yaWdodEJ1dHRvbkRvd24oKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhHZXRMb2NhbFN0b3JhZ2VEYXRhKGRlZmF1bHREYXRhKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBvaW50ZXIubWlkZGxlQnV0dG9uRG93bigpKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAgICAgICAgICAgICAgaXRlbXMubWFwKGVsZSA9PiBTZXRMb2NhbFN0b3JhZ2VJdGVtKGRlZmF1bHREYXRhLCBlbGUuaXRlbSwgZWxlLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oZGVmYXVsdERhdGEsIGl0ZW1zLml0ZW0sIGl0ZW1zLnZhbHVlKTtcclxuICAgICAgICAgICAgU2V0TG9jYWxTdG9yYWdlSXRlbShkZWZhdWx0RGF0YSwgJ2Jlc3QnLCAwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnQgeyBHZXRMb2NhbFN0b3JhZ2VEYXRhLCBHZXRMb2NhbFN0b3JhZ2VJdGVtLCBTZXRMb2NhbFN0b3JhZ2VJdGVtLCBSZW1vdmVMb2NhbFN0b3JhZ2VJdGVtLCBDbGVhckdhbWVMb2NhbFN0b3JhZ2VEYXRhLCBDbGVhckFsbExvY2FsU3RvcmFnZUl0ZW0sIERlYnVnTG9jYWxTdG9yYWdlIH07XHJcbiIsImNvbnN0IENvbW1vblJvb3RVcmwgPSAnaHR0cHM6Ly9zaWx2ZXJ0cmVlNzYyMi5naXRodWIuaW8vd2ViZ2FtZXMvJztcclxuY29uc3QgQ29tbW9uQXNzZXRzID0gQ29tbW9uUm9vdFVybCArICdhc3NldHMvJztcclxuY29uc3QgQ29tbW9uVUkgPSBDb21tb25Bc3NldHMgKyAndWkvJztcclxuY29uc3QgQ29tbW9uU2Z4ID0gQ29tbW9uQXNzZXRzICsgJ2F1ZGlvL3NmeC8nO1xyXG5jb25zdCBDb21tb25TbnMgPSBDb21tb25Sb290VXJsICsgJ3Nucy8nO1xyXG4vKiogZ2V0IGNvbW1vbiBhc3NldCBmaWxlIHdpdGggZXhjZXB0aW9uIGtleSAod2hlbiBpZiB1IHdvcnJ5IGFib3V0IG5lc3RlZCB0aGluZ3MpXHJcbiAqIEBwYXJhbSBhc3NldExpc3QgY29tbW9uIGN1c3RvbSBhc3Nlc3QgbGlzdCBjb21wb3NlIG9mIHRoZSBrZXksIHVybCwgZXRjXHJcbiAqIEBwYXJhbSBleGNlcHRpb25LZXlzIGV4Y2VwdGlvbiBrZXkgd2hpY2ggdSB3b3JyeSBhYm91dCB0aGUgbmVzdGVkIHRoaW5nc1xyXG4gKiBAcmV0dXJucyBmaWx0ZXJlZCBhc3NldCBsaXN0XHJcbiAqL1xyXG5jb25zdCBHZXRBc3NldEZpbGVzID0gKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgaWYgKCFleGNlcHRpb25LZXlzKVxyXG4gICAgICAgIHJldHVybiBhc3NldExpc3Q7XHJcbiAgICBsZXQgZmlsdGVyZWRMaXN0O1xyXG4gICAgLy8gb25lIGtleSB0byBleGNlcHQgZnJvbSBhc3NldCBsaXN0XHJcbiAgICBpZiAodHlwZW9mIGV4Y2VwdGlvbktleXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgZmlsdGVyZWRMaXN0ID0gYXNzZXRMaXN0LmZpbHRlcihhc3NldCA9PiBhc3NldC5rZXkgIT09IGV4Y2VwdGlvbktleXMpO1xyXG4gICAgfVxyXG4gICAgLy8gc2V2ZXJhbCBrZXkgbGlzdCB0byBleGNlcHQgZnJvbSBhc3NldCBsaXN0XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBmaWx0ZXJlZExpc3QgPSBhc3NldExpc3QuZmlsdGVyKChhc3NldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhjZXB0aW9uS2V5cy5pbmRleE9mKGFzc2V0LmtleSkgPCAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpbHRlcmVkTGlzdDtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQ29tbW9uUm9vdFVybDtcclxuZXhwb3J0IHsgQ29tbW9uVUksIENvbW1vblNmeCwgQ29tbW9uU25zLCBHZXRBc3NldEZpbGVzIH07XHJcbiIsImltcG9ydCB7IEdldExvY2FsU3RvcmFnZUl0ZW0sIFNldExvY2FsU3RvcmFnZUl0ZW0gfSBmcm9tICdAc3JjL3V0aWxzL3N0b3JhZ2UnO1xyXG5pbXBvcnQgeyBHZXRBc3NldEZpbGVzIH0gZnJvbSAnLi4vYXNzZXRVdGlscyc7XHJcbmNvbnN0IEdhbWVBdWRpbyA9IHtcclxuICAgIHdob2xlR2FtZURhdGE6IHt9LFxyXG4gICAgYmdtTGlzdDogW10sXHJcbiAgICBzZnhMaXN0OiBbXSxcclxuICAgIGJnbUtleUxpc3Q6IFtdLFxyXG4gICAgc2Z4S2V5TGlzdDogW10sXHJcbiAgICBpc0JnbU11dGU6IGZhbHNlLFxyXG4gICAgaXNTZnhNdXRlOiBmYWxzZSxcclxuICAgIGJnbVZvbHVtZTogMC41LFxyXG4gICAgc2Z4Vm9sdW1lOiAwLjUsXHJcbiAgICBzZXRCZ21NdXRlOiBmdW5jdGlvbiAoaXNNdXRlKSB7XHJcbiAgICAgICAgdGhpcy5pc0JnbU11dGUgPSBpc011dGU7XHJcbiAgICAgICAgdGhpcy5iZ21MaXN0LmZvckVhY2goYmdtID0+IGJnbS5zZXRNdXRlKGlzTXV0ZSkpO1xyXG4gICAgICAgIGlmIChpc011dGUpXHJcbiAgICAgICAgICAgIHRoaXMuYmdtS2V5TGlzdC5tYXAoa2V5ID0+IHRoaXMucGF1c2VCZ20oa2V5KSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmJnbUtleUxpc3QubWFwKGtleSA9PiB0aGlzLnJlc3VtZUJnbShrZXkpKTtcclxuICAgICAgICBTZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnaXNCZ21NdXRlJywgaXNNdXRlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRTZnhNdXRlOiBmdW5jdGlvbiAoaXNNdXRlKSB7XHJcbiAgICAgICAgdGhpcy5pc1NmeE11dGUgPSBpc011dGU7XHJcbiAgICAgICAgdGhpcy5zZnhMaXN0LmZvckVhY2goc2Z4ID0+IHNmeC5zZXRNdXRlKGlzTXV0ZSkpO1xyXG4gICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oR2FtZUF1ZGlvLndob2xlR2FtZURhdGEsICdpc1NmeE11dGUnLCBpc011dGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldEJnbVZvbHVtZTogZnVuY3Rpb24gKHZvbHVtZSkge1xyXG4gICAgICAgIHRoaXMuYmdtVm9sdW1lID0gdm9sdW1lO1xyXG4gICAgICAgIHRoaXMuYmdtTGlzdC5mb3JFYWNoKGJnbSA9PiBiZ20uc2V0Vm9sdW1lKHZvbHVtZSkpO1xyXG4gICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oR2FtZUF1ZGlvLndob2xlR2FtZURhdGEsICdiZ21Wb2x1bWUnLCB2b2x1bWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldFNmeFZvbHVtZTogZnVuY3Rpb24gKHZvbHVtZSkge1xyXG4gICAgICAgIHRoaXMuc2Z4Vm9sdW1lID0gdm9sdW1lO1xyXG4gICAgICAgIHRoaXMuc2Z4TGlzdC5mb3JFYWNoKHNmeCA9PiBzZnguc2V0Vm9sdW1lKHZvbHVtZSkpO1xyXG4gICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oR2FtZUF1ZGlvLndob2xlR2FtZURhdGEsICdzZnhWb2x1bWUnLCB2b2x1bWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHBsYXlCZ206IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICBjb25zdCBwbGF5QmdtID0gdGhpcy5iZ21MaXN0LmZpbmQoYmdtID0+IGJnbS5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKHBsYXlCZ20pXHJcbiAgICAgICAgICAgIHBsYXlCZ20ucGxheSgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQXVkaW9dIHBsYXlCZ206ICR7a2V5fSBub3QgZm91bmRgKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBwYXVzZUJnbTogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IGJnbSA9IHRoaXMuYmdtTGlzdC5maW5kKGJnbSA9PiBiZ20ua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChiZ20pXHJcbiAgICAgICAgICAgIGJnbS5wYXVzZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHJlc3VtZUJnbTogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IGJnbSA9IHRoaXMuYmdtTGlzdC5maW5kKGJnbSA9PiBiZ20ua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChiZ20pXHJcbiAgICAgICAgICAgIGJnbS5yZXN1bWUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzdG9wQmdtOiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgYmdtID0gdGhpcy5iZ21MaXN0LmZpbmQoYmdtID0+IGJnbS5rZXkgPT09IGtleSk7XHJcbiAgICAgICAgaWYgKGJnbSlcclxuICAgICAgICAgICAgYmdtLnN0b3AoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBwbGF5U2Z4OiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcGxheVNmeCA9IHRoaXMuc2Z4TGlzdC5maW5kKHNmeCA9PiBzZngua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChwbGF5U2Z4KVxyXG4gICAgICAgICAgICBwbGF5U2Z4LnBsYXkoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0F1ZGlvXSBwbGF5U2Z4OiAke2tleX0gbm90IGZvdW5kYCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc3RvcFNmeDogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNvbnN0IHNmeCA9IHRoaXMuc2Z4TGlzdC5maW5kKHNmeCA9PiBzZngua2V5ID09PSBrZXkpO1xyXG4gICAgICAgIGlmIChzZngpXHJcbiAgICAgICAgICAgIHNmeC5zdG9wKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgLy8gcGxheSAmIHN0b3AgY29udHJvbCBmb3IgaW5zdGFuY2UgYW55IHNmeFxyXG4gICAgcGxheVNmeEluc3RhbmNlTG9vcDogZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNmeEtleUxpc3QuZmluZChrZXkgPT4ga2V5ID09PSBpbnN0YW5jZS5rZXkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaW5zdGFuY2UucGxheSh7XHJcbiAgICAgICAgICAgIG11dGU6IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZUF1ZGlvLndob2xlR2FtZURhdGEsICdpc1NmeE11dGUnKSxcclxuICAgICAgICAgICAgdm9sdW1lOiBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCAnc2Z4Vm9sdW1lJyksXHJcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgc3RvcFNmeEluc3RhbmNlTG9vcDogZnVuY3Rpb24gKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNmeEtleUxpc3QuZmluZChrZXkgPT4ga2V5ID09PSBpbnN0YW5jZS5rZXkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaW5zdGFuY2Uuc3RvcCgpO1xyXG4gICAgICAgIGluc3RhbmNlLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgIGluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEdhbWVEYXRhQXVkaW8gPSB7XHJcbiAgICBiZ21Wb2x1bWU6IDAuNSxcclxuICAgIHNmeFZvbHVtZTogMC41LFxyXG4gICAgaXNCZ21NdXRlOiBmYWxzZSxcclxuICAgIGlzU2Z4TXV0ZTogZmFsc2UsXHJcbn07XHJcbmNvbnN0IEdldEF1ZGlvQXNzZXRzID0gKHNmeEtleUxpc3QsIGJnbUtleUxpc3QsIGV4Y2VwdGlvbktleXMpID0+IHtcclxuICAgIEdhbWVBdWRpby5zZnhLZXlMaXN0ID0gR2V0QXNzZXRGaWxlcyhzZnhLZXlMaXN0LCBleGNlcHRpb25LZXlzKS5tYXAoYXNzZXQgPT4gYXNzZXQua2V5KTtcclxuICAgIGlmIChiZ21LZXlMaXN0KVxyXG4gICAgICAgIEdhbWVBdWRpby5iZ21LZXlMaXN0ID0gR2V0QXNzZXRGaWxlcyhiZ21LZXlMaXN0LCBleGNlcHRpb25LZXlzKS5tYXAoYXNzZXQgPT4gYXNzZXQua2V5KTtcclxuICAgIGVsc2VcclxuICAgICAgICBHYW1lQXVkaW8uYmdtS2V5TGlzdCA9IFtdO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAuLi5zZnhLZXlMaXN0LFxyXG4gICAgICAgIC4uLmJnbUtleUxpc3QsXHJcbiAgICBdO1xyXG59O1xyXG5jb25zdCBJbml0R2FtZUF1ZGlvID0gKCkgPT4ge1xyXG4gICAgY29uc3QgW2JnbVZvbHVtZSwgc2Z4Vm9sdW1lLCBpc0JnbU11dGUsIGlzU2Z4TXV0ZV0gPSBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVBdWRpby53aG9sZUdhbWVEYXRhLCBbJ2JnbVZvbHVtZScsICdzZnhWb2x1bWUnLCAnaXNCZ21NdXRlJywgJ2lzU2Z4TXV0ZSddKTtcclxuICAgIEdhbWVBdWRpby5zZXRCZ21Wb2x1bWUoYmdtVm9sdW1lKTtcclxuICAgIEdhbWVBdWRpby5zZXRTZnhWb2x1bWUoc2Z4Vm9sdW1lKTtcclxuICAgIEdhbWVBdWRpby5zZXRCZ21NdXRlKGlzQmdtTXV0ZSk7XHJcbiAgICBHYW1lQXVkaW8uc2V0U2Z4TXV0ZShpc1NmeE11dGUpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lQXVkaW8gPSAoc2NlbmUsIGdhbWVEYXRhKSA9PiB7XHJcbiAgICBHYW1lQXVkaW8ud2hvbGVHYW1lRGF0YSA9IGdhbWVEYXRhO1xyXG4gICAgR2FtZUF1ZGlvLmJnbUxpc3QgPSBHYW1lQXVkaW8uYmdtS2V5TGlzdCAmJiBHYW1lQXVkaW8uYmdtS2V5TGlzdC5tYXAoa2V5ID0+IHNjZW5lLnNvdW5kLmFkZChrZXksIHsgbG9vcDogdHJ1ZSB9KSk7XHJcbiAgICBHYW1lQXVkaW8uc2Z4TGlzdCA9IEdhbWVBdWRpby5zZnhLZXlMaXN0ICYmIEdhbWVBdWRpby5zZnhLZXlMaXN0Lm1hcChrZXkgPT4gc2NlbmUuc291bmQuYWRkKGtleSkpO1xyXG4gICAgSW5pdEdhbWVBdWRpbygpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lQXVkaW87XHJcbmV4cG9ydCB7IEdhbWVEYXRhQXVkaW8sIEdldEF1ZGlvQXNzZXRzLCBJbml0R2FtZUF1ZGlvLCBDcmVhdGVHYW1lQXVkaW8gfTtcclxuIiwiY29uc3QgRGVwdGggPSB7XHJcbiAgICB0cmVlOiA5MCxcclxuICAgIGJsb2NrOiAxMDAsXHJcbiAgICBjbG91ZDogMTIwLFxyXG4gICAgbWlzdDogMTIwLFxyXG4gICAgd2FsbDogMTQwLFxyXG4gICAgdHh0OiAxNTAsXHJcbiAgICBwb3BVcDogNDAwLFxyXG4gICAgc2V0dGluZzogNTAwLFxyXG4gICAgd2FybmluZzogNjAwLFxyXG4gICAgZ2FtZU92ZXI6IDEwMDAsXHJcbiAgICBwYXJ0aWNsZTogMTEwMCxcclxuICAgIG5ld0Jlc3Q6IDEyMDAsXHJcbiAgICBoaWdoZXN0OiAxNTAwLFxyXG4gICAgZnVsbFNjcmVlbjogMTYwMCxcclxufTtcclxuY29uc3QgU2V0RGVwdGggPSAodGFyZ2V0T2JqLCB0eXBlKSA9PiB7XHJcbiAgICBpZiAoIURlcHRoW3R5cGVdKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdTZXREZXB0aDogdHlwZSBpcyBub3QgZm91bmQgaW4gdGhlIGRlcHRoIGxpc3Q6JywgdGFyZ2V0T2JqLCB0eXBlKTtcclxuICAgICAgICBjb25zb2xlLmxvZygndGFyZ2V0T2JqLCB0eXBlOiAnLCB0YXJnZXRPYmosIHR5cGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0YXJnZXRPYmouc2V0RGVwdGgpXHJcbiAgICAgICAgdGFyZ2V0T2JqLnNldERlcHRoKERlcHRoW3R5cGVdKTtcclxuICAgIGVsc2VcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1NldERlcHRoOiB0YXJnZXRPYmogaXMgbm90IFBoYXNlci5HYW1lT2JqZWN0cycpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBEZXB0aDtcclxuZXhwb3J0IHsgU2V0RGVwdGggfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IFR4dFRpdGxlSGVhZFNpemUgPSA1MDtcclxuY29uc3QgVHh0VGl0bGVTaXplID0gMzA7XHJcbmNvbnN0IFR4dFRpdGxlSGVpZ2h0R2FwID0gNjA7XHJcbmNvbnN0IFR4dE92ZXJIZWFkU2l6ZSA9IFZpZXcudyAvIDQ7XHJcbmNvbnN0IFR4dE1hcmdpbiA9IDI2O1xyXG5jb25zdCBUeHRQYWRkaW5nID0gODtcclxuY29uc3QgVHh0QWxwaGEgPSAwLjk7XHJcbmNvbnN0IFR4dFNpemUgPSAyMDtcclxuY29uc3QgVHh0RmFtaWx5ID0gJ0FyaWFsIEJsYWNrJztcclxuY29uc3QgVHh0QmFja2dyb3VuZENvbG9yID0gJyMyNDI0MjQnO1xyXG5jb25zdCBDb250ZXh0TWFyZ2luVyA9IFZpZXcudyAvIDEyO1xyXG5jb25zdCBDb250ZXh0TWFyZ2luSCA9IFZpZXcuaCAvIDEyO1xyXG5jb25zdCBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSA9ICh0ZXh0KSA9PiB7XHJcbiAgICB0ZXh0LnNldE9yaWdpbigwLjUsIDAuNSk7XHJcbiAgICB0ZXh0LnNldEZvbnRTaXplKFR4dFNpemUpO1xyXG4gICAgdGV4dC5zZXRGb250RmFtaWx5KFR4dEZhbWlseSk7XHJcbiAgICByZXR1cm4gdGV4dDtcclxufTtcclxuZXhwb3J0IHsgVHh0VGl0bGVIZWFkU2l6ZSwgVHh0VGl0bGVTaXplLCBUeHRUaXRsZUhlaWdodEdhcCwgVHh0T3ZlckhlYWRTaXplLCBUeHRNYXJnaW4sIFR4dFBhZGRpbmcsIFR4dEFscGhhLCBUeHRTaXplLCBUeHRGYW1pbHksIFR4dEJhY2tncm91bmRDb2xvciwgQ29udGV4dE1hcmdpblcsIENvbnRleHRNYXJnaW5ILCBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSB9O1xyXG4iLCIvLyBpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XHJcbmltcG9ydCBCbG9ja1N5c3RlbSBmcm9tICcuL3N5c3RlbSc7XHJcbmltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlIH0gZnJvbSAnLi4vZm9udCc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5jbGFzcyBCYXNpY0Jsb2NrIGV4dGVuZHMgUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XHJcbiAgICAvLyBwdWJsaWMgdGVzdE9iajtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuaXNFdnRDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50eXBlTmFtZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuc3Bhd25DaGFuY2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMuYkRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmlzT25TY3JlZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmluaXRQcnBvZXJ0aWVzKCk7XHJcbiAgICAgICAgdGhpcy5pbml0Q2hpbGRyZW4oc2NlbmUpO1xyXG4gICAgICAgIHRoaXMuaW5pdFBoeXNpY3Moc2NlbmUpO1xyXG4gICAgICAgIFNldERlcHRoKHRoaXMsICdibG9jaycpO1xyXG4gICAgICAgIHNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuICAgIH1cclxuICAgIGluaXRQcnBvZXJ0aWVzKCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBgJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX0tJHtQaGFzZXIuTWF0aC5STkQudXVpZCgpfWA7XHJcbiAgICB9XHJcbiAgICBpbml0Q2hpbGRyZW4oc2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNoYXBlSW1nID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdiYWxsJyk7XHJcbiAgICAgICAgdGhpcy50eXBlVHh0ID0gc2NlbmUuYWRkLnRleHQoMCwgMCwgJycpO1xyXG4gICAgICAgIHRoaXMudHlwZUltZyA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnJyk7XHJcbiAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUodGhpcy50eXBlVHh0KTtcclxuICAgICAgICB0aGlzLmluaXRUeXBlVHh0KCk7XHJcbiAgICAgICAgdGhpcy5hZGQoW3RoaXMuc2hhcGVJbWcsIHRoaXMudHlwZVR4dCwgdGhpcy50eXBlSW1nXSk7XHJcbiAgICAgICAgLy8gdGhpcy50ZXN0T2JqID0gc2NlbmUubWF0dGVyLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIDAsICdiYWxsJyk7XHJcbiAgICAgICAgLy8gdGhpcy50ZXN0T2JqLnNldENpcmNsZSg0MCwgNDApO1xyXG4gICAgICAgIC8vIHRoaXMudGVzdE9iai5zZXRCb3VuY2UoMSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMudGVzdE9iajogJywgdGhpcy50ZXN0T2JqKTtcclxuICAgIH1cclxuICAgIGluaXRQaHlzaWNzKHNjZW5lKSB7XHJcbiAgICAgICAgLy8gbnVtYmVyIGlzIG1lYW5pbmdsZXNzIGp1c3QgZGVmYXVsdCB2YWx1ZVxyXG4gICAgICAgIC8vIGZvciBhZGQgY29udGFpbmVyIHRvIG1hdHRlciBnYW1lIG9iamVjdFxyXG4gICAgICAgIHRoaXMuc2V0U2l6ZSgxMDAsIDEwMCk7XHJcbiAgICAgICAgLy8gYWRkIHRvIG1hdHRlciBnYW1lIG9iamVjdFxyXG4gICAgICAgIHRoaXMucGh5c2ljc0NvbiA9IHNjZW5lLm1hdHRlci5hZGQuZ2FtZU9iamVjdCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NDb24uc2V0RnJpY3Rpb24oMC4wMDUpO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc0Nvbi5zZXRCb3VuY2UoMSk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzQ29uLnNldFNlbnNvcih0cnVlKTtcclxuICAgIH1cclxuICAgIGdldEJvZHkoKSB7IHJldHVybiB0aGlzLmJvZHk7IH1cclxuICAgIGdldFNoYXBlKCkgeyByZXR1cm4gdGhpcy5zaGFwZTsgfVxyXG4gICAgYWRkU2hhcGUoc2hhcGUpIHsgdGhpcy5zaGFwZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zaGFwZSksIHNoYXBlKTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIHNldFNoYXBlKHNoYXBlKSB7IHRoaXMuc2hhcGUgPSBzaGFwZTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGdldFNoYXBlTmFtZSgpIHsgcmV0dXJuIHRoaXMuc2hhcGVOYW1lOyB9XHJcbiAgICBzZXRTaGFwZU5hbWUobmFtZSkgeyB0aGlzLnNoYXBlTmFtZSA9IG5hbWU7IHJldHVybiB0aGlzOyB9XHJcbiAgICBnZXRTaGFwZUltZygpIHsgcmV0dXJuIHRoaXMuc2hhcGVJbWc7IH1cclxuICAgIGdldFNjb3JlKCkgeyByZXR1cm4gdGhpcy5zY29yZTsgfVxyXG4gICAgc2V0U2NvcmUoc2NvcmUpIHsgdGhpcy5zY29yZSA9IHNjb3JlOyByZXR1cm4gdGhpczsgfVxyXG4gICAgYWRkU2NvcmUoc2NvcmUpIHsgdGhpcy5zY29yZSArPSBzY29yZTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGdldFRpbWVJbmNyZWFzZSgpIHsgcmV0dXJuIHRoaXMudGltZUluY3JlYXNlOyB9XHJcbiAgICBzZXRUaW1lSW5jcmVhc2UoZGF0YSkge1xyXG4gICAgICAgIHRoaXMudGltZUluY3JlYXNlID0ge1xyXG4gICAgICAgICAgICBjaGFuY2U6IGRhdGEuY2hhbmNlLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS52YWx1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBnZXRTcGF3blJuZENoYW5jZSgpIHsgcmV0dXJuIHRoaXMuc3Bhd25DaGFuY2U7IH1cclxuICAgIHNldFNwYXduUm5kQ2hhbmNlKGNoYW5jZU51bSkgeyByZXR1cm4gdGhpcy5zcGF3bkNoYW5jZSA9IGNoYW5jZU51bTsgfVxyXG4gICAgZ2V0VHlwZUltZygpIHsgcmV0dXJuIHRoaXMudHlwZUltZzsgfVxyXG4gICAgc2V0VHlwZUltZyh0eXBlVGV4dHVyZSkge1xyXG4gICAgICAgIGlmICghdHlwZVRleHR1cmUpXHJcbiAgICAgICAgICAgIHRoaXMudHlwZUltZy5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnR5cGVJbWcuc2V0VGV4dHVyZSh0eXBlVGV4dHVyZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRUeXBlSW1nRGlzcGxheVNpemUod2lkdGgsIGhlaWdodCkgeyB0aGlzLnR5cGVJbWcuc2V0RGlzcGxheVNpemUod2lkdGgsIGhlaWdodCk7IHJldHVybiB0aGlzOyB9XHJcbiAgICBpbml0VHlwZVR4dCgpIHtcclxuICAgICAgICB0aGlzLnNldFR5cGVUeHRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnNldFR5cGVUeHQoJycpO1xyXG4gICAgICAgIHRoaXMudHlwZVR4dC5zZXRGb250U2l6ZSg1MCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBnZXRUeXBlVHh0KCkgeyByZXR1cm4gdGhpcy50eXBlVHh0OyB9XHJcbiAgICBzZXRUeXBlVHh0KHRleHQpIHtcclxuICAgICAgICBpZiAoIXRoaXMudHlwZVR4dC52aXNpYmxlKVxyXG4gICAgICAgICAgICB0aGlzLnR5cGVUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBpZiAoIXRleHQpXHJcbiAgICAgICAgICAgIHRoaXMudHlwZVR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnR5cGVUeHQuc2V0VGV4dCh0ZXh0KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFR5cGVUeHRWaXNpYmxlKHZpc2libGUpIHsgdGhpcy50eXBlVHh0LnNldFZpc2libGUodmlzaWJsZSk7IHJldHVybiB0aGlzOyB9XHJcbiAgICBnZXRUeXBlTmFtZSgpIHsgcmV0dXJuIHRoaXMudHlwZU5hbWU7IH1cclxuICAgIHNldFR5cGVOYW1lKHR5cGVOYW1lKSB7IHJldHVybiB0aGlzLnR5cGVOYW1lID0gdHlwZU5hbWU7IH1cclxuICAgIGdldEJsb2NrRGF0YSgpIHsgcmV0dXJuIHRoaXMuYkRhdGE7IH1cclxuICAgIHNldEJsb2NrRGF0YShkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5iRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuYkRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgYWRkQmxvY2tEYXRhKGRhdGEpIHsgdGhpcy5iRGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iRGF0YSksIGRhdGEpOyB9XHJcbiAgICBnZXRQaHlzaWNzQ29uKCkgeyByZXR1cm4gdGhpcy5waHlzaWNzQ29uOyB9XHJcbiAgICBnZXRXaWR0aCgpIHsgcmV0dXJuIHRoaXMudHlwZUltZy53aWR0aDsgfVxyXG4gICAgZ2V0SGVpZ2h0KCkgeyByZXR1cm4gdGhpcy50eXBlSW1nLmhlaWdodDsgfVxyXG59XHJcbmNvbnN0IFNwYXduQmxvY2sgPSAoYmxvY2spID0+IHtcclxuICAgIFNldEJsb2NrSW5wdXRTZXR0aW5nKGJsb2NrKTtcclxuICAgIGJsb2NrLnNldFBvc2l0aW9uKEJsb2NrU3lzdGVtLmdldFJuZFNwYXduWCgpLCBCbG9ja1N5c3RlbS5zcGF3blkpO1xyXG4gICAgYmxvY2suc2V0QW5nbGUoQmxvY2tTeXN0ZW0uZ2V0Um5kQW5nbGUoKSk7XHJcbiAgICBibG9jay5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgYmxvY2suaXNPblNjcmVlbiA9IHRydWU7XHJcbiAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0SWdub3JlR3Jhdml0eShmYWxzZSk7XHJcbiAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U2Vuc29yKGZhbHNlKTtcclxuICAgIGJsb2NrLmdldEJsb2NrRGF0YSgpLnNwYXduICYmIGJsb2NrLmdldEJsb2NrRGF0YSgpLnNwYXduKCk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IFNldEJsb2NrSW5wdXRTZXR0aW5nID0gKGJsb2NrKSA9PiB7XHJcbiAgICBibG9jay5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgIGJsb2NrLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBibG9jay5zY2VuZS5pbnB1dC5zZXREcmFnZ2FibGUoYmxvY2ssIHRydWUpO1xyXG4gICAgYmxvY2sub24oJ3BvaW50ZXJkb3duJywgKHB0cikgPT4ge1xyXG4gICAgICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJEb3duKVxyXG4gICAgICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJEb3duKGJsb2NrLCBwdHIpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRJZ25vcmVHcmF2aXR5KHRydWUpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTdGF0aWModHJ1ZSk7XHJcbiAgICB9KTtcclxuICAgIGJsb2NrLm9uKCdkcmFnJywgKHB0cikgPT4ge1xyXG4gICAgICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS5kcmFnKVxyXG4gICAgICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5kcmFnKGJsb2NrLCBwdHIpO1xyXG4gICAgfSk7XHJcbiAgICBibG9jay5vbigncG9pbnRlcnVwJywgKHB0cikgPT4ge1xyXG4gICAgICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJVcClcclxuICAgICAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyVXAoYmxvY2ssIHB0cik7XHJcbiAgICAgICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldElnbm9yZUdyYXZpdHkoZmFsc2UpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTdGF0aWMoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICBibG9jay5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgICAgICBpZiAoYmxvY2suZ2V0QmxvY2tEYXRhKCkucHRyT3V0KVxyXG4gICAgICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5wdHJPdXQoYmxvY2spO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRJZ25vcmVHcmF2aXR5KGZhbHNlKTtcclxuICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U3RhdGljKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBTZXRCbG9ja1R5cGUySW5pdEJhc2ljID0gKGJsb2NrKSA9PiB7XHJcbiAgICBibG9jay5zZXRTY29yZSgwKTtcclxuICAgIGJsb2NrLnNldFRpbWVJbmNyZWFzZSh7IGNoYW5jZTogMCwgdmFsdWU6IDAgfSk7XHJcbiAgICBibG9jay5nZXRUeXBlSW1nKCkuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIGJsb2NrLmluaXRUeXBlVHh0KCk7XHJcbiAgICBibG9jay5zZXRCbG9ja0RhdGEoe30pO1xyXG4gICAgYmxvY2suc2V0QWxwaGEoMSk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGJsb2NrLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYmxvY2suc2NlbmUuaW5wdXQuc2V0RHJhZ2dhYmxlKGJsb2NrLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IERlYXRoQmxvY2sgPSAoYmxvY2spID0+IHtcclxuICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS5kZWF0aClcclxuICAgICAgICBibG9jay5nZXRCbG9ja0RhdGEoKS5kZWF0aCgoKSA9PiB7IERpc2FibGVCbG9jayhibG9jayk7IH0pO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIERpc2FibGVCbG9jayhibG9jayk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmNvbnN0IERpc2FibGVCbG9jayA9IChibG9jaykgPT4ge1xyXG4gICAgaWYgKGJsb2NrLmdldEJvZHkoKSkge1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRJZ25vcmVHcmF2aXR5KHRydWUpO1xyXG4gICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTZW5zb3IodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBibG9jay5pc09uU2NyZWVuID0gZmFsc2U7XHJcbiAgICBibG9jay5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIFNldEJsb2NrVHlwZTJJbml0QmFzaWMoYmxvY2spO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5jb25zdCBVcGRhdGVCbG9jayA9IChibG9jaywgdGltZSwgZGVsdGEpID0+IHtcclxuICAgIGlmICghYmxvY2sgfHwgIWJsb2NrLmdldEJsb2NrRGF0YSgpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmIChibG9jay5nZXRCbG9ja0RhdGEoKS51cGRhdGUpXHJcbiAgICAgICAgYmxvY2suZ2V0QmxvY2tEYXRhKCkudXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQmFzaWNCbG9jaztcclxuZXhwb3J0IHsgU3Bhd25CbG9jaywgRGVhdGhCbG9jaywgRGlzYWJsZUJsb2NrLCBTZXRCbG9ja1R5cGUySW5pdEJhc2ljLCBVcGRhdGVCbG9jaywgfTtcclxuIiwiY29uc3QgU2V0QmxvY2syQWQgPSAoYmxvY2spID0+IHtcclxuICAgIGxldCBiRGF0YSA9IHtcclxuICAgICAgICBwdHJEb3duOiAoYmxvY2spID0+IHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0clVwOiAoYmxvY2spID0+IHtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYWc6IChibG9jaykgPT4ge1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZ0VuZDogKGJsb2NrKSA9PiB7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTZXRCbG9jazJBZDtcclxuIiwiY29uc3QgSW5wdXQgPSB7XHJcbiAgICB0eXBlOiAnJyxcclxuICAgIHR5cGVIaXN0b3J5OiBbXSxcclxuICAgIGluaXRQb3M6IHsgeDogMCwgeTogMCB9LFxyXG4gICAgaXNIb2xkaW5nRG93bjogZmFsc2UsXHJcbiAgICBob2xkRHVyYXRpb246IDAsXHJcbiAgICBob2xkTWF4RHVyYXRpb246IDEwMDAsXHJcbiAgICBzdGFydEhvbGQ6IGZ1bmN0aW9uICgpIHsgdGhpcy5pc0hvbGRpbmdEb3duID0gdHJ1ZTsgcmV0dXJuIHRoaXM7IH0sXHJcbiAgICByZXNldEhvbGQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmlzSG9sZGluZ0Rvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmluaXRQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLmhvbGREdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5zZXRUeXBlKCcnKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBnZXRJc0hvbGRpbmdEb3duOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmlzSG9sZGluZ0Rvd247IH0sXHJcbiAgICBnZXRIb2xkRHVyYXRpb246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuaG9sZER1cmF0aW9uOyB9LFxyXG4gICAgc2V0SG9sZER1cmF0aW9uOiBmdW5jdGlvbiAoZHVyYXRpb24pIHsgdGhpcy5ob2xkRHVyYXRpb24gPSBkdXJhdGlvbjsgcmV0dXJuIHRoaXM7IH0sXHJcbiAgICBzZXRJbml0UG9zOiBmdW5jdGlvbiAoeCwgeSkgeyB0aGlzLmluaXRQb3MgPSB7IHg6IHgsIHk6IHkgfTsgcmV0dXJuIHRoaXM7IH0sXHJcbiAgICBjaGNrSXNIb2xkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG9sZER1cmF0aW9uID49IHRoaXMuaG9sZE1heER1cmF0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBnZXRUeXBlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnR5cGU7IH0sXHJcbiAgICBzZXRUeXBlOiBmdW5jdGlvbiAodHlwZSkgeyB0aGlzLnR5cGUgPSB0eXBlOyByZXR1cm4gdGhpczsgfSxcclxuICAgIGluaXRUeXBlSGlzdG9yeTogZnVuY3Rpb24gKCkgeyB0aGlzLnR5cGVIaXN0b3J5ID0gW107IH0sXHJcbiAgICBnZXRUeXBlSGlzdG9yeTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50eXBlSGlzdG9yeTsgfSxcclxuICAgIGdldExhc3Rlc3RJbnB1dFR5cGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudHlwZUhpc3RvcnlbdGhpcy50eXBlSGlzdG9yeS5sZW5ndGggLSAxXTsgfSxcclxuICAgIHB1c2gyVHlwZUhpc3Rvcnk6IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlSGlzdG9yeS5wdXNoKHR5cGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGVIaXN0b3J5O1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBJbml0SW5wdXQgPSAoKSA9PiB7XHJcbiAgICBJbnB1dC5yZXNldEhvbGQoKTtcclxuICAgIElucHV0LmluaXRUeXBlSGlzdG9yeSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVJbnB1dCA9IChzY2VuZSkgPT4ge1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgICAgIElucHV0LnN0YXJ0SG9sZCgpO1xyXG4gICAgfSk7XHJcbiAgICBJbml0SW5wdXQoKTtcclxufTtcclxuY29uc3QgVXBkYXRlSW5wdXQgPSAoZGVsdGEpID0+IHtcclxuICAgIGlmIChJbnB1dC5nZXRJc0hvbGRpbmdEb3duKCkpXHJcbiAgICAgICAgSW5wdXQuc2V0SG9sZER1cmF0aW9uKElucHV0LmdldEhvbGREdXJhdGlvbigpICsgZGVsdGEpO1xyXG59O1xyXG5jb25zdCBJbnB1dFB0ckRvd24gPSAocHRyKSA9PiB7XHJcbiAgICBJbnB1dC5zZXRJbml0UG9zKHB0ci54LCBwdHIueSk7XHJcbn07XHJcbmNvbnN0IElucHV0UHRyVXAgPSAocHRyKSA9PiB7XHJcbiAgICByZXR1cm4gU2V0SW5wdXRUeXBlKElucHV0LmluaXRQb3MsIHB0cik7XHJcbn07XHJcbmNvbnN0IElucHV0RHJhZyA9IChwdHIpID0+IHtcclxufTtcclxuY29uc3QgSW5wdXRQdHJPdXQgPSAoKSA9PiB7XHJcbiAgICBJbnB1dC5yZXNldEhvbGQoKTtcclxufTtcclxuY29uc3QgQ2hja1N3aXBlRGlyZWN0aW9uID0gKGluaXRQb3MsIHB0cikgPT4ge1xyXG4gICAgY29uc3QgeCA9IHB0ci54IC0gaW5pdFBvcy54O1xyXG4gICAgY29uc3QgeSA9IHB0ci55IC0gaW5pdFBvcy55O1xyXG4gICAgaWYgKE1hdGguYWJzKHgpID4gTWF0aC5hYnMoeSkpIHtcclxuICAgICAgICBpZiAoeCA+IDApXHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ3N3aXBlUmlnaHQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ3N3aXBlTGVmdCcpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKHkgPCAwKVxyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCdzd2lwZVVwJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBJbnB1dC5zZXRUeXBlKCdzd2lwZURvd24nKTtcclxuICAgIH1cclxufTtcclxuLy8gc2V0IGNvbWZ5IHRvdWNoIHRvIG5vdCBqdWRnZSBhcyBzd2lwZSB3aGVuIHVzZSB3aXRoIGFjdHVhbCBmaW5nZXJcclxuY29uc3QgQ29tZnlHYXBUb3VjaFZhbHVlID0gMTU7XHJcbmNvbnN0IFNldElucHV0VHlwZSA9IChpbml0UG9zLCBwdHIpID0+IHtcclxuICAgIC8vIHN3aXBlIG1vdGlvblxyXG4gICAgY29uc3QgY2hja1Bvc1ggPSBNYXRoLmFicyhpbml0UG9zLnggLSBwdHIueCkgPiBDb21meUdhcFRvdWNoVmFsdWU7XHJcbiAgICBjb25zdCBjaGNrUG9zWSA9IE1hdGguYWJzKGluaXRQb3MueSAtIHB0ci55KSA+IENvbWZ5R2FwVG91Y2hWYWx1ZTtcclxuICAgIGlmIChjaGNrUG9zWCB8fCBjaGNrUG9zWSlcclxuICAgICAgICBDaGNrU3dpcGVEaXJlY3Rpb24oaW5pdFBvcywgcHRyKTtcclxuICAgIC8vIGhvbGQgb3IgdG91Y2hcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChJbnB1dC5jaGNrSXNIb2xkKCkpIHtcclxuICAgICAgICAgICAgSW5wdXQuc2V0VHlwZSgnaG9sZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIElucHV0LnNldFR5cGUoJ3RvdWNoJyk7XHJcbiAgICB9XHJcbiAgICBJbnB1dC5wdXNoMlR5cGVIaXN0b3J5KElucHV0LmdldFR5cGUoKSk7XHJcbiAgICBJbnB1dC5yZXNldEhvbGQoKTtcclxuICAgIHJldHVybiBJbnB1dC5nZXRMYXN0ZXN0SW5wdXRUeXBlKCk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IElucHV0O1xyXG5leHBvcnQgeyBDcmVhdGVJbnB1dCwgVXBkYXRlSW5wdXQsIElucHV0UHRyRG93biwgSW5wdXRQdHJVcCwgSW5wdXREcmFnLCBJbnB1dFB0ck91dCwgU2V0SW5wdXRUeXBlIH07XHJcbiIsImltcG9ydCB7IEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBJbnB1dFB0ckRvd24sIElucHV0UHRyVXAsIElucHV0UHRyT3V0IH0gZnJvbSAnLi4vLi4vaW5wdXQnO1xyXG5pbXBvcnQgeyBBZGRPYnN0YWNsZUJsb2NrLCBDbGVhckJsb2NrIH0gZnJvbSAnLi4vc3lzdGVtJztcclxuaW1wb3J0IHsgQ29tbW9uU2l6ZSB9IGZyb20gJy4nO1xyXG5jb25zdCBTZXRCbG9jazJQb3dlciA9IChibG9jaykgPT4ge1xyXG4gICAgY29uc3QgeyBzY2VuZSB9ID0gYmxvY2s7XHJcbiAgICBjb25zdCBybmREb3duRHVyYXRpb25NYXggPSBHZXRSbmROdW0oMC41LCAxLjUpO1xyXG4gICAgY29uc3QgaW5pdFB0ciA9IChiRGF0YSwgYmxvY2spID0+IHtcclxuICAgICAgICBiRGF0YS5pc1B0ckRvd24gPSBmYWxzZTtcclxuICAgICAgICBiRGF0YS5kb3duRHVyYXRpb24gPSAwO1xyXG4gICAgICAgIGJsb2NrLnNldEFscGhhKDEpO1xyXG4gICAgfTtcclxuICAgIGxldCBiRGF0YSA9IHtcclxuICAgICAgICBpc1B0ckRvd246IGZhbHNlLFxyXG4gICAgICAgIGlzQ29tcGxldGU6IGZhbHNlLFxyXG4gICAgICAgIGRvd25EdXJhdGlvbjogMCxcclxuICAgICAgICBkb3duRHVyYXRpb25NYXg6IE1hdGguZmxvb3Iocm5kRG93bkR1cmF0aW9uTWF4ICogMTAwMCksXHJcbiAgICAgICAgcHRyRG93bjogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHtcclxuICAgICAgICAgICAgSW5wdXRQdHJEb3duKHB0cik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHRyRG93bikge1xyXG4gICAgICAgICAgICAgICAgQWRkT2JzdGFjbGVCbG9jayhibG9jayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pc1B0ckRvd24gPSB0cnVlO1xyXG4gICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgncG93ZXJCbG9ja09uJyk7XHJcbiAgICAgICAgICAgIGJsb2NrLnNldEFscGhhKDAuNSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHR3TGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB0d0xpc3QucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiAwLCB0bzogdGhpcy5kb3duRHVyYXRpb25NYXgsIGR1cmF0aW9uOiB0aGlzLmRvd25EdXJhdGlvbk1heCxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBrZWVwIHByZXNzIHBvd2VyIGJ0blxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHRyRG93bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3duRHVyYXRpb24gPSB0dy5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlbGVhc2UgcG93ZXIgYnRuIGJlZm9yZSBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRQdHIodGhpcywgYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKHR3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9uZSBwb3dlciBidG4gcGxheSBzZnhcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQdHJEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3TGlzdC5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpbml0UHRyKHRoaXMsIGJsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdwb3dlckJsb2NrT2ZmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogMSwgdG86IDEuMSwgZHVyYXRpb246IDI1MCwgeW95bzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRTY2FsZShkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0U2NhbGUoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3RvdWNoU2Z4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xlYXJCbG9jayhibG9jaywgYmxvY2suZ2V0U2NvcmUoKSAqIHRoaXMuZG93bkR1cmF0aW9uTWF4IC8gMTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJVcDogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHtcclxuICAgICAgICAgICAgYmxvY2suc2V0QWxwaGEoMSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tcGxldGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1B0ckRvd24gfHwgSW5wdXRQdHJVcChwdHIpICE9PSAndG91Y2gnKSB7XHJcbiAgICAgICAgICAgICAgICBBZGRPYnN0YWNsZUJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjaGNrIGlzIGtlZXAgcHJlc3MgdW50aWwgZG9uZVxyXG4gICAgICAgICAgICBpbml0UHRyKHRoaXMsIGJsb2NrKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHB0ck91dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBJbnB1dFB0ck91dCgpO1xyXG4gICAgICAgICAgICBpbml0UHRyKHRoaXMsIGJsb2NrKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGJsb2NrLmdldFR5cGVJbWcoKS5zZXREaXNwbGF5U2l6ZShDb21tb25TaXplLCBDb21tb25TaXplKTtcclxuICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldEJsb2NrMlBvd2VyO1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgSW5wdXRQdHJEb3duLCBJbnB1dFB0ck91dCwgSW5wdXRQdHJVcCB9IGZyb20gJy4uLy4uL2lucHV0JztcclxuaW1wb3J0IHsgQWRkT2JzdGFjbGVCbG9jaywgQ2xlYXJCbG9jayB9IGZyb20gJy4uL3N5c3RlbSc7XHJcbmltcG9ydCB7IENvbW1vblNpemUgfSBmcm9tICcuJztcclxuY29uc3QgU2V0QmxvY2syTG9hZGluZyA9IChibG9jaykgPT4ge1xyXG4gICAgYmxvY2suc2V0VHlwZVR4dCgnJScpO1xyXG4gICAgYmxvY2suZ2V0VHlwZVR4dCgpLnNldEZvbnRTaXplKDUwKTtcclxuICAgIGxldCBiRGF0YSA9IHtcclxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIHB0ckRvd246IGZ1bmN0aW9uIChibG9jaywgcHRyKSB7IElucHV0UHRyRG93bihwdHIpOyB9LFxyXG4gICAgICAgIHB0clVwOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmcgfHwgSW5wdXRQdHJVcChwdHIpICE9PSAndG91Y2gnKSB7XHJcbiAgICAgICAgICAgICAgICBBZGRPYnN0YWNsZUJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHJuZER1cmF0aW9uID0gR2V0Um5kSW50KDEsIDQpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzU2Z4ID0gYmxvY2suc2NlbmUuc291bmQuYWRkKCdsb2FkaW5nQmxvY2tPblByb2Nlc3MnKTtcclxuICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZnhJbnN0YW5jZUxvb3AocHJvY2Vzc1NmeCk7XHJcbiAgICAgICAgICAgIGJsb2NrLnNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgICAgIGZyb206IDAsIHRvOiAxMDAsIGR1cmF0aW9uOiBybmREdXJhdGlvbiAqIDEwMDAsXHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGRhdGEudmFsdWUudG9GaXhlZCgwKTtcclxuICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRUeXBlVHh0KHBlcmNlbnRhZ2UgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8uc3RvcFNmeEluc3RhbmNlTG9vcChwcm9jZXNzU2Z4KTtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgnbG9hZGluZ0Jsb2NrRG9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2V0VHlwZVR4dCgnMTAwJScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndG91Y2hTZngnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xlYXJCbG9jayhibG9jaywgYmxvY2suZ2V0U2NvcmUoKSAqIHJuZER1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJPdXQ6IGZ1bmN0aW9uICgpIHsgSW5wdXRQdHJPdXQoKTsgfSxcclxuICAgIH07XHJcbiAgICBibG9jay5nZXRUeXBlSW1nKCkuc2V0RGlzcGxheVNpemUoQ29tbW9uU2l6ZSwgQ29tbW9uU2l6ZSk7XHJcbiAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBTZXRCbG9jazJMb2FkaW5nO1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBBZGRPYnN0YWNsZUJsb2NrLCBDbGVhckJsb2NrIH0gZnJvbSAnLi4vc3lzdGVtJztcclxuaW1wb3J0IHsgSW5wdXRQdHJEb3duLCBJbnB1dFB0clVwLCBJbnB1dFB0ck91dCB9IGZyb20gJy4uLy4uL2lucHV0JztcclxuaW1wb3J0IHsgQ29tbW9uU2l6ZSB9IGZyb20gJy4nO1xyXG5jb25zdCBTZXRCbG9jazJUb3VjaCA9IChibG9jaykgPT4ge1xyXG4gICAgY29uc3Qgcm5kVG91Y2hDbnQgPSBHZXRSbmRJbnQoMiwgNSk7XHJcbiAgICBjb25zdCBkaXNhYmxlVG91Y2hEZWxheVRpbWUgPSAyNDA7XHJcbiAgICBsZXQgYkRhdGEgPSB7XHJcbiAgICAgICAgdG91Y2hDbnQ6IDAsXHJcbiAgICAgICAgbWF4VG91Y2hDbnQ6IHJuZFRvdWNoQ250LFxyXG4gICAgICAgIGlzQWJsZTJUb3VjaDogdHJ1ZSxcclxuICAgICAgICBwdHJEb3duOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikgeyBJbnB1dFB0ckRvd24ocHRyKTsgfSxcclxuICAgICAgICBwdHJVcDogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHtcclxuICAgICAgICAgICAgaWYgKElucHV0UHRyVXAocHRyKSAhPT0gJ3RvdWNoJykge1xyXG4gICAgICAgICAgICAgICAgQWRkT2JzdGFjbGVCbG9jayhibG9jayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWJsZTJUb3VjaClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy50b3VjaENudCsrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy50b3VjaENudCA+PSB0aGlzLm1heFRvdWNoQ250KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQ250ID0gMDtcclxuICAgICAgICAgICAgICAgIENsZWFyQmxvY2soYmxvY2ssIGJsb2NrLmdldFNjb3JlKCkgKiB0aGlzLm1heFRvdWNoQ250KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgY2xpY2ssIHRoZW4gYWJsZSBhZnRlciBkZWxheVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FibGUyVG91Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLnNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAxLCB0bzogMS4xLCBkdXJhdGlvbjogZGlzYWJsZVRvdWNoRGVsYXlUaW1lLCB5b3lvOiB0cnVlLCBlYXNlOiAnQm91bmNlJyxcclxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLnNldFNjYWxlKGRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5zZXRTY2FsZSgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FibGUyVG91Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJPdXQ6IGZ1bmN0aW9uICgpIHsgSW5wdXRQdHJPdXQoKTsgfVxyXG4gICAgfTtcclxuICAgIGJsb2NrLmdldFR5cGVJbWcoKS5zZXREaXNwbGF5U2l6ZShDb21tb25TaXplLCBDb21tb25TaXplKTtcclxuICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNldEJsb2NrMlRvdWNoO1xyXG4iLCJpbXBvcnQgeyBJbnB1dFB0ckRvd24sIElucHV0UHRyVXAsIElucHV0UHRyT3V0IH0gZnJvbSAnLi4vLi4vaW5wdXQnO1xyXG5pbXBvcnQgeyBBZGRPYnN0YWNsZUJsb2NrIH0gZnJvbSAnLi4vc3lzdGVtJztcclxuY29uc3QgT2JzdGFjbGVUZXh0dXJlTGlzdCA9IFsnb2JzdGFjbGVCYWxsJywgJ29ic3RhY2xlUmVjdCcsICdvYnN0YWNsZVNxdWFyZSddO1xyXG5jb25zdCBTZXRPYnN0YWNsZSA9IChibG9jaykgPT4ge1xyXG4gICAgbGV0IGJEYXRhID0ge1xyXG4gICAgICAgIGlzQWJsZTJUb3VjaDogdHJ1ZSxcclxuICAgICAgICBwdHJEb3duOiBmdW5jdGlvbiAoYmxvY2ssIHB0cikgeyBJbnB1dFB0ckRvd24ocHRyKTsgfSxcclxuICAgICAgICBwdHJVcDogZnVuY3Rpb24gKGJsb2NrLCBwdHIpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRUeXBlID0gSW5wdXRQdHJVcChwdHIpO1xyXG4gICAgICAgICAgICBpZiAoaW5wdXRUeXBlICE9PSAndG91Y2gnKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBYmxlMlRvdWNoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmlzQWJsZTJUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBBZGRPYnN0YWNsZUJsb2NrKGJsb2NrKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuaXNBYmxlMlRvdWNoID0gdHJ1ZTsgfSwgMTAwMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdHJPdXQ6IGZ1bmN0aW9uICgpIHsgSW5wdXRQdHJPdXQoKTsgfVxyXG4gICAgfTtcclxuICAgIGJsb2NrLmFkZEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICAvLyBzZXQgc2hhcGUgb2JzdGFjbGUgdGV4dHVyZVxyXG4gICAgY29uc3QgbmFtZSA9IGJsb2NrLmdldFNoYXBlTmFtZSgpO1xyXG4gICAgY29uc3QgY2FwaXRhbFNoYXBlID0gbmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcclxuICAgIGNvbnN0IG9ic3RhY2xlU2hhcGUgPSAnb2JzdGFjbGUnICsgY2FwaXRhbFNoYXBlO1xyXG4gICAgYmxvY2suYWRkU2hhcGUoeyBzY29yZTogMCwgaW1nVGV4dHVyZTogb2JzdGFjbGVTaGFwZSB9KTtcclxuICAgIGJsb2NrLmdldFNoYXBlSW1nKCkuc2V0VGV4dHVyZShvYnN0YWNsZVNoYXBlKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0T2JzdGFjbGU7XHJcbmV4cG9ydCB7IE9ic3RhY2xlVGV4dHVyZUxpc3QgfTtcclxuIiwiaW1wb3J0IHsgU2V0QmxvY2tUeXBlMkluaXRCYXNpYyB9IGZyb20gXCIuLi9iYXNpY1wiO1xyXG5pbXBvcnQgU2V0QmxvY2syQWQgZnJvbSAnLi9hZCc7XHJcbmltcG9ydCBTZXRCbG9jazJQb3dlciBmcm9tICcuL3Bvd2VyJztcclxuaW1wb3J0IFNldEJsb2NrMkxvYWRpbmcgZnJvbSAnLi9sb2FkaW5nJztcclxuaW1wb3J0IFNldEJsb2NrMlRvdWNoIGZyb20gJy4vdG91Y2gnO1xyXG5pbXBvcnQgU2V0T2JzdGFjbGUgZnJvbSAnLi9vYnN0YWNsZSc7XHJcbmltcG9ydCB7IEdldFJuZEludCB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tIFwiQHNyYy91c2VyU2V0dGluZ1wiO1xyXG5jb25zdCBDb21tb25TaXplID0gVmlldy5jYWxjUmF0aW8oMjAwKTtcclxuY29uc3QgQmxvY2tVbmlxdWVQcm9wZXJ0aWVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAnJyxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMCxcclxuICAgICAgICBzY29yZTogMCxcclxuICAgICAgICBpY29uVGV4dHVyZTogJycsXHJcbiAgICAgICAgaW1nV2lkdGg6IDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZUNoYW5jZTogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlTWF4OiAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyBTZXRCbG9ja1R5cGUySW5pdEJhc2ljKGJsb2NrKTsgcmV0dXJuIGJsb2NrOyB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAnb2JzdGFjbGUnLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAwLFxyXG4gICAgICAgIHNjb3JlOiAwLFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAnJyxcclxuICAgICAgICBpbWdXaWR0aDogMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IFNldE9ic3RhY2xlKGJsb2NrKTsgcmV0dXJuIGJsb2NrOyB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIHR5cGVOYW1lOiAnYWQnLFxyXG4gICAgICAgIC8vIHNwYXduQ2hhbmNlOiAxLFxyXG4gICAgICAgIHNwYXduQ2hhbmNlOiAwLFxyXG4gICAgICAgIHNjb3JlOiA5MCxcclxuICAgICAgICBpY29uVGV4dHVyZTogJycsXHJcbiAgICAgICAgaW1nV2lkdGg6IDEwMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDEwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDEwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDMgKiAxMDAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogNSAqIDEwMDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IHJldHVybiBTZXRCbG9jazJBZChibG9jayk7IH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICdwb3dlcicsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDEsXHJcbiAgICAgICAgc2NvcmU6IDYwLFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAncG93ZXInLFxyXG4gICAgICAgIGltZ1dpZHRoOiAxMDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiA1MCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDEgKiAxMDAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogMiAqIDEwMDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IHJldHVybiBTZXRCbG9jazJQb3dlcihibG9jayk7IH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICdsb2FkaW5nJyxcclxuICAgICAgICBzcGF3bkNoYW5jZTogMSxcclxuICAgICAgICBzY29yZTogNSxcclxuICAgICAgICBpY29uVGV4dHVyZTogJycsXHJcbiAgICAgICAgaW1nV2lkdGg6IDEwMCxcclxuICAgICAgICBpbWdIZWlnaHQ6IDEwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2U6IDMwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1pbjogMC41ICogMTAwMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNYXg6IDEgKiAxMDAwLFxyXG4gICAgICAgIHNldEZ1bmM6IChibG9jaykgPT4geyByZXR1cm4gU2V0QmxvY2syTG9hZGluZyhibG9jayk7IH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdHlwZU5hbWU6ICd0b3VjaCcsXHJcbiAgICAgICAgc3Bhd25DaGFuY2U6IDEsXHJcbiAgICAgICAgc2NvcmU6IDEwLFxyXG4gICAgICAgIGljb25UZXh0dXJlOiAndG91Y2gnLFxyXG4gICAgICAgIGltZ1dpZHRoOiAxMDAsXHJcbiAgICAgICAgaW1nSGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlOiAzMCxcclxuICAgICAgICB0aW1lSW5jcmVhc2VNaW46IDIgKiAxMDAwLFxyXG4gICAgICAgIHRpbWVJbmNyZWFzZU1heDogNCAqIDEwMDAsXHJcbiAgICAgICAgc2V0RnVuYzogKGJsb2NrKSA9PiB7IHJldHVybiBTZXRCbG9jazJUb3VjaChibG9jayk7IH1cclxuICAgIH0sXHJcbl07XHJcbmNvbnN0IFRCbG9ja1R5cGVMaXN0ID0gQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLm1hcChlbGUgPT4geyBpZiAoZWxlLnR5cGVOYW1lICE9PSAnJylcclxuICAgIHJldHVybiBlbGUudHlwZU5hbWU7IH0pO1xyXG5jb25zdCBTcGF3bk1heENoYW5jZSA9IEJsb2NrVW5pcXVlUHJvcGVydGllcy5tYXAoZWxlID0+IGVsZS5zcGF3bkNoYW5jZSkucmVkdWNlKChwcmV2VmFsdWUsIGN1cnJWYWx1ZSkgPT4ge1xyXG4gICAgcmV0dXJuIHByZXZWYWx1ZSArIGN1cnJWYWx1ZTtcclxufSwgMCk7XHJcbmNvbnN0IFNldDJUeXBlQmxvY2sgPSAoYmxvY2ssIHR5cGVOYW1lKSA9PiB7XHJcbiAgICBsZXQgZmlsdGVyZWRUeXBlID0gQmxvY2tVbmlxdWVQcm9wZXJ0aWVzLmZpbmQoZWxlID0+IGVsZS50eXBlTmFtZSA9PT0gdHlwZU5hbWUpO1xyXG4gICAgaWYgKGZpbHRlcmVkVHlwZSkge1xyXG4gICAgICAgIFNldEJsb2NrVHlwZTJJbml0QmFzaWMoYmxvY2spO1xyXG4gICAgICAgIGJsb2NrLnNldFR5cGVOYW1lKHR5cGVOYW1lKTtcclxuICAgICAgICBibG9jay5zZXRUeXBlSW1nKGZpbHRlcmVkVHlwZS5pY29uVGV4dHVyZSk7XHJcbiAgICAgICAgYmxvY2suc2V0VHlwZUltZ0Rpc3BsYXlTaXplKGZpbHRlcmVkVHlwZS5pbWdXaWR0aCwgZmlsdGVyZWRUeXBlLmltZ0hlaWdodCk7XHJcbiAgICAgICAgYmxvY2suYWRkU2NvcmUoZmlsdGVyZWRUeXBlLnNjb3JlKTtcclxuICAgICAgICBibG9jay5zZXRUaW1lSW5jcmVhc2Uoe1xyXG4gICAgICAgICAgICBjaGFuY2U6IGZpbHRlcmVkVHlwZS50aW1lSW5jcmVhc2VDaGFuY2UsXHJcbiAgICAgICAgICAgIHZhbHVlOiBHZXRSbmRJbnQoZmlsdGVyZWRUeXBlLnRpbWVJbmNyZWFzZU1pbiwgZmlsdGVyZWRUeXBlLnRpbWVJbmNyZWFzZU1heClcclxuICAgICAgICB9KTtcclxuICAgICAgICBmaWx0ZXJlZFR5cGUuc2V0RnVuYyhibG9jayk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NldDJUeXBlQmxvY2s6IHR5cGVOYW1lIGlzIG5vdCBmb3VuZCBpbiB0aGUgYmxvY2sgdHlwZSBsaXN0Jyk7XHJcbn07XHJcbmV4cG9ydCB7IEJsb2NrVW5pcXVlUHJvcGVydGllcywgQ29tbW9uU2l6ZSwgVEJsb2NrVHlwZUxpc3QsIFNwYXduTWF4Q2hhbmNlLCBTZXQyVHlwZUJsb2NrLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuaW1wb3J0IHsgQ29udGV4dExheWVyTWFyZ2luIH0gZnJvbSBcIi5cIjtcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tIFwiLi4vZGVwdGhcIjtcclxuY29uc3QgUG9wVXAgPSB7XHJcbiAgICBpc09wZW46IGZhbHNlLFxyXG4gICAgYm90dG9tTGF5ZXI6IG51bGwsXHJcbiAgICBjb250ZXh0TGF5ZXI6IG51bGwsXHJcbiAgICBleGl0QnRuOiBudWxsLFxyXG4gICAgc25kTGlzdDogW10sXHJcbiAgICBzaG93OiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgYkRhdGEgPSBibG9jay5nZXRCbG9ja0RhdGEoKTtcclxuICAgICAgICBpZiAoYkRhdGEpIHtcclxuICAgICAgICAgICAgYkRhdGEuaXNQb3B1cE9wZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBibG9jay5zZXRCbG9ja0RhdGEoYkRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoYkRhdGEucG9wVXBDb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0TGF5ZXIgPSBiRGF0YS5wb3BVcENvbnRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm90dG9tTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLmNvbnRleHRMYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuZXhpdEJ0bi5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgfSxcclxuICAgIGhpZGU6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJEYXRhID0gYmxvY2suZ2V0QmxvY2tEYXRhKCk7XHJcbiAgICAgICAgICAgIGJEYXRhLmlzUG9wdXBPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJsb2NrLnNldEJsb2NrRGF0YShiRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm90dG9tTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0TGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5leGl0QnRuLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBJbml0UG9wVXAgPSAoKSA9PiB7XHJcbiAgICBQb3BVcC5jb250ZXh0TGF5ZXIucmVtb3ZlQWxsKCk7XHJcbiAgICBQb3BVcC5oaWRlKCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZVBvcFVwID0gKHNjZW5lKSA9PiB7XHJcbiAgICBQb3BVcC5ib3R0b21MYXllciA9IHNjZW5lLmFkZC5ncmFwaGljcygpO1xyXG4gICAgUG9wVXAuYm90dG9tTGF5ZXIuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjQpO1xyXG4gICAgUG9wVXAuYm90dG9tTGF5ZXIuZmlsbFJlY3QoMCwgMCwgVmlldy53LCBWaWV3LmgpO1xyXG4gICAgUG9wVXAuYm90dG9tTGF5ZXIuc2V0SW50ZXJhY3RpdmUobmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZSgwLCAwLCBWaWV3LncsIFZpZXcuaCksIFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyk7XHJcbiAgICBQb3BVcC5ib3R0b21MYXllci5vbigncG9pbnRlcnVwJywgKCkgPT4geyBjb25zb2xlLmxvZygndG91Y2hpbmcgcG9wdXAgYm90dG9tIGxheWVyJyk7IH0pO1xyXG4gICAgUG9wVXAuY29udGV4dExheWVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcihWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSk7XHJcbiAgICBQb3BVcC5leGl0QnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcudyAtIENvbnRleHRMYXllck1hcmdpbiwgQ29udGV4dExheWVyTWFyZ2luLCAnZXhpdEJ0bicpO1xyXG4gICAgUG9wVXAuZXhpdEJ0bi5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgUG9wVXAuZXhpdEJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIFBvcFVwLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgW1BvcFVwLmJvdHRvbUxheWVyLCBQb3BVcC5jb250ZXh0TGF5ZXIsIFBvcFVwLmV4aXRCdG5dLm1hcCgoZWxlKSA9PiB7XHJcbiAgICAgICAgZWxlLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIFNldERlcHRoKGVsZSwgJ3BvcFVwJyk7XHJcbiAgICB9KTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUG9wVXA7XHJcbmV4cG9ydCB7IEluaXRQb3BVcCwgQ3JlYXRlUG9wVXAgfTtcclxuIiwiaW1wb3J0IHsgR2FtZURhdGFBdWRpbyB9IGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuY29uc3QgR2FtZURhdGEgPSBPYmplY3QuYXNzaWduKHsgYmVzdDogMCB9LCBHYW1lRGF0YUF1ZGlvKTtcclxuLy8gZXhwb3J0IGRlZmF1bHQgVEdhbWVEYXRhO1xyXG5leHBvcnQgZGVmYXVsdCBHYW1lRGF0YTtcclxuIiwiLy8gaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgeyBUeHRGYW1pbHksIFR4dE1hcmdpbiwgVHh0UGFkZGluZywgVHh0U2l6ZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgeyBHZXRMb2NhbFN0b3JhZ2VJdGVtLCBTZXRMb2NhbFN0b3JhZ2VJdGVtIH0gZnJvbSAnQHNyYy91dGlscy9zdG9yYWdlJztcclxuaW1wb3J0IEdhbWVEYXRhIGZyb20gJy4uLy4uL3N0b3JhZ2UvaW5kZXgnO1xyXG5pbXBvcnQgeyBTZXROdW0yQ3VycmVuY3lGb3JtYXQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuaW1wb3J0IEJsb2NrU3lzdGVtIGZyb20gJy4vLi4vYmxvY2svc3lzdGVtJztcclxuaW1wb3J0IEdhbWVUaW1lIGZyb20gJy4vdGltZSc7XHJcbmNvbnN0IFNjb3JlID0ge1xyXG4gICAgdHh0OiBudWxsLFxyXG4gICAgdHh0QmFja2dyb3VuZDogbnVsbCxcclxuICAgIGJUeHQ6IG51bGwsXHJcbiAgICBiVHh0QmFja2dyb3VuZDogbnVsbCxcclxuICAgIHR4dE51bTogMCxcclxuICAgIGJUeHROdW06IDAsXHJcbiAgICBzZXRGb3JtYXQ6IGZ1bmN0aW9uIChzY29yZSkge1xyXG4gICAgICAgIHRoaXMudHh0TnVtID0gc2NvcmU7XHJcbiAgICAgICAgY29uc3QgZmluYWxTY29yZSA9ICcnICsgU2V0TnVtMkN1cnJlbmN5Rm9ybWF0KHNjb3JlKTtcclxuICAgICAgICB0aGlzLnR4dC5zZXRUZXh0KGZpbmFsU2NvcmUpO1xyXG4gICAgICAgIGlmICh0aGlzLnR4dE51bSA+IHRoaXMuYlR4dE51bSlcclxuICAgICAgICAgICAgdGhpcy5zZXRCRm9ybWF0KHNjb3JlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRCRm9ybWF0OiBmdW5jdGlvbiAoc2NvcmUpIHtcclxuICAgICAgICB0aGlzLmJUeHROdW0gPSBzY29yZTtcclxuICAgICAgICBjb25zdCBmaW5hbFNjb3JlID0gJycgKyBTZXROdW0yQ3VycmVuY3lGb3JtYXQoc2NvcmUpO1xyXG4gICAgICAgIHRoaXMuYlR4dC5zZXRUZXh0KGZpbmFsU2NvcmUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGFkZDogZnVuY3Rpb24gKHNjb3JlKSB7XHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGxldCBmaW5hbFNjb3JlID0gTnVtYmVyKHRoaXMudHh0LnRleHQpICsgc2NvcmU7XHJcbiAgICAgICAgdGhpcy5zZXRGb3JtYXQoZmluYWxTY29yZSk7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsU2NvcmU7XHJcbiAgICB9LFxyXG4gICAgZ2V0U2NvcmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudHh0TnVtOyB9LFxyXG4gICAgZ2V0QlNjb3JlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmJUeHROdW07IH0sXHJcbiAgICBjb21wYXJlTm9ybWFsQW5kQmVzdDogZnVuY3Rpb24gKHNjb3JlKSB7XHJcbiAgICAgICAgY29uc3QgcHJldkJlc3QgPSBHZXRMb2NhbFN0b3JhZ2VJdGVtKEdhbWVEYXRhLCAnYmVzdCcpO1xyXG4gICAgICAgIGlmIChwcmV2QmVzdCA8IHNjb3JlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QkZvcm1hdChzY29yZSk7XHJcbiAgICAgICAgICAgIFNldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jywgc2NvcmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIGdldEJvbnVzVGltZVNjb3JlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoR2FtZVRpbWUuZ2V0VGltZUluY3JlYXNlKCkgLyAxMDApO1xyXG4gICAgfSxcclxuICAgIGdldEZpbmFsU2NvcmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihTY29yZS5nZXRTY29yZSgpICsgdGhpcy5nZXRCb251c1RpbWVTY29yZSgpKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRTY29yZSA9ICgpID0+IHtcclxuICAgIFNjb3JlLnR4dE51bSA9IDA7XHJcbiAgICBTY29yZS5iVHh0TnVtID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lRGF0YSwgJ2Jlc3QnKTtcclxuICAgIFNjb3JlLnNldEZvcm1hdCgwKTtcclxuICAgIFNjb3JlLnNldEJGb3JtYXQoU2NvcmUuYlR4dE51bSk7XHJcbn07XHJcbmNvbnN0IFR4dEdhcCA9IDExMDtcclxuY29uc3QgQ3JlYXRlU2NvcmVUeHQgPSAoc2NlbmUpID0+IHtcclxuICAgIFNjb3JlLmJUeHQgPSBzY2VuZS5hZGQudGV4dChUeHRNYXJnaW4gLyAyLCBUeHRNYXJnaW4gKiAyLCAnJyk7XHJcbiAgICBTY29yZS5iVHh0QmFja2dyb3VuZCA9IHNjZW5lLmFkZC50ZXh0KFNjb3JlLmJUeHQueCArIFR4dEdhcCwgU2NvcmUuYlR4dC55LCAnQmVzdCcpO1xyXG4gICAgU2NvcmUudHh0ID0gc2NlbmUuYWRkLnRleHQoVHh0TWFyZ2luIC8gMiwgVHh0TWFyZ2luICogMywgJycpO1xyXG4gICAgU2NvcmUudHh0QmFja2dyb3VuZCA9IHNjZW5lLmFkZC50ZXh0KFNjb3JlLnR4dC54ICsgVHh0R2FwLCBTY29yZS50eHQueSwgJ1Njb3JlJyk7XHJcbiAgICBbU2NvcmUuYlR4dEJhY2tncm91bmQsIFNjb3JlLnR4dEJhY2tncm91bmRdLm1hcCgodHh0KSA9PiB7XHJcbiAgICAgICAgdHh0LnNldFBhZGRpbmcoeyBsZWZ0OiBUeHRQYWRkaW5nLCByaWdodDogVHh0UGFkZGluZywgdG9wOiBUeHRQYWRkaW5nIC8gMiwgYm90dG9tOiBUeHRQYWRkaW5nIC8gMiB9KTtcclxuICAgICAgICB0eHQuc2V0T3JpZ2luKDEsIC0wLjEpO1xyXG4gICAgICAgIHR4dC5zZXRGb250U2l6ZShUeHRTaXplKTtcclxuICAgICAgICB0eHQuc2V0Rm9udEZhbWlseShUeHRGYW1pbHkpO1xyXG4gICAgICAgIHR4dC5zZXRGb250U3R5bGUoJ2JvbGQgaXRhbGljJyk7XHJcbiAgICAgICAgdHh0LnNldEFscGhhKDAuMyk7XHJcbiAgICB9KTtcclxuICAgIFtTY29yZS5iVHh0LCBTY29yZS50eHRdLm1hcCgodHh0KSA9PiB7XHJcbiAgICAgICAgdHh0LnNldFBhZGRpbmcoeyBsZWZ0OiBUeHRQYWRkaW5nLCByaWdodDogVHh0UGFkZGluZywgdG9wOiBUeHRQYWRkaW5nIC8gMiwgYm90dG9tOiBUeHRQYWRkaW5nIC8gMiB9KTtcclxuICAgICAgICB0eHQuc2V0T3JpZ2luKDAsIDApO1xyXG4gICAgICAgIHR4dC5zZXRGb250U2l6ZShUeHRTaXplKTtcclxuICAgICAgICB0eHQuc2V0Rm9udEZhbWlseShUeHRGYW1pbHkpO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgYmVzdFNjb3JlID0gR2V0TG9jYWxTdG9yYWdlSXRlbShHYW1lRGF0YSwgJ2Jlc3QnKTtcclxuICAgIFNjb3JlLnNldEZvcm1hdCgwKTtcclxuICAgIFNjb3JlLnNldEJGb3JtYXQoYmVzdFNjb3JlKTtcclxuICAgIFtTY29yZS5iVHh0QmFja2dyb3VuZCwgU2NvcmUudHh0QmFja2dyb3VuZCwgU2NvcmUuYlR4dCwgU2NvcmUudHh0XS5tYXAoKHR4dCkgPT4ge1xyXG4gICAgICAgIFNldERlcHRoKHR4dCwgJ3R4dCcpO1xyXG4gICAgfSk7XHJcbiAgICBJbml0U2NvcmUoKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2NvcmU7XHJcbmV4cG9ydCB7IEluaXRTY29yZSwgQ3JlYXRlU2NvcmVUeHQgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5jb25zdCBQYXNzaXZlTG9hZGluZyA9IHtcclxuICAgIHNjZW5lOiBudWxsLFxyXG4gICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgIG9wdGlvbjoge30sXHJcbn07XHJcbmNvbnN0IFN0YXJ0UGFzc2l2ZUxvYWRpbmcgPSAoc2NlbmUsIG9wdGlvbikgPT4ge1xyXG4gICAgUGFzc2l2ZUxvYWRpbmcuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgIC8vIG9wdGlvblxyXG4gICAgaWYgKG9wdGlvbilcclxuICAgICAgICBQYXNzaXZlTG9hZGluZy5vcHRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb24pO1xyXG4gICAgLy8gY2hjayBpcyBleGlzdCBpZiBub3QgdGhlbiBhZGQgdG8gc2NlbmVcclxuICAgIGNvbnN0IHBhc3NpdmVMb2FkaW5nSW5zdGFuY2UgPSBzY2VuZS5zY2VuZS5nZXQoJ3Bhc3NpdmVMb2FkaW5nJyk7XHJcbiAgICBpZiAoIXBhc3NpdmVMb2FkaW5nSW5zdGFuY2UpXHJcbiAgICAgICAgc2NlbmUuZ2FtZS5zY2VuZS5hZGQoJ3Bhc3NpdmVMb2FkaW5nJywgUGFzc2l2ZUxvYWRpbmdTY2VuZSwgZmFsc2UpO1xyXG4gICAgLy8gbGF1bmNoIGxvYWRpbmcgc2NlbmVcclxuICAgIHNjZW5lLnNjZW5lLmxhdW5jaCgncGFzc2l2ZUxvYWRpbmcnKTtcclxuICAgIFBhc3NpdmVMb2FkaW5nLnNjZW5lID0gc2NlbmUuc2NlbmUuZ2V0KCdwYXNzaXZlTG9hZGluZycpO1xyXG59O1xyXG5jb25zdCBTdG9wUGFzc2l2ZUxvYWRpbmcgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIVBhc3NpdmVMb2FkaW5nLnNjZW5lIHx8ICFQYXNzaXZlTG9hZGluZy5pc0xvYWRpbmcpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ3Bhc3NpdmUgbG9hZGluZyBpcyBub3QgZXhpc3Q6JywgUGFzc2l2ZUxvYWRpbmcuc2NlbmUpO1xyXG4gICAgICAgIFBhc3NpdmVMb2FkaW5nLnNjZW5lID0gbnVsbDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoUGFzc2l2ZUxvYWRpbmcub3B0aW9uKSB7XHJcbiAgICAgICAgUGFzc2l2ZUxvYWRpbmcub3B0aW9uLmZpbmlzaEV2dCAmJiBQYXNzaXZlTG9hZGluZy5vcHRpb24uZmluaXNoRXZ0KFBhc3NpdmVMb2FkaW5nLnNjZW5lKTtcclxuICAgIH1cclxuICAgIFBhc3NpdmVMb2FkaW5nLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHJlcyhQYXNzaXZlTG9hZGluZy5zY2VuZS5zY2VuZS5zdG9wKCdwYXNzaXZlTG9hZGluZycpKSk7XHJcbiAgICBQYXNzaXZlTG9hZGluZy5zY2VuZS5sb2FkaW5nRW5kU2VjID0gYXdhaXQgbmV3IFByb21pc2UocmVzID0+IHJlcyhwZXJmb3JtYW5jZS5ub3coKSkpO1xyXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlcykgPT4ge1xyXG4gICAgICAgIHJlcyhjb25zb2xlLmxvZyhgJWMgUGFzc2l2ZSBMb2FkaW5nIFRpbWU6ICR7KChQYXNzaXZlTG9hZGluZy5zY2VuZS5sb2FkaW5nRW5kU2VjIC0gUGFzc2l2ZUxvYWRpbmcuc2NlbmUubG9hZGluZ1N0YXJ0U2VjKSAvIDEwMDApLnRvRml4ZWQoNCl9IHNlYyBgLCAnY29sb3I6IGJsYWNrOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZm9uV2VpZ2h0OiBib2xkOycpKTtcclxuICAgIH0pO1xyXG59O1xyXG5jbGFzcyBQYXNzaXZlTG9hZGluZ1NjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAga2V5OiAncGFzc2l2ZUxvYWRpbmcnLFxyXG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU3RhcnRTZWMgPSAwO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0VuZFNlYyA9IDA7XHJcbiAgICAgICAgdGhpcy5wb2ludEZpcnN0ID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50U2Vjb25kID0gMDtcclxuICAgICAgICB0aGlzLmdhcEZpcnN0ID0gMC4yO1xyXG4gICAgICAgIHRoaXMuZ2FwU2Vjb25kID0gMC40O1xyXG4gICAgfVxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTdGFydFNlYyA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUm90YXRlTG9nbyhkZWx0YSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVSb3RhdGVMb2dvKGRlbHRhKSB7XHJcbiAgICAgICAgdGhpcy5wb2ludEZpcnN0ID0gKHRoaXMucG9pbnRGaXJzdCArIChkZWx0YSAqIHRoaXMuZ2FwRmlyc3QpKSAlIDM2MDtcclxuICAgICAgICB0aGlzLnBvaW50U2Vjb25kID0gKHRoaXMucG9pbnRTZWNvbmQgKyAoZGVsdGEgKiB0aGlzLmdhcFNlY29uZCkpICUgMzYwO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnBvaW50Rmlyc3QsIHRoaXMucG9pbnRTZWNvbmQ6ICcsIHRoaXMucG9pbnRGaXJzdCwgdGhpcy5wb2ludFNlY29uZCk7XHJcbiAgICAgICAgLy8gdGhpcy5wb2ludEZpcnN0ID0gKHRoaXMucG9pbnRGaXJzdCArIChkZWx0YSAqIHRoaXMuZ2FwRmlyc3QpKSAlIDM2MDtcclxuICAgICAgICAvLyB0aGlzLnBvaW50U2Vjb25kID0gKHRoaXMucG9pbnRTZWNvbmQgKyAoZGVsdGEgKiB0aGlzLmdhcFNlY29uZCkpO1xyXG4gICAgICAgIC8vIGxldCBzaG93Q2xvY2t3aXNlID0gdGhpcy5wb2ludEZpcnN0ID4gdGhpcy5wb2ludFNlY29uZCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAvLyBsZXQgc3RhcnRBbmdsZSA9IHRoaXMucG9pbnRGaXJzdCA+IHRoaXMucG9pbnRTZWNvbmQgPyB0aGlzLnBvaW50Rmlyc3QgOiB0aGlzLnBvaW50U2Vjb25kO1xyXG4gICAgICAgIC8vIGxldCBlbmRBbmdsZSA9IHRoaXMucG9pbnRGaXJzdCA+IHRoaXMucG9pbnRTZWNvbmQgPyB0aGlzLnBvaW50U2Vjb25kIDogdGhpcy5wb2ludEZpcnN0O1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0dyYXBoaWNzLmNsZWFyKCk7XHJcbiAgICAgICAgLy8gIFdpdGhvdXQgdGhpcyB0aGUgYXJjIHdpbGwgYXBwZWFyIGNsb3NlZCB3aGVuIHN0cm9rZWRcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcy5saW5lU3R5bGUoMTAsIDB4ZmYwMGZmLCAyKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcy5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdHcmFwaGljcy5hcmMoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclksIDYwLCBQaGFzZXIuTWF0aC5EZWdUb1JhZCh0aGlzLnBvaW50Rmlyc3QpLCBQaGFzZXIuTWF0aC5EZWdUb1JhZCh0aGlzLnBvaW50U2Vjb25kKSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nR3JhcGhpY3Muc3Ryb2tlUGF0aCgpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFBhc3NpdmVMb2FkaW5nO1xyXG5leHBvcnQgeyBTdGFydFBhc3NpdmVMb2FkaW5nLCBTdG9wUGFzc2l2ZUxvYWRpbmcgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSwgVHh0VGl0bGVIZWFkU2l6ZSB9IGZyb20gXCIuLi9mb250XCI7XHJcbmNvbnN0IEdhbWVTdGFydENudCA9IHtcclxuICAgIGlzU3RhcnQ6IGZhbHNlLFxyXG4gICAgY250VHh0OiBudWxsLFxyXG4gICAgY250TnVtOiAzLFxyXG4gICAgZ2V0SXNTdGFydDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc1N0YXJ0OyB9LFxyXG4gICAgc2V0SXNTdGFydDogZnVuY3Rpb24gKGlzU3RhcnQpIHsgdGhpcy5pc1N0YXJ0ID0gaXNTdGFydDsgfSxcclxuICAgIHNldFR4dDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgR2FtZVN0YXJ0Q250LmNudFR4dC5zZXRUZXh0KHZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgfSxcclxuICAgIHNldFZpc2libGU6IGZ1bmN0aW9uICh2aXNpYmxlKSB7IEdhbWVTdGFydENudC5jbnRUeHQuc2V0VmlzaWJsZSh2aXNpYmxlKTsgfSxcclxuICAgIHNldEFscGhhOiBmdW5jdGlvbiAoYWxwaGEpIHsgR2FtZVN0YXJ0Q250LmNudFR4dC5zZXRBbHBoYShhbHBoYSk7IH0sXHJcbiAgICBhbmltRmFkZU91dDogZnVuY3Rpb24gKHNjZW5lKSB7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAxLCB0bzogMCwgZHVyYXRpb246IDQwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBbHBoYShkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBbHBoYSgwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzU3RhcnQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhbmltQ250OiBmdW5jdGlvbiAoc2NlbmUpIHtcclxuICAgICAgICBsZXQgY250ID0gMztcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiAxMDAwLCBkdXJhdGlvbjogMTAwMCwgcmVwZWF0OiAzLCBkZWxheTogMTAwMCxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUeHQoMyk7XHJcbiAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndm9pY2UzJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUmVwZWF0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbnQtLTtcclxuICAgICAgICAgICAgICAgIGlmIChjbnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgndm9pY2VHbycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHh0KCdHbyEnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFR4dChjbnQpO1xyXG4gICAgICAgICAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ3ZvaWNlJyArIGNudCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbUZhZGVPdXQoc2NlbmUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBJbml0R2FtZVN0YXJ0Q250ID0gKCkgPT4ge1xyXG4gICAgR2FtZVN0YXJ0Q250LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgR2FtZVN0YXJ0Q250LnNldEFscGhhKDEpO1xyXG4gICAgR2FtZVN0YXJ0Q250LnNldElzU3RhcnQoZmFsc2UpO1xyXG4gICAgR2FtZVN0YXJ0Q250LmNudE51bSA9IDM7XHJcbiAgICBHYW1lU3RhcnRDbnQuc2V0VHh0KEdhbWVTdGFydENudC5jbnROdW0pO1xyXG59O1xyXG5jb25zdCBDcmVhdGVHYW1lU3RhcnRDbnQgPSAoc2NlbmUpID0+IHtcclxuICAgIEdhbWVTdGFydENudC5jbnRUeHQgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJzMnKTtcclxuICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKEdhbWVTdGFydENudC5jbnRUeHQpO1xyXG4gICAgR2FtZVN0YXJ0Q250LmNudFR4dC5zZXRGb250U2l6ZShUeHRUaXRsZUhlYWRTaXplKTtcclxuICAgIEluaXRHYW1lU3RhcnRDbnQoKTtcclxuICAgIEdhbWVTdGFydENudC5hbmltQ250KHNjZW5lKTtcclxuICAgIC8vIHNjZW5lLmV2ZW50cy5vbihcInN0YXJ0XCIsICgpID0+IHtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZygnc3RhcnQgc2NlbmUgZXZ0Jyk7XHJcbiAgICAvLyAgICAgR2FtZVN0YXJ0Q250LmFuaW1DbnQoc2NlbmUpO1xyXG4gICAgLy8gfSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVTdGFydENudDtcclxuZXhwb3J0IHsgSW5pdEdhbWVTdGFydENudCwgQ3JlYXRlR2FtZVN0YXJ0Q250IH07XHJcbiIsImltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZVNpemUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgR2V0Um5kSW50LCBHZXRSbmROdW0gfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuaW1wb3J0IEdhbWVPdmVyIGZyb20gJy4uL3VpL2dhbWVvdmVyJztcclxuaW1wb3J0IEdhbWVUaW1lLCB7IFNldG1pbGxpZVNlYzJTZWNUaW1lRm9ybWF0IH0gZnJvbSAnLi4vdWkvdGltZSc7XHJcbmNvbnN0IEVmeCA9IHtcclxuICAgIGJnUGFydGljbGVMaXN0OiBbXSxcclxuICAgIC8vIHRpbWVJbmNyZWFzZTogPFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0W10+IFtdLCAgIC8vIHdoZW4gYmxvY2sgY2xlYXJlZCwgaW5jcmVhc2UgdGltZSBieSBibG9jaydzIG93biBjaGFuY2VcclxuICAgIC8vIHNjb3JlOiA8UGhhc2VyLkdhbWVPYmplY3RzLlRleHRbXT4gW10sICAgICAgICAgIC8vIHdoZW4gYmxvY2sgY2xlYXJlZCwgaW5jcmVhc2Ugc2NvcmVcclxuICAgIGxpc3Q6IFtdLFxyXG4gICAgc2V0Q29uZmlnOiBmdW5jdGlvbiAocGFydGljbGUsIGNvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IGZpbmFsQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7IHg6IDAsIHk6IDAsIGFjdGl2ZTogZmFsc2UgfSwgY29uZmlnKTtcclxuICAgICAgICBsZXQgZW1pdHRlcjtcclxuICAgICAgICBjb25zdCBuZXN0ZWRFbWl0dGVySWR4ID0gdGhpcy5saXN0LmZpbmRJbmRleChlbWl0dGVyID0+IGVtaXR0ZXIubmFtZSA9PT0gY29uZmlnLm5hbWUpO1xyXG4gICAgICAgIGlmIChuZXN0ZWRFbWl0dGVySWR4ID49IDApXHJcbiAgICAgICAgICAgIHRoaXMubGlzdFtuZXN0ZWRFbWl0dGVySWR4XSA9IHBhcnRpY2xlLmNyZWF0ZUVtaXR0ZXIoZmluYWxDb25maWcpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbWl0dGVyID0gcGFydGljbGUuY3JlYXRlRW1pdHRlcihmaW5hbENvbmZpZyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKGVtaXR0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW1pdHRlcjtcclxuICAgIH0sXHJcbiAgICBnZXRFbWl0dGVyOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVtaXR0ZXIgPSB0aGlzLmxpc3QuZmluZChlbWl0dGVyID0+IGVtaXR0ZXIubmFtZSA9PT0gbmFtZSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRFbWl0dGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgZW1pdHRlciAke25hbWV9IGlzIG5vdCBpbiB0aGUgcGFydGljbGUgbGlzdGApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRFbWl0dGVyO1xyXG4gICAgfSxcclxuICAgIGFjdGl2ZUVtaXR0ZXIoeCwgeSwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVtaXR0ZXIgPSB0aGlzLmdldEVtaXR0ZXIobmFtZSk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRFbWl0dGVyKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGFyZ2V0RW1pdHRlci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRhcmdldEVtaXR0ZXIuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldEVtaXR0ZXI7XHJcbiAgICB9LFxyXG4gICAgYW5pbUVtaXR0ZXI6IGZ1bmN0aW9uICh4LCB5LCBuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RW1pdHRlciA9IHRoaXMuYWN0aXZlRW1pdHRlcih4LCB5LCBuYW1lKTtcclxuICAgICAgICBpZiAoIXRhcmdldEVtaXR0ZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZUV4cGxvZGUgPSB0YXJnZXRFbWl0dGVyLmV4cGxvZGUoKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHBsb2RlO1xyXG4gICAgfSxcclxuICAgIHN0YXJ0RW1pdHRlcjogZnVuY3Rpb24gKHgsIHksIG5hbWUpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXRFbWl0dGVyID0gdGhpcy5hY3RpdmVFbWl0dGVyKHgsIHksIG5hbWUpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0RW1pdHRlcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlRXhwbG9kZSA9IHRhcmdldEVtaXR0ZXIuc3RhcnQoKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VFeHBsb2RlO1xyXG4gICAgfSxcclxuICAgIGFuaW1TY2FsZTogZnVuY3Rpb24gKHNjZW5lLCB0YXJnZXQpIHtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjIsIGR1cmF0aW9uOiAzMDAsIHlveW86IHRydWUsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCAmJiB0YXJnZXQuc2V0U2NhbGUoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYW5pbVBvczogZnVuY3Rpb24gKHNjZW5lLCB0YXJnZXQsIGFtb3VudCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEluaXRZID0gdGFyZ2V0Lnk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiB0YXJnZXRJbml0WSwgdG86IHRhcmdldEluaXRZICsgYW1vdW50LCBkdXJhdGlvbjogMjQwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICYmIHRhcmdldC5zZXRQb3NpdGlvbih0YXJnZXQueCwgZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgYW5pbVRpbWVJbmNyZWFzZTogZnVuY3Rpb24gKGJsb2NrLCBjaGFuY2UsIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBzY2VuZSB9ID0gYmxvY2s7XHJcbiAgICAgICAgY29uc3QgY2hhbmNlUG9zWSA9IGJsb2NrLnkgLSAxMDA7XHJcbiAgICAgICAgY29uc3QgdGltZVNlYyA9IFNldG1pbGxpZVNlYzJTZWNUaW1lRm9ybWF0KHZhbHVlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWCA9IEdhbWVUaW1lLnR4dC54ICsgKEdhbWVUaW1lLnR4dC53aWR0aCAqIDEuNSkgLSA1ICsgR2V0Um5kTnVtKC0zLCAzKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWSA9IEdhbWVUaW1lLnR4dC55ICsgR2FtZVRpbWUudHh0LmhlaWdodCAvIDIgKyBHZXRSbmROdW0oLTEwLCAxMCk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlT25VaSA9IHNjZW5lLmFkZC50ZXh0KHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYLCB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWSwgJysnICsgdGltZVNlYykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmxvY2sueCwgY2hhbmNlUG9zWSwgJ1RpbWUgQ3JpdGljYWwhJykuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdGltZUluY3JlYXNlQ2hhbmNlID0gc2NlbmUuYWRkLnRleHQodGltZUluY3JlYXNlVHh0LngsIHRpbWVJbmNyZWFzZVR4dC55ICsgMjUsIGNoYW5jZS50b1N0cmluZygpICsgJyUnKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICBjb25zdCB0aW1lSW5jcmVhc2VPbkJsb2NrID0gc2NlbmUuYWRkLnRleHQodGltZUluY3JlYXNlQ2hhbmNlLngsIHRpbWVJbmNyZWFzZUNoYW5jZS55ICsgMjUsIHRpbWVTZWMpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIFt0aW1lSW5jcmVhc2VPblVpLCB0aW1lSW5jcmVhc2VUeHQsIHRpbWVJbmNyZWFzZUNoYW5jZSwgdGltZUluY3JlYXNlT25CbG9ja10ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUodHh0KTtcclxuICAgICAgICAgICAgU2V0RGVwdGgodHh0LCAndHh0Jyk7XHJcbiAgICAgICAgICAgIHR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1TY2FsZShzY2VuZSwgdGltZUluY3JlYXNlT25VaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgdHdMaXN0ID0gW107XHJcbiAgICAgICAgdHdMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICBmcm9tOiB0aW1lSW5jcmVhc2VPblVpUm5kUG9zWCwgdG86IHRpbWVJbmNyZWFzZU9uVWlSbmRQb3NYICsgMTAsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7IHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTsgfSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7IHRpbWVJbmNyZWFzZU9uVWkueCA9IHR3RGF0YS52YWx1ZTsgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4geyB0aW1lSW5jcmVhc2VPblVpLmRlc3Ryb3koKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgZnJvbTogMSwgdG86IDAsIGR1cmF0aW9uOiAyNDAwLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZVR4dC5zZXRBbHBoYSh0d0RhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlQ2hhbmNlLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VPbkJsb2NrLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRpbWVJbmNyZWFzZVR4dC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aW1lSW5jcmVhc2VDaGFuY2UuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGltZUluY3JlYXNlT25CbG9jay5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VUeHQsIC0zMCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VDaGFuY2UsIC0zMCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCB0aW1lSW5jcmVhc2VPbkJsb2NrLCAtMzApO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGFuaW1TY29yZTogZnVuY3Rpb24gKGJsb2NrLCBzY29yZSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2NlbmUgfSA9IGJsb2NrO1xyXG4gICAgICAgIGNvbnN0IHNjb3JlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmxvY2sueCwgYmxvY2sueSwgTWF0aC5mbG9vcihzY29yZSkudG9TdHJpbmcoKSkuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUoc2NvcmVUeHQpO1xyXG4gICAgICAgIFNldERlcHRoKHNjb3JlVHh0LCAndHh0Jyk7XHJcbiAgICAgICAgc2NvcmVUeHQuc2V0Rm9udFNpemUoVHh0VGl0bGVTaXplKTtcclxuICAgICAgICAvLyBzY29yZSBwYXJ0aWNsZSBlbWl0XHJcbiAgICAgICAgY29uc3Qgc2NvcmVTZnhMaXN0ID0gWydzY29yZUJsdWUnLCAnc2NvcmVHcmVlbicsICdzY29yZUJyb3duJ107XHJcbiAgICAgICAgY29uc3Qgcm5kSWR4ID0gR2V0Um5kSW50KDAsIHNjb3JlU2Z4TGlzdC5sZW5ndGgpO1xyXG4gICAgICAgIEVmeC5hbmltRW1pdHRlcihibG9jay54LCBibG9jay55LCBzY29yZVNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAgICAgLy8gYWxwaGEgdHdcclxuICAgICAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAwLCBkdXJhdGlvbjogMjQwMCxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2NvcmVUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdzY29yZVNmeCcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCBkYXRhKSA9PiB7IHNjb3JlVHh0LnNldEFscGhhKGRhdGEudmFsdWUpOyB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7IHNjb3JlVHh0LmRlc3Ryb3koKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYW5pbVNjYWxlKHNjZW5lLCBzY29yZVR4dCk7XHJcbiAgICAgICAgdGhpcy5hbmltUG9zKHNjZW5lLCBzY29yZVR4dCwgLTMwKTtcclxuICAgIH0sXHJcbiAgICBhbmltTmV3QmVzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZUhpZ2hTY29yZScpO1xyXG4gICAgICAgIHRoaXMuYmdQYXJ0aWNsZUxpc3QubWFwKGtleSA9PiB0aGlzLnN0YXJ0RW1pdHRlcihWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSAtIFZpZXcuaCAvIDQsIGtleSkpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRFbWl0dGVyKDAsIDAsICduZXdCZXN0U2NvcmUnKTtcclxuICAgIH0sXHJcbiAgICBzdG9wQWxsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0Lm1hcChlbWl0dGVyID0+IGVtaXR0ZXIuc3RvcCgpKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IENyZWF0ZUVmeCA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgYmxvY2tQYXJ0aWNsZSA9IHNjZW5lLmFkZC5wYXJ0aWNsZXMoJ3BhcnRpY2xlU3ByaXRlJyk7XHJcbiAgICBjb25zdCBjb21tb25Ub3VjaENvbmZpZyA9IHtcclxuICAgICAgICBsaWZlc3BhbjogeyBtaW46IDEwLCBtYXg6IDM1MCB9LFxyXG4gICAgICAgIGFuZ2xlOiB7IHN0YXJ0OiAwLCBlbmQ6IDM2MCwgc3RlcHM6IDY0IH0sXHJcbiAgICAgICAgc3BlZWQ6IDIwMCxcclxuICAgICAgICBxdWFudGl0eTogNjQsXHJcbiAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAuMywgZW5kOiAwLjA1IH0sXHJcbiAgICAgICAgYmxlbmRNb2RlOiAnQUREJyxcclxuICAgIH07XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAndG91Y2hCbHVlJywgZnJhbWU6ICdibHVlJyB9LCBjb21tb25Ub3VjaENvbmZpZykpO1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCBPYmplY3QuYXNzaWduKHsgbmFtZTogJ3RvdWNoR3JlZW4nLCBmcmFtZTogJ2dyZWVuJyB9LCBjb21tb25Ub3VjaENvbmZpZykpO1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCBPYmplY3QuYXNzaWduKHsgbmFtZTogJ3RvdWNoQnJvd24nLCBmcmFtZTogJ3llbGxvdycgfSwgY29tbW9uVG91Y2hDb25maWcpKTtcclxuICAgIGNvbnN0IGNvbW1vblNjb3JlQ29uZmlnID0ge1xyXG4gICAgICAgIGxpZmVzcGFuOiB7IG1pbjogMTAwLCBtYXg6IDUwMCB9LFxyXG4gICAgICAgIGFuZ2xlOiB7IHN0YXJ0OiAwLCBlbmQ6IDM2MCwgc3RlcHM6IDY0IH0sXHJcbiAgICAgICAgc3BlZWQ6IDM1MCxcclxuICAgICAgICBxdWFudGl0eTogNjQsXHJcbiAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAuMiwgZW5kOiAwLjEgfSxcclxuICAgICAgICBibGVuZE1vZGU6ICdBREQnLFxyXG4gICAgfTtcclxuICAgIEVmeC5zZXRDb25maWcoYmxvY2tQYXJ0aWNsZSwgT2JqZWN0LmFzc2lnbih7IG5hbWU6ICdzY29yZUJsdWUnLCBmcmFtZTogJ2JsdWUnIH0sIGNvbW1vblNjb3JlQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAnc2NvcmVHcmVlbicsIGZyYW1lOiAnZ3JlZW4nIH0sIGNvbW1vblNjb3JlQ29uZmlnKSk7XHJcbiAgICBFZnguc2V0Q29uZmlnKGJsb2NrUGFydGljbGUsIE9iamVjdC5hc3NpZ24oeyBuYW1lOiAnc2NvcmVCcm93bicsIGZyYW1lOiAneWVsbG93JyB9LCBjb21tb25TY29yZUNvbmZpZykpO1xyXG4gICAgLy8gdG91Y2ggaW5wdXRcclxuICAgIGNvbnN0IHRvdWNoU2Z4TGlzdCA9IFsndG91Y2hCbHVlJywgJ3RvdWNoR3JlZW4nLCAndG91Y2hCcm93biddO1xyXG4gICAgc2NlbmUuaW5wdXQub2ZmKCdwb2ludGVyZG93bicpO1xyXG4gICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKHB0cikgPT4ge1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd0b3VjaFNmeCcpO1xyXG4gICAgICAgIGNvbnN0IHJuZElkeCA9IEdldFJuZEludCgwLCB0b3VjaFNmeExpc3QubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBlbWl0dGVyID0gRWZ4LmFuaW1FbWl0dGVyKHB0ci54LCBwdHIueSwgdG91Y2hTZnhMaXN0W3JuZElkeF0pO1xyXG4gICAgICAgIC8vIGNvbnN0IHNjb3JlU2Z4TGlzdCA9IFsgJ3Njb3JlQmx1ZScsICdzY29yZUdyZWVuJywgJ3Njb3JlQnJvd24nIF07XHJcbiAgICAgICAgLy8gY29uc3Qgcm5kSWR4ID0gR2V0Um5kSW50KDAsIHNjb3JlU2Z4TGlzdC5sZW5ndGgpO1xyXG4gICAgICAgIC8vIGNvbnN0IHNjb3JlSW5zdGFuY2UgPSBFZnguYW5pbUVtaXR0ZXIocHRyLngsIHB0ci55LCBzY29yZVNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAgICAgLy8gRWZ4LmFuaW1FbWl0dGVyKHB0ci54LCBwdHIueSwgJ3Njb3JlJyk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JuZElkeDogJywgcm5kSWR4LCB0b3VjaFNmeExpc3Rbcm5kSWR4XSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2VtaXR0ZXI6ICcsIGVtaXR0ZXIpO1xyXG4gICAgfSk7XHJcbiAgICBTZXREZXB0aChibG9ja1BhcnRpY2xlLCAncGFydGljbGUnKTtcclxuICAgIHJldHVybiBFZng7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhbWVPdmVyRWZ4ID0gKHNjZW5lLCBpbWcpID0+IHtcclxuICAgIEVmeC5iZ1BhcnRpY2xlTGlzdCA9IFtcclxuICAgICAgICAnZGlhbW9uZDInLCAnZGlhbW9uZDMnLCAnZGlhbW9uZDQnLFxyXG4gICAgICAgICdydWJ5MScsICdydWJ5MicsICdydWJ5MycsICdydWJ5NCcsXHJcbiAgICAgICAgJ2tleTEnLCAna2V5MicsICdrZXkzJywgJ2tleTQnLFxyXG4gICAgXTtcclxuICAgIEVmeC5iZ1BhcnRpY2xlTGlzdC5tYXAoKHBhcnRpY2xlTmFtZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnRpY2xlID0gc2NlbmUuYWRkLnBhcnRpY2xlcyhwYXJ0aWNsZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gMjAwMDtcclxuICAgICAgICBFZnguc2V0Q29uZmlnKHBhcnRpY2xlLCB7XHJcbiAgICAgICAgICAgIG5hbWU6IHBhcnRpY2xlTmFtZSxcclxuICAgICAgICAgICAgYW5nbGU6IHsgbWluOiAxMDAsIG1heDogNDQwIH0sXHJcbiAgICAgICAgICAgIHNwZWVkOiAzNTAsXHJcbiAgICAgICAgICAgIGdyYXZpdHlZOiAtMjAwLFxyXG4gICAgICAgICAgICBsaWZlc3BhbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgIHF1YW50aXR5OiAxLFxyXG4gICAgICAgICAgICBmcmVxdWVuY3k6IDYwLFxyXG4gICAgICAgICAgICBzY2FsZTogeyBtaW46IDAuMSwgbWF4OiAxIH0sXHJcbiAgICAgICAgICAgIHJvdGF0ZTogeyBvbkVtaXQ6ICgpID0+IEdldFJuZE51bSgwLCAzNjApIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBTZXREZXB0aChwYXJ0aWNsZSwgJ3BhcnRpY2xlJyk7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGJsb2NrUGFydGljbGUgPSBzY2VuZS5hZGQucGFydGljbGVzKCdwYXJ0aWNsZVNwcml0ZScpO1xyXG4gICAgY29uc3Qgd2lkdGggPSBpbWcud2lkdGggKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlVztcclxuICAgIGNvbnN0IGhlaWdodCA9IGltZy5oZWlnaHQgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSDtcclxuICAgIGNvbnN0IGdhbWVPdmVyRW1pdFpvbmUgPSBuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKGltZy54IC0gd2lkdGggLyAyLCBpbWcueSAtIGhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgRWZ4LnNldENvbmZpZyhibG9ja1BhcnRpY2xlLCB7XHJcbiAgICAgICAgbmFtZTogJ25ld0Jlc3RTY29yZScsXHJcbiAgICAgICAgZnJhbWU6ICdibHVlJyxcclxuICAgICAgICBsaWZlc3BhbjogMTAwMCxcclxuICAgICAgICBncmF2aXR5WTogMTAsXHJcbiAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAsIGVuZDogMC4yNSwgZWFzZTogJ1F1YWQuZWFzZU91dCcgfSxcclxuICAgICAgICBhbHBoYTogeyBzdGFydDogMSwgZW5kOiAwLCBlYXNlOiAnUXVhZC5lYXNlSW4nIH0sXHJcbiAgICAgICAgYmxlbmRNb2RlOiAnQUREJyxcclxuICAgICAgICBlbWl0Wm9uZTogeyB0eXBlOiAncmFuZG9tJywgc291cmNlOiBnYW1lT3ZlckVtaXRab25lIH0sXHJcbiAgICB9KTtcclxuICAgIFNldERlcHRoKGJsb2NrUGFydGljbGUsICdoaWdoZXN0Jyk7XHJcbiAgICByZXR1cm4gRWZ4O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBFZng7XHJcbmV4cG9ydCB7IENyZWF0ZUVmeCwgQ3JlYXRlR2FtZU92ZXJFZnggfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSBcIi4uL2Jsb2NrL3N5c3RlbVwiO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gXCIuLi9kZXB0aFwiO1xyXG5jb25zdCBHYW1lV2FybmluZyA9IHtcclxuICAgIGhhc09uY2VTaG93OiB0cnVlLFxyXG4gICAgaGFzT25jZUhpZGU6IHRydWUsXHJcbiAgICB0aW1lOiA2ICogMTAwMCxcclxuICAgIHNpZ246IG51bGwsXHJcbiAgICBwcm9ncmVzc0JhcjogbnVsbCxcclxuICAgIHByb2dyZXNzQmFyTGluZTogbnVsbCxcclxuICAgIHByb2dyZXNzQW1vdW50OiAwLFxyXG4gICAgc2hha2VWYWx1ZTogMSxcclxuICAgIHVwZGF0ZVNoYWtlVmFsdWU6IChyZW1haW5lZE92ZXJDbnQpID0+IHtcclxuICAgICAgICBHYW1lV2FybmluZy5zaGFrZVZhbHVlID0gKEdhbWVXYXJuaW5nLnRpbWUgLSByZW1haW5lZE92ZXJDbnQpIC8gMTAwMDtcclxuICAgIH0sXHJcbiAgICBzaG93OiAoKSA9PiB7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NBbW91bnQgPSAwO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmRyYXcoKTtcclxuICAgICAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnNpZ24uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXJMaW5lLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmNsZWFyKCk7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnN0b3BTZngoJ3dhcm5pbmdTZngnKTtcclxuICAgIH0sXHJcbiAgICBhcmNEZWdyZWU6ICgpID0+IHtcclxuICAgICAgICBjb25zdCBzdGFydEFuZ2xlID0gMjcwICsgKEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50KSAqICgtMTgwKTsgLy8gMjcwIH4gOTBcclxuICAgICAgICBjb25zdCBlbmRBbmdsZSA9IC05MCArIChHYW1lV2FybmluZy5wcm9ncmVzc0Ftb3VudCkgKiAxODA7IC8vIC05MCB+IDkwXHJcbiAgICAgICAgcmV0dXJuIHsgc3RhcnRBbmdsZTogc3RhcnRBbmdsZSwgZW5kQW5nbGU6IGVuZEFuZ2xlIH07XHJcbiAgICB9LFxyXG4gICAgZHJhdzogKCkgPT4ge1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLmNsZWFyKCk7XHJcbiAgICAgICAgY29uc3QgciA9IEdhbWVXYXJuaW5nLnNpZ24ud2lkdGggKiA0IC8gNTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUubGluZVN0eWxlKDYsIDB4ZmJmZjAwLCAxKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUuc3Ryb2tlQ2lyY2xlKDAsIDAsIHIpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLmZpbGxTdHlsZSgweGZiZmYwMCwgMC40KTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5iZWdpblBhdGgoKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5hcmMoMCwgMCwgciwgUGhhc2VyLk1hdGguRGVnVG9SYWQoR2FtZVdhcm5pbmcuYXJjRGVncmVlKCkuc3RhcnRBbmdsZSksIFBoYXNlci5NYXRoLkRlZ1RvUmFkKEdhbWVXYXJuaW5nLmFyY0RlZ3JlZSgpLmVuZEFuZ2xlKSwgdHJ1ZSwgMC4wMSk7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuZmlsbFBhdGgoKTtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5jbG9zZVBhdGgoKTtcclxuICAgICAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbiAgICB9LFxyXG4gICAgY2xlYXI6ICgpID0+IHtcclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Jhci5jbGVhcigpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZS5jbGVhcigpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZTogKHNjZW5lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVtYWluZWRPdmVyQ250ID0gQmxvY2tTeXN0ZW0ub3ZlckNudE1heCAtIEJsb2NrU3lzdGVtLm92ZXJDbnQ7XHJcbiAgICAgICAgLy8gaGlkZSB3YXJuaW5nXHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChCbG9ja1N5c3RlbS5nZXRJc0dhbWVPdmVyKCkgfHwgcmVtYWluZWRPdmVyQ250ID4gR2FtZVdhcm5pbmcudGltZSkge1xyXG4gICAgICAgICAgICBpZiAoR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVXYXJuaW5nLmhhc09uY2VIaWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5oYXNPbmNlU2hvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzaG93IHdhcm5pbmdcclxuICAgICAgICBpZiAoR2FtZVdhcm5pbmcuaGFzT25jZVNob3cpIHtcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZVNob3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgR2FtZVdhcm5pbmcuaGFzT25jZUhpZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBHYW1lV2FybmluZy5zaG93KCk7XHJcbiAgICAgICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgICAgIGZyb206IDEsIHRvOiAwLCBkdXJhdGlvbjogNTAwLCB5b3lvOiB0cnVlLCByZXBlYXQ6IC0xLFxyXG4gICAgICAgICAgICAgICAgb25TdGFydDogKCkgPT4geyBHYW1lQXVkaW8ucGxheVNmeCgnd2FybmluZ1NmeCcpOyB9LFxyXG4gICAgICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHsgR2FtZUF1ZGlvLnBsYXlTZngoJ3dhcm5pbmdTZngnKTsgfSxcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHYW1lV2FybmluZy5oYXNPbmNlU2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5zaWduLnNldEFscGhhKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBHYW1lV2FybmluZy5zaWduLnNldEFscGhhKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBHYW1lV2FybmluZy5wcm9ncmVzc0Ftb3VudCA9IChHYW1lV2FybmluZy50aW1lIC0gcmVtYWluZWRPdmVyQ250KSAvIEdhbWVXYXJuaW5nLnRpbWU7XHJcbiAgICAgICAgR2FtZVdhcm5pbmcuZHJhdygpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnVwZGF0ZVNoYWtlVmFsdWUocmVtYWluZWRPdmVyQ250KTtcclxuICAgICAgICBzY2VuZS5jYW1lcmFzLm1haW4uc2hha2UoMTYwLCAwLjAwMSAqIEdhbWVXYXJuaW5nLnNoYWtlVmFsdWUsIGZhbHNlKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRHYW1lV2FybmluZyA9ICgpID0+IHtcclxuICAgIEdhbWVXYXJuaW5nLmhpZGUoKTtcclxuICAgIEdhbWVXYXJuaW5nLmhhc09uY2VTaG93ID0gdHJ1ZTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQW1vdW50ID0gMDtcclxuICAgIHJldHVybiBHYW1lV2FybmluZztcclxufTtcclxuY29uc3QgQ3JlYXRlR2FtZVdhcm5pbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIEdhbWVXYXJuaW5nLnNpZ24gPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ3dhcm5pbmdTaWduJyk7XHJcbiAgICBHYW1lV2FybmluZy5zaWduLnNldFBvc2l0aW9uKFZpZXcuY2VudGVyWCwgR2FtZVdhcm5pbmcuc2lnbi5oZWlnaHQpO1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyLnNldEFscGhhKDAuOSk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUgPSBzY2VuZS5hZGQuZ3JhcGhpY3MoKTtcclxuICAgIGNvbnN0IGJhclggPSBHYW1lV2FybmluZy5zaWduLng7XHJcbiAgICBjb25zdCBiYXJZID0gR2FtZVdhcm5pbmcuc2lnbi55O1xyXG4gICAgR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIuc2V0UG9zaXRpb24oYmFyWCwgYmFyWSk7XHJcbiAgICBHYW1lV2FybmluZy5wcm9ncmVzc0JhckxpbmUuc2V0UG9zaXRpb24oYmFyWCwgYmFyWSk7XHJcbiAgICBbR2FtZVdhcm5pbmcucHJvZ3Jlc3NCYXIsIEdhbWVXYXJuaW5nLnByb2dyZXNzQmFyTGluZSwgR2FtZVdhcm5pbmcuc2lnbl0ubWFwKGVsZSA9PiBTZXREZXB0aChlbGUsICd3YXJuaW5nJykpO1xyXG4gICAgSW5pdEdhbWVXYXJuaW5nKCk7XHJcbiAgICByZXR1cm4gR2FtZVdhcm5pbmc7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVXYXJuaW5nO1xyXG5leHBvcnQgeyBDcmVhdGVHYW1lV2FybmluZyB9O1xyXG4iLCJjb25zdCBVSVByb3BzID0ge1xyXG4gICAgbWFyZ2luOiAzMCxcclxuICAgIGFscGhhOiAwLjgsXHJcbiAgICBzY2FsZTogMC42LFxyXG4gICAgZG93bkdhcDogNCwgLy8gZG93biBnYXAgZm9yIGFuaW1cclxufTtcclxuY29uc3QgU2V0VUlQcm9wcyA9IChwcm9wcywgdmFsdWUpID0+IHtcclxuICAgIGlmICghVUlQcm9wc1twcm9wc10pXHJcbiAgICAgICAgY29uc29sZS53YXJuKGB1aSBwcm9wczogJHtwcm9wc30gaXMgbm90IGV4aXN0YCk7XHJcbiAgICBVSVByb3BzW3Byb3BzXSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIFVJUHJvcHM7XHJcbn07XHJcbmNvbnN0IENyZWF0ZVVJQnRuQW5pbSA9IChzY2VuZSwgYnRuKSA9PiB7XHJcbiAgICBjb25zdCB0b2dnbGVCdG4gPSBidG47XHJcbiAgICBpZiAoIXRvZ2dsZUJ0bilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCBEb3duID0gKCkgPT4ge1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogdG9nZ2xlQnRuLnksIHRvOiB0b2dnbGVCdG4uZG93blBvc1ksIGR1cmF0aW9uOiA4MCxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlQnRuLmlzQ2hhbmdpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9nZ2xlQnRuLmlzQ2hhbmdpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBVcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi55ID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IFVwID0gKCkgPT4ge1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogdG9nZ2xlQnRuLnksIHRvOiB0b2dnbGVCdG4udXBQb3NZLCBkdXJhdGlvbjogODAsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi5pc0NoYW5naW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRvZ2dsZUJ0bi5pc0NoYW5naW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnRuLnkgPSB0b2dnbGVCdG4udXBQb3NZO1xyXG4gICAgICAgICAgICAgICAgICAgIHR3LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJ0bi55ID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCdG4uaXNDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRvZ2dsZUJ0bi51cFBvc1kgPSBidG4ueTtcclxuICAgIHRvZ2dsZUJ0bi5kb3duUG9zWSA9IGJ0bi55ICsgVUlQcm9wcy5kb3duR2FwO1xyXG4gICAgdG9nZ2xlQnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICB0b2dnbGVCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4geyBEb3duKCk7IH0pO1xyXG4gICAgdG9nZ2xlQnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IFVwKCk7IH0pO1xyXG4gICAgdG9nZ2xlQnRuLm9uKCdwb2ludGVyb3V0JywgKCkgPT4geyBVcCgpOyB9KTtcclxuICAgIHJldHVybiBVSVByb3BzO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBVSVByb3BzO1xyXG5leHBvcnQgeyBTZXRVSVByb3BzLCBDcmVhdGVVSUJ0bkFuaW0gfTtcclxuIiwiaW1wb3J0IHsgQ29tbW9uU2Z4LCBDb21tb25VSSwgR2V0QXNzZXRGaWxlcyB9IGZyb20gXCJAc3JjL3NjZW5lcy9hc3NldFV0aWxzXCI7XHJcbmltcG9ydCBVSVByb3BzLCB7IENyZWF0ZVVJQnRuQW5pbSB9IGZyb20gXCIuLlwiO1xyXG5jb25zdCBHYW1lRnVsbFNjcmVlbiA9IHtcclxuICAgIGlzRnVsbFNjcmVlbjogZmFsc2UsXHJcbiAgICBidG46IG51bGwsXHJcbn07XHJcbmNvbnN0IEdldEZ1bGxTY3JlZW5Bc3NldHMgPSAoZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgY29uc3QgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgIHsga2V5OiAnZnVsbFNjcmVlbkxhcmdlcicsIHVybDogQ29tbW9uVUkgKyAnZnVsbFNjcmVlbkxhcmdlci5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgeyBrZXk6ICdmdWxsU2NyZWVuU21hbGxlcicsIHVybDogQ29tbW9uVUkgKyAnZnVsbFNjcmVlblNtYWxsZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgIHsga2V5OiAndG91Y2hTZngnLCB1cmw6IENvbW1vblNmeCArICd0b3VjaFNmeC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIEdldEFzc2V0RmlsZXMoYXNzZXRMaXN0LCBleGNlcHRpb25LZXlzKTtcclxufTtcclxuY29uc3QgSW5pdEZ1bGxTY3JlZW4gPSAoKSA9PiB7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUZ1bGxTY3JlZW4gPSAoc2NlbmUsIGRhdGEpID0+IHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBjb25zdCB7IG1hcmdpbiwgYWxwaGEsIHNjYWxlIH0gPSBVSVByb3BzO1xyXG4gICAgY29uc3QgeCA9IChfYSA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS54KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBtYXJnaW47XHJcbiAgICBjb25zdCB5ID0gKF9iID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG1hcmdpbjtcclxuICAgIC8vIGFkZCBzY3JlZW4gc2l6ZSBjb250cm9sbGVyXHJcbiAgICBHYW1lRnVsbFNjcmVlbi5idG4gPSBzY2VuZS5hZGQuaW1hZ2UoeCwgeSwgR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuID8gJ2Z1bGxTY3JlZW5TbWFsbGVyJyA6ICdmdWxsU2NyZWVuTGFyZ2VyJyk7XHJcbiAgICBDcmVhdGVVSUJ0bkFuaW0oc2NlbmUsIEdhbWVGdWxsU2NyZWVuLmJ0bik7XHJcbiAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0U2NhbGUoc2NhbGUpLnNldEFscGhhKGFscGhhKTtcclxuICAgIGNvbnN0IHNpemVDb250cm9sbGVyRXhpdEV2dCA9ICgpID0+IHtcclxuICAgICAgICBHYW1lRnVsbFNjcmVlbi5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgICAgICBzY2VuZS5zY2FsZS5zdG9wRnVsbHNjcmVlbigpO1xyXG4gICAgICAgIEdhbWVGdWxsU2NyZWVuLmJ0bi5zZXRUZXh0dXJlKCdmdWxsU2NyZWVuTGFyZ2VyJyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc2l6ZUNvbnRyb2xsZXJUb2dnbGVFdnQgPSAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuID0gIUdhbWVGdWxsU2NyZWVuLmlzRnVsbFNjcmVlbjtcclxuICAgICAgICBpZiAoR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgIHNjZW5lLnNjYWxlLnN0YXJ0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICBHYW1lRnVsbFNjcmVlbi5idG4uc2V0VGV4dHVyZSgnZnVsbFNjcmVlblNtYWxsZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzaXplQ29udHJvbGxlckV4aXRFdnQoKTtcclxuICAgIH07XHJcbiAgICBHYW1lRnVsbFNjcmVlbi5idG4ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBzaXplQ29udHJvbGxlclRvZ2dsZUV2dCgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyByZXNpemUgZXZlbnQgZm9yIHN0b3AgZnVsbCBzY3JlZW5cclxuICAgIHNjZW5lLnNjYWxlLm9mZigncmVzaXplJyk7XHJcbiAgICBzY2VuZS5zY2FsZS5vbigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChHYW1lRnVsbFNjcmVlbi5idG4uaXNDaGFuZ2luZylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICghR2FtZUZ1bGxTY3JlZW4uaXNGdWxsU2NyZWVuKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgc2l6ZUNvbnRyb2xsZXJFeGl0RXZ0KCk7XHJcbiAgICB9KTtcclxuICAgIEluaXRGdWxsU2NyZWVuKCk7XHJcbiAgICByZXR1cm4gR2FtZUZ1bGxTY3JlZW47XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVGdWxsU2NyZWVuO1xyXG5leHBvcnQgeyBHZXRGdWxsU2NyZWVuQXNzZXRzLCBJbml0RnVsbFNjcmVlbiwgQ3JlYXRlRnVsbFNjcmVlbiwgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgeyBJbml0QmxvY2tTeXN0ZW0sIFVwZGF0ZUFsbEJsb2NrcyB9IGZyb20gJy4vYmxvY2svc3lzdGVtJztcclxuaW1wb3J0IHsgQ3JlYXRlUG9wVXAgfSBmcm9tICcuL3VpL3BvcHVwJztcclxuaW1wb3J0IHsgQ3JlYXRlU2NvcmVUeHQgfSBmcm9tICcuL3VpL3Njb3JlJztcclxuaW1wb3J0IHsgQ3JlYXRlU2V0dGluZyB9IGZyb20gJy4vdWkvc2V0dGluZyc7XHJcbmltcG9ydCBHYW1lVGltZSwgeyBDcmVhdGVHYW1lVGltZVR4dCB9IGZyb20gJy4vdWkvdGltZSc7XHJcbmltcG9ydCBHYW1lQXVkaW8sIHsgQ3JlYXRlR2FtZUF1ZGlvIH0gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBTdG9wUGFzc2l2ZUxvYWRpbmcgfSBmcm9tICdAc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZyc7XHJcbmltcG9ydCBHYW1lU3RhcnRDbnQsIHsgQ3JlYXRlR2FtZVN0YXJ0Q250IH0gZnJvbSAnLi91aS9zdGFydENudCc7XHJcbmltcG9ydCBHYW1lT3ZlciwgeyBDcmVhdGVHYW1lT3ZlciB9IGZyb20gJy4vdWkvZ2FtZW92ZXInO1xyXG5pbXBvcnQgeyBDcmVhdGVJbnB1dCwgVXBkYXRlSW5wdXQgfSBmcm9tICcuL2lucHV0JztcclxuaW1wb3J0IEVmeCwgeyBDcmVhdGVFZngsIENyZWF0ZUdhbWVPdmVyRWZ4IH0gZnJvbSAnLi9lZngnO1xyXG5pbXBvcnQgeyBHZXRSbmRDb2xvciwgR2V0Um5kSW50LCBHZXRSbmROdW0gfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4vZGVwdGgnO1xyXG5pbXBvcnQgR2FtZVdhcm5pbmcsIHsgQ3JlYXRlR2FtZVdhcm5pbmcgfSBmcm9tICcuL3VpL3dhcm5pbmcnO1xyXG5pbXBvcnQgR2FtZURhdGEgZnJvbSAnLi4vc3RvcmFnZSc7XHJcbmltcG9ydCBHYW1lRnVsbFNjcmVlbiwgeyBDcmVhdGVGdWxsU2NyZWVuIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvZnVsbFNjcmVlbic7XHJcbmNvbnN0IFN0YXJ0R2FtZSA9IChzY2VuZSkgPT4ge1xyXG4gICAgc2NlbmUuc2NlbmUucmVtb3ZlKCdnYW1lJyk7XHJcbiAgICBzY2VuZS5zY2VuZS5hZGQoJ2dhbWUnLCBHYW1lU2NlbmUpO1xyXG4gICAgc2NlbmUuc2NlbmUubGF1bmNoKCdnYW1lJyk7XHJcbn07XHJcbmNvbnN0IFJlc3RhcnRHYW1lID0gKHNjZW5lKSA9PiB7XHJcbiAgICBFZnguc3RvcEFsbCgpO1xyXG4gICAgc2NlbmUuc2NlbmUucmVzdGFydCgpO1xyXG59O1xyXG5jb25zdCBTdG9wR2FtZSA9IChzY2VuZSkgPT4ge1xyXG4gICAgaWYgKHNjZW5lLnNjZW5lLmdldCgnZ2FtZScpKSB7XHJcbiAgICAgICAgc2NlbmUuc2NlbmUuc2V0QWN0aXZlKGZhbHNlLCAnZ2FtZScpO1xyXG4gICAgICAgIHNjZW5lLnNjZW5lLnNldFZpc2libGUoZmFsc2UsICdnYW1lJyk7XHJcbiAgICAgICAgRWZ4LnN0b3BBbGwoKTtcclxuICAgICAgICBHYW1lQXVkaW8uc3RvcEJnbSgnZ2FtZUJnbScpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXNjZW5lLnNjZW5lLmdldCgnZ2FtZScpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBzY2VuZS5zY2VuZS5yZW1vdmUoJ2dhbWUnKTtcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgR2FtZVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAga2V5OiAnZ2FtZScsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRoZW1lSWR4ID0gMDtcclxuICAgICAgICB0aGlzLndhbGxHYXAgPSBWaWV3LmNhbGNSYXRpbyg5MCk7XHJcbiAgICAgICAgdGhpcy53YWxsQm90dG9tR2FwID0gVmlldy5jYWxjUmF0aW8oNjApO1xyXG4gICAgICAgIHRoaXMubWF0dGVyU3RlcEZvcmNlID0gMC4wODsgLy8gYXBwbHkgZGVsdGEgdG8gbWF0dGVyIGZvcmNlIG1ldGhvZFxyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlV2FsbCgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmdTY2VuZSgpO1xyXG4gICAgICAgIC8vIGJsb2NrIHN5c3RlbVxyXG4gICAgICAgIEluaXRCbG9ja1N5c3RlbSgpO1xyXG4gICAgICAgIC8vIGlucHV0XHJcbiAgICAgICAgQ3JlYXRlSW5wdXQodGhpcyk7XHJcbiAgICAgICAgLy8gYXVkaW9cclxuICAgICAgICBDcmVhdGVHYW1lQXVkaW8odGhpcywgR2FtZURhdGEpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5QmdtKCdnYW1lQmdtJyk7XHJcbiAgICAgICAgLy8gdWlcclxuICAgICAgICBDcmVhdGVHYW1lU3RhcnRDbnQodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlU2NvcmVUeHQodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlR2FtZVRpbWVUeHQodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlUG9wVXAodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlR2FtZVdhcm5pbmcodGhpcyk7XHJcbiAgICAgICAgQ3JlYXRlR2FtZU92ZXIodGhpcywgdGhpcy50aGVtZUlkeCk7XHJcbiAgICAgICAgQ3JlYXRlRWZ4KHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZUdhbWVPdmVyRWZ4KHRoaXMsIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnKTtcclxuICAgICAgICBDcmVhdGVGdWxsU2NyZWVuKHRoaXMpO1xyXG4gICAgICAgIFNldERlcHRoKEdhbWVGdWxsU2NyZWVuLmJ0biwgJ2Z1bGxTY3JlZW4nKTtcclxuICAgICAgICBDcmVhdGVTZXR0aW5nKHRoaXMpO1xyXG4gICAgICAgIC8vIHN0b3AgcGFzc2l2ZSBsb2FkaW5nXHJcbiAgICAgICAgU3RvcFBhc3NpdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgLy8gLy8gZGVidWdnaW5nXHJcbiAgICAgICAgLy8gY29uc3QgaW5zcGVjdG9yV2lkdGggPSAyNTU7XHJcbiAgICAgICAgLy8gUEdVSW5zcGVjdG9yKHRoaXMsIHsgcmlnaHQ6IHdpbmRvdy5pbm5lcldpZHRoIC0gaW5zcGVjdG9yV2lkdGgsIHRvcDogNDggfSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUodGltZSwgZGVsdGEpIHtcclxuICAgICAgICBpZiAoIUdhbWVTdGFydENudC5nZXRJc1N0YXJ0KCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBHYW1lVGltZS51cGRhdGUodGhpcywgZGVsdGEpO1xyXG4gICAgICAgIEdhbWVXYXJuaW5nLnVwZGF0ZSh0aGlzKTtcclxuICAgICAgICBVcGRhdGVJbnB1dChkZWx0YSk7XHJcbiAgICAgICAgVXBkYXRlQWxsQmxvY2tzKHRoaXMsIHRpbWUsIGRlbHRhKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZU1hdHRlclN0ZXAoZGVsdGEpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlV2FsbCgpIHtcclxuICAgICAgICAvLyBzZXQgbWF0dGVyIHdhbGxzXHJcbiAgICAgICAgY29uc3Qgd2FsbFRoaWNrbmVzcyA9IHRoaXMud2FsbEdhcCAqIDU7XHJcbiAgICAgICAgdGhpcy5tYXR0ZXIud29ybGQuc2V0Qm91bmRzKHRoaXMud2FsbEdhcCwgMCwgVmlldy53IC0gKHRoaXMud2FsbEdhcCAqIDIpLCBWaWV3LmggLSB0aGlzLndhbGxHYXAsIHdhbGxUaGlja25lc3MsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAvLyBjcmVhdGUgYmxvY2sgc3Bhd24gc3VwcG9ydCB3YWxsXHJcbiAgICAgICAgY29uc3Qgc3VwcG9ydExlZnQgPSB0aGlzLm1hdHRlci5hZGQucmVjdGFuZ2xlKDAsIC1WaWV3LmggLyAyLCB0aGlzLndhbGxHYXAsIFZpZXcuaCwgeyBpc1N0YXRpYzogdHJ1ZSB9KTtcclxuICAgICAgICBjb25zdCBzdXBwb3J0UmlnaHQgPSB0aGlzLm1hdHRlci5hZGQucmVjdGFuZ2xlKFZpZXcudywgLVZpZXcuaCAvIDIsIHRoaXMud2FsbEdhcCwgVmlldy5oLCB7IGlzU3RhdGljOiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IGJnVGV4dHVyZUxpc3QgPSBbJ2JnR3JlZW4nLCAnYmdCcm93bicsICdiZ0JsdWUnXTtcclxuICAgICAgICBjb25zdCBidG5MaXN0ID0gWydidG5HcmVlbicsICdidG5Ccm93bicsICdidG5CbHVlJ107XHJcbiAgICAgICAgdGhpcy50aGVtZUlkeCA9IEdldFJuZEludCgwLCBiZ1RleHR1cmVMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgY29uc3QgbGVmdFdhbGwgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIDAsIHRoaXMud2FsbEdhcCwgVmlldy5oLCBiZ1RleHR1cmVMaXN0W3RoaXMudGhlbWVJZHhdKS5zZXRPcmlnaW4oMCk7XHJcbiAgICAgICAgY29uc3QgcmlnaHRXYWxsID0gdGhpcy5hZGQudGlsZVNwcml0ZShWaWV3LncgLSB0aGlzLndhbGxHYXAsIDAsIHRoaXMud2FsbEdhcCwgVmlldy5oLCBiZ1RleHR1cmVMaXN0W3RoaXMudGhlbWVJZHhdKS5zZXRPcmlnaW4oMCk7XHJcbiAgICAgICAgY29uc3QgYm90dG9tV2FsbCA9IHRoaXMuYWRkLmltYWdlKDAsIFZpZXcuaCAtIHRoaXMud2FsbEdhcCwgYnRuTGlzdFt0aGlzLnRoZW1lSWR4XSkuc2V0T3JpZ2luKDApLnNldERpc3BsYXlTaXplKFZpZXcudywgdGhpcy53YWxsR2FwKTtcclxuICAgICAgICBbbGVmdFdhbGwsIHJpZ2h0V2FsbCwgYm90dG9tV2FsbF0ubWFwKHdhbGwgPT4gU2V0RGVwdGgod2FsbCwgJ3dhbGwnKSk7XHJcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiAxLCBkdXJhdGlvbjogNTAwMCwgcmVwZWF0OiAtMSxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxlZnRXYWxsLnRpbGVQb3NpdGlvblkgKz0gMTtcclxuICAgICAgICAgICAgICAgIHJpZ2h0V2FsbC50aWxlUG9zaXRpb25ZIC09IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJnU2NlbmUoKSB7XHJcbiAgICAgICAgY29uc3QgYmdDb2xvciA9IEdldFJuZENvbG9yKCk7XHJcbiAgICAgICAgLy8gc2VsZWN0IGJnIGNvbG9yXHJcbiAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uc2V0QmFja2dyb3VuZENvbG9yKGJnQ29sb3IpO1xyXG4gICAgICAgIC8vIHNlbGVjdCBjbG91ZCBzaGFwZVxyXG4gICAgICAgIHRoaXMuY2xvdWRHcm91cCA9IHRoaXMuYWRkLmdyb3VwKHtcclxuICAgICAgICAgICAgZGVmYXVsdEtleTogJ2Nsb3VkJyxcclxuICAgICAgICAgICAgbWF4U2l6ZTogMTVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNwYXduQ2xvdWQoKTtcclxuICAgICAgICAvLyBzZWxlY3QgdHJlZSBzaGFwZVxyXG4gICAgICAgIHRoaXMudHJlZUdyb3VwID0gdGhpcy5hZGQuZ3JvdXAoe1xyXG4gICAgICAgICAgICBkZWZhdWx0S2V5OiAndHJlZScsXHJcbiAgICAgICAgICAgIG1heFNpemU6IDE1XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zcGF3blRyZWUoKTtcclxuICAgICAgICAvLyBzZWxlY3QgbWlzdFxyXG4gICAgICAgIGNvbnN0IGJnTWlzdElkeCA9IEdldFJuZEludCgxLCA0KTtcclxuICAgICAgICBjb25zdCBiZ01pc3QgPSB0aGlzLmFkZC50aWxlU3ByaXRlKHRoaXMud2FsbEdhcCwgVmlldy5oIC0gdGhpcy53YWxsR2FwLCBWaWV3LncgLSAodGhpcy53YWxsR2FwICogMiksIHRoaXMud2FsbEdhcCwgJ21pc3QnICsgYmdNaXN0SWR4KTtcclxuICAgICAgICBiZ01pc3Quc2V0T3JpZ2luKDAsIDEpO1xyXG4gICAgICAgIGJnTWlzdC5zZXRBbHBoYSgwLjQpO1xyXG4gICAgICAgIFNldERlcHRoKGJnTWlzdCwgJ21pc3QnKTtcclxuICAgICAgICB0aGlzLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IDEsIGR1cmF0aW9uOiA1MDAwLCByZXBlYXQ6IC0xLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYmdNaXN0LnRpbGVQb3NpdGlvblggKz0gMC41O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzcGF3bkNsb3VkKCkge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gR2V0Um5kSW50KDEyMDAsIDMwMDApO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG91ZEdyb3VwLmNoaWxkcmVuLml0ZXJhdGUoKGNsb3VkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hjayBkZWF0bGluZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG91ZC54ID4gVmlldy53KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3VkR3JvdXAua2lsbEFuZEhpZGUoY2xvdWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgY2xvdWRzXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvdWQueCArPSBjbG91ZC5tb3ZlR2FwWDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvdWQgPSB0aGlzLmNsb3VkR3JvdXAuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNsb3VkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldFRleHR1cmUoJ2Nsb3VkJyArIEdldFJuZEludCgxLCAxMCkpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0UG9zaXRpb24oLWNsb3VkLndpZHRoLCBHZXRSbmRJbnQoVmlldy5jZW50ZXJZLCBWaWV3LmNlbnRlclkgLSBWaWV3LmNlbnRlclkgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5zZXRPcmlnaW4oMCwgMC41KTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNsb3VkLnNldEFscGhhKDAuNCk7XHJcbiAgICAgICAgICAgICAgICBjbG91ZC5tb3ZlR2FwWCA9IEdldFJuZE51bSgwLjIsIDMpO1xyXG4gICAgICAgICAgICAgICAgU2V0RGVwdGgoY2xvdWQsICdjbG91ZCcpO1xyXG4gICAgICAgICAgICAgICAgY2xvdWQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25DbG91ZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzcGF3blRyZWUoKSB7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBHZXRSbmRJbnQoMTIwMCwgMzAwMCk7XHJcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiAxLCBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVHcm91cC5jaGlsZHJlbi5pdGVyYXRlKCh0cmVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hjayBkZWF0bGluZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmVlLnggPCAtdHJlZS53aWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlR3JvdXAua2lsbEFuZEhpZGUodHJlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSBjbG91ZHNcclxuICAgICAgICAgICAgICAgICAgICB0cmVlLnggLT0gMC41O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlR3JvdXAuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRyZWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRUZXh0dXJlKCd0cmVlJyArIEdldFJuZEludCgxLCAzNikpO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRQb3NpdGlvbihWaWV3LncsIFZpZXcuaCAtIHRoaXMud2FsbEdhcCk7XHJcbiAgICAgICAgICAgICAgICB0cmVlLnNldE9yaWdpbigwLCAxKTtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdHJlZS5zZXRBbHBoYSgwLjIpO1xyXG4gICAgICAgICAgICAgICAgU2V0RGVwdGgodHJlZSwgJ3RyZWUnKTtcclxuICAgICAgICAgICAgICAgIHRyZWUuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25UcmVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZU1hdHRlclN0ZXAoZGVsdGEpIHsgdGhpcy5tYXR0ZXIud29ybGQuc3RlcChkZWx0YSk7IH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBHYW1lU2NlbmU7XHJcbmV4cG9ydCB7IFN0YXJ0R2FtZSwgUmVzdGFydEdhbWUsIFN0b3BHYW1lIH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IEdhbWVBdWRpbyBmcm9tICdAc3JjL3NjZW5lcy9hdWRpbyc7XHJcbmltcG9ydCB7IFJlc3RhcnRHYW1lLCBTdG9wR2FtZSB9IGZyb20gJy4uL2dhbWUnO1xyXG5pbXBvcnQgeyBTdGFydFRpdGxlIH0gZnJvbSAnLi4vdGl0bGUnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWFyZ2luSCwgQ29udGV4dE1hcmdpblcsIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRPdmVySGVhZFNpemUsIFR4dFRpdGxlSGVhZFNpemUgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IFNjb3JlIGZyb20gJy4vc2NvcmUnO1xyXG5pbXBvcnQgeyBTZXREZXB0aCB9IGZyb20gJy4uL2RlcHRoJztcclxuaW1wb3J0IHsgR2V0TG9jYWxTdG9yYWdlSXRlbSB9IGZyb20gJ0BzcmMvdXRpbHMvc3RvcmFnZSc7XHJcbmltcG9ydCBHYW1lRGF0YSBmcm9tICcuLi8uLi9zdG9yYWdlJztcclxuaW1wb3J0IEVmeCBmcm9tICcuLi9lZngnO1xyXG5pbXBvcnQgQmxvY2tTeXN0ZW0gZnJvbSAnLi4vYmxvY2svc3lzdGVtJztcclxuY29uc3QgR2FtZU92ZXIgPSB7XHJcbiAgICBvdmVyVHh0OiBudWxsLFxyXG4gICAgbGF5ZXI6IG51bGwsXHJcbiAgICBuZXdCZXN0U2NvcmVCZ1NjYWxlVzogMi40LFxyXG4gICAgbmV3QmVzdFNjb3JlQmdTY2FsZUg6IDMuMixcclxuICAgIG5ld0Jlc3RTY29yZUJnOiBudWxsLFxyXG4gICAgbmV3QmVzdFNjb3JlVHh0OiBudWxsLFxyXG4gICAgbmV3QmVzdFNjb3JlTnVtOiBudWxsLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHRpdGxlOiAnVGltZSBPdmVyJyxcclxuICAgICAgICBib251c1RpbWU6IDAsXHJcbiAgICAgICAgc2NvcmU6IDAsXHJcbiAgICAgICAgZmluYWxTY29yZTogMFxyXG4gICAgfSxcclxuICAgIGFuaW1Db21tb25PdmVyOiBmdW5jdGlvbiAoc2NlbmUsIHNuZEtleSwgdHh0KSB7XHJcbiAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3Zlcih0cnVlKTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeChzbmRLZXkpO1xyXG4gICAgICAgIGNvbnN0IG92ZXJTbmQgPSBzY2VuZS5zb3VuZC5nZXQoc25kS2V5KTtcclxuICAgICAgICBjb25zdCBvdmVyU25kVGltaW5nID0gb3ZlclNuZC5kdXJhdGlvbiAvIDIgKiAxMDAwIC0gMTAwO1xyXG4gICAgICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IG92ZXJTbmRUaW1pbmcsIGR1cmF0aW9uOiBvdmVyU25kVGltaW5nLFxyXG4gICAgICAgICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJUeHQuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3ZlclR4dC5zZXRUZXh0KHR4dCArICdcXG4nKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVyVHh0LnNldFRleHQodHh0ICsgJ1xcbk92ZXInKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbVNob3coc2NlbmUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHR4dCArICcgT3ZlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzVGltZTogU2NvcmUuZ2V0Qm9udXNUaW1lU2NvcmUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IFNjb3JlLmdldFNjb3JlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU2NvcmU6IFNjb3JlLmdldEZpbmFsU2NvcmUoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhbmltVGltZU92ZXI6IGZ1bmN0aW9uIChzY2VuZSkgeyB0aGlzLmFuaW1Db21tb25PdmVyKHNjZW5lLCAndm9pY2VUaW1lT3ZlcicsICdUaW1lJyk7IH0sXHJcbiAgICBhbmltR2FtZU92ZXI6IGZ1bmN0aW9uIChzY2VuZSkgeyB0aGlzLmFuaW1Db21tb25PdmVyKHNjZW5lLCAndm9pY2VHYW1lT3ZlcicsICdHYW1lJyk7IH0sXHJcbiAgICBhbmltU2hvdzogZnVuY3Rpb24gKHNjZW5lLCBkYXRhKSB7XHJcbiAgICAgICAgLy8gc2V0IGRlZmF1bHQgZGF0YSBmb3IgcGVyZm9ybWFuY2VcclxuICAgICAgICB0aGlzLnNob3coe1xyXG4gICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcclxuICAgICAgICAgICAgYm9udXNUaW1lOiAwLFxyXG4gICAgICAgICAgICBzY29yZTogMCxcclxuICAgICAgICAgICAgZmluYWxTY29yZTogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGFuaW0gdG8gYm9udXMgdGltZSAmIHNjb3JlXHJcbiAgICAgICAgY29uc3QgcHJldkJlc3RTY29yZSA9IEdldExvY2FsU3RvcmFnZUl0ZW0oR2FtZURhdGEsICdiZXN0Jyk7XHJcbiAgICAgICAgY29uc3QgeyBzY29yZSwgYm9udXNUaW1lLCBmaW5hbFNjb3JlIH0gPSBkYXRhO1xyXG4gICAgICAgIFNjb3JlLmNvbXBhcmVOb3JtYWxBbmRCZXN0KGZpbmFsU2NvcmUpOyAvLyB0ZXN0XHJcbiAgICAgICAgY29uc3QgdHdMaXN0ID0gW107XHJcbiAgICAgICAgY29uc3Qgc2Z4Q29tbW9uVHdDb25maWcgPSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0aW5nIHNjb3JlIHNmeFxyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogc2NvcmUsIGR1cmF0aW9uOiAxMDAsIHJlcGVhdDogOSxcclxuICAgICAgICAgICAgb25TdGFydDogKCkgPT4geyBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih0d0xpc3Quc2hpZnQoKSk7IH0sXHJcbiAgICAgICAgICAgIG9uUmVwZWF0OiAoKSA9PiB7IEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZVNjb3JlJyk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHNjYWxlQ29tbW9uVHdDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGZyb206IDEsIHRvOiAxLjMsIGR1cmF0aW9uOiA1MDAsIHlveW86IHRydWUsIGVhc2U6ICdCYWNrLmVhc2VJbk91dCcsXHJcbiAgICAgICAgICAgIG9uU3RhcnQ6ICgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHdMaXN0LnB1c2goc2Z4Q29tbW9uVHdDb25maWcsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGVDb21tb25Ud0NvbmZpZyksIHsgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNjb3JlXHJcbiAgICAgICAgICAgIGZyb206IDAsIHRvOiBzY29yZSwgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci5zY29yZVR4dC5zZXRUZXh0KHR3RGF0YS52YWx1ZS50b0ZpeGVkKDApKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHR3TGlzdC5zaGlmdCgpKTsgfSwgMjAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHNmeENvbW1vblR3Q29uZmlnLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNjYWxlQ29tbW9uVHdDb25maWcpLCB7IG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIGJvbnVzIHRpbWVcclxuICAgICAgICAgICAgZnJvbTogMCwgdG86IGJvbnVzVGltZSwgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAodHcsIHR3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFRleHQodHdEYXRhLnZhbHVlLnRvRml4ZWQoMCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpOyB9LCAyMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHdMaXN0LnB1c2goc2Z4Q29tbW9uVHdDb25maWcsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGVDb21tb25Ud0NvbmZpZyksIHsgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFNjYWxlKHR3RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gfSkpO1xyXG4gICAgICAgIHR3TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNjb3JlIHZpYSBib251cyB0aW1lIChmaW5hbCBzY29yZSlcclxuICAgICAgICAgICAgZnJvbTogc2NvcmUsIHRvOiBmaW5hbFNjb3JlLCBkdXJhdGlvbjogMTAwMCxcclxuICAgICAgICAgICAgb25VcGRhdGU6ICh0dywgdHdEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFRleHQodHdEYXRhLnZhbHVlLnRvRml4ZWQoMCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93IG5ldyBiZXN0IHNjb3JlIHBlcmZvcm1hbmNlIGlmIHNjb3JlIGlzIGJldHRlciB0aGFuIHByZXYgYmVzdCBvbmVcclxuICAgICAgICAgICAgICAgIGlmIChmaW5hbFNjb3JlID4gcHJldkJlc3RTY29yZSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0Jlc3RTY29yZVR4dC5zaG93KGZpbmFsU2NvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIodHdMaXN0LnNoaWZ0KCkpO1xyXG4gICAgfSxcclxuICAgIHNob3c6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgZGF0YSAmJiB0aGlzLnNldFR4dERhdGEoZGF0YSk7XHJcbiAgICAgICAgdGhpcy5sYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubmV3QmVzdFNjb3JlVHh0LmhpZGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBzZXRUeHREYXRhOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgY29uc3QgeyB0aXRsZSwgYm9udXNUaW1lLCBzY29yZSwgZmluYWxTY29yZSB9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgIHRoaXMubGF5ZXIudGl0bGVUeHQuc2V0VGV4dCh0aXRsZSk7XHJcbiAgICAgICAgdGhpcy5sYXllci50aW1lVHh0LnNldFRleHQoYm9udXNUaW1lKTtcclxuICAgICAgICB0aGlzLmxheWVyLnNjb3JlVHh0LnNldFRleHQoc2NvcmUpO1xyXG4gICAgfSxcclxufTtcclxuY29uc3QgSW5pdEdhbWVPdmVyID0gKCkgPT4ge1xyXG4gICAgR2FtZU92ZXIuc2V0VHh0RGF0YSh7XHJcbiAgICAgICAgdGl0bGU6ICdUaW1lIE92ZXInLFxyXG4gICAgICAgIGJvbnVzVGltZTogMCxcclxuICAgICAgICBzY29yZTogMCxcclxuICAgICAgICBmaW5hbFNjb3JlOiAwXHJcbiAgICB9KTtcclxuICAgIEdhbWVPdmVyLmhpZGUoKTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQuc2V0VmlzaWJsZShmYWxzZSk7XHJcbn07XHJcbmNvbnN0IENvbnRleHRUeHRHYXBIID0gVmlldy5oIC8gMTg7XHJcbmNvbnN0IEJ0bkdhcFcgPSBWaWV3LncgLyA4O1xyXG5jb25zdCBDcmVhdGVHYW1lT3ZlciA9IChzY2VuZSwgdGhlbWVJZHgpID0+IHtcclxuICAgIGNvbnN0IHRoZW1lQ29sb3JMaXN0ID0gWydHcmVlbicsICdCcm93bicsICdCbHVlJ107XHJcbiAgICBjb25zdCBjb2xvciA9IHRoZW1lQ29sb3JMaXN0W3RoZW1lSWR4XTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJycpLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgR2FtZU92ZXIubGF5ZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZKTtcclxuICAgIGNvbnN0IGJnID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdibGFja1NjcmVlbicpO1xyXG4gICAgYmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgYmcuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJnLnNldEFscGhhKDAuNCk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gc2NlbmUuYWRkLmltYWdlKDAsIDAsICdwYW5lbCcgKyBjb2xvcik7XHJcbiAgICBjb250ZXh0LnNldERpc3BsYXlTaXplKFZpZXcudyAtIENvbnRleHRNYXJnaW5XLCBWaWV3LmggLSBDb250ZXh0TWFyZ2luSCk7XHJcbiAgICBjb25zdCB0aXRsZUJnID0gc2NlbmUuYWRkLmltYWdlKDAsIC1WaWV3LmggLyA0LCAnYnRuJyArIGNvbG9yKS5zZXRTY2FsZSgxLjgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBzY2VuZS5hZGQudGV4dCh0aXRsZUJnLngsIHRpdGxlQmcueSwgJ0dhbWUgT3ZlcicpO1xyXG4gICAgR2FtZU92ZXIubGF5ZXIudGl0bGVUeHQgPSB0aXRsZTtcclxuICAgIGNvbnN0IGJvbnVzVGltZSA9IHNjZW5lLmFkZC50ZXh0KDAsIC1Db250ZXh0VHh0R2FwSCwgJ0JvbnVzIFRpbWUnKTtcclxuICAgIGNvbnN0IGJvbnVzVGltZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIGJvbnVzVGltZS55ICsgQ29udGV4dFR4dEdhcEgsICcwJyk7XHJcbiAgICBHYW1lT3Zlci5sYXllci50aW1lVHh0ID0gYm9udXNUaW1lVHh0O1xyXG4gICAgY29uc3Qgc2NvcmUgPSBzY2VuZS5hZGQudGV4dCgwLCBDb250ZXh0VHh0R2FwSCwgJ1Njb3JlJyk7XHJcbiAgICBjb25zdCBzY29yZVR4dCA9IHNjZW5lLmFkZC50ZXh0KDAsIHNjb3JlLnkgKyBDb250ZXh0VHh0R2FwSCwgJ1Njb3JlJyk7XHJcbiAgICBHYW1lT3Zlci5sYXllci5zY29yZVR4dCA9IHNjb3JlVHh0O1xyXG4gICAgW0dhbWVPdmVyLm92ZXJUeHQsIHRpdGxlLCBib251c1RpbWUsIGJvbnVzVGltZVR4dCwgc2NvcmUsIHNjb3JlVHh0XS5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGVsZSk7XHJcbiAgICB9KTtcclxuICAgIEdhbWVPdmVyLm92ZXJUeHQuc2V0Rm9udFNpemUoVHh0T3ZlckhlYWRTaXplKTtcclxuICAgIHRpdGxlLnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgY29uc3QgdGl0bGVCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoLUJ0bkdhcFcsIFZpZXcuaCAvIDQsICdvdmVyQnRuVXAnICsgY29sb3IpLnNldEludGVyYWN0aXZlKCkuc2V0U2NhbGUoMik7XHJcbiAgICBjb25zdCB0aXRsZUJ0bkltZyA9IHNjZW5lLmFkZC5pbWFnZSh0aXRsZUJ0bi54LCB0aXRsZUJ0bi55IC0gNCwgJ292ZXJCYWNrJykuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGNvbnN0IHRpdGxlRnVuY0Rvd24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGl0bGVCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0bkRvd24nICsgY29sb3IpO1xyXG4gICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgKyA0KTtcclxuICAgIH07XHJcbiAgICBjb25zdCB0aXRsZUZ1bmNVcCA9ICgpID0+IHtcclxuICAgICAgICB0aXRsZUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuVXAnICsgY29sb3IpO1xyXG4gICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgLSA0KTtcclxuICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgICAgICBTdG9wR2FtZShzY2VuZSk7XHJcbiAgICAgICAgU3RhcnRUaXRsZShzY2VuZSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdGl0bGVGdW5jT3V0ID0gKHB0cikgPT4ge1xyXG4gICAgICAgIHRpdGxlQnRuLnNldFRleHR1cmUoJ292ZXJCdG5VcCcgKyBjb2xvcik7XHJcbiAgICAgICAgaWYgKHB0ci5pc0Rvd24pXHJcbiAgICAgICAgICAgIHRpdGxlQnRuSW1nLnNldFBvc2l0aW9uKHRpdGxlQnRuSW1nLngsIHRpdGxlQnRuSW1nLnkgLSA0KTtcclxuICAgIH07XHJcbiAgICB0aXRsZUJ0bi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7IHRpdGxlRnVuY0Rvd24oKTsgfSk7XHJcbiAgICB0aXRsZUJ0bkltZy5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7IHRpdGxlRnVuY0Rvd24oKTsgfSk7XHJcbiAgICB0aXRsZUJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4geyB0aXRsZUZ1bmNVcCgpOyB9KTtcclxuICAgIHRpdGxlQnRuSW1nLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHRpdGxlRnVuY1VwKCk7IH0pO1xyXG4gICAgdGl0bGVCdG4ub24oJ3BvaW50ZXJvdXQnLCAocHRyKSA9PiB7IHRpdGxlRnVuY091dChwdHIpOyB9KTtcclxuICAgIHRpdGxlQnRuSW1nLm9uKCdwb2ludGVyb3V0JywgKHB0cikgPT4geyB0aXRsZUZ1bmNPdXQocHRyKTsgfSk7XHJcbiAgICBjb25zdCByZXRyeUJ0biA9IHNjZW5lLmFkZC5pbWFnZShCdG5HYXBXLCB0aXRsZUJ0bi55LCAnb3ZlckJ0blVwJyArIGNvbG9yKS5zZXRJbnRlcmFjdGl2ZSgpLnNldFNjYWxlKDIpO1xyXG4gICAgY29uc3QgcmV0cnlCdG5JbWcgPSBzY2VuZS5hZGQuaW1hZ2UocmV0cnlCdG4ueCwgcmV0cnlCdG4ueSAtIDQsICdvdmVyUmV0cnknKS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgY29uc3QgcmV0cnlGdW5jRG93biA9ICgpID0+IHtcclxuICAgICAgICByZXRyeUJ0bi5zZXRUZXh0dXJlKCdvdmVyQnRuRG93bicgKyBjb2xvcik7XHJcbiAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSArIDQpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJldHJ5RnVuY1VwID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHJ5QnRuLnNldFRleHR1cmUoJ292ZXJCdG5VcCcgKyBjb2xvcik7XHJcbiAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSAtIDQpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgICAgIFJlc3RhcnRHYW1lKHNjZW5lKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZXRyeUZ1bmNPdXQgPSAocHRyKSA9PiB7XHJcbiAgICAgICAgcmV0cnlCdG4uc2V0VGV4dHVyZSgnb3ZlckJ0blVwJyArIGNvbG9yKTtcclxuICAgICAgICBpZiAocHRyLmlzRG93bilcclxuICAgICAgICAgICAgcmV0cnlCdG5JbWcuc2V0UG9zaXRpb24ocmV0cnlCdG5JbWcueCwgcmV0cnlCdG5JbWcueSAtIDQpO1xyXG4gICAgfTtcclxuICAgIHJldHJ5QnRuLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmV0cnlGdW5jRG93bigpOyB9KTtcclxuICAgIHJldHJ5QnRuSW1nLm9uKCdwb2ludGVyZG93bicsICgpID0+IHsgcmV0cnlGdW5jRG93bigpOyB9KTtcclxuICAgIHJldHJ5QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHJldHJ5RnVuY1VwKCk7IH0pO1xyXG4gICAgcmV0cnlCdG5JbWcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgcmV0cnlGdW5jVXAoKTsgfSk7XHJcbiAgICByZXRyeUJ0bi5vbigncG9pbnRlcm91dCcsIChwdHIpID0+IHsgcmV0cnlGdW5jT3V0KHB0cik7IH0pO1xyXG4gICAgcmV0cnlCdG5JbWcub24oJ3BvaW50ZXJvdXQnLCAocHRyKSA9PiB7IHJldHJ5RnVuY091dChwdHIpOyB9KTtcclxuICAgIEdhbWVPdmVyLmxheWVyLmFkZChbXHJcbiAgICAgICAgYmcsXHJcbiAgICAgICAgY29udGV4dCxcclxuICAgICAgICB0aXRsZUJnLCB0aXRsZSxcclxuICAgICAgICBib251c1RpbWUsIGJvbnVzVGltZVR4dCxcclxuICAgICAgICBzY29yZSwgc2NvcmVUeHQsXHJcbiAgICAgICAgdGl0bGVCdG4sIHRpdGxlQnRuSW1nLFxyXG4gICAgICAgIHJldHJ5QnRuLCByZXRyeUJ0bkltZyxcclxuICAgIF0pO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSBWaWV3LmggLyA0LCAnYnRuJyArIGNvbG9yKTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFNjYWxlKEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQgPSBzY2VuZS5hZGQudGV4dChHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy54LCBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy55IC0gNiwgJyAgICAgIE5ld1xcbkJlc3QgU2NvcmUhJyk7XHJcbiAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQpO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldEZvbnRTaXplKFR4dFRpdGxlSGVhZFNpemUpO1xyXG4gICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldEZvbnRGYW1pbHkoJ0FyaWFsIEJsYWNrJyk7XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2hvdyA9ICgpID0+IHtcclxuICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZy5zZXRTY2FsZSgwLjEgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlVywgMC4xICogR2FtZU92ZXIubmV3QmVzdFNjb3JlQmdTY2FsZUgpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zZXRTY2FsZSgwLjEpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgLy8gR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgc2NlbmUudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLjEsIHRvOiAxLCBkdXJhdGlvbjogODAwLCBlYXNlOiAnQmFjay5lYXNlSW5PdXQnLFxyXG4gICAgICAgICAgICBvblVwZGF0ZTogKHR3LCB0d0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdHdEYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcuc2V0U2NhbGUodmFsdWUgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlVywgdmFsdWUgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICAgICAgICAgICAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuc2V0U2NhbGUodmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBFZnguYW5pbU5ld0Jlc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5oaWRlID0gKCkgPT4ge1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnLnNldFNjYWxlKDAuMSAqIEdhbWVPdmVyLm5ld0Jlc3RTY29yZUJnU2NhbGVXLCAwLjEgKiBHYW1lT3Zlci5uZXdCZXN0U2NvcmVCZ1NjYWxlSCk7XHJcbiAgICAgICAgR2FtZU92ZXIubmV3QmVzdFNjb3JlVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIEdhbWVPdmVyLm5ld0Jlc3RTY29yZVR4dC5zZXRTY2FsZSgxKTtcclxuICAgIH07XHJcbiAgICBHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQuaGlkZSgpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIub3ZlclR4dCwgJ3R4dCcpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIubGF5ZXIsICdnYW1lT3ZlcicpO1xyXG4gICAgU2V0RGVwdGgoR2FtZU92ZXIubmV3QmVzdFNjb3JlQmcsICduZXdCZXN0Jyk7XHJcbiAgICBTZXREZXB0aChHYW1lT3Zlci5uZXdCZXN0U2NvcmVUeHQsICduZXdCZXN0Jyk7XHJcbiAgICBJbml0R2FtZU92ZXIoKTtcclxuICAgIHJldHVybiBHYW1lT3ZlcjtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZU92ZXI7XHJcbmV4cG9ydCB7IEluaXRHYW1lT3ZlciwgQ3JlYXRlR2FtZU92ZXIgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kSW50IH0gZnJvbSAnQHNyYy91dGlscy9tYXRoJztcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmNvbnN0IFJuZENpcmNsZUltZ1RleHR1cmUgPSBbJ2JsdWVCYWxsJywgJ2dyZWVuQmFsbCcsICdicm93bkJhbGwnXTtcclxuY29uc3QgR2V0Q2lyY2xlU2hhcGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBSYWRpdXNWYWx1ZSA9IDEyMDtcclxuICAgIGNvbnN0IFJhZGl1cyA9IFZpZXcuY2FsY1JhdGlvKFJhZGl1c1ZhbHVlKTtcclxuICAgIGxldCBiRGF0YSA9IHt9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoaXRBcmVhOiBuZXcgUGhhc2VyLkdlb20uQ2lyY2xlKFJhZGl1cyAvIDIsIFJhZGl1cyAvIDIsIFJhZGl1cyksXHJcbiAgICAgICAgYkRhdGE6IGJEYXRhLFxyXG4gICAgICAgIGNhbGxiYWNrOiBQaGFzZXIuR2VvbS5DaXJjbGUuQ29udGFpbnMsXHJcbiAgICAgICAgc2NvcmU6IChSYWRpdXNWYWx1ZSAqKiAyKSAqIDMgLyAxMDAsXHJcbiAgICAgICAgYm9keUNvbmZpZzoge1xyXG4gICAgICAgICAgICB0eXBlOiAnY2lyY2xlJyxcclxuICAgICAgICAgICAgcmFkaXVzOiBSYWRpdXMsXHJcbiAgICAgICAgICAgIG9mZnNldDogeyB4OiBSYWRpdXMgLyAyLCB5OiBSYWRpdXMgLyAyIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ1RleHR1cmU6IFJuZENpcmNsZUltZ1RleHR1cmVbR2V0Um5kSW50KDAsIFJuZENpcmNsZUltZ1RleHR1cmUubGVuZ3RoKV0sXHJcbiAgICAgICAgc2V0SW1nRGlzcGxheVNpemU6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgICAgICBibG9jay5nZXRTaGFwZUltZygpLnNldERpc3BsYXlTaXplKFJhZGl1cyAqIDIsIFJhZGl1cyAqIDIpO1xyXG4gICAgICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0Q2lyY2xlKFJhZGl1cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBibG9jaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHZXRDaXJjbGVTaGFwZTtcclxuZXhwb3J0IHsgUm5kQ2lyY2xlSW1nVGV4dHVyZSB9O1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgUm5kUmVjdEltZ1RleHR1cmUgPSBbJ2JsdWVSZWN0JywgJ2dyZWVuUmVjdCcsICdicm93blJlY3QnXTtcclxuY29uc3QgR2V0UmVjdGFuZ2xlU2hhcGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBTaG9ydFNpZGVWYWx1ZSA9IDIwMDtcclxuICAgIGNvbnN0IExvbmdTaWRlVmFsdWUgPSBTaG9ydFNpZGVWYWx1ZSArIFNob3J0U2lkZVZhbHVlIC8gMjtcclxuICAgIGNvbnN0IFNob3J0U2lkZSA9IFZpZXcuY2FsY1JhdGlvKFNob3J0U2lkZVZhbHVlKTtcclxuICAgIGNvbnN0IExvbmdTaWRlID0gVmlldy5jYWxjUmF0aW8oTG9uZ1NpZGVWYWx1ZSk7XHJcbiAgICBsZXQgYkRhdGEgPSB7fTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGl0QXJlYTogbmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZShTaG9ydFNpZGUgLyAyLCBMb25nU2lkZSAvIDIsIFNob3J0U2lkZSwgTG9uZ1NpZGUpLFxyXG4gICAgICAgIGJEYXRhOiBiRGF0YSxcclxuICAgICAgICBjYWxsYmFjazogUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zLFxyXG4gICAgICAgIHNjb3JlOiBTaG9ydFNpZGVWYWx1ZSAqIExvbmdTaWRlVmFsdWUgLyAxMDAsXHJcbiAgICAgICAgYm9keUNvbmZpZzoge1xyXG4gICAgICAgICAgICB0eXBlOiAncmVjdGFuZ2xlJyxcclxuICAgICAgICAgICAgd2lkdGg6IFNob3J0U2lkZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBMb25nU2lkZSxcclxuICAgICAgICAgICAgb2Zmc2V0OiB7IHg6IFNob3J0U2lkZSAvIDIsIHk6IExvbmdTaWRlIC8gMiB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbWdUZXh0dXJlOiBSbmRSZWN0SW1nVGV4dHVyZVtHZXRSbmRJbnQoMCwgUm5kUmVjdEltZ1RleHR1cmUubGVuZ3RoKV0sXHJcbiAgICAgICAgc2V0SW1nRGlzcGxheVNpemU6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgICAgICBibG9jay5nZXRTaGFwZUltZygpLnNldERpc3BsYXlTaXplKFNob3J0U2lkZSwgTG9uZ1NpZGUpO1xyXG4gICAgICAgICAgICBibG9jay5nZXRQaHlzaWNzQ29uKCkuc2V0U2l6ZShTaG9ydFNpZGUsIExvbmdTaWRlKTtcclxuICAgICAgICAgICAgLy8gYmxvY2suaW5wdXQgJiYgYmxvY2suaW5wdXQuaGl0QXJlYS5zZXRUbyhTaG9ydFNpZGUsIExvbmdTaWRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEdldFJlY3RhbmdsZVNoYXBlO1xyXG5leHBvcnQgeyBSbmRSZWN0SW1nVGV4dHVyZSB9O1xyXG4iLCJpbXBvcnQgeyBHZXRSbmRJbnQgfSBmcm9tICdAc3JjL3V0aWxzL21hdGgnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSBcIkBzcmMvdXNlclNldHRpbmdcIjtcclxuY29uc3QgUm5kU3F1YXJlSW1nVGV4dHVyZSA9IFsnYmx1ZVNxdWFyZScsICdncmVlblNxdWFyZScsICdicm93blNxdWFyZSddO1xyXG5jb25zdCBHZXRTcXVhcmVTaGFwZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IFNpZGVWYWx1ZSA9IDIwMDtcclxuICAgIGNvbnN0IFNpZGUgPSBWaWV3LmNhbGNSYXRpbyhTaWRlVmFsdWUpO1xyXG4gICAgbGV0IGJEYXRhID0ge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhpdEFyZWE6IG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoU2lkZSAvIDIsIFNpZGUgLyAyLCBTaWRlLCBTaWRlKSxcclxuICAgICAgICBiRGF0YTogYkRhdGEsXHJcbiAgICAgICAgY2FsbGJhY2s6IFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyxcclxuICAgICAgICBzY29yZTogU2lkZVZhbHVlICogU2lkZVZhbHVlIC8gMTAwLFxyXG4gICAgICAgIGJvZHlDb25maWc6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3JlY3RhbmdsZScsXHJcbiAgICAgICAgICAgIHdpZHRoOiBTaWRlLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IFNpZGUsXHJcbiAgICAgICAgICAgIG9mZnNldDogeyB4OiBTaWRlIC8gMiwgeTogU2lkZSAvIDIgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1nVGV4dHVyZTogUm5kU3F1YXJlSW1nVGV4dHVyZVtHZXRSbmRJbnQoMCwgUm5kU3F1YXJlSW1nVGV4dHVyZS5sZW5ndGgpXSxcclxuICAgICAgICBzZXRJbWdEaXNwbGF5U2l6ZTogZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFNoYXBlSW1nKCkuc2V0RGlzcGxheVNpemUoU2lkZSwgU2lkZSk7XHJcbiAgICAgICAgICAgIGJsb2NrLmdldFBoeXNpY3NDb24oKS5zZXRTaXplKFNpZGUsIFNpZGUpO1xyXG4gICAgICAgICAgICAvLyBibG9jay5pbnB1dCAmJiBibG9jay5pbnB1dC5oaXRBcmVhLnNldFRvKFNpZGUsIFNpZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gYmxvY2s7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2V0U3F1YXJlU2hhcGU7XHJcbmV4cG9ydCB7IFJuZFNxdWFyZUltZ1RleHR1cmUgfTtcclxuIiwiaW1wb3J0IHsgR2V0Um5kRWxlRnJvbUFycmF5IH0gZnJvbSAnQHNyYy91dGlscy9ldGMnO1xyXG5pbXBvcnQgR2V0Q2lyY2xlU2hhcGUgZnJvbSAnLi9jaXJjbGUnO1xyXG5pbXBvcnQgR2V0UmVjdGFuZ2xlU2hhcGUgZnJvbSAnLi9yZWN0YW5nbGUnO1xyXG5pbXBvcnQgR2V0U3F1YXJlU2hhcGUgZnJvbSAnLi9zcXVhcmUnO1xyXG5jb25zdCBTaGFwZVR5cGVOYW1lTGlzdCA9IFsnYmFsbCcsICdyZWN0JywgJ3NxdWFyZScsXTtcclxuY29uc3QgU2hhcGVUeXBlUHJvcGVydGllc0xpc3QgPSBbXHJcbiAgICBHZXRDaXJjbGVTaGFwZSgpLCBHZXRSZWN0YW5nbGVTaGFwZSgpLCBHZXRTcXVhcmVTaGFwZSgpLFxyXG5dO1xyXG5jb25zdCBDb21tb25QdHJFdnQgPSB7XHJcbiAgICBwdHJEb3duOiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29tbW9uIHB0ciBkb3duJyk7XHJcbiAgICB9LFxyXG4gICAgcHRyVXA6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjb21tb24gcHRyIHVwJyk7XHJcbiAgICB9LFxyXG4gICAgcHRyT3V0OiBmdW5jdGlvbiAoYmxvY2spIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29tbW9uIHB0ciBvdXQnKTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IFB0ckV2dExpc3QgPSBbJ3B0ckRvd24nLCAncHRyVXAnLCAnZHJhZycsICdkcmFnRW5kJ107XHJcbmNvbnN0IFNoYXBlVHlwZUxpc3QgPSBTaGFwZVR5cGVOYW1lTGlzdC5tYXAoKGVsZSwgaWR4KSA9PiB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBzZXR0aW5nIGJsb2NrIGRhdGEgd2l0aCBjb21tb24gZXZ0XHJcbiAgICBsZXQgYkRhdGEgPSAoX2EgPSBTaGFwZVR5cGVQcm9wZXJ0aWVzTGlzdFtpZHhdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYkRhdGE7XHJcbiAgICBpZiAoIWJEYXRhKVxyXG4gICAgICAgIGJEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgQ29tbW9uUHRyRXZ0KTtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIFB0ckV2dExpc3QubWFwKChwdHJFdnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRtcFByZXZGdW5jID0gYkRhdGFbcHRyRXZ0XTtcclxuICAgICAgICAgICAgaWYgKHRtcFByZXZGdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBTaGFwZVR5cGVQcm9wZXJ0aWVzTGlzdFtpZHhdLmJEYXRhW3B0ckV2dF0gPSAoYmxvY2spID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBDb21tb25QdHJFdnRbcHRyRXZ0XShibG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wUHJldkZ1bmMoYmxvY2spO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oeyB0eXBlTmFtZTogZWxlIH0sIFNoYXBlVHlwZVByb3BlcnRpZXNMaXN0W2lkeF0pO1xyXG59KTtcclxuY29uc3QgU2hhcGVTeXN0ZW0gPSB7XHJcbiAgICBnZXRDZXJ0YWluU2hhcGU6IGZ1bmN0aW9uIChzaGFwZVR5cGVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIFNoYXBlVHlwZUxpc3QuZmluZCgoZWxlKSA9PiBlbGUudHlwZU5hbWUgPT09IHNoYXBlVHlwZU5hbWUpO1xyXG4gICAgfSxcclxuICAgIGdldFJuZFNoYXBlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBHZXRSbmRFbGVGcm9tQXJyYXkoU2hhcGVUeXBlTGlzdCk7IH0sXHJcbn07XHJcbmNvbnN0IFNldEJsb2NrU2hhcGUgPSAoYmxvY2ssIHR5cGVOYW1lKSA9PiB7XHJcbiAgICBpZiAoIXR5cGVOYW1lKVxyXG4gICAgICAgIGJsb2NrLnNldFNoYXBlKFNoYXBlU3lzdGVtLmdldFJuZFNoYXBlKCkpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIGJsb2NrLnNldFNoYXBlKFNoYXBlU3lzdGVtLmdldENlcnRhaW5TaGFwZSh0eXBlTmFtZSkpO1xyXG4gICAgYmxvY2suc2V0U2hhcGVOYW1lKGJsb2NrLmdldFNoYXBlKCkudHlwZU5hbWUpO1xyXG4gICAgYmxvY2suZ2V0UGh5c2ljc0NvbigpLnNldEJvZHkoYmxvY2suZ2V0U2hhcGUoKS5ib2R5Q29uZmlnKTtcclxuICAgIGJsb2NrLmdldFNoYXBlSW1nKCkuc2V0VGV4dHVyZShibG9jay5nZXRTaGFwZSgpLmltZ1RleHR1cmUpO1xyXG4gICAgYmxvY2suZ2V0U2hhcGUoKS5zZXRJbWdEaXNwbGF5U2l6ZShibG9jayk7XHJcbiAgICBpZiAoYmxvY2suZ2V0U2hhcGUoKS5iRGF0YSlcclxuICAgICAgICBibG9jay5hZGRCbG9ja0RhdGEoYmxvY2suZ2V0U2hhcGUoKS5iRGF0YSk7XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFNoYXBlU3lzdGVtO1xyXG5leHBvcnQgeyBDb21tb25QdHJFdnQsIFNldEJsb2NrU2hhcGUgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCBCYXNpY0Jsb2NrLCB7IERlYXRoQmxvY2ssIFNwYXduQmxvY2ssIFVwZGF0ZUJsb2NrIH0gZnJvbSAnLi9iYXNpYyc7XHJcbmltcG9ydCB7IEJsb2NrVW5pcXVlUHJvcGVydGllcywgU2V0MlR5cGVCbG9jayB9IGZyb20gJy4vdHlwZSc7XHJcbmltcG9ydCBHYW1lT3ZlciBmcm9tICcuLi91aS9nYW1lb3Zlcic7XHJcbmltcG9ydCBTY29yZSBmcm9tICcuLi91aS9zY29yZSc7XHJcbmltcG9ydCBHYW1lVGltZSBmcm9tICcuLi91aS90aW1lJztcclxuaW1wb3J0IEVmeCBmcm9tICcuLi9lZngnO1xyXG5pbXBvcnQgeyBTZXRCbG9ja1NoYXBlIH0gZnJvbSAnLi9zaGFwZSc7XHJcbmltcG9ydCBHYW1lQXVkaW8gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5jb25zdCBCbG9ja1N5c3RlbSA9IHtcclxuICAgIC8vIG1hbmFnZSBibG9jayBsaXN0XHJcbiAgICBvblNjcmVlbkxpc3Q6IFtdLFxyXG4gICAgc3RhbmRieUxpc3Q6IFtdLFxyXG4gICAgLy8gc3RhdGljIHBvc3Rpb24gb2YgYmxvY2tcclxuICAgIHN0YW5kYnlQb3NYOiAtNTAwLFxyXG4gICAgc3RhbmRieVBvc1k6IC01MDAsXHJcbiAgICBsZWZ0WDogMCxcclxuICAgIHJpZ2h0WDogVmlldy53LFxyXG4gICAgYm90dG9tWTogMCxcclxuICAgIHNwYXduWTogLTIwMCxcclxuICAgIGdldFJuZFNwYXduWDogZnVuY3Rpb24gKCkgeyByZXR1cm4gR2V0Um5kSW50KHRoaXMubGVmdFgsIHRoaXMucmlnaHRYKTsgfSxcclxuICAgIGdldFJuZEFuZ2xlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBHZXRSbmRJbnQoMCwgMzYwKTsgfSxcclxuICAgIC8vIGdhbWUgb3ZlciByZWxhdGVkIHByb3BlcnRpZXNcclxuICAgIG92ZXJMaW5lWTogMCxcclxuICAgIG92ZXJDbnQ6IDAsXHJcbiAgICBvdmVyQ250TWF4OiA4ICogMTAwMCxcclxuICAgIG92ZXJNYXhCbG9jazogOCxcclxuICAgIGlzR2FtZU92ZXI6IGZhbHNlLFxyXG4gICAgZ2V0SXNHYW1lT3ZlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pc0dhbWVPdmVyOyB9LFxyXG4gICAgc2V0SXNHYW1lT3ZlcjogZnVuY3Rpb24gKGlzT3ZlcikgeyByZXR1cm4gdGhpcy5pc0dhbWVPdmVyID0gaXNPdmVyOyB9LFxyXG4gICAgLy8gcmVzcG9uc2l2ZSBzcGF3bmluZyBibG9jayB0aW1lXHJcbiAgICBuZXh0U3Bhd25UaW1lOiAwLFxyXG4gICAgc3Bhd25EZWxheUJ5U2VjTGlzdDogWzgwMCwgOTUwLCAxMTAwLCAxMjUwLCAxNDAwLCAxNTUwXSxcclxuICAgIHNwYXduRGVsYXlCeVNlYzogMTgwMCxcclxufTtcclxuY29uc3QgSW5pdEJsb2NrU3lzdGVtID0gKCkgPT4ge1xyXG4gICAgUmVtb3ZlQWxsQmxvY2tPbkRpc3BsYXkoKTtcclxuICAgIEJsb2NrU3lzdGVtLnNldElzR2FtZU92ZXIoZmFsc2UpO1xyXG4gICAgQmxvY2tTeXN0ZW0ubmV4dFNwYXduVGltZSA9IEdhbWVUaW1lLmluaXQ7XHJcbiAgICBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWMgPSBCbG9ja1N5c3RlbS5zcGF3bkRlbGF5QnlTZWNMaXN0WzVdO1xyXG59O1xyXG5jb25zdCBBZGRDZXJ0YWluQmxvY2sgPSAoc2NlbmUsIHR5cGVOYW1lKSA9PiB7XHJcbiAgICBsZXQgYmxvY2s7XHJcbiAgICAvLyBnZXQgYmxvY2sgZnJvbSBzdGFuZHkgbGlzdCBvciBjcmVhdGUgbmV3IG9uZVxyXG4gICAgaWYgKEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBibG9jayA9IEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0LnNoaWZ0KCk7XHJcbiAgICAgICAgaWYgKCFibG9jay5zY2VuZSkgeyAvLyBpcyBibG9jayBzY2VuZSByZW1vdmVkP1xyXG4gICAgICAgICAgICBibG9jay5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGJsb2NrID0gbmV3IEJhc2ljQmxvY2soc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICBibG9jayA9IG5ldyBCYXNpY0Jsb2NrKHNjZW5lKTtcclxuICAgIC8vIHNldCBibG9jayBzaGFwZSAmIHR5cGUsIHB1c2ggdG8gb24gc2NyZWVuIGxpc3QgJiBzcGF3blxyXG4gICAgU2V0QmxvY2tTaGFwZShibG9jayk7XHJcbiAgICBTZXQyVHlwZUJsb2NrKGJsb2NrLCB0eXBlTmFtZSk7XHJcbiAgICBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QucHVzaChibG9jayk7XHJcbiAgICBTcGF3bkJsb2NrKGJsb2NrKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgQWRkT2JzdGFjbGVCbG9jayA9IChibG9jaykgPT4ge1xyXG4gICAgYmxvY2suc2NlbmUuY2FtZXJhcy5tYWluLnNoYWtlKDIwMCwgMC4wMiwgdHJ1ZSk7XHJcbiAgICBHYW1lQXVkaW8ucGxheVNmeCgnc3Bhd25PYnN0YWNsZVNmeCcpO1xyXG4gICAgQWRkQ2VydGFpbkJsb2NrKGJsb2NrLnNjZW5lLCAnb2JzdGFjbGUnKTtcclxuICAgIHJldHVybiBibG9jaztcclxufTtcclxuY29uc3QgR2V0Um5kQmxvY2tUeXBlID0gKCkgPT4ge1xyXG4gICAgLy8gZ2V0IHJhbmRvbSBibG9jayB0eXBlIHZpYSBzcGF3biBjaGFuY2VcclxuICAgIGxldCBkaXN0cmlidXRpb25BcnIgPSBbXTtcclxuICAgIEJsb2NrVW5pcXVlUHJvcGVydGllcy5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgIC8vIGVsZS5zcGF3bkNoYW5jZSA9IGVsZS5zcGF3bkNoYW5jZSAvIFNwYXduTWF4Q2hhbmNlO1xyXG4gICAgICAgIGlmIChlbGUuc3Bhd25DaGFuY2UgPT09IDApXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZS5zcGF3bkNoYW5jZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbkFyci5wdXNoKGVsZS50eXBlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGlzdHJpYnV0aW9uQXJyW0dldFJuZEludCgwLCBkaXN0cmlidXRpb25BcnIubGVuZ3RoKV07XHJcbn07XHJcbmNvbnN0IEFkZFJuZEJsb2NrID0gKHNjZW5lKSA9PiB7XHJcbiAgICBjb25zdCBybmRUeXBlID0gR2V0Um5kQmxvY2tUeXBlKCk7XHJcbiAgICBBZGRDZXJ0YWluQmxvY2soc2NlbmUsIHJuZFR5cGUpO1xyXG59O1xyXG5jb25zdCBDbGVhckJsb2NrID0gKGJsb2NrLCBzY29yZSkgPT4ge1xyXG4gICAgaWYgKCFibG9jaylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBsZXQgYmxvY2tTY29yZSA9IHNjb3JlID8gc2NvcmUgOiBibG9jay5nZXRTY29yZSgpO1xyXG4gICAgU2NvcmUuYWRkKGJsb2NrU2NvcmUpO1xyXG4gICAgRWZ4LmFuaW1TY29yZShibG9jaywgYmxvY2tTY29yZSk7XHJcbiAgICBjb25zdCB7IHZhbHVlLCBjaGFuY2UgfSA9IGJsb2NrLmdldFRpbWVJbmNyZWFzZSgpO1xyXG4gICAgaWYgKEdhbWVUaW1lLmN1cnIgPiBHYW1lVGltZS5sYXN0MTAgJiYgY2hhbmNlID4gR2V0Um5kTnVtKDAsIDEwMCkpIHtcclxuICAgICAgICBHYW1lVGltZS5pbmNyZWFzZVRpbWUodmFsdWUpO1xyXG4gICAgICAgIEVmeC5hbmltVGltZUluY3JlYXNlKGJsb2NrLCBjaGFuY2UsIHZhbHVlKTtcclxuICAgIH1cclxuICAgIFJlbW92ZUJsb2NrKGJsb2NrKTtcclxufTtcclxuY29uc3QgUmVtb3ZlQmxvY2sgPSAoYmxvY2spID0+IHtcclxuICAgIC8vIHJlbW92ZSBmcm9tIG9uU2NyZWVuTGlzdFxyXG4gICAgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0ID0gQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0LmZpbHRlcihzY3JlZW5CbG9jayA9PiBzY3JlZW5CbG9jay5pZCAhPT0gYmxvY2suaWQpO1xyXG4gICAgaWYgKCFibG9jay5zY2VuZSkge1xyXG4gICAgICAgIGJsb2NrLmRlc3Ryb3koKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBjaGNrIGlzIGFscmVhZHkgaW4gc3RhbmRieSBsaXN0XHJcbiAgICBpZiAoQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3Quc29tZShzdGFuZGJ5QmxvY2sgPT4gc3RhbmRieUJsb2NrLmlkID09PSBibG9jay5pZCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgRGVhdGhCbG9jayhibG9jayk7XHJcbiAgICBibG9jay5zZXRQb3NpdGlvbihCbG9ja1N5c3RlbS5zdGFuZGJ5UG9zWCwgQmxvY2tTeXN0ZW0uc3RhbmRieVBvc1kpO1xyXG4gICAgQmxvY2tTeXN0ZW0uc3RhbmRieUxpc3QucHVzaChibG9jayk7XHJcbn07XHJcbmNvbnN0IFJlbW92ZUFsbEJsb2NrT25EaXNwbGF5ID0gKCkgPT4ge1xyXG4gICAgaWYgKCFCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgQmxvY2tTeXN0ZW0ub25TY3JlZW5MaXN0Lm1hcCgoYmxvY2spID0+IHsgUmVtb3ZlQmxvY2soYmxvY2spOyB9KTtcclxuICAgIEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdCA9IFtdO1xyXG4gICAgaWYgKCFCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBCbG9ja1N5c3RlbS5zdGFuZGJ5TGlzdCA9IEJsb2NrU3lzdGVtLnN0YW5kYnlMaXN0LmZpbHRlcigoc3RhbmRieUJsb2NrKSA9PiB7XHJcbiAgICAgICAgaWYgKCFzdGFuZGJ5QmxvY2suc2NlbmUpIHtcclxuICAgICAgICAgICAgc3RhbmRieUJsb2NrLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhbmRieUJsb2NrO1xyXG4gICAgfSk7XHJcbn07XHJcbmNvbnN0IFVwZGF0ZUJsb2NrQ2hja0lzR2FtZU92ZXIgPSAoc2NlbmUsIHRpbWUsIGRlbHRhKSA9PiB7XHJcbiAgICAvLyBjaGNrIGV2ZXJ5IGJsb2NrIHdoaWNoIGlzIGdhbWUgb3ZlciBib3JkZXIgbGluZVxyXG4gICAgY29uc3QgaXNPdmVyQm9yZGVyTGluZSA9IEJsb2NrU3lzdGVtLm9uU2NyZWVuTGlzdC5zb21lKChzY3JlZW5CbG9jaykgPT4ge1xyXG4gICAgICAgIGlmICghc2NyZWVuQmxvY2spXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2NyZWVuQmxvY2sueSA8IEJsb2NrU3lzdGVtLm92ZXJMaW5lWTtcclxuICAgIH0pO1xyXG4gICAgLy8gYmxvY2sgY291bnQgaXMgb3ZlciBtYXggJiBhdCBsZWFzdCBvbmUgYmxvY2sgY3Jvc3MgZ2FtZSBvdmVyIGJvcmRlciBsaW5lXHJcbiAgICBpZiAoaXNPdmVyQm9yZGVyTGluZSAmJiBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QubGVuZ3RoID4gQmxvY2tTeXN0ZW0ub3Zlck1heEJsb2NrKSB7XHJcbiAgICAgICAgQmxvY2tTeXN0ZW0ub3ZlckNudCArPSBkZWx0YSAqIEdhbWVUaW1lLnRpbWVTY2FsZTtcclxuICAgICAgICAvLyBnYW1lIG92ZXIgY29uZGl0aW9uXHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLm92ZXJDbnQgPiBCbG9ja1N5c3RlbS5vdmVyQ250TWF4KSB7XHJcbiAgICAgICAgICAgIEJsb2NrU3lzdGVtLm92ZXJDbnQgPSAwO1xyXG4gICAgICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKHRydWUpO1xyXG4gICAgICAgICAgICBHYW1lT3Zlci5hbmltR2FtZU92ZXIoc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIEJsb2NrU3lzdGVtLnNldElzR2FtZU92ZXIoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gaW5pdCBnYW1lIG92ZXIgd2FybmluZyBwcm9wZXJ0aWVzXHJcbiAgICAgICAgQmxvY2tTeXN0ZW0ub3ZlckNudCA9IDA7XHJcbiAgICAgICAgQmxvY2tTeXN0ZW0uc2V0SXNHYW1lT3ZlcihmYWxzZSk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IFVwZGF0ZVNwYXduQmxvY2tzID0gKHNjZW5lLCBkZWx0YSkgPT4ge1xyXG4gICAgLy8gZ2V0IGdhbWUgdGltZSAmIHRpbWVsaW5lIGlkeCBjYWxjdWxhdGVcclxuICAgIGNvbnN0IGdhbWVUaW1lQ3VyciA9IEdhbWVUaW1lLmdldEN1cnIoKTtcclxuICAgIGxldCB0aW1lbGluZUlkeCA9IHBhcnNlSW50KChnYW1lVGltZUN1cnIgLyAxMDAwIC8gMTApLnRvU3RyaW5nKCkpO1xyXG4gICAgaWYgKHRpbWVsaW5lSWR4IDwgMClcclxuICAgICAgICB0aW1lbGluZUlkeCA9IDA7XHJcbiAgICBpZiAodGltZWxpbmVJZHggPj0gQmxvY2tTeXN0ZW0uc3Bhd25EZWxheUJ5U2VjTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICB0aW1lbGluZUlkeCA9IEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlY0xpc3QubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuICAgIC8vIGFkanVzdCByZXNwb25zaXZlIHNwYXduIGJsb2NrIHRpbWVcclxuICAgIEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlYyA9IEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlY0xpc3RbdGltZWxpbmVJZHhdO1xyXG4gICAgLy8gc3Bhd24gYmxvY2tcclxuICAgIEJsb2NrU3lzdGVtLm5leHRTcGF3blRpbWUgKz0gZGVsdGEgKiBHYW1lVGltZS50aW1lU2NhbGU7XHJcbiAgICBpZiAoQmxvY2tTeXN0ZW0ubmV4dFNwYXduVGltZSA+IEJsb2NrU3lzdGVtLnNwYXduRGVsYXlCeVNlYykge1xyXG4gICAgICAgIEJsb2NrU3lzdGVtLm5leHRTcGF3blRpbWUgPSAwO1xyXG4gICAgICAgIEFkZFJuZEJsb2NrKHNjZW5lKTtcclxuICAgIH1cclxuICAgIDtcclxufTtcclxuY29uc3QgVXBkYXRlQWxsQmxvY2tzID0gKHNjZW5lLCB0aW1lLCBkZWx0YSkgPT4ge1xyXG4gICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICBVcGRhdGVCbG9ja0NoY2tJc0dhbWVPdmVyKHNjZW5lLCB0aW1lLCBkZWx0YSk7XHJcbiAgICBCbG9ja1N5c3RlbS5vblNjcmVlbkxpc3QubWFwKGJsb2NrID0+IFVwZGF0ZUJsb2NrKGJsb2NrLCB0aW1lLCBkZWx0YSkpO1xyXG4gICAgVXBkYXRlU3Bhd25CbG9ja3Moc2NlbmUsIGRlbHRhKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQmxvY2tTeXN0ZW07XHJcbmV4cG9ydCB7IEJhc2ljQmxvY2ssIEFkZENlcnRhaW5CbG9jaywgQWRkT2JzdGFjbGVCbG9jaywgR2V0Um5kQmxvY2tUeXBlLCBBZGRSbmRCbG9jaywgSW5pdEJsb2NrU3lzdGVtLCBDbGVhckJsb2NrLCBSZW1vdmVCbG9jaywgUmVtb3ZlQWxsQmxvY2tPbkRpc3BsYXksIFVwZGF0ZUJsb2NrQ2hja0lzR2FtZU92ZXIsIFVwZGF0ZUFsbEJsb2NrcywgVXBkYXRlU3Bhd25CbG9ja3MgfTtcclxuIiwiaW1wb3J0IHsgVmlldyB9IGZyb20gJ0BzcmMvdXNlclNldHRpbmcnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IEJsb2NrU3lzdGVtIGZyb20gJy4uL2Jsb2NrL3N5c3RlbSc7XHJcbmltcG9ydCB7IFNldERlcHRoIH0gZnJvbSAnLi4vZGVwdGgnO1xyXG5pbXBvcnQgeyBUeHRBbHBoYSwgVHh0QmFja2dyb3VuZENvbG9yLCBUeHRGYW1pbHksIFR4dE1hcmdpbiwgVHh0UGFkZGluZywgVHh0U2l6ZSB9IGZyb20gJy4uL2ZvbnQnO1xyXG5pbXBvcnQgR2FtZU92ZXIgZnJvbSAnLi9nYW1lb3Zlcic7XHJcbmltcG9ydCB7IEhpZGVTZXR0aW5nQnRuIH0gZnJvbSAnLi9zZXR0aW5nJztcclxuY29uc3QgR2FtZVRpbWUgPSB7XHJcbiAgICB0eHQ6IG51bGwsXHJcbiAgICBsYXN0MTBUeHQ6IG51bGwsXHJcbiAgICBsYXN0MTBQcmV2VGltZTogMTEsXHJcbiAgICBpc0xhc3QxMEhhc09uY2VDbnQ6IHRydWUsXHJcbiAgICBpc0dhbWVUaW1lRW5kT25jZUNudDogdHJ1ZSxcclxuICAgIGlzRmlyc3RMYXN0MTBIYXNPbmNlQ250OiB0cnVlLFxyXG4gICAgc3RhbmRieVRpbWU6IDMgKiAxMDAwLFxyXG4gICAgaW5pdDogNjAgKiAxMDAwLFxyXG4gICAgY3VycjogNjAgKiAxMDAwLFxyXG4gICAgbGFzdDEwOiAxMCAqIDEwMDAsXHJcbiAgICBpbmNyZWFzZWRUaW1lOiAwLFxyXG4gICAgLy8gYW5pbSBvcHRpb25cclxuICAgIGFuaW1JbmNyZWFzZVRpbWVEdXJhdGlvbjogNDAwLFxyXG4gICAgYW5pbVR3OiBudWxsLFxyXG4gICAgYW5pbVR3U2NhbGVNaW46IDEsXHJcbiAgICBhbmltVHdTY2FsZU1heDogMS40LFxyXG4gICAgaXNUd2luZzogZmFsc2UsXHJcbiAgICAvLyB0aW1lIHNjYWxlIG9wdGlvblxyXG4gICAgdGltZVNjYWxlOiAxLFxyXG4gICAgc2hvd1NldHRpbmdUaW1lU2NhbGU6IDAuMSxcclxuICAgIGhpZGVTZXR0aW5nVGltZVNjYWxlOiAxLFxyXG4gICAgc25kTGFzdDEwVm9pY2U6IGZ1bmN0aW9uIChzY2VuZSwgdGltZSkge1xyXG4gICAgICAgIC8vIHNjZW5lLnNvdW5kLnBsYXkoJ3ZvaWNlJyArIHRpbWUpO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCd2b2ljZScgKyB0aW1lKTtcclxuICAgICAgICB0aGlzLmxhc3QxMFR4dC5zZXRUZXh0KHRpbWUpO1xyXG4gICAgfSxcclxuICAgIGluY3JlYXNlVGltZTogZnVuY3Rpb24gKHRpbWUpIHtcclxuICAgICAgICAvLyBsYXN0IDEwIHNlY29uZHMgbGVmdCBzbyBpbmNyZWFzaW5nIHRpbWUgaXMgdXNlbGVzc1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ZpcnN0TGFzdDEwSGFzT25jZUNudClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY3VyciArPSB0aW1lO1xyXG4gICAgICAgIHRoaXMuaW5jcmVhc2VkVGltZSArPSB0aW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldDJGb3JtYXQ6IGZ1bmN0aW9uIChtaWxsaVRpbWUpIHtcclxuICAgICAgICAvLyBzZXBhcmF0ZSBtaW51dGUsIHNlY29uZCBlYWNoXHJcbiAgICAgICAgY29uc3QgdGltZVNlYyA9IG1pbGxpVGltZSAvIDEwMDA7XHJcbiAgICAgICAgY29uc3Qgc2Vjb25kU3BsaXQgPSB0aW1lU2VjLnRvRml4ZWQoMikuc3BsaXQoJy4nKTtcclxuICAgICAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IodGltZVNlYyAvIDYwKTtcclxuICAgICAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IoTnVtYmVyKHNlY29uZFNwbGl0WzBdKSk7XHJcbiAgICAgICAgbGV0IHVuZGVyUG9pbnREaWdpdE51bSA9IE51bWJlcihzZWNvbmRTcGxpdFsxXSk7XHJcbiAgICAgICAgaWYgKG1pbnV0ZXMgPCAxMClcclxuICAgICAgICAgICAgbWludXRlcyA9ICcwJyArIG1pbnV0ZXM7XHJcbiAgICAgICAgaWYgKHNlY29uZHMgPCAxMClcclxuICAgICAgICAgICAgc2Vjb25kcyA9ICcwJyArIHNlY29uZHM7XHJcbiAgICAgICAgaWYgKHVuZGVyUG9pbnREaWdpdE51bSA8IDEwKVxyXG4gICAgICAgICAgICB1bmRlclBvaW50RGlnaXROdW0gPSAnMCcgKyB1bmRlclBvaW50RGlnaXROdW07XHJcbiAgICAgICAgY29uc3QgdGltZSA9IG1pbnV0ZXMgKyAnOicgKyBzZWNvbmRzICsgJy4nICsgdW5kZXJQb2ludERpZ2l0TnVtO1xyXG4gICAgICAgIHRoaXMudHh0LnNldFRleHQodGltZSk7XHJcbiAgICB9LFxyXG4gICAgc2V0VGltZVNjYWxlOiBmdW5jdGlvbiAoc2NlbmUsIHRpbWVTY2FsZSkge1xyXG4gICAgICAgIHNjZW5lLm1hdHRlci53b3JsZC5lbmdpbmUudGltaW5nLnRpbWVTY2FsZSA9IHRpbWVTY2FsZTtcclxuICAgICAgICB0aGlzLnRpbWVTY2FsZSA9IHRpbWVTY2FsZTtcclxuICAgIH0sXHJcbiAgICBnZXRDdXJyOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmN1cnI7IH0sXHJcbiAgICB1cGRhdGVMYXN0MTBDbnRBbmltOiBmdW5jdGlvbiAoc2NlbmUpIHtcclxuICAgICAgICAvLyBzdG9wIGJnbSAmIGhpZGUgc2V0dGluZyBidG4gJiB0aW1lIGluY3JlYXNpbmcgaXMgbm90IHBvc3NpYmxlXHJcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdExhc3QxMEhhc09uY2VDbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TGFzdDEwSGFzT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHYW1lQXVkaW8ucGF1c2VCZ20oJ2dhbWVCZ20nKTtcclxuICAgICAgICAgICAgSGlkZVNldHRpbmdCdG4oc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3QxMFR4dC5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBNYXRoLmNlaWwodGhpcy5jdXJyIC8gMTAwMCk7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdDEwUHJldlRpbWUgIT09IHRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0xhc3QxMEhhc09uY2VDbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3QxMFByZXZUaW1lID0gdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmlzTGFzdDEwSGFzT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTGFzdDEwSGFzT25jZUNudClcclxuICAgICAgICAgICAgdGhpcy5zbmRMYXN0MTBWb2ljZShzY2VuZSwgdGltZSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoc2NlbmUsIGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKEJsb2NrU3lzdGVtLmdldElzR2FtZU92ZXIoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnIgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyciAtPSBkZWx0YSAqIHRoaXMudGltZVNjYWxlO1xyXG4gICAgICAgICAgICB0aGlzLnNldDJGb3JtYXQodGhpcy5jdXJyKTtcclxuICAgICAgICAgICAgY29uc3QgaXNVbmRlcjEwU2VjID0gdGhpcy5jdXJyID4gMCAmJiB0aGlzLmN1cnIgPD0gMTAgKiAxMDAwO1xyXG4gICAgICAgICAgICBpc1VuZGVyMTBTZWMgJiYgdGhpcy51cGRhdGVMYXN0MTBDbnRBbmltKHNjZW5lLCBkZWx0YSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNHYW1lVGltZUVuZE9uY2VDbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0dhbWVUaW1lRW5kT25jZUNudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBCbG9ja1N5c3RlbS5zZXRJc0dhbWVPdmVyKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnIgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNldDJGb3JtYXQoMCk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdDEwVHh0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICBHYW1lT3Zlci5hbmltVGltZU92ZXIoc2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXRUaW1lSW5jcmVhc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmluY3JlYXNlZFRpbWUgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluY3JlYXNlZFRpbWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0VGltZUluY3JlYXNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmluY3JlYXNlZFRpbWU7IH0sXHJcbiAgICBhZGRUaW1lSW5jcmVhc2U6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZWRUaW1lICs9IHRpbWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jcmVhc2VkVGltZTtcclxuICAgIH0sXHJcbn07XHJcbmNvbnN0IEluaXRHYW1lVGltZSA9ICgpID0+IHtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFByZXZUaW1lID0gMTE7XHJcbiAgICBHYW1lVGltZS5pc0xhc3QxMEhhc09uY2VDbnQgPSB0cnVlO1xyXG4gICAgR2FtZVRpbWUuaXNHYW1lVGltZUVuZE9uY2VDbnQgPSB0cnVlO1xyXG4gICAgR2FtZVRpbWUuY3VyciA9IEdhbWVUaW1lLmluaXQ7XHJcbiAgICBHYW1lVGltZS5pbmNyZWFzZWRUaW1lID0gMDtcclxuICAgIEdhbWVUaW1lLnRpbWVTY2FsZSA9IDE7XHJcbiAgICBHYW1lVGltZS5pbml0VGltZUluY3JlYXNlKCk7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUdhbWVUaW1lVHh0ID0gKHNjZW5lKSA9PiB7XHJcbiAgICBjb25zdCBpbml0WCA9IFR4dE1hcmdpbiAvIDIgKyA0NjtcclxuICAgIEdhbWVUaW1lLnR4dCA9IHNjZW5lLmFkZC50ZXh0KGluaXRYLCBUeHRNYXJnaW4gLSAxMCwgJycpO1xyXG4gICAgR2FtZVRpbWUudHh0LnNldEFscGhhKFR4dEFscGhhKTtcclxuICAgIEdhbWVUaW1lLnR4dC5zZXRPcmlnaW4oMCwgMCk7XHJcbiAgICBHYW1lVGltZS50eHQuc2V0Rm9udFNpemUoVHh0U2l6ZSk7XHJcbiAgICBHYW1lVGltZS50eHQuc2V0QmFja2dyb3VuZENvbG9yKFR4dEJhY2tncm91bmRDb2xvcik7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJycpO1xyXG4gICAgR2FtZVRpbWUubGFzdDEwVHh0LnNldEFscGhhKDAuNSk7XHJcbiAgICBHYW1lVGltZS5sYXN0MTBUeHQuc2V0T3JpZ2luKDAuNSwgMC41KTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRGb250U2l6ZShWaWV3LncgLyAyKTtcclxuICAgIEdhbWVUaW1lLmxhc3QxMFR4dC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIFtHYW1lVGltZS50eHQsIEdhbWVUaW1lLmxhc3QxMFR4dF0ubWFwKCh0eHQpID0+IHtcclxuICAgICAgICB0eHQuc2V0UGFkZGluZyh7IGxlZnQ6IFR4dFBhZGRpbmcsIHJpZ2h0OiBUeHRQYWRkaW5nLCB0b3A6IFR4dFBhZGRpbmcgLyAyLCBib3R0b206IFR4dFBhZGRpbmcgLyAyIH0pO1xyXG4gICAgICAgIHR4dC5zZXRGb250RmFtaWx5KFR4dEZhbWlseSk7XHJcbiAgICAgICAgU2V0RGVwdGgodHh0LCAndHh0Jyk7XHJcbiAgICB9KTtcclxuICAgIEluaXRHYW1lVGltZSgpO1xyXG59O1xyXG5jb25zdCBTZXRtaWxsaWVTZWMyU2VjVGltZUZvcm1hdCA9IChtaWxsaWVTZWMpID0+IHtcclxuICAgIGNvbnN0IHNlYyA9IChtaWxsaWVTZWMgLyAxMDAwKS50b0ZpeGVkKDIpICsgJyBzZWMnO1xyXG4gICAgcmV0dXJuIHNlYztcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgR2FtZVRpbWU7XHJcbmV4cG9ydCB7IEluaXRHYW1lVGltZSwgQ3JlYXRlR2FtZVRpbWVUeHQsIFNldG1pbGxpZVNlYzJTZWNUaW1lRm9ybWF0IH07XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tICdAc3JjL3VzZXJTZXR0aW5nJztcclxuaW1wb3J0IHsgU2V0dGluZ0NvbnRleHRNYXJnaW4sIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbkxhcmdlciB9IGZyb20gJy4nO1xyXG5pbXBvcnQgR2FtZUF1ZGlvIGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuLi9kZXB0aCc7XHJcbmltcG9ydCB7IENvbnRleHRNYXJnaW5ILCBDb250ZXh0TWFyZ2luVywgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUsIFR4dE1hcmdpbiwgVHh0VGl0bGVIZWFkU2l6ZSwgVHh0VGl0bGVIZWlnaHRHYXAgfSBmcm9tICcuLi9mb250JztcclxuaW1wb3J0IEdhbWVUaW1lIGZyb20gJy4vdGltZSc7XHJcbmltcG9ydCB7IFN0YXJ0VGl0bGUgfSBmcm9tICcuLi90aXRsZSc7XHJcbmltcG9ydCB7IFN0b3BHYW1lIH0gZnJvbSAnLi4vZ2FtZSc7XHJcbmltcG9ydCBVSVByb3BzIGZyb20gJ0BzcmMvc2NlbmVzL3VpJztcclxuLy8gaW1wb3J0IHsgQ3JlYXRlSG93LCBDcmVhdGVIb3dJblNldHRpbmcgfSBmcm9tICcuL2hvdyc7XHJcbmNvbnN0IFNldHRpbmcgPSB7XHJcbiAgICBidG46IG51bGwsXHJcbiAgICBsYXllcjogbnVsbCxcclxuICAgIGxheWVyRGF0YToge1xyXG4gICAgICAgIHR4dEdhcDogNTAsXHJcbiAgICAgICAgY29udHJvbFR4dExpc3Q6IFsnRnVsbFNjcmVlbicsICdOb3JtYWwnXSxcclxuICAgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxyXG4gICAgfSxcclxuICAgIGV4aXRCdG46IG51bGwsXHJcbiAgICBpc09wZW46IGZhbHNlLFxyXG4gICAgaXNUd2luZzogZmFsc2UsXHJcbn07XHJcbmNvbnN0IEluaXRTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBTZXR0aW5nLmlzVHdpbmcgPSBmYWxzZTtcclxuICAgIEhpZGVTZXR0aW5nKHNjZW5lKTtcclxufTtcclxuY29uc3QgQ3JlYXRlU2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgY29uc3QgeyBtYXJnaW4sIGFscGhhLCBzY2FsZSB9ID0gVUlQcm9wcztcclxuICAgIFNldHRpbmcuYnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcudyAtIG1hcmdpbiwgbWFyZ2luLCAnc2V0dGluZ0J0bicpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0U2NhbGUoc2NhbGUpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0QWxwaGEoYWxwaGEpO1xyXG4gICAgU2V0dGluZy5idG4uc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIFNldHRpbmcuYnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IFNldHRpbmcuaXNUd2luZyB8fCBBbmltU2hvd1NldHRpbmcoc2NlbmUpOyB9KTtcclxuICAgIFNldHRpbmcubGF5ZXIgPSBzY2VuZS5hZGQuY29udGFpbmVyKCk7XHJcbiAgICBjb25zdCBiZyA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSwgJ2JsYWNrU2NyZWVuJyk7XHJcbiAgICBiZy5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgYmcuc2V0RGlzcGxheVNpemUoVmlldy53LCBWaWV3LmgpO1xyXG4gICAgYmcuc2V0QWxwaGEoMC40KTtcclxuICAgIGNvbnN0IHBhbmVsID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnc2V0dGluZ1BhbmVsJyk7XHJcbiAgICBwYW5lbC5zZXREaXNwbGF5U2l6ZShWaWV3LncgLSBDb250ZXh0TWFyZ2luVywgVmlldy5oIC0gQ29udGV4dE1hcmdpbkgpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBzY2VuZS5hZGQudGV4dChWaWV3LmNlbnRlclgsIFZpZXcuY2VudGVyWSAtIChUeHRUaXRsZUhlaWdodEdhcCAqIDMpLCAnU2V0dGluZycpO1xyXG4gICAgU2V0Rm9udDJDb21tb25Db250ZXh0U3R5bGUodGl0bGUpO1xyXG4gICAgdGl0bGUuc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICBjb25zdCBiZ21CdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSBWaWV3LmggLyA2LCAnbXVzaWNPbicpO1xyXG4gICAgY29uc3QgYmdtR2FnZSA9IENyZWF0ZUdhZ2VCYXIoc2NlbmUsIFZpZXcuY2VudGVyWCwgYmdtQnRuLnkgKyBTZXR0aW5nR2FwQ29udGV4dE1hcmdpbiwgKG1pbiwgbWF4LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnNldEJnbVZvbHVtZShjdXJyIC8gMTAwKTtcclxuICAgIH0pO1xyXG4gICAgYmdtR2FnZS5zZXRHYWdlTnVtKEdhbWVBdWRpby5iZ21Wb2x1bWUgKiAxMDApO1xyXG4gICAgY29uc3Qgc2Z4QnRuID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgYmdtR2FnZS55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sICdhdWRpb09uJyk7XHJcbiAgICBjb25zdCBzZnhHYWdlID0gQ3JlYXRlR2FnZUJhcihzY2VuZSwgVmlldy5jZW50ZXJYLCBzZnhCdG4ueSArIFNldHRpbmdHYXBDb250ZXh0TWFyZ2luLCAobWluLCBtYXgsIGN1cnIpID0+IHtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0U2Z4Vm9sdW1lKGN1cnIgLyAxMDApO1xyXG4gICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgfSk7XHJcbiAgICBzZnhHYWdlLnNldEdhZ2VOdW0oR2FtZUF1ZGlvLnNmeFZvbHVtZSAqIDEwMCk7XHJcbiAgICBbYmdtQnRuLCBzZnhCdG5dLm1hcCgoYnRuKSA9PiB7XHJcbiAgICAgICAgYnRuLnNldFNjYWxlKDAuNik7XHJcbiAgICAgICAgYnRuLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICB9KTtcclxuICAgIGJnbUJ0bi5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlzT24gPSBiZ21CdG4udGV4dHVyZS5rZXkgPT09ICdtdXNpY09uJztcclxuICAgICAgICBiZ21HYWdlLnNldEFibGUoIWlzT24pO1xyXG4gICAgICAgIGJnbUJ0bi5zZXRUZXh0dXJlKGlzT24gPyAnbXVzaWNPZmYnIDogJ211c2ljT24nKTtcclxuICAgICAgICBHYW1lQXVkaW8uc2V0QmdtTXV0ZShpc09uKTtcclxuICAgIH0pO1xyXG4gICAgc2Z4QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNPbiA9IHNmeEJ0bi50ZXh0dXJlLmtleSA9PT0gJ2F1ZGlvT24nO1xyXG4gICAgICAgIHNmeEdhZ2Uuc2V0QWJsZSghaXNPbik7XHJcbiAgICAgICAgc2Z4QnRuLnNldFRleHR1cmUoaXNPbiA/ICdhdWRpb09mZicgOiAnYXVkaW9PbicpO1xyXG4gICAgICAgIEdhbWVBdWRpby5zZXRTZnhNdXRlKGlzT24pO1xyXG4gICAgfSk7XHJcbiAgICBiZ21CdG4uc2V0VGV4dHVyZShHYW1lQXVkaW8uaXNCZ21NdXRlID8gJ211c2ljT2ZmJyA6ICdtdXNpY09uJyk7XHJcbiAgICBzZnhCdG4uc2V0VGV4dHVyZShHYW1lQXVkaW8uaXNTZnhNdXRlID8gJ2F1ZGlvT2ZmJyA6ICdhdWRpb09uJyk7XHJcbiAgICBiZ21HYWdlLnNldEFibGUoIUdhbWVBdWRpby5pc0JnbU11dGUpO1xyXG4gICAgc2Z4R2FnZS5zZXRBYmxlKCFHYW1lQXVkaW8uaXNTZnhNdXRlKTtcclxuICAgIGNvbnN0IHsgdHh0R2FwIH0gPSBTZXR0aW5nLmxheWVyRGF0YTtcclxuICAgIC8vIGFkZCBiYWNrIHRvIHRpdGxlIGJ0blxyXG4gICAgY29uc3QgYmFjazJUaXRsZUJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgc2Z4R2FnZS55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW5MYXJnZXIsICdzZXR0aW5nT3ZlckJ0blVwJykuc2V0U2NhbGUoMS4yKTtcclxuICAgIGNvbnN0IGJhY2syVGl0bGUgPSBzY2VuZS5hZGQuaW1hZ2UoYmFjazJUaXRsZUJnLngsIGJhY2syVGl0bGVCZy55IC0gNCwgJ292ZXJCYWNrJyk7XHJcbiAgICBiYWNrMlRpdGxlLnNldFNjYWxlKDAuNikuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgIGJhY2syVGl0bGUuZG93blBvc1kgPSBiYWNrMlRpdGxlLnkgKyA0O1xyXG4gICAgYmFjazJUaXRsZS51cFBvc1kgPSBiYWNrMlRpdGxlLnk7XHJcbiAgICBiYWNrMlRpdGxlLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICBiYWNrMlRpdGxlQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5Eb3duJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZS5zZXRQb3NpdGlvbihiYWNrMlRpdGxlLngsIGJhY2syVGl0bGUuZG93blBvc1kpO1xyXG4gICAgfSk7XHJcbiAgICBiYWNrMlRpdGxlLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgYmFjazJUaXRsZUJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgICAgICBiYWNrMlRpdGxlLnNldFBvc2l0aW9uKGJhY2syVGl0bGUueCwgYmFjazJUaXRsZS51cFBvc1kpO1xyXG4gICAgICAgIGlmIChiYWNrMlRpdGxlLmlzQ2hhbmdpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoIXNjZW5lLnNjZW5lLmlzQWN0aXZlKCd0aXRsZScpKSB7XHJcbiAgICAgICAgICAgIFN0b3BHYW1lKHNjZW5lKTtcclxuICAgICAgICAgICAgU3RhcnRUaXRsZShzY2VuZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgQW5pbUhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgYmFjazJUaXRsZS5pc0NoYW5naW5nID0gZmFsc2U7IH0sIDUwMCk7XHJcbiAgICB9KTtcclxuICAgIGJhY2syVGl0bGUub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgYmFjazJUaXRsZUJnLnNldFRleHR1cmUoJ3NldHRpbmdPdmVyQnRuVXAnKTtcclxuICAgICAgICBiYWNrMlRpdGxlLnNldFBvc2l0aW9uKGJhY2syVGl0bGUueCwgYmFjazJUaXRsZS51cFBvc1kpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBiYWNrMlRpdGxlVHh0ID0gc2NlbmUuYWRkLnRleHQoYmFjazJUaXRsZUJnLngsIGJhY2syVGl0bGVCZy55ICsgdHh0R2FwLCAnR28gdG8gVGl0bGUnKTtcclxuICAgIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKGJhY2syVGl0bGVUeHQpO1xyXG4gICAgYmFjazJUaXRsZVR4dC5zZXRGb250U2l6ZSgxNik7XHJcbiAgICBjb25zdCBiYWNrMlRpdGxlTGlzdCA9IFtiYWNrMlRpdGxlQmcsIGJhY2syVGl0bGUsIGJhY2syVGl0bGVUeHRdO1xyXG4gICAgLy8gLy8gYWRkIHNjcmVlbiBzaXplIGNvbnRyb2xsZXJcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyQmcgPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYICsgY29udHJvbEdhcCwgYmFjazJUaXRsZUJnLnksICdzZXR0aW5nT3ZlckJ0blVwJykuc2V0U2NhbGUoMS4yKTtcclxuICAgIC8vIGxldCBzaXplQ29udHJvbGxlciA9IHNjZW5lLmFkZC5pbWFnZShzaXplQ29udHJvbGxlckJnLngsIHNpemVDb250cm9sbGVyQmcueSAtIDQsICdzY3JlZW5MYXJnZXInKSBhcyBUVG9nZ2xlQnRuSW1nO1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIuc2V0U2NhbGUoMC42KS5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgLy8gc2l6ZUNvbnRyb2xsZXIuZG93blBvc1kgPSBzaXplQ29udHJvbGxlci55ICsgNDtcclxuICAgIC8vIHNpemVDb250cm9sbGVyLnVwUG9zWSA9IHNpemVDb250cm9sbGVyLnk7XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgc2l6ZUNvbnRyb2xsZXJCZy5zZXRUZXh0dXJlKCdzZXR0aW5nT3ZlckJ0bkRvd24nKTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5zZXRQb3NpdGlvbihzaXplQ29udHJvbGxlci54LCBzaXplQ29udHJvbGxlci5kb3duUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyRXhpdEV2dCA9ICgpID0+IHtcclxuICAgIC8vICAgICBTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW4gPSBmYWxzZTtcclxuICAgIC8vICAgICBzY2VuZS5zY2FsZS5zdG9wRnVsbHNjcmVlbigpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFRleHR1cmUoJ3NjcmVlbkxhcmdlcicpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sVHh0LnNldFRleHQoY29udHJvbFR4dExpc3RbMF0pO1xyXG4gICAgLy8gfTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sbGVyVG9nZ2xlRXZ0ID0gKCkgPT4ge1xyXG4gICAgLy8gICAgIFNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbiA9ICFTZXR0aW5nLmxheWVyRGF0YS5pc0Z1bGxTY3JlZW47XHJcbiAgICAvLyAgICAgaWYgKFNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbikge1xyXG4gICAgLy8gICAgICAgICBzY2VuZS5zY2FsZS5zdGFydEZ1bGxzY3JlZW4oKTtcclxuICAgIC8vICAgICAgICAgc2l6ZUNvbnRyb2xsZXIuc2V0VGV4dHVyZSgnc2NyZWVuU21hbGxlcicpO1xyXG4gICAgLy8gICAgICAgICBzaXplQ29udHJvbFR4dC5zZXRUZXh0KGNvbnRyb2xUeHRMaXN0WzFdKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgZWxzZSBzaXplQ29udHJvbGxlckV4aXRFdnQoKTtcclxuICAgIC8vIH07XHJcbiAgICAvLyBzaXplQ29udHJvbGxlci5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5VcCcpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFBvc2l0aW9uKHNpemVDb250cm9sbGVyLngsIHNpemVDb250cm9sbGVyLnVwUG9zWSk7XHJcbiAgICAvLyAgICAgaWYgKHNpemVDb250cm9sbGVyLmlzQ2hhbmdpbmcpIHJldHVybjtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlci5pc0NoYW5naW5nID0gdHJ1ZTtcclxuICAgIC8vICAgICBzaXplQ29udHJvbGxlclRvZ2dsZUV2dCgpO1xyXG4gICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4geyBzaXplQ29udHJvbGxlci5pc0NoYW5naW5nID0gZmFsc2U7IH0sIDMwMCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHNpemVDb250cm9sbGVyLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyQmcuc2V0VGV4dHVyZSgnc2V0dGluZ092ZXJCdG5VcCcpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyLnNldFBvc2l0aW9uKHNpemVDb250cm9sbGVyLngsIHNpemVDb250cm9sbGVyLnVwUG9zWSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGNvbnN0IHNpemVDb250cm9sVHh0ID0gc2NlbmUuYWRkLnRleHQoc2l6ZUNvbnRyb2xsZXJCZy54LCBzaXplQ29udHJvbGxlckJnLnkgKyB0eHRHYXAsIGNvbnRyb2xUeHRMaXN0WzBdKTtcclxuICAgIC8vIFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlKHNpemVDb250cm9sVHh0KTtcclxuICAgIC8vIHNpemVDb250cm9sVHh0LnNldEZvbnRTaXplKDE2KTtcclxuICAgIC8vIC8vIHJlc2l6ZSBldmVudCBmb3Igc3RvcCBmdWxsIHNjcmVlblxyXG4gICAgLy8gc2NlbmUuc2NhbGUub2ZmKCdyZXNpemUnKTtcclxuICAgIC8vIHNjZW5lLnNjYWxlLm9uKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgaWYgKHNpemVDb250cm9sbGVyLmlzQ2hhbmdpbmcpIHJldHVybjtcclxuICAgIC8vICAgICBpZiAoIVNldHRpbmcubGF5ZXJEYXRhLmlzRnVsbFNjcmVlbikgcmV0dXJuO1xyXG4gICAgLy8gICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdnZWFyQW5pbScpO1xyXG4gICAgLy8gICAgIHNpemVDb250cm9sbGVyRXhpdEV2dCgpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBjb25zdCBzaXplQ29udHJvbGxlckxpc3QgPSBbIHNpemVDb250cm9sbGVyQmcsIHNpemVDb250cm9sbGVyLCBzaXplQ29udHJvbFR4dCBdO1xyXG4gICAgLy8gY29uc3QgaG93Q29udGV4dCA9IENyZWF0ZUhvdyhzY2VuZSk7XHJcbiAgICAvLyBjb25zdCBob3dCdG4gPSBzY2VuZS5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBzaXplQ29udHJvbFR4dC55ICsgU2V0dGluZ0dhcENvbnRleHRNYXJnaW4sICdidG5TZXR0aW5nVXAnKSBhcyBUVG9nZ2xlQnRuSW1nO1xyXG4gICAgLy8gaG93QnRuLnNldEludGVyYWN0aXZlKCkuc2V0U2NhbGUoMSk7XHJcbiAgICAvLyBob3dCdG4uZG93blBvc1kgPSBob3dCdG4ueSArIDQ7XHJcbiAgICAvLyBob3dCdG4udXBQb3NZID0gaG93QnRuLnk7XHJcbiAgICAvLyBob3dCdG4ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xyXG4gICAgLy8gICAgIGhvd0J0bi5zZXRUZXh0dXJlKCdidG5TZXR0aW5nRG93bicpO1xyXG4gICAgLy8gICAgIGhvd1R4dC5zZXRQb3NpdGlvbihob3dUeHQueCwgaG93QnRuLmRvd25Qb3NZKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gaG93QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAvLyAgICAgaG93QnRuLnNldFRleHR1cmUoJ2J0blNldHRpbmdVcCcpO1xyXG4gICAgLy8gICAgIGhvd1R4dC5zZXRQb3NpdGlvbihob3dUeHQueCwgaG93QnRuLnVwUG9zWSk7XHJcbiAgICAvLyAgICAgaG93Q29udGV4dC5zaG93KCk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIGhvd0J0bi5vbigncG9pbnRlcm91dCcsICgpID0+IHtcclxuICAgIC8vICAgICBob3dCdG4uc2V0VGV4dHVyZSgnYnRuU2V0dGluZ1VwJyk7XHJcbiAgICAvLyAgICAgaG93VHh0LnNldFBvc2l0aW9uKGhvd1R4dC54LCBob3dCdG4udXBQb3NZKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gY29uc3QgaG93VHh0ID0gc2NlbmUuYWRkLnRleHQoaG93QnRuLngsIGhvd0J0bi55LCAnaG93Jyk7XHJcbiAgICAvLyBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShob3dUeHQpO1xyXG4gICAgLy8gaG93VHh0LnNldEZvbnRTaXplKFR4dFRpdGxlU2l6ZSk7XHJcbiAgICAvLyBjb25zdCBob3dMaXN0ID0gWyBob3dCdG4sIGhvd1R4dCwgaG93Q29udGV4dCBdO1xyXG4gICAgU2V0dGluZy5sYXllci5hZGQoW1xyXG4gICAgICAgIGJnLCBwYW5lbCwgdGl0bGUsXHJcbiAgICAgICAgYmdtQnRuLCBzZnhCdG4sXHJcbiAgICAgICAgYmdtR2FnZSwgc2Z4R2FnZSxcclxuICAgICAgICAuLi5iYWNrMlRpdGxlTGlzdCxcclxuICAgICAgICAvLyAuLi5zaXplQ29udHJvbGxlckxpc3QsXHJcbiAgICBdKTtcclxuICAgIC8vIGV4aXQgYnRuICYgbGFzdCBjb250YWluZXIgc2V0dXBcclxuICAgIFNldHRpbmcuZXhpdEJ0biA9IHNjZW5lLmFkZC5pbWFnZShWaWV3LncgLSBTZXR0aW5nQ29udGV4dE1hcmdpbiwgU2V0dGluZ0NvbnRleHRNYXJnaW4sICdleGl0QnRuJykuc2V0U2NhbGUoMC42KTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5zZXRJbnRlcmFjdGl2ZSgpO1xyXG4gICAgU2V0dGluZy5leGl0QnRuLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgQW5pbUhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgIH0pO1xyXG4gICAgW1NldHRpbmcuYnRuLCBTZXR0aW5nLmxheWVyLCBTZXR0aW5nLmV4aXRCdG5dLm1hcChlbGUgPT4gU2V0RGVwdGgoZWxlLCAnc2V0dGluZycpKTtcclxuICAgIEluaXRTZXR0aW5nKHNjZW5lKTtcclxuICAgIHJldHVybiBTZXR0aW5nO1xyXG59O1xyXG5jb25zdCBHYWdlSGVpZ2h0ID0gMjA7XHJcbmNvbnN0IENyZWF0ZUdhZ2VCYXIgPSAoc2NlbmUsIHgsIHksIGVuZE1vdmVDYWxsYmFjaywgZ2FnZU51bU1pbiA9IDAsIGdhZ2VOdW1NYXggPSAxMDApID0+IHtcclxuICAgIGNvbnN0IGNvbiA9IHNjZW5lLmFkZC5jb250YWluZXIoeCwgeSk7XHJcbiAgICBjb24uZ2FnZU51bU1pbiA9IGdhZ2VOdW1NaW47XHJcbiAgICBjb24uZ2FnZU51bU1heCA9IGdhZ2VOdW1NYXg7XHJcbiAgICBjb24uZ2FnZU51bSA9IChjb24uZ2FnZU51bU1pbiArIGNvbi5nYWdlTnVtTWF4KSAvIDI7XHJcbiAgICBjb25zdCBnYWdlQmcgPSBzY2VuZS5hZGQuaW1hZ2UoMCwgMCwgJ2NvbG9yQmFja2dyb3VuZCcpO1xyXG4gICAgY29uc3QgZ2FnZUJhciA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnYnRuQmx1ZScpO1xyXG4gICAgY29uc3QgZ2FnZUJhckhhbmRsZSA9IHNjZW5lLmFkZC5pbWFnZSgwLCAwLCAnY29sb3JIYW5kbGUnKTtcclxuICAgIGNvbnN0IGdhZ2VUeHQgPSBzY2VuZS5hZGQudGV4dCgwLCAwLCBjb24uZ2FnZU51bS50b1N0cmluZygpKTtcclxuICAgIGdhZ2VCZy5zZXREaXNwbGF5U2l6ZShWaWV3LmNlbnRlclgsIEdhZ2VIZWlnaHQpO1xyXG4gICAgZ2FnZUJhci5zZXREaXNwbGF5U2l6ZShWaWV3LmNlbnRlclggLyAyLCBHYWdlSGVpZ2h0KTtcclxuICAgIGdhZ2VCYXIuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICBnYWdlQmFyLnNldFBvc2l0aW9uKC1WaWV3LmNlbnRlclggLyAyLCAwKTtcclxuICAgIGdhZ2VUeHQuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICBnYWdlVHh0LnNldFBvc2l0aW9uKFZpZXcuY2VudGVyWCAvIDIgKyBUeHRNYXJnaW4gLSA1LCAwKTtcclxuICAgIGNvbi5hZGQoW2dhZ2VCZywgZ2FnZUJhciwgZ2FnZUJhckhhbmRsZSwgZ2FnZVR4dF0pO1xyXG4gICAgY29uLmdhZ2VQb3NYID0gMDtcclxuICAgIGNvbi5nYWdlUG9zWE1pbiA9IC1nYWdlQmcud2lkdGggLyAyIC0gZ2FnZUJhckhhbmRsZS53aWR0aCAvIDI7XHJcbiAgICBjb24uZ2FnZVBvc1hNYXggPSBnYWdlQmcud2lkdGggLyAyICsgZ2FnZUJhckhhbmRsZS53aWR0aCAvIDI7XHJcbiAgICBjb24uZ2FnZVBvc1hMZW5ndGggPSBnYWdlQmcud2lkdGggKyBnYWdlQmFySGFuZGxlLndpZHRoO1xyXG4gICAgY29uLnNldEdhZ2VIYW5kbGVGcmFtZSA9IChpc0Rvd24pID0+IHtcclxuICAgICAgICBnYWdlQmFySGFuZGxlLnNldFRleHR1cmUoaXNEb3duID8gJ2NvbG9ySGFuZGxlRG93bicgOiAnY29sb3JIYW5kbGUnKTtcclxuICAgIH07XHJcbiAgICBjb24uc2V0R2FnZUJhclNpemUgPSAoZ2FnZVBvcykgPT4ge1xyXG4gICAgICAgIGxldCBnYWdlUG9zWCA9IGdhZ2VQb3M7XHJcbiAgICAgICAgaWYgKGdhZ2VQb3NYIDw9IGNvbi5nYWdlUG9zWE1pbilcclxuICAgICAgICAgICAgZ2FnZVBvc1ggPSBjb24uZ2FnZVBvc1hNaW47XHJcbiAgICAgICAgZWxzZSBpZiAoZ2FnZVBvc1ggPj0gY29uLmdhZ2VQb3NYTWF4KVxyXG4gICAgICAgICAgICBnYWdlUG9zWCA9IGNvbi5nYWdlUG9zWE1heDtcclxuICAgICAgICBjb24uZ2FnZVBvc1ggPSBnYWdlUG9zWDtcclxuICAgICAgICBjb24uZ2FnZU51bSA9IE1hdGguZmxvb3IoKGNvbi5nYWdlTnVtTWF4IC0gY29uLmdhZ2VOdW1NaW4pICogTWF0aC5hYnMoZ2FnZVBvc1ggLSBjb24uZ2FnZVBvc1hNaW4pIC8gY29uLmdhZ2VQb3NYTGVuZ3RoKTtcclxuICAgICAgICBjb24uc2V0R2FnZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbi5zZXRHYWdlTnVtID0gKGdhZ2VOdW0pID0+IHtcclxuICAgICAgICBsZXQgZ2FnZU51bWJlciA9IGdhZ2VOdW07XHJcbiAgICAgICAgaWYgKGdhZ2VOdW1iZXIgPCBjb24uZ2FnZU51bU1pbilcclxuICAgICAgICAgICAgZ2FnZU51bWJlciA9IGNvbi5nYWdlTnVtTWluO1xyXG4gICAgICAgIGVsc2UgaWYgKGdhZ2VOdW1iZXIgPiBjb24uZ2FnZU51bU1heClcclxuICAgICAgICAgICAgZ2FnZU51bWJlciA9IGNvbi5nYWdlTnVtTWF4O1xyXG4gICAgICAgIGNvbi5nYWdlTnVtID0gZ2FnZU51bWJlcjtcclxuICAgICAgICBjb24uZ2FnZVBvc1ggPSAoY29uLmdhZ2VOdW0gKiBjb24uZ2FnZVBvc1hMZW5ndGggLyBjb24uZ2FnZU51bU1heCkgLSBjb24uZ2FnZVBvc1hNYXg7XHJcbiAgICAgICAgY29uLnNldEdhZ2UoKTtcclxuICAgIH07XHJcbiAgICBjb24uc2V0R2FnZSA9ICgpID0+IHtcclxuICAgICAgICBnYWdlQmFyLnNldERpc3BsYXlTaXplKGNvbi5nYWdlUG9zWCArIGdhZ2VCYXIud2lkdGggLyAyICsgZ2FnZUJhckhhbmRsZS53aWR0aCAvIDIsIEdhZ2VIZWlnaHQpO1xyXG4gICAgICAgIGdhZ2VCYXJIYW5kbGUuc2V0UG9zaXRpb24oY29uLmdhZ2VQb3NYLCAwKTtcclxuICAgICAgICBnYWdlVHh0LnNldFRleHQoY29uLmdhZ2VOdW0udG9GaXhlZCgwKSk7XHJcbiAgICB9O1xyXG4gICAgY29uLnNldEFibGUgPSAoaXNBYmxlKSA9PiB7XHJcbiAgICAgICAgY29uLmlzQWJsZSA9IGlzQWJsZTtcclxuICAgICAgICBjb24uaXNBYmxlID8gY29uLnNldEFscGhhKDEpIDogY29uLnNldEFscGhhKDAuNSk7XHJcbiAgICB9O1xyXG4gICAgY29uLnNldEFibGUodHJ1ZSk7XHJcbiAgICBnYWdlQmFySGFuZGxlLnNldEludGVyYWN0aXZlKHsgZHJhZ2dhYmxlOiB0cnVlIH0pO1xyXG4gICAgZ2FnZUJhckhhbmRsZS5vbignZHJhZ3N0YXJ0JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbi5pc0FibGUgJiYgY29uLnNldEdhZ2VIYW5kbGVGcmFtZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gICAgZ2FnZUJhckhhbmRsZS5vbignZHJhZycsIChwdHIsIGRyYWdYKSA9PiB7XHJcbiAgICAgICAgY29uLmlzQWJsZSAmJiBjb24uc2V0R2FnZUJhclNpemUoZHJhZ1gpO1xyXG4gICAgfSk7XHJcbiAgICBnYWdlQmFySGFuZGxlLm9uKCdkcmFnZW5kJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChjb24uaXNBYmxlKSB7XHJcbiAgICAgICAgICAgIGNvbi5zZXRHYWdlSGFuZGxlRnJhbWUoZmFsc2UpO1xyXG4gICAgICAgICAgICBlbmRNb3ZlQ2FsbGJhY2sgJiYgZW5kTW92ZUNhbGxiYWNrKGNvbi5nYWdlTnVtTWluLCBjb24uZ2FnZU51bU1heCwgY29uLmdhZ2VOdW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNvbjtcclxufTtcclxuY29uc3QgQW5pbVNob3dTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBTZXR0aW5nLmlzVHdpbmcgPSB0cnVlO1xyXG4gICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICBzY2VuZS50d2VlbnMuYWRkQ291bnRlcih7XHJcbiAgICAgICAgZnJvbTogMCwgdG86IDYwLCBkdXJhdGlvbjogMTIwLFxyXG4gICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHsgU2V0dGluZy5idG4uc2V0QW5nbGUoZGF0YS52YWx1ZSk7IH0sXHJcbiAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5nLmlzVHdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgU2hvd1NldHRpbmcoc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCBBbmltSGlkZVNldHRpbmcgPSAoc2NlbmUpID0+IHtcclxuICAgIFNldHRpbmcuaXNUd2luZyA9IHRydWU7XHJcbiAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgIEhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgIHNjZW5lLnR3ZWVucy5hZGRDb3VudGVyKHtcclxuICAgICAgICBmcm9tOiAxODAsIHRvOiAwLCBkdXJhdGlvbjogMTIwLFxyXG4gICAgICAgIG9uVXBkYXRlOiAodHcsIGRhdGEpID0+IHsgU2V0dGluZy5idG4uc2V0QW5nbGUoZGF0YS52YWx1ZSk7IH0sXHJcbiAgICAgICAgb25Db21wbGV0ZTogKCkgPT4geyBTZXR0aW5nLmlzVHdpbmcgPSBmYWxzZTsgfVxyXG4gICAgfSk7XHJcbn07XHJcbmNvbnN0IFNob3dTZXR0aW5nID0gKHNjZW5lKSA9PiB7XHJcbiAgICBHYW1lVGltZS5zZXRUaW1lU2NhbGUoc2NlbmUsIEdhbWVUaW1lLnNob3dTZXR0aW5nVGltZVNjYWxlKTtcclxuICAgIFNldHRpbmcuaXNPcGVuID0gdHJ1ZTtcclxuICAgIFNldHRpbmcubGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5zZXRWaXNpYmxlKHRydWUpO1xyXG59O1xyXG5jb25zdCBIaWRlU2V0dGluZyA9IChzY2VuZSkgPT4ge1xyXG4gICAgR2FtZVRpbWUuc2V0VGltZVNjYWxlKHNjZW5lLCBHYW1lVGltZS5oaWRlU2V0dGluZ1RpbWVTY2FsZSk7XHJcbiAgICBTZXR0aW5nLmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgU2V0dGluZy5sYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgIFNldHRpbmcuZXhpdEJ0bi5zZXRWaXNpYmxlKGZhbHNlKTtcclxufTtcclxuY29uc3QgU2hvd1NldHRpbmdCdG4gPSAoc2NlbmUpID0+IHtcclxuICAgIEhpZGVTZXR0aW5nKHNjZW5lKTtcclxuICAgIFNldHRpbmcuYnRuLnNldFZpc2libGUodHJ1ZSk7XHJcbn07XHJcbmNvbnN0IEhpZGVTZXR0aW5nQnRuID0gKHNjZW5lKSA9PiB7XHJcbiAgICBIaWRlU2V0dGluZyhzY2VuZSk7XHJcbiAgICBTZXR0aW5nLmJ0bi5zZXRWaXNpYmxlKGZhbHNlKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZztcclxuZXhwb3J0IHsgSW5pdFNldHRpbmcsIENyZWF0ZVNldHRpbmcsIEFuaW1TaG93U2V0dGluZywgQW5pbUhpZGVTZXR0aW5nLCBTaG93U2V0dGluZywgSGlkZVNldHRpbmcsIFNob3dTZXR0aW5nQnRuLCBIaWRlU2V0dGluZ0J0biwgfTtcclxuIiwiaW1wb3J0IHsgQ29tbW9uU25zLCBHZXRBc3NldEZpbGVzIH0gZnJvbSBcIkBzcmMvc2NlbmVzL2Fzc2V0VXRpbHNcIjtcclxuaW1wb3J0IHsgVmlldyB9IGZyb20gXCJAc3JjL3VzZXJTZXR0aW5nXCI7XHJcbmltcG9ydCBVSVByb3BzIGZyb20gXCIuLlwiO1xyXG5jb25zdCBDaGFubmVsQWR2ZXJ0aXNlID0ge1xyXG4gICAgdGV4dHVyZUxpc3Q6IFsnYmxhY2tTY3JlZW4nLCAnY2hhbm5lbEJ0bkRvd24nLCAnY2hhbm5lbEJ0blVwJywgJ2NoYW5uZWxMb2dvJyxdLFxyXG4gICAgeW91dHViZUJ0bkxheWVyOiBudWxsLFxyXG4gICAgeW91dHViZVBvcFVwTGF5ZXI6IG51bGwsXHJcbiAgICB5b3V0dWJlU2hvdzogKCkgPT4ge1xyXG4gICAgICAgIENoYW5uZWxBZHZlcnRpc2UueW91dHViZVBvcFVwTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIH0sXHJcbiAgICB5b3V0dWJlSGlkZTogKCkgPT4ge1xyXG4gICAgICAgIENoYW5uZWxBZHZlcnRpc2UueW91dHViZVBvcFVwTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgYmxvZ0J0bkxheWVyOiBudWxsLFxyXG4gICAgYmxvZ1BvcFVwTGF5ZXI6IG51bGwsXHJcbiAgICBibG9nU2hvdzogKCkgPT4ge1xyXG4gICAgICAgIENoYW5uZWxBZHZlcnRpc2UuYmxvZ1BvcFVwTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgIH0sXHJcbiAgICBibG9nSGlkZTogKCkgPT4ge1xyXG4gICAgICAgIENoYW5uZWxBZHZlcnRpc2UuYmxvZ1BvcFVwTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9LFxyXG59O1xyXG5jb25zdCBHZXRTbnNBc3NldHMgPSAoZXhjZXB0aW9uS2V5cykgPT4ge1xyXG4gICAgY29uc3QgYXNzZXRMaXN0ID0gW1xyXG4gICAgICAgIC8vIHlvdXR1YmVcclxuICAgICAgICB7IGtleTogJ3lvdXR1YmVMb2dvJywgdXJsOiBDb21tb25TbnMgKyAneW91dHViZUxvZ28ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgIHsga2V5OiAnY2hhbm5lbExvZ28nLCB1cmw6IENvbW1vblNucyArICdjaGFubmVsTG9nby5qcGcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgLy8gYmxvZ1xyXG4gICAgXTtcclxuICAgIHJldHVybiBHZXRBc3NldEZpbGVzKGFzc2V0TGlzdCwgZXhjZXB0aW9uS2V5cyk7XHJcbn07XHJcbmNvbnN0IEluaXRDaGFubmVsID0gKCkgPT4ge1xyXG4gICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlSGlkZSgpO1xyXG59O1xyXG5jb25zdCBDcmVhdGVDaGFubmVsID0gKHNjZW5lLCB2aWRlb1VybCwgY29tbW9uVGV4dFN0eWxlLCBjaGFubmVsRGF0YSkgPT4ge1xyXG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xyXG4gICAgY29uc3QgYnRuVyA9IChfYSA9IGNoYW5uZWxEYXRhID09PSBudWxsIHx8IGNoYW5uZWxEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGFubmVsRGF0YS53KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiA2MDtcclxuICAgIGNvbnN0IGJ0bkggPSAoX2IgPSBjaGFubmVsRGF0YSA9PT0gbnVsbCB8fCBjaGFubmVsRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hhbm5lbERhdGEuaCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNDU7XHJcbiAgICBjb25zdCBidG5TY2FsZVRpbWUgPSAxLjE7XHJcbiAgICBjb25zdCBidG5CZyA9IHNjZW5lLmFkZC5pbWFnZSgoX2MgPSBjaGFubmVsRGF0YSA9PT0gbnVsbCB8fCBjaGFubmVsRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hhbm5lbERhdGEueCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogVmlldy5jZW50ZXJYLCAoX2QgPSBjaGFubmVsRGF0YSA9PT0gbnVsbCB8fCBjaGFubmVsRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hhbm5lbERhdGEueSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogVmlldy5oIC0gMzYsICdjaGFubmVsQnRuVXAnKTtcclxuICAgIGNvbnN0IGJ0bkxvZ28gPSBzY2VuZS5hZGQuaW1hZ2UoYnRuQmcueCwgYnRuQmcueSwgJ3lvdXR1YmVMb2dvJyk7XHJcbiAgICBidG5Mb2dvLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBidG5Mb2dvLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcclxuICAgICAgICBidG5Mb2dvLnNldERpc3BsYXlTaXplKGJ0blcgKiBidG5TY2FsZVRpbWUsIGJ0bkggKiBidG5TY2FsZVRpbWUpO1xyXG4gICAgICAgIGJ0bkJnLnNldFRleHR1cmUoJ2NoYW5uZWxCdG5Eb3duJyk7XHJcbiAgICB9KTtcclxuICAgIGJ0bkxvZ28ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICBidG5Mb2dvLnNldERpc3BsYXlTaXplKGJ0blcsIGJ0bkgpO1xyXG4gICAgICAgIGJ0bkJnLnNldFRleHR1cmUoJ2NoYW5uZWxCdG5VcHNzJyk7XHJcbiAgICAgICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlU2hvdygpO1xyXG4gICAgfSk7XHJcbiAgICBidG5Mb2dvLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xyXG4gICAgICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVywgYnRuSCk7XHJcbiAgICAgICAgYnRuQmcuc2V0VGV4dHVyZSgnY2hhbm5lbEJ0blVwJyk7XHJcbiAgICB9KTtcclxuICAgIGJ0bkxvZ28uc2V0RGlzcGxheVNpemUoYnRuVywgYnRuSCk7XHJcbiAgICBDaGFubmVsQWR2ZXJ0aXNlLnlvdXR1YmVCdG5MYXllciA9IHNjZW5lLmFkZC5sYXllcihbXHJcbiAgICAgICAgYnRuQmcsIGJ0bkxvZ29cclxuICAgIF0pO1xyXG4gICAgY29uc3QgcG9wVXBNYXJnaW4gPSA3MDtcclxuICAgIGNvbnN0IGNoYW5uZWxVcmwgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vY2hhbm5lbC9VQ0JKbkZnSVE5WU9SVGl6MTBfTWd5X0EnO1xyXG4gICAgY29uc3QgdmlkZW9UaHVtYm5haWwgPSBgaHR0cHM6Ly9pMS55dGltZy5jb20vdmkvJHt2aWRlb1VybC5zcGxpdCgnPScpWzFdfS9kZWZhdWx0LmpwZ2A7XHJcbiAgICBjb25zdCBwb3BVcEJnID0gc2NlbmUuYWRkLmltYWdlKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZLCAnYmxhY2tTY3JlZW4nKTtcclxuICAgIGNvbnN0IHBvcFVwVGl0bGUgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIFZpZXcuaCAvIDgsICdNeSBZb3V0dWJlJyk7XHJcbiAgICBjb25zdCBwb3BVcFR4dExpc3QgPSBbXTtcclxuICAgIGNvbnN0IHBvcFVwTWFkZVZpZGVvID0gc2NlbmUuYWRkLmltYWdlKHBvcFVwQmcueCwgVmlldy5jZW50ZXJZIC0gcG9wVXBNYXJnaW4sICcnKTtcclxuICAgIGxldCBwb3BVcE1hZGVWaWRlb1dJUDtcclxuICAgIHBvcFVwTWFkZVZpZGVvLnNldERpc3BsYXlTaXplKHBvcFVwTWFyZ2luLCBwb3BVcE1hcmdpbik7XHJcbiAgICBpZiAoIXZpZGVvVXJsKSB7XHJcbiAgICAgICAgcG9wVXBNYWRlVmlkZW9XSVAgPSBzY2VuZS5hZGQudGV4dChwb3BVcEJnLngsIFZpZXcuY2VudGVyWSAtIHBvcFVwTWFyZ2luLCAnICAgICAgICAgU29ycnkhXFxuV29yayBJbiBQcm9ncmVzcycpO1xyXG4gICAgICAgIHBvcFVwVHh0TGlzdC5wdXNoKHBvcFVwTWFkZVZpZGVvV0lQKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcFVwTWFkZVZpZGVvVHh0ID0gc2NlbmUuYWRkLnRleHQocG9wVXBCZy54LCBwb3BVcE1hZGVWaWRlby55ICsgcG9wVXBNYXJnaW4sICdDcmVhdGVkIHZpZGVvJyk7XHJcbiAgICBjb25zdCBwb3BVcENoYW5uZWwgPSBzY2VuZS5hZGQuaW1hZ2UocG9wVXBCZy54LCBwb3BVcE1hZGVWaWRlb1R4dC55ICsgcG9wVXBNYXJnaW4sICdjaGFubmVsTG9nbycpO1xyXG4gICAgY29uc3QgcG9wVXBDaGFubmVsVHh0ID0gc2NlbmUuYWRkLnRleHQocG9wVXBCZy54LCBwb3BVcENoYW5uZWwueSArIHBvcFVwTWFyZ2luLCAnVGhpcyBpcyBteSBjaGFubmVsJyk7XHJcbiAgICBjb25zdCBwb3BVcEV4aXRHdWlkZSA9IHNjZW5lLmFkZC50ZXh0KHBvcFVwQmcueCwgVmlldy5oIC0gcG9wVXBNYXJnaW4gKiAxLjIsICdwcmVzcyBhbnl3aGVyZSB0byBleGl0Jyk7XHJcbiAgICBwb3BVcFR4dExpc3QucHVzaChwb3BVcFRpdGxlLCBwb3BVcE1hZGVWaWRlb1R4dCwgcG9wVXBDaGFubmVsVHh0LCBwb3BVcEV4aXRHdWlkZSk7XHJcbiAgICBwb3BVcFR4dExpc3QubWFwKHR4dCA9PiBjb21tb25UZXh0U3R5bGUodHh0KSk7XHJcbiAgICBwb3BVcFRpdGxlLnNldEZvbnRTaXplKFZpZXcudyAvIDEyKTtcclxuICAgIHBvcFVwRXhpdEd1aWRlLnNldEFscGhhKFVJUHJvcHMuYWxwaGEpO1xyXG4gICAgcG9wVXBCZy5zZXRBbHBoYSgwLjQpO1xyXG4gICAgcG9wVXBCZy5zZXREaXNwbGF5U2l6ZShWaWV3LncsIFZpZXcuaCk7XHJcbiAgICBwb3BVcEJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICBwb3BVcEJnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IENoYW5uZWxBZHZlcnRpc2UueW91dHViZUhpZGUoKTsgfSk7XHJcbiAgICBjb25zdCBvcGVuVXJsVGFiID0gKHVybCkgPT4geyB3aW5kb3cub3Blbih1cmwpOyB9O1xyXG4gICAgW3BvcFVwTWFkZVZpZGVvLCBwb3BVcE1hZGVWaWRlb1R4dF0ubWFwKCh2aWRlbykgPT4ge1xyXG4gICAgICAgIHZpZGVvLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgdmlkZW8ub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgb3BlblVybFRhYih2aWRlb1VybCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgICBbcG9wVXBDaGFubmVsLCBwb3BVcENoYW5uZWxUeHRdLm1hcCgoY2hhbm5lbCkgPT4ge1xyXG4gICAgICAgIGNoYW5uZWwuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICBjaGFubmVsLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IG9wZW5VcmxUYWIoY2hhbm5lbFVybCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgICBbcG9wVXBDaGFubmVsLCBwb3BVcE1hZGVWaWRlb10ubWFwKChlbGUpID0+IHtcclxuICAgICAgICBlbGUuc2V0RGlzcGxheVNpemUocG9wVXBNYXJnaW4sIHBvcFVwTWFyZ2luKTtcclxuICAgIH0pO1xyXG4gICAgQ2hhbm5lbEFkdmVydGlzZS55b3V0dWJlUG9wVXBMYXllciA9IHNjZW5lLmFkZC5sYXllcihbXHJcbiAgICAgICAgcG9wVXBCZywgcG9wVXBNYWRlVmlkZW8sIHBvcFVwQ2hhbm5lbCwgLi4ucG9wVXBUeHRMaXN0XHJcbiAgICBdKTtcclxuICAgIEluaXRDaGFubmVsKCk7XHJcbiAgICByZXR1cm4gQ2hhbm5lbEFkdmVydGlzZTtcclxufTtcclxuY29uc3QgSW5pdEJsb2cgPSAoKSA9PiB7XHJcbn07XHJcbmNvbnN0IENyZWF0ZUJsb2cgPSAoc2NlbmUsIGJsb2dVcmwsIGNvbW1vblRleHRTdHlsZSwgY2hhbm5lbERhdGEpID0+IHtcclxuICAgIEluaXRCbG9nKCk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IENoYW5uZWxBZHZlcnRpc2U7XHJcbmV4cG9ydCB7IEdldFNuc0Fzc2V0cywgSW5pdENoYW5uZWwsIENyZWF0ZUNoYW5uZWwsIEluaXRCbG9nLCBDcmVhdGVCbG9nLCB9O1xyXG4iLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnQHNyYy91c2VyU2V0dGluZyc7XHJcbmltcG9ydCB7IENyZWF0ZVNldHRpbmcgfSBmcm9tICcuL3VpL3NldHRpbmcnO1xyXG5pbXBvcnQgeyBHZXRSbmRJbnQsIEdldFJuZE51bSB9IGZyb20gJ0BzcmMvdXRpbHMvbWF0aCc7XHJcbmltcG9ydCB7IFN0YXJ0UGFzc2l2ZUxvYWRpbmcgfSBmcm9tICdAc3JjL3NjZW5lcy9wYXNzaXZlTG9hZGluZyc7XHJcbmltcG9ydCB7IFN0YXJ0R2FtZSB9IGZyb20gJy4vZ2FtZSc7XHJcbmltcG9ydCB7IFNldEZvbnQyQ29tbW9uQ29udGV4dFN0eWxlLCBUeHRUaXRsZUhlYWRTaXplLCBUeHRUaXRsZUhlaWdodEdhcCwgVHh0VGl0bGVTaXplIH0gZnJvbSAnLi9mb250JztcclxuaW1wb3J0IHsgQ3JlYXRlRWZ4IH0gZnJvbSAnLi9lZngnO1xyXG4vLyBpbXBvcnQgeyBDcmVhdGVIb3cgfSBmcm9tICcuL3VpL2hvdyc7XHJcbi8vIGltcG9ydCB7IENsZWFyR2FtZUxvY2FsU3RvcmFnZURhdGEsIERlYnVnTG9jYWxTdG9yYWdlLCBHZXRMb2NhbFN0b3JhZ2VEYXRhLCBTZXRMb2NhbFN0b3JhZ2VJdGVtIH0gZnJvbSAnQHNyYy91dGlscy9zdG9yYWdlJztcclxuaW1wb3J0IEdhbWVEYXRhIGZyb20gJy4uL3N0b3JhZ2UnO1xyXG5pbXBvcnQgeyBDcmVhdGVDaGFubmVsIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvc25zJztcclxuaW1wb3J0IHsgU2V0RGVwdGggfSBmcm9tICcuL2RlcHRoJztcclxuLy8gaW1wb3J0IEdhbWVXYXJuaW5nLCB7IENyZWF0ZUdhbWVXYXJuaW5nIH0gZnJvbSAnLi91aS93YXJuaW5nJztcclxuaW1wb3J0IHsgQ3JlYXRlRnVsbFNjcmVlbiB9IGZyb20gJ0BzcmMvc2NlbmVzL3VpL2Z1bGxTY3JlZW4nO1xyXG5pbXBvcnQgR2FtZUF1ZGlvLCB7IENyZWF0ZUdhbWVBdWRpbyB9IGZyb20gJ0BzcmMvc2NlbmVzL2F1ZGlvJztcclxuLy8gaW1wb3J0IFBHVUluc3BlY3RvciBmcm9tICdwaGFzZXIzX2d1aV9pbnNwZWN0b3InO1xyXG5jb25zdCBWZXJzaW9uTnVtID0gJzEuMC4wJztcclxuY29uc3QgU3RhcnRUaXRsZSA9IChzY2VuZSkgPT4ge1xyXG4gICAgc2NlbmUuc2NlbmUucmVtb3ZlKCd0aXRsZScpO1xyXG4gICAgc2NlbmUuc2NlbmUuYWRkKCd0aXRsZScsIFRpdGxlU2NlbmUpO1xyXG4gICAgc2NlbmUuc2NlbmUubGF1bmNoKCd0aXRsZScpO1xyXG59O1xyXG5jb25zdCBTdG9wVGl0bGUgPSAoc2NlbmUpID0+IHtcclxuICAgIGlmIChzY2VuZS5zY2VuZS5nZXQoJ3RpdGxlJykpIHtcclxuICAgICAgICBzY2VuZS5zY2VuZS5zZXRBY3RpdmUoZmFsc2UsICd0aXRsZScpO1xyXG4gICAgICAgIHNjZW5lLnNjZW5lLnNldFZpc2libGUoZmFsc2UsICd0aXRsZScpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBzY2VuZS5zY2VuZS5yZW1vdmUoJ3RpdGxlJyk7IH0sIDEwMDApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBUaXRsZVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAga2V5OiAndGl0bGUnLFxyXG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50aXRsZUZvbnRTaXplID0gNTA7XHJcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IDMwO1xyXG4gICAgICAgIHRoaXMubWlkZGxlR2FwID0gNTtcclxuICAgICAgICB0aGlzLmJnUm5kUG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCZygpO1xyXG4gICAgICAgIHRoaXMubG9nb0JnID0gdGhpcy5hZGQuaW1hZ2UoVmlldy5jZW50ZXJYLCBWaWV3LmNlbnRlclkgLSBUeHRUaXRsZUhlaWdodEdhcCwgJ2J0bkJsdWUnKS5zZXRTY2FsZSgxLjgpO1xyXG4gICAgICAgIHRoaXMubG9nbyA9IHRoaXMuYWRkLnRleHQodGhpcy5sb2dvQmcueCwgdGhpcy5sb2dvQmcueSwgJ0Jsb2NrUGFuZycpLnNldEZvbnRTaXplKHRoaXMudGl0bGVGb250U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5zdGFydEJnID0gdGhpcy5hZGQuaW1hZ2UodGhpcy5sb2dvLngsIHRoaXMubG9nby55ICsgKFR4dFRpdGxlSGVpZ2h0R2FwICogMiksICd0aXRsZUNvbnRleHRCZycpO1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLmFkZC50ZXh0KHRoaXMuc3RhcnRCZy54LCB0aGlzLnN0YXJ0QmcueSwgJ3N0YXJ0Jyk7XHJcbiAgICAgICAgLy8gdGhpcy5jcmVkaXRCZyA9IHRoaXMuYWRkLmltYWdlKHRoaXMuc3RhcnQueCwgdGhpcy5zdGFydC55ICsgVHh0VGl0bGVIZWlnaHRHYXAsICd0aXRsZUNvbnRleHRCZycpO1xyXG4gICAgICAgIC8vIHRoaXMuY3JlZGl0ID0gdGhpcy5hZGQudGV4dCh0aGlzLmNyZWRpdEJnLngsIHRoaXMuY3JlZGl0QmcueSwgJ2NyZWRpdHMnKTtcclxuICAgICAgICBbdGhpcy5sb2dvLCB0aGlzLnN0YXJ0XS5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZShlbGUpO1xyXG4gICAgICAgICAgICBlbGUuc2V0Rm9udFNpemUoVHh0VGl0bGVTaXplKTtcclxuICAgICAgICAgICAgZWxlLnNldENvbG9yKCdibGFjaycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFt0aGlzLmxvZ29CZywgdGhpcy5zdGFydEJnXS5tYXAoKGVsZSkgPT4ge1xyXG4gICAgICAgICAgICBlbGUuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxvZ28uc2V0Rm9udFNpemUoVHh0VGl0bGVIZWFkU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5sb2dvLnNldENvbG9yKCd3aGl0ZScpO1xyXG4gICAgICAgIHRoaXMubG9nb0JnLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdhbWVBdWRpby5wbGF5U2Z4KCdlYXJ0aHF1YWtlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbVJuZEFuZ2xlKFt0aGlzLmxvZ29CZywgdGhpcy5sb2dvXSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNoYWtlKDI1MCwgMC4wMiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIHRvZG86IGRyb3Agb25lIHJhbmRvbSBibG9ja1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RhcnRCZy5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBHYW1lQXVkaW8ucGxheVNmeCgnZ2VhckFuaW0nKTtcclxuICAgICAgICAgICAgU3RvcFRpdGxlKHRoaXMpO1xyXG4gICAgICAgICAgICBTdGFydFBhc3NpdmVMb2FkaW5nKHRoaXMpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIFN0YXJ0R2FtZSh0aGlzKTtcclxuICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRoaXMuY3JlZGl0Qmcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICAvLyAgICAgdGhpcy5hbmltUm5kQW5nbGUoWyB0aGlzLmNyZWRpdEJnLCB0aGlzLmNyZWRpdCBdKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5jcmVkaXRDb250ZXh0LnNob3coKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICAvLyB0aGlzLmNyZWF0ZUNyZWRpdENvbnRleHQoKTtcclxuICAgICAgICBDcmVhdGVDaGFubmVsKHRoaXMsIFxyXG4gICAgICAgIC8vICdodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVhuMDhqTTFZbklzJyxcclxuICAgICAgICAnJywgKHR4dCkgPT4ge1xyXG4gICAgICAgICAgICBTZXRGb250MkNvbW1vbkNvbnRleHRTdHlsZSh0eHQpO1xyXG4gICAgICAgICAgICBTZXREZXB0aCh0eHQsICd0eHQnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBDcmVhdGVHYW1lQXVkaW8odGhpcywgR2FtZURhdGEpO1xyXG4gICAgICAgIENyZWF0ZUVmeCh0aGlzKTtcclxuICAgICAgICBDcmVhdGVGdWxsU2NyZWVuKHRoaXMpO1xyXG4gICAgICAgIENyZWF0ZVNldHRpbmcodGhpcyk7XHJcbiAgICAgICAgLy8gRGVidWdMb2NhbFN0b3JhZ2UodGhpcywgR2FtZURhdGEsIHsgaXRlbTogJ2Jlc3QnLCB2YWx1ZTogMCB9KTtcclxuICAgICAgICAvLyAvLyBkZWJ1Z2dpbmdcclxuICAgICAgICAvLyBjb25zdCBpbnNwZWN0b3JXaWR0aCA9IDI1NTtcclxuICAgICAgICAvLyBQR1VJbnNwZWN0b3IodGhpcywgeyByaWdodDogd2luZG93LmlubmVyV2lkdGggLSBpbnNwZWN0b3JXaWR0aCwgdG9wOiA0OCB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJnKCkge1xyXG4gICAgICAgIGNvbnN0IGJnVGV4dHVyZUxpc3QgPSBbJ2JnR3JlZW4nLCAnYmdCcm93bicsICdiZ0JsdWUnXTtcclxuICAgICAgICBsZXQgYmdUZXh0dXJlUm5kSWR4ID0gR2V0Um5kSW50KDAsIGJnVGV4dHVyZUxpc3QubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLmJnID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCAwLCBWaWV3LncsIFZpZXcuaCwgYmdUZXh0dXJlTGlzdFtiZ1RleHR1cmVSbmRJZHhdKS5zZXRPcmlnaW4oMCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCZ1JuZERpcmVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZENvdW50ZXIoe1xyXG4gICAgICAgICAgICBmcm9tOiAwLCB0bzogMSwgZHVyYXRpb246IDMwMDAsIHJlcGVhdDogLTEsXHJcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJnLnRpbGVQb3NpdGlvblggKz0gdGhpcy5iZ1JuZFBvcy54O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZy50aWxlUG9zaXRpb25ZICs9IHRoaXMuYmdSbmRQb3MueTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25SZXBlYXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGJnVGV4dHVyZVJuZElkeCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJnVGV4dHVyZVJuZElkeCA+PSBiZ1RleHR1cmVMaXN0Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBiZ1RleHR1cmVSbmRJZHggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZy5zZXRUZXh0dXJlKGJnVGV4dHVyZUxpc3RbYmdUZXh0dXJlUm5kSWR4XSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJnUm5kRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJnUm5kRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuYmdSbmRQb3MueCA9IEdldFJuZE51bSgtMywgNCk7XHJcbiAgICAgICAgdGhpcy5iZ1JuZFBvcy55ID0gR2V0Um5kTnVtKC0zLCA0KTtcclxuICAgIH1cclxuICAgIGFuaW1SbmRBbmdsZShsaXN0KSB7XHJcbiAgICAgICAgR2FtZUF1ZGlvLnBsYXlTZngoJ2dlYXJBbmltJyk7XHJcbiAgICAgICAgY29uc3Qgcm5kQW5nbGUgPSBHZXRSbmROdW0oLTMwLCAzMSk7XHJcbiAgICAgICAgbGlzdC5tYXAoZWxlID0+IGVsZS5zZXRBbmdsZShybmRBbmdsZSkpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNoYWtlKDUwLCAwLjAxLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUNyZWRpdENvbnRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVkaXRDb250ZXh0ID0gdGhpcy5hZGQuY29udGFpbmVyKFZpZXcuY2VudGVyWCwgVmlldy5jZW50ZXJZKTtcclxuICAgICAgICBjb25zdCB5b3V0dWJlQ2hhbm5lbCA9ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9jaGFubmVsL1VDQkpuRmdJUTlZT1JUaXoxMF9NZ3lfQSc7XHJcbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5pbWFnZSgwLCAwLCAnYmxhY2tTY3JlZW4nKS5zZXRBbHBoYSgwLjkpLnNldERpc3BsYXlTaXplKFZpZXcudywgVmlldy5oKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoMCwgLShUeHRUaXRsZUhlaWdodEdhcCAqIDMpLCAnQ3JlZGl0Jykuc2V0Rm9udFNpemUodGhpcy50aXRsZUZvbnRTaXplIC8gMikuc2V0T3JpZ2luKDAuNSwgMC41KTtcclxuICAgICAgICBjb25zdCBwcmVWZXJzaW9uID0gdGhpcy5hZGQudGV4dCgtdGhpcy5taWRkbGVHYXAsIC0oVHh0VGl0bGVIZWlnaHRHYXAgKiAyKSwgJ1ZlcnNpb24nKS5zZXRPcmlnaW4oMSwgMC41KS5zZXRBbHBoYSgwLjYpO1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLmFkZC50ZXh0KHRoaXMubWlkZGxlR2FwLCBwcmVWZXJzaW9uLnksIFZlcnNpb25OdW0pLnNldE9yaWdpbigwLCAwLjUpO1xyXG4gICAgICAgIGNvbnN0IHByZU5hbWUgPSB0aGlzLmFkZC50ZXh0KC10aGlzLm1pZGRsZUdhcCwgLShUeHRUaXRsZUhlaWdodEdhcCksICdNYWtlcicpLnNldE9yaWdpbigxLCAwLjUpLnNldEFscGhhKDAuNik7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuYWRkLnRleHQodGhpcy5taWRkbGVHYXAsIHByZU5hbWUueSwgJ0ZsdXggSHVudGVyJykuc2V0T3JpZ2luKDAsIDAuNSk7XHJcbiAgICAgICAgY29uc3QgcHJlVXJsID0gdGhpcy5hZGQudGV4dCgtdGhpcy5taWRkbGVHYXAsIDAsICdNYWtpbmcgQmx1ZXByaW50Jykuc2V0T3JpZ2luKDEsIDAuNSkuc2V0QWxwaGEoMC42KTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmFkZC50ZXh0KHRoaXMubWlkZGxlR2FwLCBwcmVVcmwueSwgJ2NsaWNrIGhlcmUgZm9yIGNoYW5uZWwnKS5zZXRPcmlnaW4oMCwgMC41KTtcclxuICAgICAgICBjb25zdCBndWlkZSA9IHRoaXMuYWRkLnRleHQoMCwgdXJsLnkgKyBUeHRUaXRsZUhlaWdodEdhcCwgJ3ByZXNzIGFueXdoZXJlIHRvIGNsb3NlJykuc2V0T3JpZ2luKDAuNSwgMC41KS5zZXRBbHBoYSgwLjUpO1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5hZGQoW1xyXG4gICAgICAgICAgICBiZywgdGl0bGUsIHByZVZlcnNpb24sIHZlcnNpb24sIHByZU5hbWUsIG5hbWUsIHByZVVybCwgdXJsLCBndWlkZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIGJnLnNldEludGVyYWN0aXZlKCk7XHJcbiAgICAgICAgYmcub24oJ3BvaW50ZXJ1cCcsICgpID0+IHsgdGhpcy5jcmVkaXRDb250ZXh0LmhpZGUoKTsgfSk7XHJcbiAgICAgICAgW3ByZVVybCwgdXJsXS5tYXAoKHVybEVsZSkgPT4ge1xyXG4gICAgICAgICAgICB1cmxFbGUuc2V0SW50ZXJhY3RpdmUoKTtcclxuICAgICAgICAgICAgdXJsRWxlLm9uKCdwb2ludGVydXAnLCAoKSA9PiB7IHdpbmRvdy5vcGVuKHlvdXR1YmVDaGFubmVsLCAnX2JsYW5rJyk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5zaG93ID0gKCkgPT4geyB0aGlzLmNyZWRpdENvbnRleHQuc2V0VmlzaWJsZSh0cnVlKTsgfTtcclxuICAgICAgICB0aGlzLmNyZWRpdENvbnRleHQuaGlkZSA9ICgpID0+IHsgdGhpcy5jcmVkaXRDb250ZXh0LnNldFZpc2libGUoZmFsc2UpOyB9O1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q29udGV4dC5oaWRlKCk7XHJcbiAgICAgICAgU2V0RGVwdGgodGhpcy5jcmVkaXRDb250ZXh0LCAncG9wVXAnKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBUaXRsZVNjZW5lO1xyXG5leHBvcnQgeyBTdGFydFRpdGxlLCBTdG9wVGl0bGUgfTtcclxuIiwiLy8gaW1wb3J0IFBoYXNlciBmcm9tICdwaGFzZXInO1xyXG5pbXBvcnQgVGl0bGVTY2VuZSwgeyBTdGFydFRpdGxlIH0gZnJvbSAnLi9zY2VuZXMvdGl0bGUnO1xyXG5pbXBvcnQgR2FtZVNjZW5lIGZyb20gJy4vc2NlbmVzL2dhbWUnO1xyXG5pbXBvcnQgeyBHZXRGdWxsU2NyZWVuQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvdWkvZnVsbFNjcmVlbic7XHJcbmltcG9ydCB7IEdldEF1ZGlvQXNzZXRzIH0gZnJvbSAnQHNyYy9zY2VuZXMvYXVkaW8nO1xyXG5pbXBvcnQgeyBHZXRTbnNBc3NldHMgfSBmcm9tICdAc3JjL3NjZW5lcy91aS9zbnMnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICBrZXk6ICdtYWluJyxcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lLnNjZW5lLmFkZCgndGl0bGUnLCBUaXRsZVNjZW5lLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5nYW1lLnNjZW5lLmFkZCgnZ2FtZScsIEdhbWVTY2VuZSwgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIFN0YXJ0VGl0bGUodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgQXNzZXRVcmwgPSAnaHR0cHM6Ly9zaWx2ZXJ0cmVlNzYyMi5naXRodWIuaW8vd2ViZ2FtZXMvYmxvY2tQYW5nL2Fzc2V0cy8nO1xyXG5leHBvcnQgbGV0IEFzc2V0cyA9IHtcclxuICAgIGR5bmFtaWM6IFtcclxuICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBsaXN0ID0gW1xyXG4gICAgICAgICAgICAgICAgLy8gY29tbW9uXHJcbiAgICAgICAgICAgICAgICAuLi5HZXRGdWxsU2NyZWVuQXNzZXRzKCd0b3VjaFNmeCcpLFxyXG4gICAgICAgICAgICAgICAgLi4uR2V0U25zQXNzZXRzKCksXHJcbiAgICAgICAgICAgICAgICAvLyBwYXJ0aWNsZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BhcnRpY2xlU3ByaXRlJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3BhcnRpY2xlU3ByaXRlLnBuZycsXHJcbiAgICAgICAgICAgICAgICAgICAganNvbjogYXdhaXQgcmVxdWlyZSgnLi9hc3NldHMvcGFydGljbGVzL3BhcnRpY2xlU3ByaXRlLmpzb24nKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXRsYXMnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdkaWFtb25kMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZGlhbW9uZDEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdkaWFtb25kMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZGlhbW9uZDIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdkaWFtb25kMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZGlhbW9uZDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdkaWFtb25kNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZGlhbW9uZDQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdrZXkxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdrZXkxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAna2V5MicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAna2V5Mi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2tleTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleTMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdrZXk0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdrZXk0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncnVieTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3J1YnkxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncnVieTInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3J1YnkyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncnVieTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3J1YnkzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncnVieTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3J1Ynk0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnaGVhcnQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2hlYXJ0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIC8vIHVpXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JnQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmdCbHVlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmdCcm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmdCcm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2JnR3JlZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2JnR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdidG5CbHVlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdidG5CbHVlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnRuQnJvd24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0bkJyb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnRuR3JlZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0bkdyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncGFuZWxHcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncGFuZWxHcmVlbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3BhbmVsQmx1ZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncGFuZWxCbHVlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncGFuZWxCcm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAncGFuZWxCcm93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5VcEJsdWUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCdG5VcEJsdWUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvdmVyQnRuVXBCcm93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0blVwQnJvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvdmVyQnRuVXBHcmVlbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlckJ0blVwR3JlZW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvdmVyQnRuRG93bkJsdWUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCdG5Eb3duQmx1ZS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCdG5Eb3duQnJvd24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ292ZXJCdG5Eb3duQnJvd24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdvdmVyQnRuRG93bkdyZWVuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQnRuRG93bkdyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYmxhY2tTY3JlZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2JsYWNrU2NyZWVuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnZXhpdEJ0bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZXhpdEJ0bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RpdGxlQ29udGV4dEJnJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0aXRsZUNvbnRleHRCZy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2F1ZGlvT24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2F1ZGlvT24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdhdWRpb09mZicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYXVkaW9PZmYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdtdXNpY09uJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdtdXNpY09uLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbXVzaWNPZmYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ211c2ljT2ZmLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY29sb3JCYWNrZ3JvdW5kJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjb2xvckJhY2tncm91bmQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjb2xvckhhbmRsZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY29sb3JIYW5kbGUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjb2xvckhhbmRsZURvd24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2NvbG9ySGFuZGxlRG93bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJCYWNrJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvdmVyQmFjay5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ292ZXJSZXRyeScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnb3ZlclJldHJ5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ0J0bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2V0dGluZ0J0bi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NldHRpbmdQYW5lbCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2V0dGluZ1BhbmVsLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2V0dGluZ092ZXJCdG5VcCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2V0dGluZ092ZXJCdG5VcC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NldHRpbmdPdmVyQnRuRG93bicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2V0dGluZ092ZXJCdG5Eb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnRuU2V0dGluZ0Rvd24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2J0blNldHRpbmdEb3duLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnRuU2V0dGluZ1VwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdidG5TZXR0aW5nVXAucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzY3JlZW5TbWFsbGVyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzY3JlZW5TbWFsbGVyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2NyZWVuTGFyZ2VyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzY3JlZW5MYXJnZXIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd3YXJuaW5nU2lnbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnd2FybmluZ1NpZ24ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgLy8gdWkgc2NlbmVcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkNicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ2LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnY2xvdWQ3JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdjbG91ZDcucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdjbG91ZDgnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Nsb3VkOC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Nsb3VkOScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnY2xvdWQ5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTAzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU1JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlNicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA2LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUwNy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWU4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMDgucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlOScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTA5LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTEwJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTAucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTEnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxMS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTEyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTEzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTQnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxNC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE1LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE2JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTYucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMTcnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUxNy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUxOCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTE4LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTE5JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMTkucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjAnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyMC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyMScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTIxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTIyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjIucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyMy5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyNCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI1JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyNi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUyNycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTI3LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTI4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMjgucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMjknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUyOS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzMCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTMwLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTMxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzEucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3RyZWUzMycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJlZTMzLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAndHJlZTM0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0cmVlMzQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmVlMzUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyZWUzNS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ21pc3QxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdtaXN0MS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ21pc3QyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdtaXN0Mi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ21pc3QzJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdtaXN0My5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ21pc3Q0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdtaXN0NC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBzaGFwZVxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdibHVlQmFsbCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmx1ZUJhbGwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdncmVlbkJhbGwnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2dyZWVuQmFsbC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Jyb3duQmFsbCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnJvd25CYWxsLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb2JzdGFjbGVCYWxsJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvYnN0YWNsZUJhbGwucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdibHVlUmVjdCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmx1ZVJlY3QucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdncmVlblJlY3QnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2dyZWVuUmVjdC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Jyb3duUmVjdCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYnJvd25SZWN0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb2JzdGFjbGVSZWN0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdvYnN0YWNsZVJlY3QucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdibHVlU3F1YXJlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibHVlU3F1YXJlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnZ3JlZW5TcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2dyZWVuU3F1YXJlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnYnJvd25TcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Jyb3duU3F1YXJlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnb2JzdGFjbGVTcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ29ic3RhY2xlU3F1YXJlLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbG9ja2VkUmVjdGFuZ2xlJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdibG9ja19sb2NrZWRfbGFyZ2UucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdsb2NrZXRTcXVhcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2Jsb2NrX2xvY2tlZF9zcXVhcmUucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdrZXknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2tleS5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICAvLyB0eXBlXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ2Fycm93TGVmdCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYXJyb3dMZWZ0LnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnbG9ja2VkJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdsb2NrZWQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdwYXR0ZXJuJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwYXR0ZXJuLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncG93ZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Bvd2VyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAncmFuZG9tJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdyYW5kb20ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzaWduYWwxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzaWduYWwxLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc2lnbmFsMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnc2lnbmFsMi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3NpZ25hbDMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NpZ25hbDMucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICdzdGFyJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzdGFyLnBuZycsIHR5cGU6ICdpbWFnZScgfSxcclxuICAgICAgICAgICAgICAgIHsga2V5OiAnc3dpcGVMZWZ0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICdzd2lwZUxlZnQucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0b3VjaCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndG91Y2gucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmFzaGNhbicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndHJhc2hjYW4ucG5nJywgdHlwZTogJ2ltYWdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6ICd0cmFzaGNhbk9wZW4nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3RyYXNoY2FuT3Blbi5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICB7IGtleTogJ3VubG9ja2VkJywgdXJsOiBhd2FpdCBBc3NldFVybCArICd1bmxvY2tlZC5wbmcnLCB0eXBlOiAnaW1hZ2UnIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBhdWRpb1xyXG4gICAgICAgICAgICAgICAgLi4uR2V0QXVkaW9Bc3NldHMoW1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZvaWNlIHNmeFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2UxJywgdXJsOiBhd2FpdCBBc3NldFVybCArICcxLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlMicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnMi5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTMnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzMubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U0JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc0Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlNScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnNS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTYnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzYubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2U3JywgdXJsOiBhd2FpdCBBc3NldFVybCArICc3Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlOCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnOC5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd2b2ljZTknLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJzkubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2UxMCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnMTAubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VHbycsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ28ubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VIaWdoU2NvcmUnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ25ld19oaWdoc2NvcmUubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndm9pY2VUaW1lT3ZlcicsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndGltZV9vdmVyLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3ZvaWNlR2FtZU92ZXInLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2dhbWVfb3Zlci5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXIgc2Z4XHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdnZWFyQW5pbScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZ2VhckFuaW0ubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnZWFydGhxdWFrZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnZWFydGhxdWFrZS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICd0b3VjaFNmeCcsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAndG91Y2hTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnbG9hZGluZ0Jsb2NrRG9uZScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnbG9hZGluZ0Jsb2NrRG9uZS5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdsb2FkaW5nQmxvY2tPblByb2Nlc3MnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ2xvYWRpbmdCbG9ja09uUHJvY2Vzcy5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlckJsb2NrT24nLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Bvd2VyQmxvY2tPbi5tcDMnLCB0eXBlOiAnYXVkaW8nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6ICdwb3dlckJsb2NrT2ZmJywgdXJsOiBhd2FpdCBBc3NldFVybCArICdwb3dlckJsb2NrT2ZmLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3NwYXduT2JzdGFjbGVTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3NwYXduT2JzdGFjbGVTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAndGltZUluY3JlYXNlU2Z4JywgdXJsOiBhd2FpdCBBc3NldFVybCArICd0aW1lSW5jcmVhc2VTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnc2NvcmVTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3Njb3JlU2Z4Lm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IGtleTogJ3dhcm5pbmdTZngnLCB1cmw6IGF3YWl0IEFzc2V0VXJsICsgJ3dhcm5pbmdTZngubXAzJywgdHlwZTogJ2F1ZGlvJyB9LFxyXG4gICAgICAgICAgICAgICAgXSwgW1xyXG4gICAgICAgICAgICAgICAgICAgIHsga2V5OiAnZ2FtZUJnbScsIHVybDogYXdhaXQgQXNzZXRVcmwgKyAnYmxvY2twYW5nYmdtLm1wMycsIHR5cGU6ICdhdWRpbycgfSxcclxuICAgICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcbiAgICBdLFxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeERBO0FBQ0E7QUFDQTtBQUNBOzs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDclRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///926\n")},442:g=>{"use strict";g.exports=JSON.parse('{"frames":{"blue":{"frame":{"x":2,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"green":{"frame":{"x":132,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"red":{"frame":{"x":262,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"white":{"frame":{"x":392,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}},"yellow":{"frame":{"x":522,"y":2,"w":128,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":128,"h":128},"sourceSize":{"w":128,"h":128},"pivot":{"x":0.5,"y":0.5}}},"meta":{"app":"http://www.codeandweb.com/texturepacker","version":"1.0","image":"flares.png","format":"RGBA8888","size":{"w":652,"h":132},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:f2781d89823d5a67fc31381af364b421:da82646b19b2f0c08684086824b1e581:71625947cf221c10549b852c13ffedc7$"}}')}}]);